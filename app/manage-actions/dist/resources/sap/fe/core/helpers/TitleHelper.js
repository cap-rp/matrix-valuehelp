/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataFieldFormatters","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","../converters/annotations/DataField"],function(t,e,n,a,r,o,i,s){"use strict";var l={};var c=s.isDataField;var f=o.getRelativePaths;var u=o.getContextRelativeTargetObjectPath;var T=o.enhanceDataModelPath;var p=r.getLabelForConnectedFields;var d=a.isPropertyPathExpression;var m=a.isProperty;var g=a.isPathAnnotationExpression;var v=n.UI;var E=n.Draft;var I=t.transformRecursively;var D=t.pathInModel;var _=t.or;var O=t.not;var h=t.isUndefinedExpression;var y=t.isEmpty;var A=t.isConstant;var C=t.ifElse;var F=t.getExpressionFromAnnotation;var N=t.formatWithTypeInformation;var b=t.formatResult;var x=t.constant;var $=t.compileExpression;const V=function(t,e){return I(t,"PathInModel",t=>{let n=t;if(t.modelName===undefined){const a=T(e,t.path);n=N(a.targetObject,t)}return n})};l.formatValueRecursively=V;const P=t=>{const e=t.targetObject;return d(e)?e.$target:e};const R=t=>{const e=t.targetEntitySet?.annotations?.Common?.DraftRoot;const n=t.targetEntitySet?.annotations?.Common?.DraftNode;if(!!e||!!n){return O(E.IsNewObject)}return true};const U=t=>t._type==="Constant"?x(!t.value):y(t);const L=function(t,e,n){const a=n?.displayMode;const r=P(t);const o=a||i.getDisplayMode(t);const s=r?.annotations?.Common?.Text;const l=f(t);if(r){e=N(r,e)}let c=[e];if(o!=="Value"&&s){switch(o){case"Description":c=[F(s,l)];break;case"DescriptionValue":const t=n?.splitTitleOnTwoLines===undefined?C(!!s.annotations?.UI?.TextArrangement,e,x("")):C(!!n?.splitTitleOnTwoLines,x(""),e);c=[F(s,l),t];break;case"ValueDescription":c=[e,C(!!n?.splitTitleOnTwoLines,x(""),F(s,l))];break}}return c};const M=function(t,e){return I(t,"PathInModel",t=>{if(t.modelName!==undefined)return t;const n=T(e,t.path);return L(n,t)})};const H=function(){const t=D("T_NEW_OBJECT","sap.fe.i18n");return b([t],e.formatTitle)};const j=t=>{const e=P(t);if(e&&e.annotations?.Core?.Computed){return v.IsInactive}else{return x(false)}};const B=function(t,e,n){let a;if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"){a=F(e.Value);if(e.Value?.$target?.annotations.Common?.Text?.annotations?.UI?.TextArrangement){a=M(a,t)}a=V(a,t)}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$target?.$Type==="com.sap.vocabularies.UI.v1.ConnectedFieldsType"){const e=T(t,"$Type/@UI.HeaderInfo/Title/Target/$AnnotationPath");a=p(e,n,false)}return a};const w=function(t,n,a,r,o,i){const s=i||e.formatTitle;let l=D("T_NEW_OBJECT","sap.fe.i18n");let f;let p=false;let d;if(c(r?.Title)&&r?.Title.Value?.$target?.annotations?.Common?.ExternalID){d={...r.Title,Value:{...r.Title.Value,$target:{...r.Title.Value.$target}}};d.Value.path=r.Title.Value.$target?.annotations?.Common?.ExternalID.path;d.Value.$target=r.Title.Value.$target?.annotations?.Common?.ExternalID.$target}if(r?.Title?.$Type&&o){if(d===undefined){f=B(t,r.Title,n)}else{f=B(t,d,n)}l=H();if(A(f)&&f.value===""){p=true}}else if(r&&(r.Title===undefined||r.Title.toString()==="")){p=true;if(!o){f=x("")}}if(f&&A(f)){return $(f)}if(g(t.targetObject)){t=T(t,t.targetObject.path)}const E=D(u(t));let I;if(f){I=Array.isArray(f)?f:[f]}else if(t.targetObject&&m(t.targetObject)){I=L(t,E,a)}const y=I===undefined||U(I[0]);const F=j(t);const N=I!=undefined&&b(I,s);f=C(y,C(_(p&&R(t),F),"",C(h(x(i)),C(_(v.IsCreateMode,O(R(t))),l,D("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n")),C(O(R(t)),o?.resourceModel.getText("T_NEW_OBJECT"),o?.resourceModel.getText("T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO")))),N);return $(f)};l.getTitleBindingExpression=w;return l},false);
//# sourceMappingURL=TitleHelper.js.map