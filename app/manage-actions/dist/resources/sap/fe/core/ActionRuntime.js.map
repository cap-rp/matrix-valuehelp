{"version":3,"file":"ActionRuntime.js","names":["ActionRuntime","_addMessageForActionParameter","messageParameters","Messaging","addMessages","map","messageParameter","binding","actionParameterInfo","field","getBinding","isMultiValue","Message","message","type","MessageType","Error","processor","getModel","undefined","persistent","target","getResolvedPath","validateProperties","async","actionParameterInfos","resourceModel","Promise","allSettled","validationPromise","requiredParameterInfos","filter","parameterInfo","getRequired","allMessages","getMessageModel","getData","emptyRequiredFields","requiredParameterInfo","fieldId","getId","relevantMessages","msg","getControlIds","some","controlId","includes","length","value","fieldValue","getValue","isFieldArray","Array","isArray","this","getText","getParent","getAggregation","firstInvalidParameter","find","getVisible","hasError","getValueState","setVisible","focus","setActionEnablement","oInternalModelContext","oActionOperationAvailableMap","aSelectedContexts","sControl","forContextMenu","arguments","aPromises","sAction","aRequestPromises","setProperty","sProperty","element","oSelectedContext","oContextData","getObject","_setActionEnablementForTable","bEnabled","aApplicable","aNotApplicable","push","CommonUtils","setContextsBasedOnOperationAvailable","all","setActionEnablementAfterPatch","oView","oListBinding","oInternalModelContextData","oControls","controls","sKey","oTable","byId","isA","oRowBinding","getRowBinding","tableAPI","getBindingContext","JSON","parse","tableDefinition","operationAvailableMap","getSelectedContexts","updateEditButtonVisibilityAndEnablement","iViewLevel","getViewData","viewLevel","isEditable","getIsEditable","oContext","oAppComponent","getAppComponent","sMetaPath","ModelHelper","getMetaPathForContext","sEntitySet","getRootEntitySetPath","metaContext","getMetaModel","getContext","getPath","converterContext","ConverterContext","createConverterContextForMacro","getDiagnostics","merge","entitySet","getEntitySet","entityType","getEntityType","updateHidden","bUpdateHidden","isEntitySet","annotations","UI","UpdateHidden","valueOf","isUpdateHidden","sEditEnableBinding","getEditButtonEnabled","draftRootPath","getDraftRootPath","sStickyRootPath","getStickyRootPath","sPath","oRootContext","bindContext","getBoundContext","sHiddenExpression","compileExpression","equal","getHiddenExpression","updateEditModelContext","sBindingExpression","oHiddenElement","AnyElement","anyText","setBindingContext","addDependent","$$groupId","attachChange","oEvent","oNewValue","getSource","getExternalValue","sEnablementFieldName","getProperty","bActionEnabled","bEnabledForContextMenu","aApplicableForContextMenu","aNotApplicableForContextMenu","sDynamicActionEnabledPath","oTransformedBinding","transformRecursively","oBindingExpression","constant","path","sResult","setDynamicActionContexts","requestProperty"],"sources":["./ActionRuntime.ts"],"sourcesContent":["import type { ActionParameter as EdmActionParameter, PrimitiveType } from \"@sap-ux/vocabularies-types\";\nimport merge from \"sap/base/util/merge\";\nimport type { PathInModelExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, constant, equal, transformRecursively } from \"sap/fe/base/BindingToolkit\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport type { _RequestedProperty } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { isEntitySet } from \"sap/fe/core/helpers/TypeGuards\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport type Label from \"sap/m/Label\";\nimport type Event from \"sap/ui/base/Event\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Field from \"sap/ui/mdc/Field\";\nimport type MultiValueField from \"sap/ui/mdc/MultiValueField\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type MultiValueFieldItem from \"sap/ui/mdc/field/MultiValueFieldItem\";\nimport type PropertyBinding from \"sap/ui/model/PropertyBinding\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type FileUploader from \"sap/ui/unified/FileUploader\";\nimport AnyElement from \"./controls/AnyElement\";\nimport ConverterContext from \"./converters/ConverterContext\";\nimport type { BaseManifestSettings } from \"./converters/ManifestSettings\";\nimport { getEditButtonEnabled, getHiddenExpression } from \"./converters/objectPage/HeaderAndFooterAction\";\n\nexport type ActionParameterInfo = {\n\tparameter?: EdmActionParameter;\n\tfield: Field | MultiValueField | FileUploader;\n\tisMultiValue: boolean;\n\tvalue?: string | MultiValueFieldItem[] | Record<string, string>;\n\tvalidationPromise?: Promise<string | MultiValueFieldItem[]>;\n\thasError: boolean;\n\tpropertyPath?: string;\n};\n\nconst ActionRuntime = {\n\t/**\n\t * Adds error messages for an action parameter field to the message manager.\n\t * @param messageParameters Information identifying an action parameter and messages referring to this parameter\n\t */\n\t_addMessageForActionParameter: function (messageParameters: { actionParameterInfo: ActionParameterInfo; message: string }[]): void {\n\t\tMessaging.addMessages(\n\t\t\tmessageParameters.map((messageParameter) => {\n\t\t\t\tconst binding = messageParameter.actionParameterInfo.field.getBinding(\n\t\t\t\t\tmessageParameter.actionParameterInfo.isMultiValue ? \"items\" : \"value\"\n\t\t\t\t);\n\t\t\t\treturn new Message({\n\t\t\t\t\tmessage: messageParameter.message,\n\t\t\t\t\ttype: MessageType.Error,\n\t\t\t\t\tprocessor: binding?.getModel() ?? undefined, // getModel(): null | Model ~~> processor?: MessageProcessor\n\t\t\t\t\tpersistent: true,\n\t\t\t\t\ttarget: binding?.getResolvedPath()\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t * Checks if all required action parameters contain data and checks for all action parameters if the\n\t * contained data is valid.\n\t * @param actionParameterInfos Information identifying an action parameter\n\t * @param resourceModel The model to load text resources\n\t * @returns The validation result can be true or false\n\t */\n\tvalidateProperties: async function (actionParameterInfos: ActionParameterInfo[], resourceModel: ResourceModel): Promise<boolean> {\n\t\tawait Promise.allSettled(\n\t\t\tactionParameterInfos.map(\n\t\t\t\t(actionParameterInfo): Promise<string | MultiValueFieldItem[]> | undefined => actionParameterInfo.validationPromise\n\t\t\t)\n\t\t);\n\n\t\tconst requiredParameterInfos = actionParameterInfos.filter(\n\t\t\t(parameterInfo) =>\n\t\t\t\t(parameterInfo.field as Field | MultiValueField).getRequired &&\n\t\t\t\t(parameterInfo.field as Field | MultiValueField).getRequired()\n\t\t);\n\n\t\tconst allMessages = Messaging.getMessageModel().getData();\n\t\tconst emptyRequiredFields = requiredParameterInfos.filter((requiredParameterInfo) => {\n\t\t\tconst fieldId = requiredParameterInfo.field.getId();\n\t\t\tconst relevantMessages = allMessages.filter((msg: Message) =>\n\t\t\t\tmsg.getControlIds().some((controlId: string) => controlId.includes(fieldId))\n\t\t\t);\n\t\t\tif (relevantMessages.length > 0) {\n\t\t\t\treturn false;\n\t\t\t} else if (requiredParameterInfo.isMultiValue) {\n\t\t\t\treturn requiredParameterInfo.value === undefined || !requiredParameterInfo.value.length;\n\t\t\t} else {\n\t\t\t\tconst fieldValue = (requiredParameterInfo.field as Field).getValue();\n\t\t\t\tconst isFieldArray = Array.isArray((requiredParameterInfo.field as Field).getValue());\n\t\t\t\tif (isFieldArray) {\n\t\t\t\t\t// only first value check is enough as the field value comes on [0] rest of the array includes currency and currency code\n\t\t\t\t\t// both of which can or cannot be null, so we shall check only the field value\n\t\t\t\t\treturn fieldValue[0] === null || fieldValue[0] === \"\";\n\t\t\t\t}\n\t\t\t\treturn fieldValue === undefined || fieldValue === null || fieldValue === \"\";\n\t\t\t}\n\t\t});\n\t\t/* Message for missing mandatory value of the action parameter */\n\t\tif (emptyRequiredFields.length) {\n\t\t\tthis._addMessageForActionParameter(\n\t\t\t\temptyRequiredFields.map((actionParameterInfo) => ({\n\t\t\t\t\tactionParameterInfo: actionParameterInfo,\n\t\t\t\t\tmessage: resourceModel.getText(\"C_OPERATIONS_ACTION_PARAMETER_DIALOG_MISSING_MANDATORY_MSG\", [\n\t\t\t\t\t\t(actionParameterInfo.field.getParent()?.getAggregation(\"label\") as Label).getText()\n\t\t\t\t\t])\n\t\t\t\t}))\n\t\t\t);\n\t\t}\n\t\t/* Check value state of all parameters */\n\t\tconst firstInvalidParameter = actionParameterInfos.find(\n\t\t\t(parameterInfo) =>\n\t\t\t\tparameterInfo.field.getVisible() &&\n\t\t\t\t(parameterInfo.hasError || parameterInfo.field.getValueState() === \"Error\" || emptyRequiredFields.includes(parameterInfo))\n\t\t);\n\t\tif (firstInvalidParameter) {\n\t\t\tfirstInvalidParameter.field.setVisible(true);\n\t\t\tfirstInvalidParameter.field.focus();\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t * Sets the action enablement.\n\t * @param oInternalModelContext Object containing the context model\n\t * @param oActionOperationAvailableMap Map containing the operation availability of actions\n\t * @param aSelectedContexts Array containing selected contexts of the chart\n\t * @param sControl Control name\n\t * @param forContextMenu Indicates if the action appears in the context menu. If false, the action appears in the table toolbar\n\t * @returns The action enablement promises\n\t */\n\tsetActionEnablement: async function (\n\t\toInternalModelContext: InternalModelContext,\n\t\toActionOperationAvailableMap: Record<string, string>,\n\t\taSelectedContexts: Context[],\n\t\tsControl: string,\n\t\tforContextMenu = false\n\t): Promise<void[]> {\n\t\tconst aPromises = [];\n\t\tfor (const sAction in oActionOperationAvailableMap) {\n\t\t\tlet aRequestPromises: Promise<_RequestedProperty>[] = [];\n\t\t\toInternalModelContext.setProperty(sAction, false);\n\t\t\tif (sControl === \"table\") {\n\t\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}/aApplicable`, []);\n\t\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}/aNotApplicable`, []);\n\t\t\t\tif (forContextMenu) {\n\t\t\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}/bEnabledForContextMenu`, false);\n\t\t\t\t} else {\n\t\t\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}/bEnabled`, false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst sProperty = oActionOperationAvailableMap[sAction];\n\t\t\tfor (const element of aSelectedContexts) {\n\t\t\t\tconst oSelectedContext = element;\n\t\t\t\tif (oSelectedContext) {\n\t\t\t\t\tconst oContextData = oSelectedContext.getObject() as Record<string, unknown>;\n\t\t\t\t\tif (sControl === \"chart\") {\n\t\t\t\t\t\tif ((sProperty === null && !!oContextData[`#${sAction}`]) || oSelectedContext.getObject(sProperty)) {\n\t\t\t\t\t\t\t//look for action advertisement if present and its value is not null\n\t\t\t\t\t\t\toInternalModelContext.setProperty(sAction, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (sControl === \"table\") {\n\t\t\t\t\t\taRequestPromises = this._setActionEnablementForTable(\n\t\t\t\t\t\t\toSelectedContext,\n\t\t\t\t\t\t\toInternalModelContext,\n\t\t\t\t\t\t\tsAction,\n\t\t\t\t\t\t\tsProperty,\n\t\t\t\t\t\t\taRequestPromises,\n\t\t\t\t\t\t\tforContextMenu\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (sControl === \"table\") {\n\t\t\t\tif (!aSelectedContexts.length) {\n\t\t\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}`, {\n\t\t\t\t\t\tbEnabled: false,\n\t\t\t\t\t\taApplicable: [],\n\t\t\t\t\t\taNotApplicable: []\n\t\t\t\t\t});\n\t\t\t\t\taPromises.push(CommonUtils.setContextsBasedOnOperationAvailable(oInternalModelContext, [], forContextMenu));\n\t\t\t\t} else if (aSelectedContexts.length && typeof sProperty === \"string\") {\n\t\t\t\t\t// When all property values have been retrieved, set\n\t\t\t\t\t// The applicable and not-applicable selected contexts for each action and\n\t\t\t\t\t// The enabled property of the dynamic action in internal model context.\n\t\t\t\t\taPromises.push(\n\t\t\t\t\t\tCommonUtils.setContextsBasedOnOperationAvailable(oInternalModelContext, aRequestPromises, forContextMenu)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Promise.all(aPromises);\n\t},\n\tsetActionEnablementAfterPatch: function (\n\t\toView: View,\n\t\toListBinding: ODataListBinding,\n\t\toInternalModelContext: InternalModelContext\n\t): void {\n\t\tconst oInternalModelContextData = oInternalModelContext?.getObject() as Record<string, unknown>;\n\t\tconst oControls = (oInternalModelContextData?.controls || {}) as Record<string, { controlId?: string }>;\n\t\tfor (const sKey in oControls) {\n\t\t\tif (oControls[sKey] && oControls[sKey].controlId) {\n\t\t\t\tconst oTable = oView.byId(sKey);\n\t\t\t\tif (oTable && oTable.isA<Table>(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\tconst oRowBinding = oTable.getRowBinding();\n\t\t\t\t\tif (oRowBinding == oListBinding) {\n\t\t\t\t\t\tconst tableAPI = oTable.getParent() as TableAPI;\n\t\t\t\t\t\tActionRuntime.setActionEnablement(\n\t\t\t\t\t\t\toTable.getBindingContext(\"internal\") as InternalModelContext,\n\t\t\t\t\t\t\tJSON.parse(tableAPI.tableDefinition.operationAvailableMap),\n\t\t\t\t\t\t\toTable.getSelectedContexts() as Context[],\n\t\t\t\t\t\t\t\"table\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tupdateEditButtonVisibilityAndEnablement(oView: FEView): void {\n\t\tconst iViewLevel = (oView.getViewData() as BaseManifestSettings)?.viewLevel,\n\t\t\tisEditable = CommonUtils.getIsEditable(oView);\n\t\tif ((iViewLevel as number) > 1 && isEditable !== true) {\n\t\t\tconst oContext = oView.getBindingContext();\n\t\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\t\tconst sMetaPath = ModelHelper.getMetaPathForContext(oContext);\n\t\t\tconst sEntitySet = ModelHelper.getRootEntitySetPath(sMetaPath);\n\t\t\tconst metaContext = oContext\n\t\t\t\t?.getModel()\n\t\t\t\t.getMetaModel()\n\t\t\t\t?.getContext(oContext?.getPath());\n\t\t\tconst converterContext = ConverterContext?.createConverterContextForMacro(\n\t\t\t\tsEntitySet,\n\t\t\t\tmetaContext,\n\t\t\t\toAppComponent.getDiagnostics(),\n\t\t\t\tmerge\n\t\t\t);\n\t\t\tconst entitySet = converterContext.getEntitySet();\n\t\t\tconst entityType = converterContext.getEntityType();\n\t\t\tlet updateHidden;\n\t\t\t//Find the Update Hidden of the root entity set and bind the property to AnyElement, any changes in the path of the root UpdateHidden will be updated via the property, internal model context is updated based on the property\n\t\t\tconst bUpdateHidden = isEntitySet(entitySet) && entitySet.annotations.UI?.UpdateHidden?.valueOf();\n\t\t\tif (bUpdateHidden !== true) {\n\t\t\t\tupdateHidden = ModelHelper.isUpdateHidden(entitySet, entityType);\n\t\t\t}\n\t\t\t//Find the operation available property of the root edit configuration and fetch the property using AnyElement\n\t\t\tconst sEditEnableBinding = getEditButtonEnabled(converterContext);\n\t\t\tconst draftRootPath = ModelHelper.getDraftRootPath(oContext);\n\t\t\tconst sStickyRootPath = ModelHelper.getStickyRootPath(oContext);\n\t\t\tconst sPath = draftRootPath || sStickyRootPath;\n\t\t\tconst oInternalModelContext = oView.getBindingContext(\"internal\") as InternalModelContext;\n\t\t\tif (sPath) {\n\t\t\t\tconst oRootContext = oView.getModel().bindContext(sPath).getBoundContext();\n\t\t\t\tif (updateHidden !== undefined) {\n\t\t\t\t\tconst sHiddenExpression = compileExpression(equal(getHiddenExpression(converterContext, updateHidden), false));\n\t\t\t\t\tthis.updateEditModelContext(sHiddenExpression, oView, oRootContext, \"rootEditVisible\", oInternalModelContext);\n\t\t\t\t}\n\t\t\t\tif (sEditEnableBinding) {\n\t\t\t\t\tthis.updateEditModelContext(sEditEnableBinding, oView, oRootContext, \"rootEditEnabled\", oInternalModelContext);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tupdateEditModelContext: function (\n\t\tsBindingExpression: string | undefined,\n\t\toView: View,\n\t\toRootContext: Context,\n\t\tsProperty: string,\n\t\toInternalModelContext: InternalModelContext\n\t): void {\n\t\tif (sBindingExpression) {\n\t\t\tconst oHiddenElement = new AnyElement({ anyText: sBindingExpression });\n\t\t\toHiddenElement.setBindingContext(null);\n\t\t\toView.addDependent(oHiddenElement);\n\t\t\toHiddenElement.getBinding(\"anyText\");\n\t\t\tconst oContext = oHiddenElement\n\t\t\t\t.getModel()\n\t\t\t\t?.bindContext(oRootContext.getPath(), oRootContext, { $$groupId: \"$auto.Heroes\" })\n\t\t\t\t?.getBoundContext();\n\t\t\toHiddenElement.setBindingContext(oContext);\n\t\t\toHiddenElement?.getBinding(\"anyText\")?.attachChange((oEvent: Event<{}, PropertyBinding>) => {\n\t\t\t\tconst oNewValue = oEvent.getSource().getExternalValue();\n\t\t\t\toInternalModelContext.setProperty(sProperty, oNewValue);\n\t\t\t});\n\t\t}\n\t},\n\n\t_setActionEnablementForTable: function (\n\t\toSelectedContext: Context | undefined,\n\t\toInternalModelContext: InternalModelContext,\n\t\tsAction: string,\n\t\tsProperty: string,\n\t\taRequestPromises: Promise<_RequestedProperty>[],\n\t\tforContextMenu = false\n\t): Promise<_RequestedProperty>[] {\n\t\t// Retrieve previously checked contexts in case of !forContextMenu\n\t\tconst sEnablementFieldName = forContextMenu ? \"bEnabledForContextMenu\" : \"bEnabled\",\n\t\t\taApplicable: [Context | undefined] = oInternalModelContext.getProperty(`dynamicActions/${sAction}/aApplicable`) || [],\n\t\t\taNotApplicable: [Context | undefined] = oInternalModelContext.getProperty(`dynamicActions/${sAction}/aNotApplicable`) || [];\n\t\tlet bActionEnabled: boolean = oInternalModelContext.getProperty(`dynamicActions/${sAction}/${sEnablementFieldName}`) || false;\n\n\t\tif (!forContextMenu) {\n\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}`, {\n\t\t\t\tbEnabled: false,\n\t\t\t\taApplicable: [],\n\t\t\t\taNotApplicable: []\n\t\t\t});\n\t\t} else {\n\t\t\toInternalModelContext.setProperty(`dynamicActions/${sAction}`, {\n\t\t\t\t// Do not change enabled, aApplicable and aNotApplicable property in case of context menu calculation\n\t\t\t\t// in case of context menu, only the clicked context goes into the processing - other selected contexts must be kept in the model\n\t\t\t\tbEnabled: oInternalModelContext.getProperty(`dynamicActions/${sAction}/bEnabled`),\n\t\t\t\taApplicable: oInternalModelContext.getProperty(`dynamicActions/${sAction}/aApplicable`),\n\t\t\t\taNotApplicable: oInternalModelContext.getProperty(`dynamicActions/${sAction}/aNotApplicable`),\n\t\t\t\tbEnabledForContextMenu: false,\n\t\t\t\taApplicableForContextMenu: [],\n\t\t\t\taNotApplicableForContextMenu: []\n\t\t\t});\n\t\t}\n\t\t// Note that non dynamic actions are not processed here. They are enabled because\n\t\t// one or more are selected and the second part of the condition in the templating\n\t\t// is then undefined and thus the button takes the default enabling, which is true!\n\t\tconst sDynamicActionEnabledPath = `${oInternalModelContext.getPath()}/dynamicActions/${sAction}/${sEnablementFieldName}`;\n\n\t\tif (typeof sProperty === \"object\" && sProperty !== null && sProperty !== undefined) {\n\t\t\tif (oSelectedContext) {\n\t\t\t\tconst oContextData = oSelectedContext.getObject() as Record<string, PrimitiveType>;\n\t\t\t\tconst oTransformedBinding = transformRecursively(\n\t\t\t\t\tsProperty,\n\t\t\t\t\t\"PathInModel\",\n\t\t\t\t\t// eslint-disable-next-line no-loop-func\n\t\t\t\t\tfunction (oBindingExpression: PathInModelExpression<PrimitiveType>) {\n\t\t\t\t\t\treturn oContextData ? constant(oContextData[oBindingExpression.path]) : constant(false);\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tconst sResult = compileExpression(oTransformedBinding);\n\t\t\t\tbActionEnabled = bActionEnabled || sResult === \"true\";\n\t\t\t\toInternalModelContext.getModel().setProperty(sDynamicActionEnabledPath, bActionEnabled);\n\t\t\t\t(sResult === \"true\" ? aApplicable : aNotApplicable).push(oSelectedContext);\n\t\t\t}\n\t\t\tCommonUtils.setDynamicActionContexts(oInternalModelContext, sAction, aApplicable, aNotApplicable, forContextMenu);\n\t\t} else {\n\t\t\tconst oContextData = oSelectedContext?.getObject() as Record<string, PrimitiveType>;\n\t\t\tif (sProperty === null && !!oContextData[`#${sAction}`]) {\n\t\t\t\t//look for action advertisement if present and its value is not null\n\t\t\t\toInternalModelContext.getModel().setProperty(sDynamicActionEnabledPath, true);\n\t\t\t} else if (oSelectedContext !== undefined) {\n\t\t\t\t// Collect promises to retrieve singleton or normal property value asynchronously\n\t\t\t\taRequestPromises.push(CommonUtils.requestProperty(oSelectedContext, sAction, sProperty, sDynamicActionEnabledPath));\n\t\t\t}\n\t\t}\n\t\treturn aRequestPromises;\n\t}\n};\nexport default ActionRuntime;\n"],"mappings":"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","ignoreList":[]}