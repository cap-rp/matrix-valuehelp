{"version":3,"names":["InvocationGrouping","FELibrary","Operation","appComponent","model","convertedAction","parameters","executionPromise","Promise","resolve","reject","executionResolve","executionReject","parametersValues","numberOfODataExecutions","externalParametersValues","contexts","setMessageCollectedPromise","operationMessage","OperationMessage","messageHandler","action","label","invocationGrouping","disableNotification","skipMessages","entitySetName","events","onMessageCollected","manageDialogOnMessages","messageCollectedResolve","onMessagePageNavigationCallback","operationParameters","closeParameterDialog","OperationParameters","skipParameterDialog","defaultValuesExtensionFunction","isCreateAction","parameterValues","view","onParameterDialogOpened","bind","onParameterDialogClosed","_exports","_proto","prototype","clear","odataOperation","setDefaultParametersValues","execute","internalExecution","operationResult","getOperationParameters","confirmAction","ODataOperation","disableStrictHandling","oDataProperties","disableSideEffects","ghostContextBindingProtection","onStrictValidation","oDataEvents","onStrictCancel","onStrictResponse","messages412","addWarningMessagesToMessageHandler","onStrictHandling","onODataResponse","onODataSubmit","onRequestSideEffects","enhance$select","groupId","replaceWithRVC","ignoreETag","bindingParameters","deferredSubmit","reactToOperations","isParameterDialog","some","isRejected","closeDialog","messageCollectedPromise","isParameterDialogOpened","e","isErrorIntoParameterDialog","actionHelper","isStaticAction","length","resetDialog","ChangeSet","isStrictCanceled","resetParameterDialogState","getOperationResults","isActionCritical","context","isActionCriticalValue","isActionCriticalBindingExp","getIsActionCriticalExpression","convertTypes","getMetaModel","isConstant","compileConstant","undefined","anyObject","Any","anyBoolean","compileExpression","setModel","getModel","setBindingContext","booleanBinding","getBinding","isA","all","getBindings","map","nestedBinding","requestValue","isCritical","actionName","getActionName","boundActionName","includes","split","suffixResourceKey","MessageBox","confirm","ResourceModelHelper","getResourceModel","getText","title","getConfirmTitle","onClose","Action","OK","Error","Constants","CancelActionDialog","key","resourceModel","titleOverrideExists","checkIfResourceKeyExists"],"sourceRoot":".","sources":["Operation.ts"],"sourcesContent":["import type { Action as EdmAction, PrimitiveType } from \"@sap-ux/vocabularies-types\";\nimport { compileConstant, compileExpression, isConstant } from \"sap/fe/base/BindingToolkit\";\nimport type { BindContextParameters } from \"sap/fe/core/controllerextensions/editFlow/draft\";\nimport Any from \"sap/fe/core/controls/Any\";\nimport { isRejected } from \"sap/fe/core/helpers/TypeGuards\";\nimport FELibrary from \"sap/fe/core/library\";\nimport { getIsActionCriticalExpression } from \"sap/fe/core/templating/ActionHelper\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport type Message from \"sap/ui/core/message/Message\";\nimport type CompositeBinding from \"sap/ui/model/CompositeBinding\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type ODataPropertyBinding from \"sap/ui/model/odata/v4/ODataPropertyBinding\";\nimport type AppComponent from \"../../../AppComponent\";\nimport type { FEView } from \"../../../BaseController\";\nimport { convertTypes } from \"../../../converters/MetaModelConverter\";\nimport * as ResourceModelHelper from \"../../../helpers/ResourceModelHelper\";\nimport type MessageHandler from \"../../MessageHandler\";\nimport type { OperationResult } from \"./ODataOperation\";\nimport ODataOperation from \"./ODataOperation\";\nimport OperationMessage from \"./OperationMessage\";\nimport OperationParameters from \"./OperationParameters\";\nimport actionHelper from \"./actionHelper\";\n\nconst InvocationGrouping = FELibrary.InvocationGrouping;\n\nexport type OperationParametersType = {\n\tmessageHandler: MessageHandler;\n\tview?: FEView;\n\tparameterValues?: Record<string, PrimitiveType>[];\n\tlabel?: string;\n\tinvocationGrouping?: string;\n\tskipParameterDialog?: boolean;\n\tskipMessages?: boolean;\n\tentitySetName?: string;\n\toDataProperties?: {\n\t\tghostContextBindingProtection?: boolean;\n\t\tenhance$select?: boolean;\n\t\tdisableStrictHandling?: boolean;\n\t\tdisableSideEffects?: boolean;\n\t\tignoreETag?: boolean;\n\t\tgroupId?: string;\n\t\treplaceWithRVC?: boolean;\n\t\tdeferredSubmit?: boolean;\n\t};\n\tisCreateAction?: boolean;\n\tcontexts?: Context[];\n\tbindingParameters?: BindContextParameters;\n\tdefaultValuesExtensionFunction?: string;\n\toDataEvents?: {\n\t\tonODataResponse?: Function;\n\t\tonODataSubmit?: Function;\n\t\tonRequestSideEffects?: Function;\n\t\tonStrictCancel?: Function;\n\t\tonStrictValidation?: Function;\n\t};\n};\n\nexport default class Operation {\n\tprivate readonly contexts: Context[];\n\n\tprivate executionResolve!: Function;\n\n\tprivate executionReject!: Function;\n\n\tprivate readonly executionPromise = new Promise<PromiseSettledResult<OperationResult>[]>((resolve, reject) => {\n\t\tthis.executionResolve = resolve;\n\t\tthis.executionReject = reject;\n\t});\n\n\tprivate messageCollectedResolve!: Function;\n\n\tprivate messageCollectedPromise!: Promise<void>;\n\n\tprivate readonly operationMessage: OperationMessage;\n\n\tprivate readonly operationParameters: OperationParameters;\n\n\tprivate parametersValues: Record<string, PrimitiveType> = {};\n\n\tprivate numberOfODataExecutions = 0;\n\n\tprivate externalParametersValues = false;\n\n\tprivate odataOperation: ODataOperation | undefined;\n\n\tconstructor(\n\t\tprivate readonly appComponent: AppComponent,\n\t\tprivate readonly model: ODataModel,\n\t\tprivate readonly convertedAction: EdmAction,\n\t\tprivate readonly parameters: OperationParametersType\n\t) {\n\t\tthis.contexts = parameters.contexts ?? [];\n\n\t\tthis.setMessageCollectedPromise();\n\n\t\tthis.operationMessage = new OperationMessage({\n\t\t\tmessageHandler: this.parameters.messageHandler,\n\t\t\taction: this.convertedAction,\n\t\t\tcontexts: this.contexts,\n\t\t\tlabel: this.parameters.label,\n\t\t\tinvocationGrouping: this.parameters.invocationGrouping,\n\t\t\tdisableNotification: this.parameters.skipMessages,\n\t\t\tentitySetName: this.parameters.entitySetName,\n\t\t\tevents: {\n\t\t\t\tonMessageCollected: (): void => {\n\t\t\t\t\t// Due to the mess into the message handling\n\t\t\t\t\t// the dialog should be closed or not only after the messages are collected\n\t\t\t\t\t// it means in the middle of the message handling workflow via\n\t\t\t\t\t// a callback function\n\t\t\t\t\tthis.manageDialogOnMessages();\n\t\t\t\t\tthis.messageCollectedResolve();\n\t\t\t\t},\n\t\t\t\tonMessagePageNavigationCallback: (): void => {\n\t\t\t\t\tthis.operationParameters.closeParameterDialog();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.operationParameters = new OperationParameters(\n\t\t\tthis.appComponent,\n\t\t\tthis.model,\n\t\t\tthis.convertedAction,\n\t\t\tthis.parameters.skipParameterDialog,\n\t\t\t{\n\t\t\t\tcontexts: this.contexts,\n\t\t\t\tdefaultValuesExtensionFunction: this.parameters.defaultValuesExtensionFunction,\n\t\t\t\tisCreateAction: this.parameters.isCreateAction,\n\t\t\t\tlabel: this.parameters.label,\n\t\t\t\tparameterValues: this.parameters.parameterValues,\n\t\t\t\tentitySetName: this.parameters.entitySetName,\n\t\t\t\tview: this.parameters.view,\n\t\t\t\tmessageHandler: this.parameters.messageHandler,\n\t\t\t\tevents: {\n\t\t\t\t\tonParameterDialogOpened: this.operationMessage.onParameterDialogOpened.bind(this.operationMessage),\n\t\t\t\t\tonParameterDialogClosed: this.operationMessage.onParameterDialogClosed.bind(this.operationMessage)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tclear(): void {\n\t\tthis.operationParameters.closeParameterDialog();\n\t\tthis.odataOperation?.clear();\n\t}\n\n\t/**\n\t * Set the values related to the parameters  for the operation\n\t * If the values are set the operation parameter dialog is skipped.\n\t * @param parametersValues The values for the parameters\n\t */\n\tpublic setDefaultParametersValues(parametersValues: Record<string, PrimitiveType>): void {\n\t\tthis.parametersValues = parametersValues;\n\t\tthis.externalParametersValues = true;\n\t}\n\n\t/**\n\t * Executes the operation.\n\t * @returns A promise containing the results\n\t */\n\tpublic async execute(): Promise<PromiseSettledResult<OperationResult>[]> {\n\t\tthis.internalExecution();\n\t\treturn this.executionPromise;\n\t}\n\n\t/**\n\t * Executes the operation.\n\t */\n\tprivate async internalExecution(): Promise<void> {\n\t\tlet operationResult: PromiseSettledResult<OperationResult>[] = [];\n\t\ttry {\n\t\t\tthis.numberOfODataExecutions++;\n\t\t\tif (!this.externalParametersValues) {\n\t\t\t\tthis.parametersValues = await this.operationParameters.getOperationParameters();\n\t\t\t}\n\t\t\tif (this.numberOfODataExecutions === 1) {\n\t\t\t\tawait this.confirmAction();\n\t\t\t}\n\t\t\tthis.odataOperation = new ODataOperation(\n\t\t\t\tthis.convertedAction,\n\t\t\t\t{\n\t\t\t\t\tappComponent: this.appComponent,\n\t\t\t\t\tcontexts: this.contexts,\n\t\t\t\t\tmodel: this.model,\n\t\t\t\t\tlabel: this.parameters.label,\n\t\t\t\t\tinvocationGrouping: this.parameters.invocationGrouping,\n\t\t\t\t\tdisableStrictHandling: this.parameters.oDataProperties?.disableStrictHandling,\n\t\t\t\t\tdisableSideEffects: this.parameters.oDataProperties?.disableSideEffects,\n\t\t\t\t\tghostContextBindingProtection: this.parameters.oDataProperties?.ghostContextBindingProtection,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonStrictValidation: this.parameters.oDataEvents?.onStrictValidation,\n\t\t\t\t\t\tonStrictCancel: this.parameters.oDataEvents?.onStrictCancel,\n\t\t\t\t\t\tonStrictResponse: (messages412: Message[]): void => {\n\t\t\t\t\t\t\tthis.parameters.messageHandler.addWarningMessagesToMessageHandler(messages412);\n\t\t\t\t\t\t\tthis.operationMessage.onStrictHandling();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonODataResponse: this.parameters.oDataEvents?.onODataResponse,\n\t\t\t\t\t\tonODataSubmit: this.parameters.oDataEvents?.onODataSubmit,\n\t\t\t\t\t\tonRequestSideEffects: this.parameters.oDataEvents?.onRequestSideEffects\n\t\t\t\t\t},\n\t\t\t\t\tparametersValues: this.parametersValues\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tenhance$select: this.parameters.oDataProperties?.enhance$select,\n\t\t\t\t\tgroupId: this.parameters.oDataProperties?.groupId,\n\t\t\t\t\treplaceWithRVC: this.parameters.oDataProperties?.replaceWithRVC,\n\t\t\t\t\tignoreETag: this.parameters.oDataProperties?.ignoreETag,\n\t\t\t\t\tbindingParameters: this.parameters.bindingParameters,\n\t\t\t\t\tdeferredSubmit: this.parameters.oDataProperties?.deferredSubmit\n\t\t\t\t}\n\t\t\t);\n\t\t\toperationResult = await this.odataOperation.execute();\n\t\t\tthis.operationMessage.reactToOperations(operationResult);\n\n\t\t\tif (this.operationParameters.isParameterDialog()) {\n\t\t\t\tif (!operationResult.some(isRejected)) {\n\t\t\t\t\tthis.closeDialog();\n\t\t\t\t} else {\n\t\t\t\t\tawait this.messageCollectedPromise;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.operationParameters.isParameterDialogOpened()) {\n\t\t\t\tthis.setMessageCollectedPromise();\n\t\t\t\tthis.internalExecution();\n\t\t\t} else {\n\t\t\t\tthis.executionResolve(operationResult);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.executionReject(e);\n\t\t}\n\t}\n\n\t/**\n\t * Manages the parameter dialog after the messages.\n\t */\n\n\tprivate manageDialogOnMessages(): void {\n\t\tconst isErrorIntoParameterDialog = this.operationMessage.isErrorIntoParameterDialog();\n\n\t\tif (actionHelper.isStaticAction(this.convertedAction) || this.contexts.length === 0) {\n\t\t\t// Don't close the dialog if the action is static or an import\n\t\t\treturn this.resetDialog();\n\t\t} else if (this.parameters.invocationGrouping === InvocationGrouping.ChangeSet) {\n\t\t\t// When the end user cancel the process on the strict dialog, we need to keep the parameter dialog (only on ChangeSet) #6376592\n\t\t\tif (isErrorIntoParameterDialog || this.odataOperation?.isStrictCanceled() === true) {\n\t\t\t\treturn this.resetDialog();\n\t\t\t} else {\n\t\t\t\treturn this.closeDialog();\n\t\t\t}\n\t\t} else if ((this.parameters.contexts && this.parameters.contexts.length > 1) || !isErrorIntoParameterDialog) {\n\t\t\t// does not matter if error is in APD or not, if there are multiple contexts selected or if the error is not the APD, we close it.\n\t\t\treturn this.closeDialog();\n\t\t}\n\t\treturn this.resetDialog();\n\t}\n\n\t/**\n\t * Sets the message collected promise.\n\t * This promise is resolved when the messages are collected.\n\t */\n\tprivate setMessageCollectedPromise(): void {\n\t\tthis.messageCollectedPromise = new Promise<void>((resolve) => {\n\t\t\tthis.messageCollectedResolve = resolve;\n\t\t});\n\t}\n\n\t/**\n\t * Closes the parameter dialog.\n\t */\n\tprivate closeDialog(): void {\n\t\tthis.operationParameters.closeParameterDialog();\n\t}\n\n\t/**\n\t * Resets the parameter dialog.\n\t */\n\tprivate resetDialog(): void {\n\t\tthis.operationParameters.resetParameterDialogState();\n\t}\n\n\t/**\n\t * Gets the result of the operation.\n\t * @returns The result\n\t */\n\tpublic async getOperationResults(): Promise<PromiseSettledResult<OperationResult>[]> {\n\t\treturn this.executionPromise;\n\t}\n\n\t/**\n\t * Checks if action is critical.\n\t * @returns True if the action is critical, otherwise false\n\t */\n\tprivate async isActionCritical(): Promise<boolean> {\n\t\t//only works with single context (as former code);\n\t\tconst context = this.parameters.contexts?.[0];\n\t\t// default is true.\n\t\tlet isActionCriticalValue: boolean | Promise<boolean> = true;\n\t\tconst isActionCriticalBindingExp = getIsActionCriticalExpression(this.convertedAction, convertTypes(this.model.getMetaModel()));\n\t\tif (isConstant(isActionCriticalBindingExp)) {\n\t\t\tisActionCriticalValue = compileConstant(isActionCriticalBindingExp, false, undefined, true) as boolean;\n\t\t} else if (context) {\n\t\t\tconst anyObject = new Any({ anyBoolean: compileExpression(isActionCriticalBindingExp) });\n\t\t\tanyObject.setModel(context.getModel());\n\t\t\tanyObject.setBindingContext(context);\n\t\t\tconst booleanBinding = anyObject.getBinding(\"anyBoolean\") as ODataPropertyBinding | undefined;\n\t\t\tif (booleanBinding) {\n\t\t\t\tif (booleanBinding.isA<CompositeBinding>(\"sap.ui.model.CompositeBinding\")) {\n\t\t\t\t\tawait Promise.all(booleanBinding.getBindings().map((nestedBinding) => nestedBinding.requestValue?.()));\n\t\t\t\t} else {\n\t\t\t\t\tawait booleanBinding.requestValue?.();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn isActionCriticalValue;\n\t}\n\n\t/**\n\t * Manages the message box to display when an action is critical.\n\t * @returns A promise which is resolved if the action is not critical or the message box is closed.\n\t */\n\tprivate async confirmAction(): Promise<void> {\n\t\tif (!this.operationParameters.isParameterDialog()) {\n\t\t\tconst isCritical = await this.isActionCritical();\n\t\t\tif (isCritical) {\n\t\t\t\tconst actionName = actionHelper.getActionName(this.convertedAction);\n\t\t\t\tawait new Promise((resolve, reject) => {\n\t\t\t\t\tconst boundActionName = actionName.includes(\".\") ? actionName.split(\".\")[actionName.split(\".\").length - 1] : actionName;\n\t\t\t\t\tconst suffixResourceKey =\n\t\t\t\t\t\tboundActionName && this.parameters.entitySetName ? `${this.parameters.entitySetName}|${boundActionName}` : \"\";\n\n\t\t\t\t\tMessageBox.confirm(\n\t\t\t\t\t\tResourceModelHelper.getResourceModel(this.parameters.view ?? this.appComponent).getText(\n\t\t\t\t\t\t\t\"C_OPERATIONS_ACTION_CONFIRM_MESSAGE\",\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\tsuffixResourceKey\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: this.getConfirmTitle(suffixResourceKey),\n\t\t\t\t\t\t\tonClose: (action: string) => {\n\t\t\t\t\t\t\t\tif (action === MessageBox.Action.OK) {\n\t\t\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treject(new Error(FELibrary.Constants.CancelActionDialog));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetConfirmTitle(suffixResourceKey: string): string | undefined {\n\t\t// A title only exists if it has been defined in the extension. Otherwise \"Confirmation\"\n\t\t// is used from the MessageBox control.\n\t\tif (!this.parameters.view) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst key = \"C_OPERATIONS_ACTION_CONFIRM_TITLE\";\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.view ?? this.appComponent);\n\t\tconst titleOverrideExists = resourceModel.checkIfResourceKeyExists(`${key}|${suffixResourceKey}`);\n\t\tif (titleOverrideExists) {\n\t\t\treturn resourceModel.getText(key, undefined, suffixResourceKey);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"Operation-dbg.js"}