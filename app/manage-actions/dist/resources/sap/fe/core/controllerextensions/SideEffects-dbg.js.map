{"version":3,"names":["IMMEDIATE_REQUEST","SideEffectsControllerExtension","_dec","defineUI5Class","_dec2","methodOverride","_dec3","publicExtension","_dec4","finalExtension","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","extensible","OverrideExecution","Instead","_dec33","_dec34","_dec35","_dec36","_dec37","privateExtension","_dec38","_dec39","_dec40","_dec41","_dec42","_dec43","_dec44","_dec45","_dec46","_dec47","_dec48","_dec49","_dec50","_class","_class2","_ControllerExtension","_this","call","requestExecutions","_inheritsLoose","_proto","prototype","onInit","_view","base","getView","_pageComponent","Component","getOwnerComponentFor","_sideEffectsService","CommonUtils","getAppComponent","getSideEffectsService","_registeredFieldGroupMap","_fieldGroupInvalidity","_registeredFailedSideEffects","addControlSideEffects","entityType","controlSideEffects","removeControlSideEffects","control","controlId","isA","getId","getContextForSideEffects","bindingContext","sideEffectEntityType","contextForSideEffects","getEntityTypeFromContext","getBinding","getContext","undefined","waitForSideEffectExecutions","Promise","allSettled","getFieldSideEffectsMap","field","sideEffectsMap","entitySet","getEntitySet","contextPath","getContextPath","fieldGroupIds","getFieldGroupIds","contextDataModelObject","getInvolvedDataModelObjectsForTargetPath","getModel","getMetaModel","getSideEffectsMapForFieldGroups","getBindingContext","viewEntityType","targetEntityType","fullyQualifiedName","fieldPath","getTargetProperty","context","controlSideEffectsEntityType","getControlEntitySideEffects","Object","keys","forEach","sideEffectsName","oControlSideEffects","sourceProperties","includes","name","immediate","sideEffects","fieldContext","mSideEffectsMap","fieldGroupId","_getSideEffectsPropertyForFieldGroup","oContext","clearFieldGroupsValidity","isFieldGroupValid","id","_getFieldGroupIndex","length","data","metaModel","viewBindingPath","getPath","viewMetaModelPath","getMetaPath","replace","prepareDeferredSideEffectsForField","event","fieldValidity","fieldGroupPreRequisite","getSource","_saveFieldPropertiesStatus","filter","sideEffectsProperties","registerFieldGroupSideEffects","handleFieldChange","skipDeferredRegistration","arguments","_manageSideEffectsFromField","handleFieldGroupChange","getParameter","customSideEffectHandling","some","startsWith","sideEffectRequestPromises","customImmediateSideEffectPromises","handleCustomFieldFieldGroupChange","push","then","fieldGroupsSideEffects","reduce","results","concat","getRegisteredSideEffectsForFieldGroup","map","fieldGroupSideEffects","_requestFieldGroupSideEffects","all","catch","error","Log","debug","values","sideEffectDef","resolve","immediateSideEffects","requestMultipleSideEffects","handlePageChangeContext","sideEffectsFieldGroupOnPage","getRegisteredSideEffectsForContext","requestSideEffects","groupId","fnGetTargets","ignoreTriggerActions","fnTriggerCallbacks","triggerCallbacks","bind","targets","triggerAction","targetEntities","targetProperties","isControlSideEffects","executeAction","requestTargets","async","target","$NavigationPropertyPath","registerFailedSideEffects","requestSideEffectsForEvent","eventName","path","isDataPathRelevant","_findRelevantContext","_eventName","_contextIsRelevant","getCanonicalPath","model","dependentBindings","getDependentBindings","binding","bindingPath","getProperty","propertyTarget","fetchUpdateData","getResult","entityPath","editUrl","getBoundContext","listContexts","getAllCurrentContexts","listContext","getDataRefreshText","resourceModel","getResourceModel","getText","notifyDataRefresh","MessageToast","show","getController","_sideEffects","confirmDataRefresh","isConfirmationDialogOpen","reject","text","confirmationDialog","Dialog","title","state","content","Text","beginButton","Button","press","close","endButton","afterClose","destroy","addStyleClass","open","multiSideEffects","properties","Set","navigationProperties","actions","sideEffectAction","fntriggerCallbacks","action","mySet","property","add","navigationProperty","Array","from","getRegisteredFailedRequests","isNotAlreadyListed","every","mFailedSideEffects","unregisterFailedSideEffectsForAContext","unregisterFailedSideEffects","sideEffectsFullyQualifiedName","promise","sideEffectProperty","unregisterFieldGroupSideEffects","registryIndex","sideEffectParts","split","sideEffectPath","getODataEntitySideEffects","sideEffectsToExecute","addSideEffects","failedSideEffects","failedSideEffect","e","navigation","nav","registerCallBack","getRegisteredCallback","success","key","ControllerExtension","_applyDecoratedDescriptor","getOwnPropertyDescriptor"],"sourceRoot":".","sources":["SideEffects.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, extensible, finalExtension, methodOverride, privateExtension, publicExtension } from \"sap/fe/base/ClassSupport\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport { getInvolvedDataModelObjectsForTargetPath } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type {\n\tControlSideEffectsType,\n\tODataSideEffectsType,\n\tSideEffectsService,\n\tSideEffectsTarget,\n\tSideEffectsType\n} from \"sap/fe/core/services/SideEffectsServiceFactory\";\nimport Button from \"sap/m/Button\";\nimport Dialog from \"sap/m/Dialog\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport type { RadioButtonGroup$SelectEvent } from \"sap/m/RadioButtonGroup\";\nimport Text from \"sap/m/Text\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport type { Control$ValidateFieldGroupEvent } from \"sap/ui/core/Control\";\nimport ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\nimport OverrideExecution from \"sap/ui/core/mvc/OverrideExecution\";\nimport type { Field$ChangeEvent } from \"sap/ui/mdc/Field\";\nimport type { MultiValueField$ChangeEvent } from \"sap/ui/mdc/MultiValueField\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport CommonUtils from \"../CommonUtils\";\nimport type PageController from \"../PageController\";\n\nimport type { EntitySet, NavigationProperty } from \"@sap-ux/vocabularies-types\";\nimport Component from \"sap/ui/core/Component\";\nimport type TemplateComponent from \"../TemplateComponent\";\n\ntype BaseSideEffectPropertyType = {\n\tname: string;\n\timmediate?: boolean;\n\tsideEffects: SideEffectsType;\n};\n\nexport type FieldSideEffectPropertyType = BaseSideEffectPropertyType & {\n\tcontext: Context;\n};\n\nexport type FieldSideEffectDictionary = Record<string, FieldSideEffectPropertyType>;\n\nexport type MassEditFieldSideEffectDictionary = Record<string, BaseSideEffectPropertyType>;\n\ntype FailedSideEffectDictionary = Record<string, SideEffectsType[]>;\n\nexport type FieldGroupSideEffectType = {\n\tpromise: Promise<unknown>;\n\tsideEffectProperty: FieldSideEffectPropertyType;\n};\n\nconst IMMEDIATE_REQUEST = \"$$ImmediateRequest\";\n@defineUI5Class(\"sap.fe.core.controllerextensions.SideEffects\")\nclass SideEffectsControllerExtension extends ControllerExtension {\n\tprotected base!: PageController;\n\n\tprivate _view!: FEView;\n\n\tprivate _pageComponent: EnhanceWithUI5<TemplateComponent> | undefined;\n\n\tprivate _registeredFieldGroupMap!: Record<string, FieldGroupSideEffectType>;\n\n\tprivate _fieldGroupInvalidity!: Record<string, Record<string, boolean>>;\n\n\tprivate _sideEffectsService!: SideEffectsService;\n\n\tprivate _registeredFailedSideEffects!: FailedSideEffectDictionary;\n\n\tprivate isConfirmationDialogOpen?: boolean;\n\n\tprivate readonly requestExecutions: Promise<unknown>[] = [];\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t@methodOverride()\n\tonInit(): void {\n\t\tthis._view = this.base.getView();\n\t\tthis._pageComponent = Component.getOwnerComponentFor(this._view) as EnhanceWithUI5<TemplateComponent> | undefined;\n\n\t\tthis._sideEffectsService = CommonUtils.getAppComponent(this._view).getSideEffectsService();\n\t\tthis._registeredFieldGroupMap = {};\n\t\tthis._fieldGroupInvalidity = {};\n\t\tthis._registeredFailedSideEffects = {};\n\t}\n\n\t/**\n\t * Adds a SideEffects control.\n\t * @param entityType Name of the entity where the SideEffects control will be registered\n\t * @param controlSideEffects SideEffects to register. Ensure the sourceControlId matches the associated SAPUI5 control ID.\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\taddControlSideEffects(entityType: string, controlSideEffects: Omit<ControlSideEffectsType, \"fullyQualifiedName\">): void {\n\t\tthis._sideEffectsService.addControlSideEffects(entityType, controlSideEffects);\n\t}\n\n\t/**\n\t * Removes SideEffects created by a control.\n\t * @param control SAPUI5 Control\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tremoveControlSideEffects(control: Control): void {\n\t\tconst controlId = control.isA?.(\"sap.ui.base.ManagedObject\") && control.getId();\n\n\t\tif (controlId) {\n\t\t\tthis._sideEffectsService.removeControlSideEffects(controlId);\n\t\t}\n\t}\n\n\t/**\n\t * Gets the appropriate context on which SideEffects can be requested.\n\t * The correct one must have the binding parameter $$patchWithoutSideEffects.\n\t * @param bindingContext Initial binding context\n\t * @param sideEffectEntityType EntityType of the sideEffects\n\t * @returns SAPUI5 Context or undefined\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tgetContextForSideEffects(bindingContext: Context, sideEffectEntityType: string): Context | undefined {\n\t\tlet contextForSideEffects = bindingContext,\n\t\t\tentityType = this._sideEffectsService.getEntityTypeFromContext(bindingContext);\n\n\t\tif (sideEffectEntityType !== entityType) {\n\t\t\tcontextForSideEffects = bindingContext.getBinding().getContext() as Context;\n\t\t\tif (contextForSideEffects) {\n\t\t\t\tentityType = this._sideEffectsService.getEntityTypeFromContext(contextForSideEffects);\n\t\t\t\tif (sideEffectEntityType !== entityType) {\n\t\t\t\t\tcontextForSideEffects = contextForSideEffects.getBinding().getContext() as Context;\n\t\t\t\t\tif (contextForSideEffects) {\n\t\t\t\t\t\tentityType = this._sideEffectsService.getEntityTypeFromContext(contextForSideEffects);\n\t\t\t\t\t\tif (sideEffectEntityType !== entityType) {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn contextForSideEffects || undefined;\n\t}\n\n\t/**\n\t * Wait For all sideEffects execution to be completed.\n\t *\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync waitForSideEffectExecutions(): Promise<void> {\n\t\tawait Promise.allSettled(this.requestExecutions);\n\t}\n\n\t/**\n\t * Gets the SideEffects map for a field\n\t * These SideEffects are\n\t * - listed into FieldGroupIds (coming from an OData Service)\n\t * - generated by a control or controls and that configure this field as SourceProperties.\n\t * @param field Field control\n\t * @returns SideEffects map\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tgetFieldSideEffectsMap(field: Control): FieldSideEffectDictionary {\n\t\tlet sideEffectsMap: FieldSideEffectDictionary = {};\n\t\tif (this._pageComponent) {\n\t\t\tconst entitySet = this._pageComponent.getEntitySet?.();\n\t\t\tconst contextPath = this._pageComponent.getContextPath?.() || (entitySet && `/${entitySet}`);\n\n\t\t\tif (contextPath) {\n\t\t\t\tconst fieldGroupIds = field.getFieldGroupIds(),\n\t\t\t\t\tcontextDataModelObject = getInvolvedDataModelObjectsForTargetPath<EntitySet | NavigationProperty>(\n\t\t\t\t\t\tcontextPath,\n\t\t\t\t\t\tthis._view.getModel().getMetaModel()\n\t\t\t\t\t);\n\n\t\t\t\t// SideEffects coming from an OData Service\n\t\t\t\tsideEffectsMap = this.getSideEffectsMapForFieldGroups(\n\t\t\t\t\tfieldGroupIds,\n\t\t\t\t\tfield.getBindingContext() as Context | null | undefined\n\t\t\t\t) as FieldSideEffectDictionary;\n\n\t\t\t\t// SideEffects coming from control(s)\n\t\t\t\tif (contextDataModelObject) {\n\t\t\t\t\tconst viewEntityType = contextDataModelObject.targetEntityType.fullyQualifiedName,\n\t\t\t\t\t\tfieldPath = this.getTargetProperty(field),\n\t\t\t\t\t\tcontext = this.getContextForSideEffects(field.getBindingContext() as Context, viewEntityType);\n\n\t\t\t\t\tif (fieldPath && context) {\n\t\t\t\t\t\tconst controlSideEffectsEntityType = this._sideEffectsService.getControlEntitySideEffects(viewEntityType);\n\t\t\t\t\t\tObject.keys(controlSideEffectsEntityType).forEach((sideEffectsName) => {\n\t\t\t\t\t\t\tconst oControlSideEffects = controlSideEffectsEntityType[sideEffectsName];\n\t\t\t\t\t\t\tif (oControlSideEffects.sourceProperties.includes(fieldPath)) {\n\t\t\t\t\t\t\t\tconst name = `${sideEffectsName}::${viewEntityType}`;\n\t\t\t\t\t\t\t\tsideEffectsMap[name] = {\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\timmediate: true,\n\t\t\t\t\t\t\t\t\tsideEffects: oControlSideEffects,\n\t\t\t\t\t\t\t\t\tcontext: context\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn sideEffectsMap;\n\t}\n\n\t/**\n\t * Gets the sideEffects map for fieldGroups.\n\t * @param fieldGroupIds Field group ids\n\t * @param fieldContext Field binding context\n\t * @returns SideEffects map\n\t */\n\n\t@publicExtension()\n\t@finalExtension()\n\tgetSideEffectsMapForFieldGroups(\n\t\tfieldGroupIds: string[],\n\t\tfieldContext?: Context | null\n\t): MassEditFieldSideEffectDictionary | FieldSideEffectDictionary {\n\t\tconst mSideEffectsMap: MassEditFieldSideEffectDictionary | FieldSideEffectDictionary = {};\n\t\tfieldGroupIds.forEach((fieldGroupId) => {\n\t\t\tconst { name, immediate, sideEffects, sideEffectEntityType } = this._getSideEffectsPropertyForFieldGroup(fieldGroupId);\n\t\t\tconst oContext = fieldContext ? (this.getContextForSideEffects(fieldContext, sideEffectEntityType) as Context) : undefined;\n\t\t\tif (sideEffects && (!fieldContext || (fieldContext && oContext))) {\n\t\t\t\tmSideEffectsMap[name] = {\n\t\t\t\t\tname,\n\t\t\t\t\timmediate,\n\t\t\t\t\tsideEffects\n\t\t\t\t};\n\t\t\t\tif (fieldContext) {\n\t\t\t\t\t(mSideEffectsMap[name] as FieldSideEffectPropertyType).context = oContext!;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn mSideEffectsMap;\n\t}\n\n\t/**\n\t * Clear recorded validation status for all properties.\n\t *\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tclearFieldGroupsValidity(): void {\n\t\tthis._fieldGroupInvalidity = {};\n\t}\n\n\t/**\n\t * Clear recorded validation status for all properties.\n\t * @param fieldGroupId Field group id\n\t * @param context Context\n\t * @returns SAPUI5 Context or undefined\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tisFieldGroupValid(fieldGroupId: string, context: Context): boolean {\n\t\tconst id = this._getFieldGroupIndex(fieldGroupId, context);\n\t\treturn Object.keys(this._fieldGroupInvalidity[id] ?? {}).length === 0;\n\t}\n\n\t/**\n\t * Gets the relative target property related to the Field.\n\t * @param field Field control\n\t * @returns Relative target property\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tgetTargetProperty(field: Control): string | undefined {\n\t\tconst fieldPath = field.data(\"sourcePath\") as string;\n\t\tconst metaModel = this._view.getModel().getMetaModel();\n\t\tconst viewBindingPath = this._view.getBindingContext()?.getPath();\n\t\tconst viewMetaModelPath = viewBindingPath ? `${metaModel.getMetaPath(viewBindingPath)}/` : \"\";\n\t\treturn fieldPath?.replace(viewMetaModelPath, \"\");\n\t}\n\n\t/**\n\t * Caches deferred SideEffects that will be executed when the FieldGroup is unfocused.\n\t * @param event SAPUI5 event that comes from a field change\n\t * @param fieldValidity\n\t * @param fieldGroupPreRequisite Promise to be fulfilled before executing deferred SideEffects\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tprepareDeferredSideEffectsForField(\n\t\tevent: Field$ChangeEvent | MultiValueField$ChangeEvent | RadioButtonGroup$SelectEvent,\n\t\tfieldValidity: boolean,\n\t\tfieldGroupPreRequisite?: Promise<unknown>\n\t): void {\n\t\tconst field = (event as UI5Event<{}, Control>).getSource();\n\t\tthis._saveFieldPropertiesStatus(field, fieldValidity);\n\t\tif (!fieldValidity) {\n\t\t\treturn;\n\t\t}\n\t\tconst sideEffectsMap = this.getFieldSideEffectsMap(field);\n\n\t\t// register field group SideEffects\n\t\tObject.keys(sideEffectsMap)\n\t\t\t.filter((sideEffectsName) => sideEffectsMap[sideEffectsName].immediate !== true)\n\t\t\t.forEach((sideEffectsName) => {\n\t\t\t\tconst sideEffectsProperties = sideEffectsMap[sideEffectsName];\n\t\t\t\tthis.registerFieldGroupSideEffects(sideEffectsProperties, fieldGroupPreRequisite);\n\t\t\t});\n\t}\n\n\t/**\n\t * Manages the workflow for SideEffects with related changes to a field\n\t * The following scenarios are managed:\n\t * - Register: caches deferred SideEffects that will be executed when the FieldGroup is unfocused\n\t * - Execute: triggers immediate SideEffects requests if the promise for the field event is fulfilled.\n\t * @param event SAPUI5 event that comes from a field change\n\t * @param fieldValidity\n\t * @param fieldGroupPreRequisite Promise to be fulfilled before executing deferred SideEffects\n\t * @param skipDeferredRegistration If true then deferred side effects are not registered. This is useful when the registration of deferred side effects and triggering needs to be done separately.\n\t * @returns  Promise on SideEffects request(s)\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync handleFieldChange(\n\t\tevent: Field$ChangeEvent | MultiValueField$ChangeEvent | RadioButtonGroup$SelectEvent,\n\t\tfieldValidity: boolean,\n\t\tfieldGroupPreRequisite?: Promise<unknown>,\n\t\tskipDeferredRegistration = false\n\t): Promise<void> {\n\t\tconst field = (event as UI5Event<{}, Control>).getSource();\n\t\tif (!skipDeferredRegistration) {\n\t\t\tthis.prepareDeferredSideEffectsForField(event, fieldValidity, fieldGroupPreRequisite);\n\t\t} else {\n\t\t\tthis._saveFieldPropertiesStatus(field, fieldValidity);\n\t\t\tif (!fieldValidity) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\treturn this._manageSideEffectsFromField(field);\n\t}\n\n\t/**\n\t * Manages SideEffects with a related 'focus out' to a field group.\n\t * @param event SAPUI5 Event\n\t * @returns Promise returning true if the SideEffects have been successfully executed\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync handleFieldGroupChange(event: Control$ValidateFieldGroupEvent): Promise<void | void[]> {\n\t\tconst field = event.getSource(),\n\t\t\tfieldGroupIds: string[] = event.getParameter(\"fieldGroupIds\") ?? [],\n\t\t\tcustomSideEffectHandling = fieldGroupIds.some((fieldGroupId) => fieldGroupId.startsWith(\"fe_sideEffectHandling_\"));\n\n\t\tlet sideEffectRequestPromises = [];\n\t\tif (customSideEffectHandling) {\n\t\t\tconst customImmediateSideEffectPromises = this.handleCustomFieldFieldGroupChange(event);\n\t\t\tif (customImmediateSideEffectPromises) {\n\t\t\t\tsideEffectRequestPromises.push(\n\t\t\t\t\tcustomImmediateSideEffectPromises.then(() => {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst fieldGroupsSideEffects = fieldGroupIds.reduce((results: FieldGroupSideEffectType[], fieldGroupId) => {\n\t\t\treturn results.concat(this.getRegisteredSideEffectsForFieldGroup(fieldGroupId));\n\t\t}, []);\n\t\tsideEffectRequestPromises = sideEffectRequestPromises.concat(\n\t\t\tfieldGroupsSideEffects.map(async (fieldGroupSideEffects) => {\n\t\t\t\treturn this._requestFieldGroupSideEffects(fieldGroupSideEffects);\n\t\t\t})\n\t\t);\n\n\t\treturn Promise.all(sideEffectRequestPromises).catch((error) => {\n\t\t\tconst contextPath = field.getBindingContext()?.getPath();\n\t\t\tLog.debug(`Error while processing FieldGroup SideEffects on context ${contextPath}`, error);\n\t\t});\n\t}\n\n\t/**\n\t * Manages SideEffects when the fieldGroupChange event is fired for a custom field.\n\t * @param event\n\t * @returns Promise of the immediate side effects request if there are any\n\t */\n\thandleCustomFieldFieldGroupChange(event: Control$ValidateFieldGroupEvent): null | Promise<unknown> {\n\t\tconst field = event.getSource();\n\t\tconst controlSideEffects = Object.values(this.getFieldSideEffectsMap(field));\n\n\t\t// register the non immediate side effects\n\t\tcontrolSideEffects\n\t\t\t.filter((sideEffectDef) => sideEffectDef.immediate !== true)\n\t\t\t.forEach((sideEffectDef) => {\n\t\t\t\tthis.registerFieldGroupSideEffects(sideEffectDef, Promise.resolve());\n\t\t\t});\n\n\t\t// execute the immediate side effects of the control\n\t\tconst immediateSideEffects = controlSideEffects\n\t\t\t.filter((sideEffectDef) => sideEffectDef.immediate === true)\n\t\t\t.map((sideEffectDef) => sideEffectDef.sideEffects);\n\t\tconst context = field.getBindingContext();\n\n\t\tif (immediateSideEffects.length && context) {\n\t\t\treturn this.requestMultipleSideEffects(immediateSideEffects, context as Context);\n\t\t}\n\t\treturn null;\n\t}\n\n\t/* Manages the deferred SideEffects which have to be executed when the context of the page changes (saving a document).\n\t *\n\t * @param context The context of the page\n\t * @returns Promise returning true if the SideEffects have been successfully executed\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync handlePageChangeContext(context: Context): Promise<void | unknown[]> {\n\t\tawait this.waitForSideEffectExecutions();\n\t\tconst sideEffectsFieldGroupOnPage = this.getRegisteredSideEffectsForContext(context);\n\t\treturn Promise.all(\n\t\t\tsideEffectsFieldGroupOnPage.map(async (fieldGroupSideEffects) => {\n\t\t\t\treturn this._requestFieldGroupSideEffects(fieldGroupSideEffects);\n\t\t\t})\n\t\t).catch((error) => {\n\t\t\tLog.debug(`Error while processing on page context ${context.getPath()}`, error);\n\t\t});\n\t}\n\n\t/**\n\t * Request SideEffects on a specific context.\n\t * @param sideEffects SideEffects to be executed\n\t * @param context Context where SideEffects need to be executed\n\t * @param groupId\n\t * @param fnGetTargets The callback function which will give us the targets and actions if it was coming through some specific handling.\n\t * @param ignoreTriggerActions If true, we do not trigger actions defined in the side effect\n\t * @returns SideEffects request on SAPUI5 context\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tasync requestSideEffects(\n\t\tsideEffects: SideEffectsType,\n\t\tcontext: Context,\n\t\tgroupId?: string,\n\t\tfnGetTargets?: (sideEffectsDef: SideEffectsType) => { targets: SideEffectsTarget[]; triggerAction: string | undefined },\n\t\tignoreTriggerActions = false\n\t): Promise<unknown> {\n\t\tconst fnTriggerCallbacks = this.triggerCallbacks.bind(this);\n\t\tconst { targets, triggerAction } = fnGetTargets\n\t\t\t? fnGetTargets(sideEffects)\n\t\t\t: {\n\t\t\t\t\ttargets: [...(sideEffects.targetEntities ?? []), ...(sideEffects.targetProperties ?? [])],\n\t\t\t\t\ttriggerAction: !this._sideEffectsService.isControlSideEffects(sideEffects) ? sideEffects.triggerAction : undefined\n\t\t\t  };\n\t\tif (triggerAction && !ignoreTriggerActions) {\n\t\t\tthis.requestExecutions.push(this._sideEffectsService.executeAction(triggerAction, context, groupId));\n\t\t}\n\n\t\tif (targets.length) {\n\t\t\tconst requestTargets = this._sideEffectsService\n\t\t\t\t.requestSideEffects(targets, context, groupId)\n\t\t\t\t.then(async function async() {\n\t\t\t\t\treturn fnTriggerCallbacks(sideEffects.targetEntities?.map((target) => target.$NavigationPropertyPath) || []);\n\t\t\t\t})\n\t\t\t\t.catch((error: unknown) => {\n\t\t\t\t\tthis.registerFailedSideEffects([sideEffects], context);\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\tthis.requestExecutions.push(requestTargets);\n\t\t\treturn requestTargets;\n\t\t}\n\t}\n\n\t/**\n\t * Requests the SideEffects for a sideEffect event.\n\t *\n\t * The default implementation is to execute the side effect on the page's context, but pages (like the LR) might override this method.\n\t * @param eventName The SideEffects event that is triggered\n\t * @param path The path for which this event was triggered\n\t * @returns Promise on SideEffects request\n\t */\n\n\t@publicExtension()\n\t@extensible(OverrideExecution.Instead)\n\tasync requestSideEffectsForEvent(eventName: string, path: string): Promise<undefined> {\n\t\tif (this.isDataPathRelevant(path, eventName)) {\n\t\t\t// use the default implementation from the SideEffects Service\n\t\t\tconst context = this._findRelevantContext(path, this.getView().getBindingContext() as Context);\n\t\t\tif (context) {\n\t\t\t\treturn this._sideEffectsService.requestSideEffectsForEvent(eventName, context);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether a specific data path is visible on the page.\n\t * @param path The path to be checked\n\t * @param _eventName SideEffects event which was triggered\n\t * @returns True if the data path is shown on the UI\n\t */\n\tisDataPathRelevant(path: string, _eventName: string): boolean {\n\t\tconst context = this.getView().getBindingContext() as Context;\n\n\t\tif (this._contextIsRelevant(path, context)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !!this._findRelevantContext(path, context);\n\t}\n\n\t/**\n\t * Checks if a given context fits to a given path.\n\t *\n\t * This is done by checking both the navigation path and the canonical path.\n\t * We also check dependent property bindings if they follow a navigation path to the given path.\n\t * @param path The path to be checked\n\t * @param context The context to be checked\n\t * @returns True if the context fits to the given path\n\t */\n\t_contextIsRelevant(path: string, context: Context): boolean {\n\t\tif (context?.getPath() === path || context?.getCanonicalPath() === path) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// check if a dependent binding follows a navigation path and fits to this path\n\t\tconst model = context.getModel();\n\t\tconst metaModel = model.getMetaModel();\n\t\tconst dependentBindings = model.getDependentBindings(context);\n\t\tfor (const binding of dependentBindings) {\n\t\t\tconst bindingPath = binding.getPath() ?? \"\";\n\n\t\t\tif (\n\t\t\t\tbindingPath.startsWith(\"@$ui5\") || // ignore UI5 internal bindings\n\t\t\t\t(context.getProperty(\"IsActiveEntity\") === true && // ignore DraftAdministrativeData on active version\n\t\t\t\t\tbindingPath.includes(\"DraftAdministrativeData/\"))\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst propertyTarget = metaModel.fetchUpdateData(bindingPath, context).getResult();\n\t\t\t\tif (propertyTarget?.entityPath === path || \"/\" + propertyTarget?.editUrl === path) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} catch (error: unknown) {\n\t\t\t\tLog.debug(`Error while checking ${bindingPath} on page context `, error as string | Error);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Find context for a given path by checking dependent bindings.\n\t * @param path The path to be checked\n\t * @param context The parent context\n\t * @returns Context if found, otherwise returns undefined\n\t */\n\t_findRelevantContext(path: string, context: Context): Context | undefined {\n\t\tif (this._contextIsRelevant(path, context)) {\n\t\t\treturn context;\n\t\t}\n\n\t\tconst dependentBindings = context.getModel().getDependentBindings(context);\n\t\tfor (const binding of dependentBindings) {\n\t\t\tif (binding.isA<ODataContextBinding>(\"sap.ui.model.odata.v4.ODataContextBinding\")) {\n\t\t\t\tif (this._contextIsRelevant(path, binding.getBoundContext())) {\n\t\t\t\t\treturn binding.getBoundContext();\n\t\t\t\t}\n\t\t\t} else if (binding.isA<ODataListBinding>(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\tconst listContexts = binding.getAllCurrentContexts();\n\t\t\t\tfor (const listContext of listContexts) {\n\t\t\t\t\tif (this._contextIsRelevant(path, listContext)) {\n\t\t\t\t\t\treturn listContext;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get text to be shown for user to indicate data refresh.\n\t *\n\t * This is currently only used by SideEffects events. Pages (like the LR) might override this method.\n\t * @returns Text to be shown to the user in case of a data refresh\n\t */\n\n\t@publicExtension()\n\t@extensible(OverrideExecution.Instead)\n\tgetDataRefreshText(): string {\n\t\tconst resourceModel = getResourceModel(this.getView());\n\t\treturn resourceModel.getText(\"C_SERVER_EVENTS_NEW_DATA_ITEM\");\n\t}\n\n\t/**\n\t * Notify the user that data was refreshed.\n\t *\n\t * This is currently only used by SideEffects events.\n\t */\n\n\tnotifyDataRefresh(): void {\n\t\tMessageToast.show(this.base.getView().getController()._sideEffects.getDataRefreshText());\n\t}\n\n\t/**\n\t * Ask the user for confirmation of a data refresh.\n\t *\n\t * This is currently only used by SideEffects events.\n\t * @returns Promise that is resolved if the user confirms and rejects if the user cancels.\n\t */\n\tasync confirmDataRefresh(): Promise<void> {\n\t\tif (!this.isConfirmationDialogOpen) {\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tconst text = this.getDataRefreshText();\n\t\t\t\tconst resourceModel = getResourceModel(this.getView());\n\n\t\t\t\tconst confirmationDialog = new Dialog({\n\t\t\t\t\ttitle: resourceModel.getText(\"WARNING\"),\n\t\t\t\t\tstate: \"Warning\",\n\t\t\t\t\tcontent: new Text({ text: text }),\n\t\t\t\t\tbeginButton: new Button({\n\t\t\t\t\t\ttext: resourceModel.getText(\"C_COMMON_SAPFE_REFRESH\"),\n\t\t\t\t\t\tpress: (): void => {\n\t\t\t\t\t\t\tconfirmationDialog.close();\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tendButton: new Button({\n\t\t\t\t\t\ttext: resourceModel.getText(\"C_COMMON_DIALOG_CANCEL\"),\n\t\t\t\t\t\tpress: (): void => {\n\t\t\t\t\t\t\tconfirmationDialog.close();\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tafterClose: (): void => {\n\t\t\t\t\t\tconfirmationDialog.destroy();\n\t\t\t\t\t\tthis.isConfirmationDialogOpen = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconfirmationDialog.addStyleClass(\"sapUiContentPadding\");\n\t\t\t\tthis.isConfirmationDialogOpen = true;\n\t\t\t\tconfirmationDialog.open();\n\t\t\t});\n\t\t}\n\t\treturn Promise.reject();\n\t}\n\n\t/**\n\t * Request multiple SideEffects on a specific context.\n\t * @param multiSideEffects SideEffects to be executed\n\t * @param context Context where SideEffects need to be executed\n\t * @param groupId The group id of the batch\n\t * @returns SideEffects request on SAPUI5 context\n\t */\n\tasync requestMultipleSideEffects(multiSideEffects: SideEffectsType[], context: Context, groupId?: string): Promise<unknown> {\n\t\tlet properties = new Set<string>();\n\t\tlet navigationProperties = new Set<string>();\n\t\tconst actions = multiSideEffects.reduce((actions, sideEffects) => {\n\t\t\tconst sideEffectAction = (sideEffects as ODataSideEffectsType).triggerAction;\n\t\t\tif (sideEffectAction) {\n\t\t\t\tactions.push(sideEffectAction);\n\t\t\t}\n\t\t\treturn actions;\n\t\t}, [] as string[]);\n\t\tconst fntriggerCallbacks = this.triggerCallbacks.bind(this);\n\n\t\tfor (const action of actions) {\n\t\t\tthis._sideEffectsService.executeAction(action, context, groupId);\n\t\t}\n\n\t\tfor (const sideEffects of multiSideEffects) {\n\t\t\tproperties = (sideEffects.targetProperties ?? []).reduce((mySet, property) => mySet.add(property), properties);\n\t\t\tnavigationProperties = (sideEffects.targetEntities ?? []).reduce(\n\t\t\t\t(mySet, navigationProperty) => mySet.add(navigationProperty.$NavigationPropertyPath),\n\t\t\t\tnavigationProperties\n\t\t\t);\n\t\t}\n\n\t\treturn this._sideEffectsService\n\t\t\t.requestSideEffects(\n\t\t\t\t[\n\t\t\t\t\t...Array.from(properties),\n\t\t\t\t\t...Array.from(navigationProperties).map((navigationProperty) => {\n\t\t\t\t\t\treturn { $NavigationPropertyPath: navigationProperty };\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tcontext,\n\t\t\t\tgroupId\n\t\t\t)\n\t\t\t.then(async function async() {\n\t\t\t\treturn fntriggerCallbacks(Array.from(navigationProperties));\n\t\t\t})\n\t\t\t.catch((error: unknown) => {\n\t\t\t\tthis.registerFailedSideEffects(multiSideEffects, context);\n\t\t\t\tthrow error;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets failed SideEffects.\n\t * @returns Registered SideEffects requests that have failed\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tpublic getRegisteredFailedRequests(): FailedSideEffectDictionary {\n\t\treturn this._registeredFailedSideEffects;\n\t}\n\n\t/**\n\t * Adds SideEffects to the queue of the failed SideEffects\n\t * The SideEffects are retriggered on the next request on the same context.\n\t * @param multiSideEffects SideEffects that need to be retriggered\n\t * @param context Context where SideEffects have failed\n\t */\n\t@privateExtension()\n\t@finalExtension()\n\tregisterFailedSideEffects(multiSideEffects: SideEffectsType[], context: Context): void {\n\t\tconst contextPath = context.getPath();\n\t\tthis._registeredFailedSideEffects[contextPath] = this._registeredFailedSideEffects[contextPath] ?? [];\n\t\tfor (const sideEffects of multiSideEffects) {\n\t\t\tconst isNotAlreadyListed = this._registeredFailedSideEffects[contextPath].every(\n\t\t\t\t(mFailedSideEffects) => sideEffects.fullyQualifiedName !== mFailedSideEffects.fullyQualifiedName\n\t\t\t);\n\t\t\tif (isNotAlreadyListed) {\n\t\t\t\tthis._registeredFailedSideEffects[contextPath].push(sideEffects);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes SideEffects in the queue of the failed SideEffects for a context.\n\t * @param contextPath Context path where SideEffects have failed\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tunregisterFailedSideEffectsForAContext(contextPath: string): void {\n\t\tdelete this._registeredFailedSideEffects[contextPath];\n\t}\n\n\t/**\n\t * Deletes SideEffects to the queue of the failed SideEffects.\n\t * @param sideEffectsFullyQualifiedName SideEffects that need to be retriggered\n\t * @param context Context where SideEffects have failed\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tunregisterFailedSideEffects(sideEffectsFullyQualifiedName: string, context: Context): void {\n\t\tconst contextPath = context.getPath();\n\t\tif (this._registeredFailedSideEffects[contextPath]?.length) {\n\t\t\tthis._registeredFailedSideEffects[contextPath] = this._registeredFailedSideEffects[contextPath].filter(\n\t\t\t\t(sideEffects) => sideEffects.fullyQualifiedName !== sideEffectsFullyQualifiedName\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Adds SideEffects to the queue of a FieldGroup\n\t * The SideEffects are triggered when event related to the field group change is fired.\n\t * @param sideEffectsProperties SideEffects properties\n\t * @param fieldGroupPreRequisite Promise to fullfil before executing the SideEffects\n\t */\n\t@privateExtension()\n\t@finalExtension()\n\tregisterFieldGroupSideEffects(sideEffectsProperties: FieldSideEffectPropertyType, fieldGroupPreRequisite?: Promise<unknown>): void {\n\t\tconst id = this._getFieldGroupIndex(sideEffectsProperties.name, sideEffectsProperties.context);\n\t\tif (!this._registeredFieldGroupMap[id]) {\n\t\t\tthis._registeredFieldGroupMap[id] = {\n\t\t\t\tpromise: fieldGroupPreRequisite ?? Promise.resolve(),\n\t\t\t\tsideEffectProperty: sideEffectsProperties\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Deletes SideEffects to the queue of a FieldGroup.\n\t * @param sideEffectsProperties SideEffects properties\n\t */\n\t@privateExtension()\n\t@finalExtension()\n\tunregisterFieldGroupSideEffects(sideEffectsProperties: FieldSideEffectPropertyType): void {\n\t\tconst { context, name } = sideEffectsProperties;\n\t\tconst id = this._getFieldGroupIndex(name, context);\n\t\tdelete this._registeredFieldGroupMap[id];\n\t}\n\n\t/**\n\t * Gets the registered SideEffects into the queue for a field group id.\n\t * @param fieldGroupId Field group id\n\t * @returns Array of registered SideEffects and their promise\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tgetRegisteredSideEffectsForFieldGroup(fieldGroupId: string): FieldGroupSideEffectType[] {\n\t\tconst sideEffects = [];\n\t\tfor (const registryIndex of Object.keys(this._registeredFieldGroupMap)) {\n\t\t\tif (registryIndex.startsWith(`${fieldGroupId}_`)) {\n\t\t\t\tsideEffects.push(this._registeredFieldGroupMap[registryIndex]);\n\t\t\t}\n\t\t}\n\t\treturn sideEffects;\n\t}\n\n\t/**\n\t * Gets the registered SideEffects into the queue for a context and its children.\n\t * @param context The context\n\t * @returns Array of registered SideEffects and their promise\n\t */\n\t@publicExtension()\n\t@finalExtension()\n\tgetRegisteredSideEffectsForContext(context: Context): FieldGroupSideEffectType[] {\n\t\tconst sideEffects = [];\n\t\tfor (const registryIndex of Object.keys(this._registeredFieldGroupMap)) {\n\t\t\tif (this._registeredFieldGroupMap)\n\t\t\t\tif (registryIndex.includes(`_${context.getPath()}`)) {\n\t\t\t\t\tsideEffects.push(this._registeredFieldGroupMap[registryIndex]);\n\t\t\t\t}\n\t\t}\n\t\treturn sideEffects;\n\t}\n\n\t/**\n\t * Gets a status index.\n\t * @param fieldGroupId The field group id\n\t * @param context SAPUI5 Context\n\t * @returns Index\n\t */\n\tprivate _getFieldGroupIndex(fieldGroupId: string, context: Context): string {\n\t\treturn `${fieldGroupId}_${context.getPath()}`;\n\t}\n\n\t/**\n\t * Gets sideEffects properties from a field group id\n\t * The properties are:\n\t * - name\n\t * - sideEffects definition\n\t * - sideEffects entity type\n\t * - immediate sideEffects.\n\t * @param fieldGroupId\n\t * @returns SideEffects properties\n\t */\n\tprivate _getSideEffectsPropertyForFieldGroup(fieldGroupId: string): {\n\t\tsideEffectEntityType: string;\n\t\tname: string;\n\t\timmediate: boolean;\n\t\tsideEffects: ODataSideEffectsType | undefined;\n\t} {\n\t\t/**\n\t\t * string \"$$ImmediateRequest\" is added to the SideEffects name during templating to know\n\t\t * if this SideEffects must be immediately executed requested (on field change) or must\n\t\t * be deferred (on field group focus out)\n\t\t *\n\t\t */\n\t\tconst immediate = fieldGroupId.includes(IMMEDIATE_REQUEST),\n\t\t\tname = fieldGroupId.replace(IMMEDIATE_REQUEST, \"\"),\n\t\t\tsideEffectParts = name.split(\"#\"),\n\t\t\tsideEffectEntityType = sideEffectParts[0],\n\t\t\tsideEffectPath = `${sideEffectEntityType}@com.sap.vocabularies.Common.v1.SideEffects${\n\t\t\t\tsideEffectParts.length === 2 ? `#${sideEffectParts[1]}` : \"\"\n\t\t\t}`,\n\t\t\tsideEffects: ODataSideEffectsType | undefined =\n\t\t\t\tthis._sideEffectsService.getODataEntitySideEffects(sideEffectEntityType)?.[sideEffectPath];\n\t\treturn { name, immediate, sideEffects, sideEffectEntityType };\n\t}\n\n\t/**\n\t * Manages the SideEffects for a field.\n\t * @param field Field control\n\t * @returns Promise related to the requested immediate sideEffects\n\t */\n\tprivate async _manageSideEffectsFromField(field: Control): Promise<void> {\n\t\tconst sideEffectsMap = this.getFieldSideEffectsMap(field);\n\t\ttry {\n\t\t\tconst sideEffectsToExecute: Record<string, { sideEffects: SideEffectsType[]; context: Context }> = {};\n\t\t\tconst addSideEffects = (context: Context, sideEffects: SideEffectsType): void => {\n\t\t\t\tconst contextPath = context.getPath();\n\t\t\t\tif (sideEffectsToExecute[contextPath]) {\n\t\t\t\t\tsideEffectsToExecute[contextPath].sideEffects.push(sideEffects);\n\t\t\t\t} else {\n\t\t\t\t\tsideEffectsToExecute[contextPath] = {\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tsideEffects: [sideEffects]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//Get Immediate SideEffects\n\t\t\tfor (const sideEffectsProperties of Object.values(sideEffectsMap).filter(\n\t\t\t\t(sideEffectsProperties) => sideEffectsProperties.immediate === true\n\t\t\t)) {\n\t\t\t\t// if this SideEffects is recorded as failed SideEffects, need to remove it.\n\t\t\t\tthis.unregisterFailedSideEffects(sideEffectsProperties.sideEffects.fullyQualifiedName, sideEffectsProperties.context);\n\t\t\t\taddSideEffects(sideEffectsProperties.context, sideEffectsProperties.sideEffects);\n\t\t\t}\n\n\t\t\t//Replay failed SideEffects related to the view or Field\n\t\t\tfor (const context of [field.getBindingContext(), this._view.getBindingContext()].filter(\n\t\t\t\t(context): context is Context => !!context\n\t\t\t)) {\n\t\t\t\tconst contextPath = context.getPath();\n\t\t\t\tconst failedSideEffects = this._registeredFailedSideEffects[contextPath] ?? [];\n\t\t\t\tthis.unregisterFailedSideEffectsForAContext(contextPath);\n\t\t\t\tfor (const failedSideEffect of failedSideEffects) {\n\t\t\t\t\taddSideEffects(context, failedSideEffect);\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait Promise.all(\n\t\t\t\tObject.values(sideEffectsToExecute).map(async (sideEffectsProperties) =>\n\t\t\t\t\tsideEffectsProperties.sideEffects.length === 1\n\t\t\t\t\t\t? this.requestSideEffects(sideEffectsProperties.sideEffects[0], sideEffectsProperties.context)\n\t\t\t\t\t\t: this.requestMultipleSideEffects(sideEffectsProperties.sideEffects, sideEffectsProperties.context)\n\t\t\t\t)\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tLog.debug(`Error while managing Field SideEffects`, e as string);\n\t\t}\n\t}\n\n\tasync triggerCallbacks(navigation: string[]): Promise<undefined> {\n\t\tawait Promise.all(\n\t\t\tnavigation.map((nav) => {\n\t\t\t\tconst registerCallBack = this._sideEffectsService.getRegisteredCallback(nav);\n\t\t\t\tif (registerCallBack) {\n\t\t\t\t\treturn registerCallBack();\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve();\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Requests the SideEffects for a fieldGroup.\n\t * @param fieldGroupSideEffects Field group sideEffects with its promise\n\t * @returns Promise returning true if the SideEffects have been successfully executed\n\t */\n\tprivate async _requestFieldGroupSideEffects(fieldGroupSideEffects: FieldGroupSideEffectType): Promise<void> {\n\t\tthis.unregisterFieldGroupSideEffects(fieldGroupSideEffects.sideEffectProperty);\n\t\ttry {\n\t\t\tawait fieldGroupSideEffects.promise;\n\t\t} catch (e) {\n\t\t\tLog.debug(`Error while processing FieldGroup SideEffects`, e as string);\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst { sideEffects, context, name } = fieldGroupSideEffects.sideEffectProperty;\n\t\t\tif (this.isFieldGroupValid(name, context)) {\n\t\t\t\tawait this.requestSideEffects(sideEffects, context);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tLog.debug(`Error while executing FieldGroup SideEffects`, e as string);\n\t\t}\n\t}\n\n\t/**\n\t * Saves the validation status of properties related to a field control.\n\t * @param field The field control\n\t * @param success Status of the field validation\n\t */\n\tprivate _saveFieldPropertiesStatus(field: Control, success: boolean): void {\n\t\tconst sideEffectsMap = this.getFieldSideEffectsMap(field);\n\t\tObject.keys(sideEffectsMap).forEach((key) => {\n\t\t\tconst { name, immediate, context } = sideEffectsMap[key];\n\t\t\tif (!immediate) {\n\t\t\t\tconst id = this._getFieldGroupIndex(name, context);\n\t\t\t\tif (success) {\n\t\t\t\t\tdelete this._fieldGroupInvalidity[id]?.[field.getId()];\n\t\t\t\t} else {\n\t\t\t\t\tthis._fieldGroupInvalidity[id] = {\n\t\t\t\t\t\t...this._fieldGroupInvalidity[id],\n\t\t\t\t\t\t...{ [field.getId()]: true }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default SideEffectsControllerExtension;\n"],"mappings":"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","ignoreList":[],"file":"SideEffects-dbg.js"}