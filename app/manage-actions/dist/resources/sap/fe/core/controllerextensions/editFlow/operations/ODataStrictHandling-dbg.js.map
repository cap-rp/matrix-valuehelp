{"version":3,"names":["InvocationGrouping","FELibrary","ODataStrictHandling","parameters","strictHandlingResolves","strictHandlingWarningMessages","canceled","isCanceled","contexts","length","binding","getBinding","isA","tableAPI","ElementRegistry","filter","element","getContent","getRowBinding","_exports","_proto","prototype","handleOdataStrictHandling","operationContextBinding","internalOperationsPromiseResolve","onContextValidation","messages412","arguments","undefined","handlingResolve","strictHandlingPromise","Promise","resolve","push","message","getType","MessageType","Error","Log","warning","additionalText","column","getIdentifierColumn","getContext","getObject","setAdditionalText","events","onResponse","onValidation","isValidated","manageStrictHandlingFails","messageHandling","hasTransitionErrorsOrWarnings","invocationGrouping","ChangeSet","displayMessages","messageModel","Messaging","getMessageModel","messagesInModel","getData","setData","concat","error","messages","actionName","ResourceModelHelper","getLocalizedText","label","appComponent","getDescription","getDescriptionUrl","displayMessageOnMessageBox","displayMessagesOnDialog","messageResolve","promise","resourceModel","getResourceModel","messageText","getMessage","identifierText","getAdditionalText","isMultiContext412","genericChangesetMessage","getText","warningMessageText","cancelButtonTxt","displayedMessage","headerInfoTypeName","getTableDefinition","toString","MessageBox","title","actions","emphasizedAction","onClose","action","messageDialogModel","JSONModel","warningMessage","warningDesc","genericMessage","Message","type","Information","target","persistent","description","StrictDialog","messageObject","prepareMessageViewForDialog","onBeginButtonPress","handleMessageOnValidation","bind","onEndButtonPress","handleMessageOnCancel","open","removeBoundTransitionMessages","removeUnboundTransitionMessages","information","contentWidth","onCancel"],"sourceRoot":".","sources":["ODataStrictHandling.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport type AppComponent from \"sap/fe/core/AppComponent\";\nimport ResourceModelHelper from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport ElementRegistry from \"sap/ui/core/ElementRegistry\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport StrictDialog from \"../../dialog/ODataStrictDialog\";\nimport messageHandling from \"../../messageHandler/messageHandling\";\nconst InvocationGrouping = FELibrary.InvocationGrouping;\n\nexport default class ODataStrictHandling {\n\tprivate strictHandlingResolves: ((value: boolean) => void)[] = [];\n\n\tprivate strictHandlingWarningMessages: Message[] = [];\n\n\tprivate canceled = false;\n\n\tprivate readonly tableAPI: TableAPI | undefined;\n\n\tconstructor(\n\t\tprivate readonly parameters: {\n\t\t\tappComponent: AppComponent;\n\t\t\tcontexts: Context[];\n\t\t\tlabel: string;\n\t\t\tinvocationGrouping?: string;\n\t\t\tevents?: {\n\t\t\t\tonResponse?: (messages: Message[]) => void;\n\t\t\t\tonCancel?: Function;\n\t\t\t\tonValidation?: Function;\n\t\t\t};\n\t\t}\n\t) {\n\t\tif (this.parameters.contexts.length) {\n\t\t\tconst binding = this.parameters.contexts[0].getBinding();\n\t\t\tif (binding?.isA(\"sap.ui.model.odata.v4.ODataListBinding\")) {\n\t\t\t\tthis.tableAPI = ElementRegistry.filter(\n\t\t\t\t\t(element) => element.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\") && element.getContent()?.getRowBinding() === binding\n\t\t\t\t)[0] as TableAPI | undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync handleOdataStrictHandling(\n\t\toperationContextBinding: ODataContextBinding,\n\t\tinternalOperationsPromiseResolve: Function | undefined,\n\t\tonContextValidation: Function,\n\t\tmessages412: Message[] = []\n\t): Promise<boolean> {\n\t\tlet handlingResolve!: (value: boolean) => void;\n\t\tconst strictHandlingPromise = new Promise<boolean>(function (resolve) {\n\t\t\thandlingResolve = resolve;\n\t\t});\n\t\tthis.strictHandlingResolves.push(handlingResolve);\n\t\t// Find error message in the 412 response and raise warning.\n\t\tif (messages412.filter((message) => message.getType() === MessageType.Error).length) {\n\t\t\tLog.warning(\n\t\t\t\t\"Warning: 412 ('Pre-condition Check Failed due to strict-handling') returns messages of type error but only warning messages are appropriate!\"\n\t\t\t);\n\t\t}\n\t\tlet additionalText = \"\";\n\t\t// If there is more than one context we need the identifier. This would fix if the action is triggered via table chevron\n\t\tif (this.parameters.contexts.length > 1) {\n\t\t\tconst column = this.tableAPI?.getIdentifierColumn();\n\t\t\tif (typeof column === \"string\") {\n\t\t\t\tadditionalText = operationContextBinding.getContext()?.getObject(column);\n\t\t\t}\n\t\t}\n\t\t// set type and subtitle for all warning messages\n\t\tfor (const message of messages412) {\n\t\t\tmessage.setAdditionalText(additionalText);\n\t\t\tthis.strictHandlingWarningMessages.push(message);\n\t\t}\n\t\tthis.parameters.events?.onResponse?.(messages412);\n\t\tinternalOperationsPromiseResolve?.();\n\t\tthis.onContextValidation(strictHandlingPromise, onContextValidation);\n\t\treturn strictHandlingPromise;\n\t}\n\n\tprivate async onContextValidation(strictHandlingPromise: Promise<boolean>, onValidation: Function): Promise<void> {\n\t\tconst isValidated = await strictHandlingPromise;\n\t\tif (isValidated) {\n\t\t\tonValidation();\n\t\t}\n\t}\n\n\tpublic isCanceled = (): boolean => {\n\t\treturn this.canceled;\n\t};\n\n\t/**\n\t * Manages the strict handling fails.\n\t * @returns The promise of the strict handling\n\t */\n\tpublic async manageStrictHandlingFails(): Promise<void> {\n\t\tif (this.strictHandlingResolves.length) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\t(!messageHandling.hasTransitionErrorsOrWarnings() ||\n\t\t\t\t\t\tthis.parameters.invocationGrouping !== InvocationGrouping.ChangeSet) &&\n\t\t\t\t\tthis.strictHandlingWarningMessages.length\n\t\t\t\t) {\n\t\t\t\t\tawait this.displayMessages();\n\t\t\t\t} else {\n\t\t\t\t\tfor (const resolve of this.strictHandlingResolves) {\n\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t}\n\t\t\t\t\tconst messageModel = Messaging.getMessageModel();\n\t\t\t\t\tconst messagesInModel = messageModel.getData();\n\t\t\t\t\tmessageModel.setData(messagesInModel.concat(this.strictHandlingWarningMessages));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tLog.error(\"Re-triggering of strict handling operations failed\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async displayMessages(): Promise<void> {\n\t\tconst messages = this.strictHandlingWarningMessages;\n\t\tif (!messages.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst actionName = ResourceModelHelper.getLocalizedText(this.parameters.label, this.parameters.appComponent);\n\t\treturn messages.length === 1 && !(messages[0].getDescription()?.length || messages[0].getDescriptionUrl()?.length)\n\t\t\t? this.displayMessageOnMessageBox(messages[0], actionName)\n\t\t\t: this.displayMessagesOnDialog(messages, actionName);\n\t}\n\n\tprivate async displayMessageOnMessageBox(message: Message, actionName: string): Promise<void> {\n\t\tlet messageResolve!: Function;\n\t\tconst promise = new Promise<void>((resolve) => {\n\t\t\tmessageResolve = resolve;\n\t\t});\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tconst messageText = message.getMessage();\n\t\tconst identifierText = message.getAdditionalText();\n\t\tconst isMultiContext412 = this.parameters.contexts.length > 1;\n\t\tconst genericChangesetMessage = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_SINGLE_MESSAGE_TEXT\");\n\t\tconst warningMessageText =\n\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t? resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_MESSAGE_TEXT\", [actionName])\n\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT\");\n\t\tlet cancelButtonTxt: string = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL\");\n\t\tlet displayedMessage = \"\";\n\t\tif (!isMultiContext412) {\n\t\t\tdisplayedMessage = `${messageText}\\n${resourceModel.getText(\"PROCEED\")}`;\n\t\t} else if (identifierText !== undefined && identifierText !== \"\") {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\tconst headerInfoTypeName = this.tableAPI?.getTableDefinition().headerInfoTypeName;\n\t\t\tif (headerInfoTypeName) {\n\t\t\t\tdisplayedMessage = `${headerInfoTypeName.toString()} ${identifierText}: ${messageText}\\n\\n${warningMessageText}`;\n\t\t\t} else {\n\t\t\t\tdisplayedMessage = `${identifierText}: ${messageText}\\n\\n${warningMessageText}`;\n\t\t\t}\n\t\t} else {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\tdisplayedMessage = `${messageText}\\n\\n${warningMessageText}`;\n\t\t}\n\t\tif (isMultiContext412 && this.parameters.invocationGrouping === InvocationGrouping.ChangeSet) {\n\t\t\tdisplayedMessage = `${genericChangesetMessage}\\n\\n${displayedMessage}`;\n\t\t}\n\t\tMessageBox.warning(displayedMessage, {\n\t\t\ttitle: resourceModel.getText(\"WARNING\"),\n\t\t\tactions: [actionName, cancelButtonTxt],\n\t\t\temphasizedAction: actionName,\n\t\t\tonClose: (action: string) => {\n\t\t\t\tthis[action === actionName ? \"handleMessageOnValidation\" : \"handleMessageOnCancel\"]();\n\t\t\t\tmessageResolve();\n\t\t\t}\n\t\t});\n\t\treturn promise;\n\t}\n\n\tprivate async displayMessagesOnDialog(messages: Message[], actionName: string): Promise<void> {\n\t\tlet messageResolve!: Function;\n\t\tconst promise = new Promise<void>((resolve) => {\n\t\t\tmessageResolve = resolve;\n\t\t});\n\t\tconst messageDialogModel = new JSONModel();\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tconst isMultiContext412 = this.parameters.contexts.length > 1;\n\t\tlet warningMessage = \"\";\n\t\tlet warningDesc = \"\";\n\t\tlet cancelButtonTxt: string = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL\");\n\t\tif (isMultiContext412) {\n\t\t\tcancelButtonTxt =\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? cancelButtonTxt\n\t\t\t\t\t: resourceModel.getText(\"C_COMMON_DIALOG_SKIP\");\n\t\t\twarningMessage = resourceModel.getText(\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? \"C_COMMON_DIALOG_CANCEL_MESSAGES_WARNING\"\n\t\t\t\t\t: \"C_COMMON_DIALOG_SKIP_MESSAGES_WARNING\"\n\t\t\t);\n\t\t\twarningDesc = resourceModel.getText(\n\t\t\t\tthis.parameters.invocationGrouping === InvocationGrouping.ChangeSet\n\t\t\t\t\t? \"C_COMMON_DIALOG_CANCEL_MESSAGES_TEXT\"\n\t\t\t\t\t: \"C_COMMON_DIALOG_SKIP_MESSAGES_TEXT\",\n\t\t\t\t[actionName]\n\t\t\t);\n\t\t} else {\n\t\t\twarningMessage = resourceModel.getText(\"C_COMMON_DIALOG_CANCEL_MESSAGES_GENERIC_ACTION_WARNING\", [actionName]);\n\t\t}\n\t\tconst genericMessage = new Message({\n\t\t\tmessage: warningMessage,\n\t\t\ttype: MessageType.Information,\n\t\t\ttarget: undefined,\n\t\t\tpersistent: true,\n\t\t\tdescription: warningDesc.length ? warningDesc : undefined\n\t\t});\n\t\tmessages = [genericMessage].concat(messages);\n\t\tmessageDialogModel.setData(messages);\n\t\tnew StrictDialog({\n\t\t\tmessageObject: messageHandling.prepareMessageViewForDialog(messageDialogModel, true, isMultiContext412),\n\t\t\tactionName,\n\t\t\tmessageDialogModel,\n\t\t\tcancelButtonTxt,\n\t\t\tonBeginButtonPress: this.handleMessageOnValidation.bind(this),\n\t\t\tonEndButtonPress: this.handleMessageOnCancel.bind(this),\n\t\t\tonClose: messageResolve\n\t\t}).open();\n\t\treturn promise;\n\t}\n\n\tprivate handleMessageOnValidation(): void {\n\t\tfor (const resolve of this.strictHandlingResolves) {\n\t\t\tresolve(true);\n\t\t}\n\t\tmessageHandling.removeBoundTransitionMessages();\n\t\tmessageHandling.removeUnboundTransitionMessages();\n\t\tthis.strictHandlingWarningMessages = [];\n\t\tthis.parameters.events?.onValidation?.();\n\t}\n\n\tprivate handleMessageOnCancel(): void {\n\t\tconst resourceModel = ResourceModelHelper.getResourceModel(this.parameters.appComponent);\n\t\tthis.strictHandlingWarningMessages = [];\n\t\tthis.canceled = true;\n\t\tfor (const resolve of this.strictHandlingResolves) {\n\t\t\tresolve(false);\n\t\t}\n\t\tthis.strictHandlingResolves = [];\n\t\tif (this.parameters.invocationGrouping === InvocationGrouping.ChangeSet) {\n\t\t\tMessageBox.information(resourceModel.getText(\"M_CHANGESET_CANCEL_MESSAGES\"), {\n\t\t\t\tcontentWidth: \"150px\"\n\t\t\t} as object);\n\t\t}\n\t\tthis.parameters.events?.onCancel?.();\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ODataStrictHandling-dbg.js"}