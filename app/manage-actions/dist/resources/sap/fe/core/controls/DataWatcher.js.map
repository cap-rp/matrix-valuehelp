{"version":3,"file":"DataWatcher.js","names":["DataWatcher","_dec","defineUI5Class","_dec2","property","type","_dec3","event","_class","_class2","_UI5Element","idOrProps","props","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","isInitial","_exports","_inheritsLoose","_proto","prototype","setPropertyBinding","propertyBinding","oldValue","getProperty","_previousContextPath","getBindingContext","getPath","_initialValue","setProperty","fireEvent","value","context","UI5Element","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./DataWatcher.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, event, property } from \"sap/fe/base/ClassSupport\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport type Context from \"sap/ui/model/Context\";\nimport type { EventHandler } from \"types/extension_types\";\n\n/**\n * A callback function that is called when the value of the watched property changes.\n * @param value The new value of the watched property\n * @param oldValue The old value of the watched property\n * @param isInitial Whether the value change is the initial value\n * @param context The binding context of the watched property\n * @typedef\n * @public\n */\nexport type WatcherCallback = (value: unknown, oldValue: unknown, isInitial: boolean, context: Context) => void;\n\n/**\n * The DataWatcher is an element you can use to watch a property binding and get notified when the value changes.\n *\n */\n@defineUI5Class(\"sap.fe.core.controls.DataWatcher\")\nexport default class DataWatcher extends UI5Element {\n\t@property({ type: \"any\" })\n\tpropertyBinding?: unknown;\n\n\t@event()\n\tvalueChanged?: EventHandler<UI5Event<{ value: unknown; oldValue: unknown; isInitial: boolean; context: Context }, DataWatcher>>;\n\n\tprivate _initialValue?: unknown;\n\n\tprivate isInitial: boolean;\n\n\tprivate _previousContextPath?: string;\n\n\tconstructor(idOrProps?: string | PropertiesOf<DataWatcher>, props?: PropertiesOf<DataWatcher>) {\n\t\tsuper(idOrProps as string | undefined, props);\n\t\tthis.isInitial = true;\n\t}\n\n\tsetPropertyBinding(propertyBinding: string): void {\n\t\tconst oldValue = this.getProperty(\"propertyBinding\");\n\t\tif (this.isInitial || this._previousContextPath !== this.getBindingContext()?.getPath()) {\n\t\t\tthis.isInitial = false;\n\t\t\tthis._initialValue = propertyBinding;\n\t\t\tthis._previousContextPath = this.getBindingContext()?.getPath();\n\t\t}\n\t\tsuper.setProperty(\"propertyBinding\", propertyBinding);\n\t\tthis.fireEvent(\"valueChanged\", {\n\t\t\tvalue: propertyBinding,\n\t\t\toldValue: oldValue,\n\t\t\tisInitial: propertyBinding === this._initialValue,\n\t\t\tcontext: this.getBindingContext()\n\t\t});\n\t}\n}\n"],"mappings":";;;;inCAkBA,IAKqBA,GAAWC,EAD/BC,EAAe,oCAAmCC,EAEjDC,EAAS,CAAEC,KAAM,QAAQC,EAGzBC,IAAON,EAAAO,GAAAC,EAAA,SAAAC,GASR,SAAAV,EAAYW,EAAgDC,GAAmC,IAAAC,EAC9FA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAiCC,IAAMG,KAACC,EAAAH,EAAA,kBAAAI,EAAAJ,GAAAG,EAAAH,EAAA,eAAAK,EAAAL,GAC9CA,EAAKM,UAAY,KAAK,OAAAN,CACvB,CAACO,EAAApB,EAAAqB,EAAArB,EAAAU,GAAA,IAAAY,EAAAtB,EAAAuB,UAAAD,EAEDE,mBAAA,SAAAA,EAAmBC,GAClB,MAAMC,EAAWX,KAAKY,YAAY,mBAClC,GAAIZ,KAAKI,WAAaJ,KAAKa,uBAAyBb,KAAKc,qBAAqBC,UAAW,CACxFf,KAAKI,UAAY,MACjBJ,KAAKgB,cAAgBN,EACrBV,KAAKa,qBAAuBb,KAAKc,qBAAqBC,SACvD,CACApB,EAAAa,UAAMS,YAAWlB,KAAAC,KAAC,kBAAmBU,GACrCV,KAAKkB,UAAU,eAAgB,CAC9BC,MAAOT,EACPC,SAAUA,EACVP,UAAWM,IAAoBV,KAAKgB,cACpCI,QAASpB,KAAKc,qBAEhB,EAAC,OAAA7B,CAAA,CA5BO,CAJgCoC,GAAUnB,EAAAoB,EAAA5B,EAAAc,UAAA,mBAAApB,GAAA,CAAAmC,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAvB,EAAAmB,EAAA5B,EAAAc,UAAA,gBAAAjB,GAAA,CAAAgC,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAhC,KAAAD,GAAAY,EAAApB,EAAA,OAAAoB,CAAA","ignoreList":[]}