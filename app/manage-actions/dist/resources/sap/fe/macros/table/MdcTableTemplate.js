/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/BindingToolkit","sap/fe/core/CommonUtils","sap/fe/core/controls/CommandExecution","sap/fe/core/controls/FormElementWrapper","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/table/StandardActions","sap/fe/core/helpers/BindingHelper","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/ActionCommand","sap/fe/macros/CommonHelper","sap/fe/macros/Field","sap/fe/macros/MultiValueField","sap/fe/macros/TSXUtils","sap/fe/macros/draftIndicator/DraftIndicator","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldTemplating","sap/fe/macros/internal/helpers/ActionHelper","sap/fe/macros/internal/helpers/TableTemplating","sap/fe/macros/situations/SituationsIndicator","sap/fe/macros/table/ActionsTemplating","sap/fe/macros/table/QuickFilterSelector","sap/fe/macros/table/TableHelper","sap/fe/macros/table/uploadTable/UploadTableTemplate","sap/m/FlexItemData","sap/m/HBox","sap/m/Label","sap/m/Menu","sap/m/MenuItem","sap/m/ObjectStatus","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/VBox","sap/m/library","sap/m/plugins/CellSelector","sap/m/plugins/ContextMenuSetting","sap/m/plugins/CopyProvider","sap/m/plugins/DataStateIndicator","sap/ui/core/Lib","sap/ui/core/library","sap/ui/fl/variants/VariantManagement","sap/ui/mdc/Table","sap/ui/mdc/actiontoolbar/ActionToolbarAction","sap/ui/mdc/enums/TableP13nMode","sap/ui/mdc/enums/TableRowActionType","sap/ui/mdc/p13n/PersistenceProvider","sap/ui/mdc/table/Column","sap/ui/mdc/table/CreationRow","sap/ui/mdc/table/DragDropConfig","sap/ui/mdc/table/GridTableType","sap/ui/mdc/table/ResponsiveColumnSettings","sap/ui/mdc/table/ResponsiveTableType","sap/ui/mdc/table/RowActionItem","sap/ui/mdc/table/RowSettings","sap/ui/mdc/table/TreeTableType","../MicroChart","../field/FieldFormatOptions","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,n,a,o,i,r,l,s,d,c,u,p,f,b,m,g,h,v,C,y,T,D,P,x,M,O,I,A,w,E,S,F,B,k,R,L,N,U,j,H,_,V,$,G,z,q,K,W,X,Q,J,Y,Z,ee,te,ne,ae,oe,ie,re,le,se,de,ce){"use strict";var ue={};var pe=z.Priority;var fe=j.ObjectMarkerVisibility;var be=w.getUploadPlugin;var me=O.getTableContextMenuTemplate;var ge=O.getTableActionsTemplate;var he=x.buildExpressionForHeaderVisible;var ve=D.getVisibleExpression;var Ce=D.getDraftIndicatorVisibleBinding;var ye=C.createCustomDatas;var Te=C.createCustomData;var De=m.getCommandExecutionForAction;var Pe=b.isMultiValueField;var xe=f.isPathUpdatable;var Me=f.enhanceDataModelPath;var Oe=p.isSingleton;var Ie=p.isAnnotationOfType;var Ae=p.isAnnotationOfTerm;var we=u.generate;var Ee=d.singletonPathVisitor;var Se=d.UI;var Fe=s.StandardActionKeys;var Be=l.isDataFieldForAnnotation;var ke=l.isDataField;var Re=l.hasDataPointTarget;var Le=r.getInvolvedDataModelObjects;var Ne=i.CreationMode;var Ue=t.pathInModel;var je=t.or;var He=t.not;var _e=t.isTruthy;var Ve=t.isConstant;var $e=t.ifElse;var Ge=t.equal;var ze=t.constant;var qe=t.compileExpression;var Ke=t.and;function We(e,t,n,a){const o=t.getObject();switch(n){case"GridTable":return de(te,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,selectionLimit:a,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold});case"TreeTable":return de(re,{rowCountMode:e.control.rowCountMode,rowCount:e.control.rowCount,fixedColumnCount:e.control.frozenColumnCount,scrollThreshold:e.control.scrollThreshold});default:return de(ae,{showDetailsButton:true,detailsButtonSetting:[pe.Low,pe.Medium,pe.None],growingMode:o.$kind==="EntitySet"?"Scroll":undefined})}}function Xe(e){return de($,{filter:e.dataStateIndicatorFilter,enableFiltering:true,dataStateChange:e.dataStateChange})}function Qe(e,t){const n=xe(e,{ignoreTargetCollection:true,authorizeUnresolvable:true,pathVisitor:(t,n)=>Ee(t,e.convertedTypes,n)});const a=xe(e,{authorizeUnresolvable:true,pathVisitor:(t,n)=>Ee(t,e.convertedTypes,n)});if(e.startingEntitySet===e.targetEntitySet){if(e.startingEntitySet.annotations.Common?.DraftRoot!==undefined){return Ke(n._type==="Unresolvable"?$e(Ve(a),a,ze(true)):n,t.control.isHierarchyParentNodeUpdatable)}else{return ze(false)}}else{return Ke(n._type==="Unresolvable"?$e(Ve(a),a,ze(true)):n,Se.IsEditable,t.control.isHierarchyParentNodeUpdatable)}}function Je(e,t,n,o){const i=e.contentId;const r=e.tableDefinition;const l=e.tableDefinition.control.type;const s=t.handlerProvider;const d=[];const c=r.actions.find(e=>e.key===Fe.Cut);if(c?.isTemplated==="true"&&l==="TreeTable"){d.push(de(a,{execute:s.getCutHandler(false),command:"Cut",enabled:c.enabled}))}const u=r.actions.find(e=>e.key===Fe.Copy);if(u?.isTemplated==="true"&&l==="TreeTable"){d.push(de(a,{execute:s.getCopyHandler(false),command:"Copy",enabled:u.enabled}))}const p=r.actions.find(e=>e.key===Fe.Paste);if(p?.visible!=="false"&&l==="TreeTable"){d.push(de(a,{execute:s.getPasteHandler(false),command:"Paste",enabled:p?.enabled}))}const f=r.actions.find(e=>e.key===Fe.Create);const b=r.actions.find(e=>e.key===Fe.Delete);if(r.annotation.isInsertUpdateActionsTemplated&&f?.isTemplated==="true"&&r.control.nodeType===undefined&&r.control.enableUploadPlugin===false){d.push(de(a,{execute:s.getCreateButtonPressHandler(false,false),visible:f.visible,enabled:f.enabled,command:"Create"}))}if(b?.isTemplated==="true"){d.push(de(a,{execute:s.getDeleteButtonPressHandler(false),visible:b.visible,enabled:b.enabled,command:"DeleteEntry"}))}const m=r.actions.find(e=>e.key===Fe.MoveUp);const g=r.actions.find(e=>e.key===Fe.MoveDown);if(m&&g&&m.visible!=="false"&&g.visible!=="false"&&l==="TreeTable"){d.push(de(a,{execute:s.getMoveUpDownHandler(true,false),command:"TableMoveElementUp",enabled:m.enabled}));d.push(de(a,{execute:s.getMoveUpDownHandler(false,false),command:"TableMoveElementDown",enabled:g.enabled}))}for(const n in r.commandActions){const a=r.commandActions[n];const i=ct(n,a,false,t,o,r,e.contextObjectPath);if(i){d.push(i)}}if(n==="None"){d.push(de(J,{id:we([i,"PersistenceProvider"]),for:i}))}d.push(de(_,{scope:"Selection"}));if(r.control.enableUploadPlugin){d.push(be(r,i,s))}return d}ue.getDependents=Je;function Ye(e,t,n,a){const o=[];if(e.displaySegmentedButton){const n=[];if(g.isDesktop()){n.push(de(N,{tooltip:"{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://chart-table-view"},"Hybrid"))}n.push(de(N,{tooltip:"{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://bar-chart"},"Chart"));n.push(de(N,{tooltip:"{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}",icon:"sap-icon://table-view"},"Table"));o.push(de(W,{layoutInformation:'{ aggregationName: "end", alignment: "End" }',visible:"{= ${pageInternal>alpContentView} === 'Table' }",children:{action:de(L,{id:we([e.contentId,"SegmentedButton","TemplateContentView"]),select:t.handlerProvider.segmentedButtonPress,selectedKey:"{pageInternal>alpContentView}",children:{items:n}})}}))}o.push(...ge(e,t,n,a));return o.length>0?o:undefined}function Ze(e,t,n,a){const o=de(oe,{type:t,press:n==="ResponsiveTable"?undefined:a.rowPress,visible:e.annotation.row?.visible});return de(ie,{navigated:e.annotation.row?.rowNavigated,highlight:e.annotation.row?.rowHighlighting,children:{rowActions:t===Q.Navigation?o:undefined}})}function et(e,t,n,a,o,i){const r=me(e,t,o,n);if(a===Q.Navigation&&!i){r.push(tt(t.handlerProvider,e.contentId));r.push(nt(t.handlerProvider))}if(r.length>0){return de(B,{itemSelected:t.handlerProvider.contextMenuItemSelected,children:{dependents:at(e.tableDefinition,t,e.contextObjectPath,o),items:r}})}return undefined}function tt(e,t){return de(k,{"core:require":"{API: 'sap/fe/macros/table/TableAPI'}",startsSection:true,id:we([t,"ContextMenu","CollaborationManager"]),text:"{sap.fe.i18n>M_COMMON_TABLE_CONTEXT_MENU_SHARE_TO_COLLABORATION_MANAGER}",press:e.contextMenuShareToCollaborationManager,enabled:"{= ${internal>contextmenu/numberOfSelectedContexts} > 0}",visible:false})}function nt(e){const t=Ke(He(Ke(Ue("/sessionOn","internal"),Se.IsEditable)),He(Ue("contextmenu/inactiveContext","internal")));return de(k,{"core:require":"{API: 'sap/fe/macros/table/TableAPI'}",startsSection:true,text:"{sap.fe.i18n>M_COMMON_TABLE_CONTEXT_MENU_OPEN_IN_NEW_TAB}",press:e.contextMenuOpenInNewTab,enabled:"{= ${internal>contextmenu/numberOfSelectedContexts} > 0}",visible:t})}function at(e,t,n,o){const i=[];const r=e.control.type;const l=e.actions.find(e=>e.key===Fe.Create);if(l?.isTemplated==="true"&&r==="TreeTable"){i.push(de(a,{execute:t.handlerProvider.getCreateButtonPressHandler(true,false),command:"Create::ContextMenu",visible:l.visible,enabled:l.enabledForContextMenu}))}const s=e.actions.find(e=>e.key===Fe.Cut);if(s?.isTemplated==="true"){i.push(de(a,{execute:t.handlerProvider.getCutHandler(true),command:"Cut::ContextMenu",enabled:s.enabledForContextMenu}))}const d=e.actions.find(e=>e.key===Fe.Copy);if(d?.isTemplated==="true"){i.push(de(a,{execute:t.handlerProvider.getCopyHandler(true),command:"Copy::ContextMenu",enabled:d.enabledForContextMenu}))}const c=e.actions.find(e=>e.key===Fe.Paste);if(c?.visible!=="false"&&r==="TreeTable"){i.push(de(a,{execute:t.handlerProvider.getPasteHandler(true),command:"Paste::ContextMenu",enabled:c?.enabledForContextMenu}))}const u=e.actions.find(e=>e.key===Fe.Delete);if(u?.isTemplated==="true"){i.push(de(a,{execute:t.handlerProvider.getDeleteButtonPressHandler(true),visible:u.visible,enabled:u.enabledForContextMenu,command:"DeleteEntry::ContextMenu"}))}const p=e.actions.find(e=>e.key===Fe.MoveUp);const f=e.actions.find(e=>e.key===Fe.MoveDown);if(p&&f&&p.visible!=="false"&&f.visible!=="false"&&r==="TreeTable"){i.push(de(a,{execute:t.handlerProvider.getMoveUpDownHandler(true,true),command:"TableMoveElementUp::ContextMenu",enabled:p.enabledForContextMenu}));i.push(de(a,{execute:t.handlerProvider.getMoveUpDownHandler(false,true),command:"TableMoveElementDown::ContextMenu",enabled:f.enabledForContextMenu}))}for(const a in e.commandActions){const r=e.commandActions[a];const l=ct(a,r,true,t,o,e,n);if(l){i.push(l)}}return i.length>0?i:undefined}function ot(e,t,n,a){if(e==="Control"){return de(q,{id:we([t,"VM"]),showSetAsDefault:true,select:a.variantSelected,headerLevel:n,save:a.variantSaved,for:[t]})}return undefined}function it(e){const t=e.tableDefinition.control.filters?.quickFilters;if(t){return de(I,{id:we([e.contentId,"QuickFilterContainer"]),paths:t.paths.map(e=>e.annotationPath),showCounts:t.showCounts})}return undefined}function rt(e){const t=e.contextObjectPath;let n;if(e.tableDefinition.control.disableCopyToClipboard){n=ze(false)}else if(e.tableDefinition.control.type==="TreeTable"){if(t.startingEntitySet===t.targetEntitySet){n=ze(t.startingEntitySet.annotations.Common?.DraftRoot===undefined)}else{n=He(Se.IsEditable)}}else{n=ze(true)}return de(V,{visible:n})}function lt(e){const t=e.tableDefinition.control.type;if(!e.tableDefinition.control.disableCopyToClipboard&&t&&["ResponsiveTable","GridTable","TreeTable"].includes(t)){return de(H,{enabled:je(t!=="TreeTable",He(Qe(e.contextObjectPath,e.tableDefinition))),rangeLimit:200})}return undefined}function st(e,t){if(e.creationMode?.name===Ne.CreationRow){const n=e.tableDefinition.actions.find(e=>e.key===Fe.CreationRow);if(n?.isTemplated){const a=ye([{key:"disableAddRowButtonForEmptyData",value:e.tableDefinition.control.disableAddRowButtonForEmptyData},{key:"customValidationFunction",value:e.tableDefinition.control.customValidationFunction}]);return de(Z,{id:we([e.contentId,Ne.CreationRow]),visible:n.visible,apply:t.getCreateButtonPressHandler(false,true),applyEnabled:n.enabled,children:{customData:a}})}}return undefined}function dt(e,t){if(e.tableDefinition.control.type==="TreeTable"){return de(ee,{enabled:qe(Qe(e.contextObjectPath,e.tableDefinition)),dropPosition:e.tableDefinition.annotation.allowDropBetweenNodes===true?"OnOrBetween":"On",draggable:true,droppable:true,dragStart:t.dragStartDocument,dragEnter:t.dragEnterDocument,drop:t.dropDocument})}return undefined}function ct(e,t,n,a,o,i,r){const l=t.annotationPath?a.convertedMetadata.resolvePath(t.annotationPath).target:undefined;const s=t.annotationPath?g.getActionContext(a.metaModel.createBindingContext(t.annotationPath+"/Action")):undefined;const d=s?a.metaModel.createBindingContext(s):undefined;const c=d?Le(d,o):undefined;const u=l?.ActionTarget?.isBound;const p=l?.ActionTarget?.annotations?.Core?.OperationAvailable?.valueOf()!==false;const f=t.type==="ForAction"?u!==true||p:true;const b=!n?t.enabled:t.enabledForContextMenu;if(f&&(!n||A.isActionShownInContextMenu(t,r))){const r=!n?t.command:t.command+"::ContextMenu";const d={onExecuteAction:a.handlerProvider.getDataFieldForActionButtonPressHandler(l,t,undefined,n),onExecuteIBN:a.handlerProvider.getDataFieldForIBNPressHandler(t,false),onExecuteManifest:a.handlerProvider.getManifestActionPressHandler(t,n),isIBNEnabled:b??A.isDataFieldForIBNEnabled({collection:o,tableDefinition:i},l,!!l.RequiresContext,l.NavigationAvailable,n),isActionEnabled:b??A.isDataFieldForActionEnabled(i,l.Action,!!u,s,t.enableOnSelect,c?.targetEntityType,n),isEnabled:b};return De(r,i.commandActions[e],d)}return undefined}function ut(e){const t=e.control.additionalRequiredModules??[];return`{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'${t.map((e,t)=>`, customModule${t+1}: '${e}'`).join("")}}`}function pt(e,t,n,a){if(t.isDraftIndicator){return de(Y,{id:we([e,"C","computedColumns","draftStatus"]),headerVisible:false,propertyKey:t.name,header:t.label,tooltip:t.tooltip,width:"3em",children:de(y,{draftIndicatorType:fe.IconOnly,contextPath:n.getPath(),usedInTable:true,usedInAnalyticalTable:a})})}else if(t.isSituationsIndicator){return de(Y,{id:we([e,"C","computedColumns","situationsIndicator"]),propertyKey:t.name,header:t.label,tooltip:t.tooltip,headerVisible:false,width:"4em",children:de(M,{contextPath:n.getPath()})})}else{return undefined}}ue.getComputedColumn=pt;function ft(e,t,n){return de(Y,{id:we([e,"C",t.id]),propertyKey:t.name,width:t.width,hAlign:t.horizontalAlign,header:t.header,tooltip:t.tooltip,required:n?undefined:t.required,children:{extendedSettings:de(ne,{importance:t.importance}),template:t.template}})}ue.getSlotColumn=ft;function bt(e,t){if(e.getObject("@com.sap.vocabularies.Common.v1.DraftRoot")&&e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return de(o,{children:de(y,{draftIndicatorType:fe.IconAndText,contextPath:e.getPath(),visible:Ce(t.formatOptions?.fieldGroupName),ariaLabelledBy:["this>ariaLabelledBy"]})})}return undefined}ue.getDraftIndicator=bt;function mt(e,t){if(e.getObject("./@com.sap.vocabularies.Common.v1.SemanticKey")&&t.formatOptions?.fieldGroupDraftIndicatorPropertyPath){return de(R,{visible:t.formatOptions?.showErrorObjectStatus,class:"sapUiSmallMarginBottom",text:"{sap.fe.i18n>Contains_Errors}",state:"Error"})}return undefined}function gt(e){const t=Le(e).targetObject;if(ke(t)&&t.Value?.$target?.type==="Edm.TimeOfDay"){return"short"}if(Be(t)&&Re(t)&&t.Target.$target?.Value.$target.type==="Edm.TimeOfDay"){return"short"}}function ht(e,t,n,a,o,i,r,l,s,d){if(a?.name==="CreationRow"){let a;switch(o){case true:a="Display";break;case false:a="Editable";break;default:a=undefined;break}const c=r.getObject();const u={fieldMode:l,textLinesEdit:t.formatOptions?.textLinesEdit,textMaxLines:t.formatOptions?.textMaxLines===undefined?undefined:t.formatOptions?.textMaxLines,textMaxLength:t.formatOptions?.textMaxLength,textMaxCharactersDisplay:t.formatOptions?.textMaxCharactersDisplay,textExpandBehaviorDisplay:t.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",semanticKeyStyle:n==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:t.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:t.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:t.formatOptions?.fieldGroupName,showIconUrl:c?.Inline&&!!c?.IconUrl,ignoreNavigationAvailable:s??false,isCurrencyOrUnitAligned:true,dateTimeStyle:gt(r)};return de(h,{"core:require":"{TableRuntime: 'sap/fe/macros/table/TableRuntime'}",vhIdPrefix:we([e,"TableValueHelp"]),editMode:a,contextPath:i.getPath(),metaPath:r.getPath(),wrap:n==="ResponsiveTable",change:d.fieldChangeInCreationRow,showErrorObjectStatus:t.formatOptions?.showErrorObjectStatus,children:{formatOptions:de(se,{...u})}})}return undefined}function vt(e,t,n,a,o,i,r,l,s,d,c,u,p,f,b,m){const g=a.getObject();let v;switch(l){case true:v="Display";break;case false:v="Editable";break;default:v=undefined}if(t.control.enableUploadPlugin&&n.typeConfig?.className==="Edm.Stream"){v="Display"}const C={fieldMode:d,textLinesEdit:n.formatOptions?.textLinesEdit,textMaxLines:n.formatOptions?.textMaxLines===undefined?undefined:n.formatOptions?.textMaxLines,textMaxCharactersDisplay:n.formatOptions?.textMaxCharactersDisplay,textMaxLength:n.formatOptions?.textMaxLength,textExpandBehaviorDisplay:n.formatOptions?.textExpandBehaviorDisplay,textAlignMode:"Table",showEmptyIndicator:f,semanticKeyStyle:r==="ResponsiveTable"?"ObjectIdentifier":"Label",hasDraftIndicator:n.formatOptions?.hasDraftIndicator,fieldGroupDraftIndicatorPropertyPath:n.formatOptions?.fieldGroupDraftIndicatorPropertyPath,fieldGroupName:n.formatOptions?.fieldGroupName,showIconUrl:g?.Inline&&!!g?.IconUrl,ignoreNavigationAvailable:i??false,isAnalytics:i,forInlineCreationRows:s?.name==="InlineCreationRows",isCurrencyOrUnitAligned:true,compactSemanticKey:c===undefined?undefined:`${c}`,dateTimeStyle:gt(a),isAnalyticalAggregatedRow:t.control.analyticalConfiguration?.aggregationOnLeafLevel};return de(h,{vhIdPrefix:we([e,"TableValueHelp"]),editMode:v,contextPath:o.getPath(),metaPath:a.getPath(),textAlign:u,wrap:r==="ResponsiveTable",class:b,liveChange:m.fieldLiveChange,ariaLabelledBy:p?[p]:undefined,navigateAfterAction:n.isNavigable,showErrorObjectStatus:n.formatOptions?.showErrorObjectStatus,children:{formatOptions:de(se,{...C})}})}ue.getMacroFieldTemplate=vt;function Ct(e,t,n,a,o,i,r){let l;let s;const d=t.tableDefinition;const c=t.tableDefinition.enableAnalytics;const u=t.tableDefinition.control.type;const p=t.readOnly;const f=t.creationMode;const b=t.fieldMode;const m=t.tableDefinition.control.isCompactType;const h=a.targetObject;if(Ie(h,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&(Ae(h.Target.$target,"com.sap.vocabularies.UI.v1.Chart")||Ae(h.Target.$target,"com.sap.vocabularies.UI.v1.PresentationVariant"))){const t=(u==="ResponsiveTable"?!n.settings?.showMicroChartLabel:undefined)??true;const a=u==="ResponsiveTable"?n.settings?.microChartSize??"XS":"XS";let r=i.getModel().createBindingContext(i.getPath(o.getObject("Target/$AnnotationPath")));r=i.getModel().createBindingContext(g.getNavigationContext(r));l=de(le,{id:we([e,h]),contextPath:r.getPath(),metaPath:o.getModel().createBindingContext(o.getPath()+"/Target/$AnnotationPath").getPath(),showOnlyChart:t,size:a??"XS",hideOnNoData:true,isAnalytics:c})}else if(Ie(h,"com.sap.vocabularies.UI.v1.DataField")&&Pe(Me(a,h.Value.path))){const e=qe($e(je(p===true,Ke(_e(Se.IsInactive),f?.name==="InlineCreationRows")),ze(true),$e(Ge(b,"nowrapper"),ze(true),ze(undefined))));l=de(v,{contextPath:i.getPath(),metaPath:o.getPath(),readOnly:e})}else if(Ie(h,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")&&Ae(h.Target.$target,"com.sap.vocabularies.UI.v1.FieldGroup")){const t=h.Target.$target;const s=o.getModel().createBindingContext(o.getPath()+"/Target/$AnnotationPath/Data");const g=t.Data.length-1;const v=t.Data.map((t,o)=>{const l=s.getModel().createBindingContext(s.getPath()+"/"+o);const h=Le(l);const v=T.computeLabelText(l.getObject(),{context:l});if(n.showDataFieldsLabel&&!!v){const t=G.getResourceBundleFor("sap.fe.macros");return ce(S,{visible:ve(h),alignItems:T.buildExpressionForAlignItems(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember")),children:[de(F,{id:A.getFieldGroupLabelStableId(e,h),text:t.getText("HEADER_FORM_LABEL",[v]),class:"sapUiTinyMarginEnd",visible:ve(h)}),de(U,{children:{layoutData:de(E,{growFactor:"1"}),items:vt(e,d,n,l,i,c,u,p,f,undefined,m,"Left",`${A.getColumnStableId(e,a)} ${A.getFieldGroupLabelStableId(e,h)}`,true,A.getMarginClass(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),o===g),r)}})]})}else{return vt(e,d,n,l,i,c,u,p,f,b,m,undefined,A.getColumnStableId(e,a),undefined,A.getMarginClass(l.getObject("Target/$AnnotationPath/Visualization/$EnumMember"),o===g),r)}});const C=bt(i,n);if(C){v.push(C)}const y=mt(i,n);if(y){v.push(y)}l=de(U,{visible:A.getVBoxVisibility(s.getObject(),n.FieldGroupHiddenExpressions,o.getObject()),children:{items:v}})}else{l=vt(e,d,n,o,i,c,u,p,f,b,m,undefined,undefined,false,undefined,r);s=ht(e,n,u,f,p,i,o,b,c,r)}return{template:l,creationTemplate:s}}function yt(e,t,a,o,i){let r=o.getModel().createBindingContext(a.annotationPath);if(!r){return undefined}r=o.getModel().createBindingContext(T.getDataFieldDefault(r));const l=Le(r,o);const s=r?.getObject?.()??{};const d=Ct(e,t,a,l,r,o,i);const c=t.enableAutoColumnWidth??t.tableDefinition.control.enableAutoColumnWidth;const u=t.tableDefinition.control.widthIncludingColumnHeader;const p=t.tableDefinition.control.type;return de(Y,{id:A.getColumnStableId(e,l),width:!n.isSmallDevice()||a.width?A.getColumnWidth({enableAutoColumnWidth:c,widthIncludingColumnHeader:u,tableType:p},a,s,A.getTextOnActionField(s,{context:r}),l,true,{title:r.getObject("Target/$AnnotationPath/Title")||"",description:r.getObject("Target/$AnnotationPath/Title")||""}):undefined,minWidth:n.isSmallDevice()?A.getColumnWidth({enableAutoColumnWidth:c,widthIncludingColumnHeader:u,tableType:p},a,s,A.getTextOnActionField(s,{context:r}),l,false,{title:r.getObject("Target/$AnnotationPath/Title")||"",description:r.getObject("Target/$AnnotationPath/Description")||""}):undefined,header:a.label||a.name,propertyKey:a.name,hAlign:a.horizontalAlign||T.getColumnAlignment(s,{collection:o}),headerVisible:A.setHeaderLabelVisibility(s,r.getObject("Target/$AnnotationPath/Data")),tooltip:a.tooltip,required:t.readOnly?undefined:a.required,children:{customData:Te("showDataFieldsLabel",a.showDataFieldsLabel),extendedSettings:de(ne,{importance:a.importance}),template:d.template,creationTemplate:d.creationTemplate}})}ue.getColumnTemplate=yt;function Tt(t,n,a){const o=t.contentId;return t.tableDefinition.columns.map(i=>{if(i.availability==="Default"&&i.type==="Default"){e.error("Custom columns defined in the manifest are not supported when using a table building block.");throw new Error("Custom columns defined in the manifest are not supported when using a table building block.")}else if(i.availability==="Default"&&i.type==="Annotation"){return yt(o,t,i,n,a)}else if(i.availability==="Default"&&i.type==="Slot"){return ft(o,i,t.readOnly)}else if(i.availability==="Default"&&i.type==="Computed"){return pt(o,i,n,t.tableDefinition.enableAnalytics)}return undefined}).filter(e=>e!==undefined)}function Dt(){return"sap/fe/macros/table/designtime/Table.designtime"}function Pt(t){switch(t){case"Aggregate":return X.Aggregate;case"Sort":return X.Sort;case"Column":return X.Column;case"Filter":return X.Filter;case"Group":return X.Group;default:e.error("Unknown P13n mode: "+t);return X.Column}}function xt(e,t){const n=e.tableDefinition.annotation?.row?.navigationInfo;const a=n?.routePath;let o=false;if(a){const e=t.appComponent.getRoutingService()._getTargetInformation(a);o=e?.options?.settings?.openInEditMode??false}const i=e.tableDefinition.control.type;const r=e.contextObjectPath;const l=(i==="TreeTable"||e.tableDefinition.enableAnalytics===true)&&r.startingEntitySet===r.targetEntitySet&&c.isObjectPathDraftSupported(r);const s=A.getDelegate(e.tableDefinition,e.isAlp===true,e.tableDefinition.annotation.entityName,l);const d=e.headerVisible??e.tableDefinition.control.headerVisible;const u=e.header??e.tableDefinition.annotation.title;const p=he(u??"",e.tabTitle??"",!!d);const f=e.tableDefinition.actions.find(e=>e.key===Fe.Paste);const b=t.convertedMetadata.resolvePath(e.tableDefinition.annotation.collection).target;const m=i==="TreeTable"?t.handlerProvider.tableContextChange:undefined;const g=A.getUiLineItemObject(t.metaPath,t.convertedMetadata);const h=e.tableDefinition.annotation.navigationPath;if(e.tableDefinition.annotation.collection.startsWith("/")&&Oe(r.startingEntitySet)){e.tableDefinition.annotation.collection=h}const v=t.metaModel.createBindingContext(e.tableDefinition.annotation.collection);const C=b.annotations.Common?.DraftRoot;const y=e.variantManagement??"None";const T=Dt();let D;if(e.overrideRowPress){D=Q.Navigation}D??=e.tableDefinition.annotation.row?.actionType==="Navigation"?Q.Navigation:undefined;const x=e.tableDefinition.actions.find(e=>e.key===Fe.Create)?.visible||true;const M=e.tableDefinition.annotation.updatablePropertyPath;let O;switch(e.personalization){case"false":O=undefined;break;case"true":O=[X.Sort,X.Column,X.Filter];if(i==="ResponsiveTable"||e.tableDefinition.enableAnalytics===true){O=[...O,X.Group]}break;case undefined:O=e.tableDefinition.annotation.p13nMode?.map(e=>Pt(e));break;default:if(i==="ResponsiveTable"||e.tableDefinition.enableAnalytics===true){O=e.personalization.split(",").map(e=>Pt(e.trim()))}else{const t=e.personalization.split(",").filter(e=>Pt(e.trim())!==X.Group);O=t.length?t:undefined}}const I=P.getMultiSelectDisabledActions(g);const w=[{key:"kind",value:b._type},{key:"navigationPath",value:h},{key:"enableAnalytics",value:e.tableDefinition.enableAnalytics},{key:"creationMode",value:e.creationMode?.name},{key:"inlineCreationRowCount",value:e.tableDefinition.control.inlineCreationRowCount},{key:"showCreate",value:x},{key:"createAtEnd",value:e.creationMode?.createAtEnd},{key:"displayModePropertyBinding",value:e.readOnly},{key:"tableType",value:i},{key:"targetCollectionPath",value:v.getPath()},{key:"entityType",value:v.getPath()+"/"},{key:"metaPath",value:v.getPath()},{key:"hiddenFilters",value:e.tableDefinition.control.filters?.hiddenFilters},{key:"requestGroupId",value:"$auto.Workers"},{key:"segmentedButtonId",value:we([e.contentId,"SegmentedButton","TemplateContentView"])},{key:"disableCopyToClipboard",value:e.tableDefinition.control.disableCopyToClipboard},{key:"draft",value:C},{key:"navigationAvailableMap",value:A.getNavigationAvailableMap(g)},{key:"actionsMultiselectDisabled",value:I.length>0?I.join(","):undefined},{key:"updatablePropertyPath",value:M||""},{key:"exportRequestSize",value:e.tableDefinition.control.exportRequestSize}];return de(K,{"core:require":ut(e.tableDefinition),"fl:flexibility":e["fl:flexibility"],sortConditions:e.tableDefinition.annotation.sortConditions,groupConditions:e.tableDefinition.annotation.groupConditions,aggregateConditions:e.tableDefinition.annotation.aggregateConditions,"dt:designtime":T,id:e.contentId,busyIndicatorDelay:0,enableExport:e.tableDefinition.control.enableExport,delegate:JSON.parse(s),rowPress:i==="ResponsiveTable"?t.handlerProvider.rowPress:undefined,beforeOpenContextMenu:t.handlerProvider.beforeOpenContextMenu,autoBindOnInit:e.useBasicSearch||!e.filterBar,selectionMode:e.tableDefinition.annotation.selectionMode||"None",selectionChange:t.handlerProvider.selectionChange,showRowCount:e.tableDefinition.control.showRowCount,header:u,headerVisible:p,headerLevel:e.headerLevel,headerStyle:e.headerStyle,threshold:e.tableDefinition.annotation.threshold,p13nMode:O,paste:t.handlerProvider.getPasteHandler(false),beforeExport:t.handlerProvider.beforeExport,class:e.tableDefinition.control.useCondensedTableLayout===true?"sapUiSizeCondensed":undefined,multiSelectMode:e.tableDefinition.control.multiSelectMode,showPasteButton:i==="TreeTable"?false:f?.visible,enablePaste:i==="TreeTable"?false:f?.enabled,modelContextChange:m,children:{customData:ye(w),dataStateIndicator:Xe(t.handlerProvider),type:We(e.tableDefinition,v,i,e.tableDefinition.control.selectionLimit),dependents:Je(e,t,y,v),actions:Ye(e,t,v,b),rowSettings:Ze(e.tableDefinition,D,i,t.handlerProvider),contextMenu:et(e,t,b,D,v,o),columns:Tt(e,v,t.handlerProvider),dragDropConfig:dt(e,t.handlerProvider),creationRow:st(e,t.handlerProvider),variant:ot(y,e.contentId,e.headerLevel,t.handlerProvider),quickFilter:it(e),copyProvider:rt(e),cellSelector:lt(e)}})}ue.getMDCTableTemplate=xt;return ue},false);
//# sourceMappingURL=MdcTableTemplate.js.map