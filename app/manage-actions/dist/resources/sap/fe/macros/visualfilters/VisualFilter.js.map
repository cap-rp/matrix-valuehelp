{"version":3,"file":"VisualFilter.js","names":["VisualFilter","_dec","defineUI5Class","_dec2","implementInterface","_dec3","property","type","_dec4","_dec5","event","_dec6","required","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_class","_class2","_BuildingBlock","props","others","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_exports","_inheritsLoose","_proto","prototype","onMetadataAvailable","_ownerComponent","groupId","path","metaPath","owner","_getOwner","contextPath","preprocessorContext","fullContextPath","contextObjectPath","getDataModelObjectForMetaPath","_resolvedContextPath","endsWith","metaModel","getMetaModel","diagnostics","getAppComponent","getDiagnostics","viewData","getRootController","getView","getViewData","converterContext","ConverterContext","createConverterContextForMacro","startingEntitySet","name","merge","contextLocation","ManifestWrapper","aggregationHelper","AggregationHelper","getEntityType","customAggregates","getCustomAggregateDefinitions","pvAnnotation","targetObject","measure","visualizations","Visualizations","getChartAnnotation","aggregations","custAggMeasure","chartAnnotation","Measures","length","filter","custAgg","qualifier","value","getAggregatedProperties","DynamicMeasures","Log","warning","getConverterContextFor","getAbsoluteAnnotationPath","getDataModelObjectPath","Name","toString","getAggregatedProperty","some","customAggregate","defaultSelectionVariant","getDefaultSelectionVariant","checkSelectionVariant","aggregation","getAggregateProperties","aggregateProperties","propertyAnnotations","$target","annotations","aggregatablePropertyAnnotations","AggregatableProperty","checkIfUOMHasCustomAggregate","propertyHidden","UI","Hidden","hiddenMeasure","valueOf","chartType","ChartType","showValueHelpButton","getshowValueHelpButton","draftSupported","ModelHelper","isDraftSupported","errorMessage","getErrorMessage","chartMeasure","measureDimensionTitle","InteractiveChartHelper","getMeasureDimensionTitle","collection","toolTip","getToolTip","renderLineChart","UoMVisibility","getUoMVisiblity","showError","scaleUoMTitle","getScaleUoMTitle","sortOrder","SortOrder","filterCountBinding","getfilterCountBinding","viewId","getPageController","getId","_contentId","selectionVariant","selectionVariantAnnotation","undefined","content","createContent","measures","aggregatablePropertyMeasures","UOM","getUoM","UoMHasCustomAggregate","visualization","sAnnotationPath","getEntityTypeAnnotation","annotation","setShowValueHelp","bShowValueHelp","isA","getItems","oVisualFilterControl","getVisualFilterControl","getContent","oInnerControl","setVisible","setProperty","setValueHelpIconSrc","sIconSrc","setIcon","validChartType","errorMessageTitle","getTranslatedText","sDimensionType","Dimensions","isValueListWithFixedValues","SelectOptions","multipleSelectionAllowed","selectOption","PropertyName","Ranges","error","matchedAggregate","aggregate","ISOCurrency","unit","Unit","getRequired","_jsx","Label","text","width","children","layoutData","OverflowToolbarLayoutData","priority","getTitle","Title","id","generate","tooltip","titleStyle","level","class","getUoMTitle","showErrorExpression","visible","getToolBarSpacer","ToolbarSpacer","getValueHelp","Button","ariaHasPopup","enabled","press","VisualFilterRuntime","fireValueHelp","customData","CustomData","getToolbar","OverflowToolbar","style","_jsxs","_Fragment","cozyMode","document","body","classList","contains","overallHeight","chartHeight","vfControlId","VisualFilterControl","height","items","VBox","getVisualFilterChart","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./VisualFilter.tsx"],"sourcesContent":["import type { AnnotationPath, PathAnnotationExpression } from \"@sap-ux/vocabularies-types\";\nimport type { CustomAggregate } from \"@sap-ux/vocabularies-types/vocabularies/Aggregation\";\nimport type { AggregatedProperty, AggregatedPropertyType } from \"@sap-ux/vocabularies-types/vocabularies/Analytics\";\nimport { SortOrderType } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport type { PropertyAnnotations } from \"@sap-ux/vocabularies-types/vocabularies/Edm_Types\";\nimport type { PropertyAnnotations_Measures } from \"@sap-ux/vocabularies-types/vocabularies/Measures_Edm\";\nimport type { Chart, DataPoint, LineItem, PresentationVariant, SelectionVariant } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport { defineUI5Class, event, implementInterface, property, type PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport { BaseManifestSettings } from \"sap/fe/core/converters/ManifestSettings\";\nimport ManifestWrapper from \"sap/fe/core/converters/ManifestWrapper\";\nimport { PageContextPathTarget } from \"sap/fe/core/converters/TemplateConverter\";\nimport { getDefaultSelectionVariant } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type { ParameterType } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { AggregationHelper } from \"sap/fe/core/converters/helpers/Aggregation\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport { ViewData } from \"sap/fe/core/services/TemplatedViewServiceFactory\";\nimport Diagnostics from \"sap/fe/core/support/Diagnostics\";\nimport { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport Button from \"sap/m/Button\";\nimport Label from \"sap/m/Label\";\nimport OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport OverflowToolbarLayoutData from \"sap/m/OverflowToolbarLayoutData\";\nimport Title from \"sap/m/Title\";\nimport ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport VBox from \"sap/m/VBox\";\nimport type Control from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport { $ControlSettings } from \"sap/ui/mdc/Control\";\nimport ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport { default as VisualFilterControl } from \"../controls/filterbar/VisualFilter\";\nimport InteractiveChartHelper from \"./InteractiveChartHelper\";\nimport VisualFilterRuntime from \"./VisualFilterRuntime\";\nimport { getVisualFilterChart } from \"./fragments/InteractiveCharts\";\n/**\n * Building block for creating a VisualFilter based on the metadata provided by OData V4.\n * <br>\n * A Chart annotation is required to bring up an interactive chart\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:VisualFilter\n * collection=\"{entitySet&gt;}\"\n * chartAnnotation=\"{chartAnnotation&gt;}\"\n * id=\"someID\"\n * groupId=\"someGroupID\"\n * title=\"some Title\"\n * /&gt;\n * </pre>\n * @private\n * @experimental\n */\n@defineUI5Class(\"sap.fe.macros.visualfilters.VisualFilter\")\nexport default class VisualFilter extends BuildingBlock<VisualFilter> {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tshowValueHelp!: boolean;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tvalueHelpIconSrc!: string;\n\n\t@event()\n\tvalueHelpRequest!: Function;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tid!: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\ttitle = \"\";\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tpublic contextPath!: string;\n\n\t@property({\n\t\ttype: \"string\",\n\t\trequired: true\n\t})\n\tpublic metaPath!: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\toutParameter?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tvaluelistProperty?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tselectionVariantAnnotation?: string;\n\n\t@property({\n\t\ttype: \"array\"\n\t})\n\tinParameters?: ParameterType[];\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tmultipleSelectionAllowed?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\trequired?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tshowOverlayInitially?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\trenderLineChart?: boolean;\n\n\t@property({\n\t\ttype: \"array\"\n\t})\n\trequiredProperties?: string[];\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tfilterBarEntityType?: string;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tshowError?: boolean;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tchartMeasure?: string;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tUoMHasCustomAggregate?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tshowValueHelpButton?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tcustomAggregate = false;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tgroupId = \"$auto.visualFilters\";\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\terrorMessageTitle?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\terrorMessage?: string;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\t_contentId?: string;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tdraftSupported?: boolean;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tisValueListWithFixedValues: boolean | undefined;\n\n\t/******************************************************\n\t * Internal Properties\n\t * ***************************************************/\n\n\taggregateProperties: AggregatedPropertyType | undefined;\n\n\tchartType: string | undefined;\n\n\tpath: string | undefined;\n\n\tmeasureDimensionTitle: string | undefined;\n\n\ttoolTip: string | undefined;\n\n\tUoMVisibility: boolean | undefined;\n\n\tscaleUoMTitle: string | undefined;\n\n\tfilterCountBinding: string | undefined;\n\n\tchartAnnotation?: Chart;\n\t_resolvedContextPath?: string;\n\n\tsortOrder?: SortOrderType[];\n\tcollection?: DataModelObjectPath<PageContextPathTarget>;\n\tselectionVariant: SelectionVariant | undefined;\n\n\tconstructor(props: $ControlSettings & PropertiesOf<VisualFilterControl>, others?: $ControlSettings) {\n\t\tsuper(props, others);\n\t}\n\n\tpublic onMetadataAvailable(_ownerComponent: TemplateComponent): void {\n\t\tthis.groupId = \"$auto.visualFilters\";\n\t\tthis.path = this.metaPath;\n\t\tconst owner = this._getOwner();\n\t\tthis.contextPath = this.contextPath ?? owner?.preprocessorContext?.fullContextPath;\n\t\tconst contextObjectPath = this.getDataModelObjectForMetaPath<PresentationVariant>(this.metaPath, this.contextPath);\n\t\tif (this.contextPath) {\n\t\t\tthis._resolvedContextPath = this.contextPath.endsWith(\"/\") ? this.contextPath : this.contextPath + \"/\";\n\t\t}\n\t\tconst metaModel = this.getMetaModel() as ODataMetaModel;\n\n\t\tconst diagnostics = this.getAppComponent()?.getDiagnostics() ?? ({} as Diagnostics);\n\t\tconst viewData =\n\t\t\tthis._getOwner()?.getRootController()?.getView().getViewData() ?? (this._getOwner()?.getViewData() as unknown as ViewData);\n\t\tconst converterContext = ConverterContext.createConverterContextForMacro(\n\t\t\tcontextObjectPath?.startingEntitySet?.name as string,\n\t\t\tmetaModel,\n\t\t\tdiagnostics,\n\t\t\tmerge,\n\t\t\tcontextObjectPath?.contextLocation,\n\t\t\tnew ManifestWrapper(viewData as BaseManifestSettings, this.getAppComponent())\n\t\t);\n\t\tconst aggregationHelper = new AggregationHelper(converterContext.getEntityType(), converterContext);\n\t\tconst customAggregates = aggregationHelper.getCustomAggregateDefinitions();\n\t\tconst pvAnnotation = contextObjectPath?.targetObject;\n\t\tlet measure: string | undefined;\n\t\tconst visualizations = pvAnnotation && pvAnnotation.Visualizations;\n\t\tthis.getChartAnnotation(visualizations, converterContext);\n\t\tlet aggregations: AggregatedPropertyType[] = [],\n\t\t\tcustAggMeasure = [];\n\n\t\tif (this.chartAnnotation?.Measures?.length) {\n\t\t\tcustAggMeasure = customAggregates.filter((custAgg) => {\n\t\t\t\treturn custAgg.qualifier === this.chartAnnotation?.Measures[0].value;\n\t\t\t});\n\t\t\tmeasure = custAggMeasure.length > 0 ? custAggMeasure[0].qualifier : this.chartAnnotation.Measures[0].value;\n\t\t\taggregations = aggregationHelper.getAggregatedProperties()[0];\n\t\t}\n\t\t// if there are AggregatedProperty objects but no dynamic measures, rather there are transformation aggregates found in measures\n\t\tif (\n\t\t\taggregations &&\n\t\t\taggregations.length > 0 &&\n\t\t\t!this.chartAnnotation?.DynamicMeasures &&\n\t\t\tcustAggMeasure.length === 0 &&\n\t\t\tthis.chartAnnotation?.Measures &&\n\t\t\tthis.chartAnnotation?.Measures.length > 0\n\t\t) {\n\t\t\tLog.warning(\n\t\t\t\t\"The transformational aggregate measures are configured as Chart.Measures but should be configured as Chart.DynamicMeasures instead. Please check the SAP Help documentation and correct the configuration accordingly.\"\n\t\t\t);\n\t\t}\n\t\t//if the chart has dynamic measures, but with no other custom aggregate measures then consider the dynamic measures\n\t\tif (this.chartAnnotation?.DynamicMeasures) {\n\t\t\tif (custAggMeasure.length === 0) {\n\t\t\t\tmeasure = converterContext\n\t\t\t\t\t.getConverterContextFor<AggregatedProperty>(\n\t\t\t\t\t\tconverterContext.getAbsoluteAnnotationPath(this.chartAnnotation.DynamicMeasures[0].value)\n\t\t\t\t\t)\n\t\t\t\t\t.getDataModelObjectPath()\n\t\t\t\t\t.targetObject?.Name.toString();\n\t\t\t\taggregations = aggregationHelper.getAggregatedProperty();\n\t\t\t} else {\n\t\t\t\tLog.warning(\n\t\t\t\t\t\"The dynamic measures have been ignored as visual filters can deal with only 1 measure and the first (custom aggregate) measure defined under Chart.Measures is considered.\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\tcustomAggregates.some(function (custAgg) {\n\t\t\t\treturn custAgg.qualifier === measure;\n\t\t\t})\n\t\t) {\n\t\t\tthis.customAggregate = true;\n\t\t}\n\n\t\tconst defaultSelectionVariant = getDefaultSelectionVariant(converterContext.getEntityType());\n\t\tthis.checkSelectionVariant(defaultSelectionVariant);\n\t\tconst aggregation = this.getAggregateProperties(aggregations, measure);\n\t\tif (aggregation) {\n\t\t\tthis.aggregateProperties = aggregation;\n\t\t}\n\t\tconst propertyAnnotations =\n\t\t\tvisualizations && this.chartAnnotation?.Measures && this.chartAnnotation?.Measures[0]?.$target?.annotations;\n\t\tconst aggregatablePropertyAnnotations = aggregation?.AggregatableProperty?.$target?.annotations;\n\t\tthis.checkIfUOMHasCustomAggregate(customAggregates, propertyAnnotations, aggregatablePropertyAnnotations);\n\t\tconst propertyHidden = propertyAnnotations?.UI?.Hidden;\n\t\tconst hiddenMeasure = propertyHidden?.valueOf();\n\t\tconst chartType = this.chartAnnotation?.ChartType;\n\t\tthis.chartType = chartType;\n\t\tthis.showValueHelpButton = this.getshowValueHelpButton(chartType, hiddenMeasure);\n\t\tthis.draftSupported = ModelHelper.isDraftSupported(metaModel, this.contextPath);\n\t\t/**\n\t\t * If the measure of the chart is marked as 'hidden', or if the chart type is invalid, or if the data type for the line chart is invalid,\n\t\t * the call is made to the InteractiveChartWithError fragment (using error-message related APIs, but avoiding batch calls)\n\t\t */\n\t\tthis.errorMessage = this.getErrorMessage(hiddenMeasure, measure);\n\t\tthis.chartMeasure = measure;\n\t\tthis.measureDimensionTitle = InteractiveChartHelper.getMeasureDimensionTitle(\n\t\t\tthis.chartAnnotation,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tconst collection = this.getDataModelObjectForMetaPath<PageContextPathTarget>(this.contextPath);\n\t\tthis.toolTip = InteractiveChartHelper.getToolTip(\n\t\t\tthis.chartAnnotation,\n\t\t\tcollection,\n\t\t\tthis.path,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties,\n\t\t\tthis.renderLineChart\n\t\t);\n\t\tthis.UoMVisibility = InteractiveChartHelper.getUoMVisiblity(this.chartAnnotation, this.showError);\n\t\tthis.scaleUoMTitle = InteractiveChartHelper.getScaleUoMTitle(\n\t\t\tthis.chartAnnotation,\n\t\t\tcollection,\n\t\t\tthis.path,\n\t\t\tthis.customAggregate,\n\t\t\tthis.aggregateProperties\n\t\t);\n\t\tthis.collection = collection;\n\t\tthis.sortOrder = pvAnnotation?.SortOrder;\n\t\tthis.filterCountBinding = InteractiveChartHelper.getfilterCountBinding(this.chartAnnotation);\n\t\tconst viewId = this.getPageController()?.getView().getId();\n\t\tif (this._contentId) {\n\t\t\tthis._contentId = `${viewId}--${this._contentId}`;\n\t\t}\n\t\tthis.selectionVariant = this.selectionVariantAnnotation\n\t\t\t? this.getDataModelObjectForMetaPath<SelectionVariant>(this.selectionVariantAnnotation)?.targetObject\n\t\t\t: undefined;\n\t\tthis.content = this.createContent();\n\t}\n\n\t/**\n\t * Check if the UoM has custom aggregate\n\t * @param customAggregates - Custom aggregates\n\t * @param propertyAnnotations - Property annotations\n\t * @param aggregatablePropertyAnnotations - Aggregatable property annotations\n\t */\n\tcheckIfUOMHasCustomAggregate(\n\t\tcustomAggregates: Array<CustomAggregate>,\n\t\tpropertyAnnotations: PropertyAnnotations | undefined,\n\t\taggregatablePropertyAnnotations?: PropertyAnnotations\n\t): void {\n\t\tconst measures = propertyAnnotations?.Measures;\n\t\tconst aggregatablePropertyMeasures = aggregatablePropertyAnnotations?.Measures;\n\t\tconst UOM = this.getUoM(measures, aggregatablePropertyMeasures);\n\t\tif (\n\t\t\tUOM &&\n\t\t\tcustomAggregates.some(function (custAgg: CustomAggregate) {\n\t\t\t\treturn custAgg.qualifier === UOM;\n\t\t\t})\n\t\t) {\n\t\t\tthis.UoMHasCustomAggregate = true;\n\t\t} else {\n\t\t\tthis.UoMHasCustomAggregate = false;\n\t\t}\n\t}\n\n\t/**\n\t * Get the chart annotation.\n\t * @param visualizations Visualizations\n\t * @param converterContext Converter context\n\t */\n\tgetChartAnnotation(\n\t\tvisualizations: Array<AnnotationPath<Chart | DataPoint | LineItem>> | undefined,\n\t\tconverterContext: ConverterContext\n\t): void {\n\t\tif (visualizations) {\n\t\t\tfor (let visualization of visualizations) {\n\t\t\t\tconst sAnnotationPath = visualization && visualization.value;\n\t\t\t\tthis.chartAnnotation =\n\t\t\t\t\tconverterContext.getEntityTypeAnnotation<Chart>(sAnnotationPath) &&\n\t\t\t\t\tconverterContext.getEntityTypeAnnotation<Chart>(sAnnotationPath).annotation;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the flag to show or hide the value help for the visual filter.\n\t * @param bShowValueHelp Flag indicating whether to show or hide the value help.\n\t */\n\tsetShowValueHelp(bShowValueHelp: boolean): void {\n\t\tif (this.content?.isA<VisualFilterControl>(\"sap.fe.macros.controls.filterbar.VisualFilter\")) {\n\t\t\tif (this.content?.getItems().length > 0) {\n\t\t\t\tconst oVisualFilterControl = this.getVisualFilterControl();\n\t\t\t\toVisualFilterControl?.getContent().some(function (oInnerControl: Control) {\n\t\t\t\t\tif (oInnerControl.isA<Button>(\"sap.m.Button\")) {\n\t\t\t\t\t\toInnerControl.setVisible(bShowValueHelp);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.setProperty(\"showValueHelp\", bShowValueHelp);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the source of the value help icon.\n\t * @param sIconSrc The source of the value help icon\n\t */\n\tsetValueHelpIconSrc(sIconSrc: string): void {\n\t\tif (this.content?.isA<VisualFilterControl>(\"sap.fe.macros.controls.filterbar.VisualFilter\")) {\n\t\t\tif (this.content?.getItems().length > 0) {\n\t\t\t\tconst oVisualFilterControl = this.getVisualFilterControl();\n\t\t\t\toVisualFilterControl?.getContent().some(function (oInnerControl: Control) {\n\t\t\t\t\tif (oInnerControl.isA<Button>(\"sap.m.Button\")) {\n\t\t\t\t\t\toInnerControl.setIcon(sIconSrc);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.setProperty(\"valueHelpIconSrc\", sIconSrc);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the visual filter control from the content.\n\t * @returns The visual filter control or undefined if not found\n\t */\n\tgetVisualFilterControl(): OverflowToolbar | undefined {\n\t\tif (this.content?.isA<VisualFilterControl>(\"sap.fe.macros.controls.filterbar.VisualFilter\")) {\n\t\t\treturn (this.content?.getItems()[0] as VBox).getItems()[0] as OverflowToolbar;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the error message for a hidden measure.\n\t * @param hiddenMeasure The hidden measure object\n\t * @param measure The measure name\n\t * @returns The error message, if any\n\t */\n\tgetErrorMessage(hiddenMeasure: Object | undefined, measure?: string): string | undefined {\n\t\tlet validChartType;\n\t\tif (this.chartAnnotation) {\n\t\t\tif (this.chartAnnotation.ChartType === \"UI.ChartType/Line\" || this.chartAnnotation.ChartType === \"UI.ChartType/Bar\") {\n\t\t\t\tvalidChartType = true;\n\t\t\t} else {\n\t\t\t\tvalidChartType = false;\n\t\t\t}\n\t\t}\n\t\tif ((typeof hiddenMeasure === \"boolean\" && hiddenMeasure) || !validChartType || this.renderLineChart === false) {\n\t\t\tthis.showError = true;\n\t\t\tthis.errorMessageTitle =\n\t\t\t\thiddenMeasure || !validChartType\n\t\t\t\t\t? this.getTranslatedText(\"M_VISUAL_FILTERS_ERROR_MESSAGE_TITLE\")\n\t\t\t\t\t: this.getTranslatedText(\"M_VISUAL_FILTER_LINE_CHART_INVALID_DATATYPE\");\n\t\t\tif (hiddenMeasure) {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_HIDDEN_MEASURE\", [measure]);\n\t\t\t} else if (!validChartType) {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_UNSUPPORTED_CHART_TYPE\");\n\t\t\t} else {\n\t\t\t\treturn this.getTranslatedText(\"M_VISUAL_FILTER_LINE_CHART_UNSUPPORTED_DIMENSION\");\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Determines whether to show the value help button for the visual filter.\n\t *\n\t * @param chartType The type of chart used in the visual filter\n\t * @param hiddenMeasure The hidden measure object\n\t * @returns A boolean indicating whether to show the value help button\n\t */\n\tgetshowValueHelpButton(chartType?: string, hiddenMeasure?: Object): boolean {\n\t\tconst sDimensionType =\n\t\t\tthis.chartAnnotation?.Dimensions[0] &&\n\t\t\tthis.chartAnnotation?.Dimensions[0].$target &&\n\t\t\tthis.chartAnnotation.Dimensions[0].$target.type;\n\t\tif (sDimensionType === \"Edm.Date\" || sDimensionType === \"Edm.Time\" || sDimensionType === \"Edm.DateTimeOffset\") {\n\t\t\treturn false;\n\t\t} else if (typeof hiddenMeasure === \"boolean\" && hiddenMeasure) {\n\t\t\treturn false;\n\t\t} else if (!(chartType === \"UI.ChartType/Bar\" || chartType === \"UI.ChartType/Line\")) {\n\t\t\treturn false;\n\t\t} else if (this.renderLineChart === false && chartType === \"UI.ChartType/Line\") {\n\t\t\treturn false;\n\t\t} else if (this.isValueListWithFixedValues === true) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Checks the selection variant for the visual filter.\n\t *\n\t * @param defaultSelectionVariant The default selection variant to be checked\n\t * @returns void\n\t */\n\tcheckSelectionVariant(defaultSelectionVariant?: SelectionVariant): void {\n\t\tlet selectionVariant;\n\t\tif (this.selectionVariantAnnotation) {\n\t\t\tselectionVariant = this.getDataModelObjectForMetaPath<SelectionVariant>(this.selectionVariantAnnotation)?.targetObject;\n\t\t}\n\t\tif (!selectionVariant && defaultSelectionVariant) {\n\t\t\tselectionVariant = defaultSelectionVariant;\n\t\t}\n\t\tif (selectionVariant && selectionVariant.SelectOptions && !this.multipleSelectionAllowed) {\n\t\t\tfor (const selectOption of selectionVariant.SelectOptions) {\n\t\t\t\tif (selectOption.PropertyName?.value === this.chartAnnotation?.Dimensions[0].value) {\n\t\t\t\t\tif (selectOption.Ranges.length > 1) {\n\t\t\t\t\t\tLog.error(\"Multiple SelectOptions for FilterField having SingleValue Allowed Expression\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the aggregate properties based on the provided aggregations and measure.\n\t * @param aggregations The list of aggregated properties\n\t * @param measure The optional measure to filter the aggregated properties\n\t * @returns The matching aggregated property, if found; otherwise, undefined\n\t */\n\tgetAggregateProperties(aggregations: AggregatedPropertyType[], measure?: string): AggregatedPropertyType | undefined {\n\t\tlet matchedAggregate: AggregatedPropertyType | undefined;\n\t\tif (!aggregations) {\n\t\t\treturn;\n\t\t}\n\t\taggregations.some(function (aggregate) {\n\t\t\tif (aggregate.Name === measure) {\n\t\t\t\tmatchedAggregate = aggregate;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\treturn matchedAggregate;\n\t}\n\n\t/**\n\t * Retrieves the unit of measure (UoM) for the visual filter.\n\t *\n\t * @param measures The measures for the visual filter\n\t * @param aggregatablePropertyMeasures The aggregatable property measures for the visual filter\n\t * @returns The unit of measure for the visual filter\n\t */\n\tgetUoM(measures?: PropertyAnnotations_Measures, aggregatablePropertyMeasures?: PropertyAnnotations_Measures): string {\n\t\tlet ISOCurrency = measures?.ISOCurrency;\n\t\tlet unit = measures?.Unit;\n\t\tif (!ISOCurrency && !unit && aggregatablePropertyMeasures) {\n\t\t\tISOCurrency = aggregatablePropertyMeasures.ISOCurrency;\n\t\t\tunit = aggregatablePropertyMeasures.Unit;\n\t\t}\n\t\treturn (\n\t\t\t(ISOCurrency as unknown as PathAnnotationExpression<string>)?.path ||\n\t\t\t(unit as unknown as PathAnnotationExpression<string>)?.path\n\t\t);\n\t}\n\n\tgetRequired(): string {\n\t\tif (this.required) {\n\t\t\treturn (\n\t\t\t\t<Label text=\"\" width=\"0.5rem\" required=\"true\">\n\t\t\t\t\t{{\n\t\t\t\t\t\tlayoutData: <OverflowToolbarLayoutData priority=\"Never\" />\n\t\t\t\t\t}}\n\t\t\t\t</Label>\n\t\t\t);\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetTitle(): string {\n\t\treturn (\n\t\t\t<Title\n\t\t\t\tid={generate([this._contentId, \"MeasureDimensionTitle\"])}\n\t\t\t\ttext={this.measureDimensionTitle}\n\t\t\t\ttooltip={this.toolTip}\n\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\tlevel=\"H3\"\n\t\t\t\tclass=\"sapUiTinyMarginEnd sapUiNoMarginBegin\"\n\t\t\t></Title>\n\t\t);\n\t}\n\n\tgetUoMTitle(showErrorExpression: string): string {\n\t\tif (this.UoMVisibility) {\n\t\t\treturn (\n\t\t\t\t<Title\n\t\t\t\t\tid={generate([this._contentId, \"ScaleUoMTitle\"])}\n\t\t\t\t\tvisible={showErrorExpression}\n\t\t\t\t\ttext={this.scaleUoMTitle}\n\t\t\t\t\ttitleStyle=\"H6\"\n\t\t\t\t\tlevel=\"H3\"\n\t\t\t\t\twidth=\"4.15rem\"\n\t\t\t\t></Title>\n\t\t\t);\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetToolBarSpacer(): string {\n\t\tif (this.showValueHelpButton) {\n\t\t\treturn <ToolbarSpacer></ToolbarSpacer>;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetValueHelp(showErrorExpression: string): string {\n\t\tif (this.showValueHelpButton) {\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tid={generate([this._contentId, \"VisualFilterValueHelpButton\"])}\n\t\t\t\t\ttype=\"Transparent\"\n\t\t\t\t\tariaHasPopup=\"Dialog\"\n\t\t\t\t\ttext={this.filterCountBinding}\n\t\t\t\t\tenabled={showErrorExpression}\n\t\t\t\t\tpress={(event): void => {\n\t\t\t\t\t\tVisualFilterRuntime.fireValueHelp(event);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{{\n\t\t\t\t\t\tlayoutData: <OverflowToolbarLayoutData priority=\"Never\" />,\n\t\t\t\t\t\tcustomData: <CustomData key={\"multipleSelectionAllowed\"} value={this.multipleSelectionAllowed} />\n\t\t\t\t\t}}\n\t\t\t\t</Button>\n\t\t\t);\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tgetToolbar(showErrorExpression: string): OverflowToolbar | undefined {\n\t\treturn (\n\t\t\t<OverflowToolbar style=\"Clear\">\n\t\t\t\t{{\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{this.getRequired()}\n\t\t\t\t\t\t\t{this.getTitle()}\n\t\t\t\t\t\t\t{this.getUoMTitle(showErrorExpression)}\n\t\t\t\t\t\t\t{this.getToolBarSpacer()}\n\t\t\t\t\t\t\t{this.getValueHelp(showErrorExpression)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</OverflowToolbar>\n\t\t);\n\t}\n\n\tcreateContent(): VisualFilter {\n\t\tconst id = generate([this.path]);\n\t\tconst showErrorExpression = \"{= !${internal>\" + id + \"/showError}}\";\n\t\tconst cozyMode = document.body.classList.contains(\"sapUiSizeCozy\");\n\t\tconst overallHeight = cozyMode ? \"13rem\" : \"100%\";\n\t\tconst chartHeight = cozyMode ? \"100%\" : \"7.5rem\";\n\t\tconst vfControlId = this._contentId ? generate([this._contentId]) : undefined;\n\t\treturn (\n\t\t\t<VisualFilterControl id={vfControlId} height={overallHeight} width=\"20.5rem\" class=\"sapUiSmallMarginBeginEnd\">\n\t\t\t\t{{\n\t\t\t\t\tcustomData: <CustomData key={\"infoPath\"} value={generate([this.path])} />,\n\t\t\t\t\titems: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VBox height=\"2rem\" class=\"sapUiTinyMarginTopBottom\">\n\t\t\t\t\t\t\t\t{this.getToolbar(showErrorExpression)}\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t<VBox height={chartHeight} width=\"100%\">\n\t\t\t\t\t\t\t\t{getVisualFilterChart(this)}\n\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</VisualFilterControl>\n\t\t);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}