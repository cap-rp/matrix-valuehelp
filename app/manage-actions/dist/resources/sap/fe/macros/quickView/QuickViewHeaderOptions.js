/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/converters/annotations/DataField","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/field/FieldHelper","sap/fe/macros/field/FieldTemplating","sap/m/Avatar","sap/m/AvatarShape","sap/m/Link","sap/m/Text","sap/m/Title","sap/m/VBox","sap/ui/core/library","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,i,a,n,r,o,s,l,c,u,p,h,d,f,y,b,m,g,v){"use strict";var I,P,T,D,F,k,z,j,O,L,M,w,V,x,U;var H={};var A=l.getTextBinding;var C=l.getDataModelObjectPathForValue;var E=o.getDisplayMode;var B=r.enhanceDataModelPath;var S=n.isEntityType;var _=a.isDataField;var N=t.property;var Q=t.defineUI5Class;var q=t.defineReference;var G=e.getExpressionFromAnnotation;var R=e.compileExpression;function $(e,t,i,a){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(a):void 0})}function J(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,K(e,t)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function W(e,t,i,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,a){return a(e,t,i)||i},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(e,t,r),null):r}function X(e,t){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let Y=(I=Q("sap.fe.macros.quickView.QuickViewHeaderOptions"),P=N({type:"string"}),T=N({type:"string"}),D=N({type:"object"}),F=N({type:"string"}),k=N({type:"string"}),z=q(),I(j=(O=function(e){function t(t,i){var a;a=e.call(this,t,i)||this;$(a,"contextPath",L,a);$(a,"metaPath",M,a);$(a,"semanticPayload",w,a);$(a,"id",V,a);$(a,"titleLink",x,a);$(a,"horizontalLayout",U,a);a.visible=true;return a}H=t;J(t,e);var i=t.prototype;i.onMetadataAvailable=function t(i){e.prototype.onMetadataAvailable.call(this,i);const a=this.getDataModelObjectForMetaPath(this.metaPath??"",this.contextPath);const n=a?.targetObject;if(S(n)){this.entityType=n;this.headerInfo=this.entityType?.annotations.UI?.HeaderInfo}else if(_(n)){this.convertedDataField=n;this.dataFieldValue=C(a)}else{this.entityType=a?.targetEntityType;this.headerInfo=this.entityType?.annotations.UI?.HeaderInfo}this.content=this.createContent()};i.setHeaderDisplayParametersForDataField=function e(){if(this.dataFieldValue&&this.convertedDataField){if(this.convertedDataField?.IconUrl){this.icon=this.convertedDataField.IconUrl;this.fallbackIcon="sap-icon://product"}else{this.icon=undefined;this.fallbackIcon=undefined}this.title=A(this.dataFieldValue,{displayMode:E(this.dataFieldValue)});this.description=this.convertedDataField.Label?R(this.convertedDataField.Label):R(this.convertedDataField.Value?.$target?.annotations?.Common?.Label)}};i.setHeaderDisplayParametersForEntityType=function e(){if(this.entityType){const e=this.headerInfo?.ImageUrl?G(this.headerInfo.ImageUrl):G(this.headerInfo?.TypeImageUrl);const t=R(e);this.icon=t==="undefined"?undefined:t;if(this.headerInfo?.TypeImageUrl){this.fallbackIcon=R(this.headerInfo.TypeImageUrl)}else if(this.entityType?.annotations.Common?.IsNaturalPerson?.valueOf()===true){this.fallbackIcon="sap-icon://person-placeholder"}else{this.fallbackIcon="sap-icon://product"}const i=this.getDataModelObjectPath(this.metaPath);if(i&&_(this.headerInfo?.Title)&&this.headerInfo?.Title.Value){const e=B(i,this.headerInfo.Title?.Value.path);if(e.targetObject){const t=A(e,{displayMode:E(e)});this.title=t!=="{}"?t:undefined}}if(i&&_(this.headerInfo?.Description)&&this.headerInfo?.Description.Value){const e=B(i,this.headerInfo.Description?.Value.path);const t=e.targetObject&&A(e,{displayMode:E(e)});this.description=e.targetObject===undefined?R({_type:"PathInModel",modelName:"semantic",path:"propertyPathLabel"}):t}}};i.getSemanticObjectsPrimaryActions=async function e(){if(this.semanticPayload&&await s.checkPrimaryActions(this.semanticPayload,false,this.getAppComponent())){const e=s.getPrimaryAction(this.semanticPayload);this.titleLink=e}this.setupTitle()};i.createContent=function e(){let t;this.setHeaderDisplayParametersForDataField();this.setHeaderDisplayParametersForEntityType();if(this.icon&&this.fallbackIcon){t=g(c,{class:"sapMQuickViewThumbnail sapUiTinyMarginEnd",src:this.icon,displayShape:this.entityType?.annotations.Common?.IsNaturalPerson?.valueOf()===true?u.Circle:u.Square,fallbackIcon:this.fallbackIcon})}const i=g(b,{class:"sapUiSmallMarginBottom sapMQuickViewPage",ref:this.horizontalLayout,children:t});this.isInitialized=this.getSemanticObjectsPrimaryActions();return g(f,{children:i})};i.setupTitle=function e(){let t;if(this.title){if(this.titleLink){t=g(p,{text:this.title,href:this.titleLink,emphasized:"true"})}else{t=g(d,{text:this.title,level:y.TitleLevel.H3,wrapping:"true"})}}const i=this.description?g(h,{text:this.description}):undefined;const a=v(m,{children:[t,i]});this.horizontalLayout.current?.addContent(a)};return t}(i),L=W(O.prototype,"contextPath",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),M=W(O.prototype,"metaPath",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),w=W(O.prototype,"semanticPayload",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),V=W(O.prototype,"id",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),x=W(O.prototype,"titleLink",[k],{configurable:true,enumerable:true,writable:true,initializer:null}),U=W(O.prototype,"horizontalLayout",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),O))||j);H=Y;return H},false);
//# sourceMappingURL=QuickViewHeaderOptions.js.map