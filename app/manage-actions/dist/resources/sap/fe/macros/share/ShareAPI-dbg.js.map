{"version":3,"names":["ShareAPI","_dec","defineUI5Class","interfaces","_dec2","property","type","_dec3","defaultValue","_class","_class2","_MacroAPI","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","_descriptor2","_inheritsLoose","_proto","prototype","getOverflowToolbarConfig","canOverflow","onBeforeEnterOverflow","oControl","getContent","getText","resourceModel","getResourceModel","onAfterExitOverflow","priority","setVisibility","visibility","default","CollaborationHelper","__ui5_require_async","isTeamsModeActive","content","setVisible","visible","Log","info","Promise","resolve","addStyleClass","style","menuButton","getAggregation","MacroAPI","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ShareAPI.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type MenuButton from \"sap/m/MenuButton\";\n\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport type FormElementWrapper from \"sap/fe/core/controls/FormElementWrapper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport type OverflowToolbarMenuButton from \"sap/m/OverflowToolbarMenuButton\";\nimport type Control from \"sap/ui/core/Control\";\nimport MacroAPI from \"../MacroAPI\";\n/**\n * Building block used to create the ‘Share’ functionality.\n * {@link demo:sap/fe/core/fpmExplorer/index.html#/buildingBlocks/features/shareDefault Overview of Building Blocks}\n * <br>\n * Please note that the 'Share in SAP Jam' option is only available on platforms that are integrated with SAP Jam.\n * <br>\n * If you are consuming this building block in an environment where the SAP Fiori launchpad is not available, then the 'Save as Tile' option is not visible.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:Share\n * id=\"someID\"\n * visible=\"true\"\n * /&gt;\n * </pre>\n * @alias sap.fe.macros.ShareAPI\n * @since 1.108.0\n */\n@defineUI5Class(\"sap.fe.macros.share.ShareAPI\", {\n\tinterfaces: [\"sap.m.IOverflowToolbarContent\"]\n})\nclass ShareAPI extends MacroAPI {\n\t/**\n\t * The identifier of the 'Share' building block\n\t *\n\t */\n\t@property({ type: \"string\" })\n\tid!: string;\n\n\t/**\n\t * Whether the 'Share' building block is visible or not.\n\t *\n\t */\n\t@property({ type: \"boolean\", defaultValue: true })\n\tvisible!: boolean;\n\n\t/**\n\t * Returns properties for the interface IOverflowToolbarContent.\n\t * @returns Returns the configuration of IOverflowToolbarContent\n\t */\n\tgetOverflowToolbarConfig(): object {\n\t\treturn {\n\t\t\tcanOverflow: true,\n\t\t\tonBeforeEnterOverflow: function (oControl: Object): void {\n\t\t\t\t((oControl as EnhanceWithUI5<FormElementWrapper>)?.getContent() as OverflowToolbarMenuButton).getText =\n\t\t\t\t\tfunction (): string {\n\t\t\t\t\t\tconst resourceModel = getResourceModel(oControl as Control);\n\t\t\t\t\t\treturn resourceModel.getText(\"M_COMMON_SAPFE_ACTION_SHARE\");\n\t\t\t\t\t};\n\t\t\t},\n\t\t\tonAfterExitOverflow: function (oControl: Object): void {\n\t\t\t\t((oControl as EnhanceWithUI5<FormElementWrapper>)?.getContent() as OverflowToolbarMenuButton).getText =\n\t\t\t\t\tfunction (): string {\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t};\n\t\t\t},\n\t\t\tpriority: \"High\"\n\t\t};\n\t}\n\n\t/**\n\t * Sets the visibility of the 'Share' building block based on the value.\n\t * If the 'Share' building block is used in an application that's running in Microsoft Teams,\n\t * this function does not have any effect,\n\t * since the 'Share' building block handles the visibility on it's own in that case.\n\t * @param visibility The desired visibility to be set\n\t * @returns Promise which resolves with the instance of ShareAPI\n\t */\n\tasync setVisibility(visibility: boolean): Promise<this> {\n\t\tconst { default: CollaborationHelper } = await import(\"sap/suite/ui/commons/collaboration/CollaborationHelper\");\n\t\tconst isTeamsModeActive = await CollaborationHelper.isTeamsModeActive();\n\t\t// In case of teams mode share should not be visible\n\t\t// so we do not do anything\n\t\tif (!isTeamsModeActive) {\n\t\t\tthis.content.setVisible(visibility);\n\t\t\tthis.visible = visibility;\n\t\t} else {\n\t\t\tLog.info(\"Share Building Block: visibility not changed since application is running in teams mode!\");\n\t\t}\n\t\treturn Promise.resolve(this);\n\t}\n\n\t/**\n\t * Adds style class to MenuButton. Requested by the toolbars that contain the Share Button.\n\t * @param style\n\t * @returns Returns the reference to the MenuButton\n\t */\n\taddStyleClass(style: string): this {\n\t\tconst menuButton = this.getAggregation(\"content\") as MenuButton;\n\t\tmenuButton.addStyleClass(style);\n\t\treturn this;\n\t}\n}\nexport default ShareAPI;\n"],"mappings":"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","ignoreList":[],"file":"ShareAPI-dbg.js"}