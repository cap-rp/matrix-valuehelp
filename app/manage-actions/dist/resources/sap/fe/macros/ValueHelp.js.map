{"version":3,"file":"ValueHelp.js","names":["ValueHelp","_dec","defineUI5Class","_dec2","association","type","_dec3","property","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_class","_class2","_BuildingBlock","props","others","_this","_flexId","id","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","requestGroupId","collaborationEnabled","_exports","_inheritsLoose","getValueHelpForMetaPath","pageController","metaPath","contextPath","metaModel","dependents","getView","getDependents","foundDep","find","child","isA","getMetaPath","valueHelp","getId","idPrefix","createId","addDependent","_proto","prototype","onMetadataAvailable","content","_getOwner","runAsOwner","createContent","metaContextPath","getMetaPathObject","getMetaModel","entitySetOrSingleton","getClosestEntitySet","isEntitySet","ModelHelper","isCollaborationDraftSupported","createBindingContext","getPath","filterFieldValueHelp","FieldHelper","valueHelpPropertyForFilterField","valueHelpProperty","getValueHelpTemplate","getContextPath","useSemanticDateRange","useMultiValueField","navigationPrefix","requiresValidation","conditionModel","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./ValueHelp.tsx"],"sourcesContent":["import type { EnhanceWithUI5, PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { association, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { isEntitySet } from \"sap/fe/core/helpers/TypeGuards\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getValueHelpTemplate } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\n\nimport type PageController from \"sap/fe/core/PageController\";\nimport type Control from \"sap/ui/core/Control\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\n/**\n * Building block for creating a ValueHelp based on the provided OData V4 metadata.\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.ValueHelp\")\nexport default class ValueHelp extends BuildingBlock {\n\t/**\n\t * A prefix that is added to the generated ID of the value help.\n\t */\n\t@association({ type: \"string\" })\n\tidPrefix?: string;\n\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@property({ type: \"string\" })\n\tmetaPath!: string;\n\n\t@property({ type: \"string\" })\n\tcontextPath!: string;\n\n\t/**\n\t * Indicator whether the value help is for a filter field.\n\t */\n\t@property({ type: \"string\" })\n\tconditionModel = \"\";\n\n\t/**\n\t * Indicates that this is a value help of a filter field. Necessary to decide if a\n\t * validation should occur on the back end or already on the client.\n\t */\n\t@property({ type: \"boolean\" })\n\tfilterFieldValueHelp = false;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@property({ type: \"boolean\" })\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Specifies whether the ValueHelp can be used with a MultiValueField\n\t */\n\t@property({ type: \"boolean\" })\n\tuseMultiValueField = false;\n\n\t@property({ type: \"string\" })\n\tnavigationPrefix?: string;\n\n\t@property({ type: \"boolean\" })\n\trequiresValidation = false;\n\n\t@association({ type: \"string\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\t_flexId?: string;\n\n\trequestGroupId: string | undefined = \"$auto.Workers\";\n\n\tcollaborationEnabled = false;\n\n\tconstructor(props: PropertiesOf<ValueHelp>, others?: PropertiesOf<ValueHelp>) {\n\t\tif (props._flexId) {\n\t\t\tprops.id = props._flexId + \"::Block\";\n\t\t}\n\t\tsuper(props, others);\n\t}\n\n\tstatic getValueHelpForMetaPath(\n\t\tpageController: PageController,\n\t\tmetaPath: string,\n\t\tcontextPath: string,\n\t\tmetaModel: ODataMetaModel | undefined\n\t): ValueHelp | undefined {\n\t\tconst dependents = pageController.getView()?.getDependents();\n\t\tconst foundDep = dependents?.find((child) => {\n\t\t\treturn child.isA<EnhanceWithUI5<ValueHelp>>(\"sap.fe.macros.ValueHelp\") && child.getMetaPath() === metaPath;\n\t\t});\n\t\tif (!foundDep) {\n\t\t\tconst valueHelp = new ValueHelp({\n\t\t\t\tmetaPath: metaPath,\n\t\t\t\tcontextPath: contextPath,\n\t\t\t\tmetaModel: metaModel?.getId(),\n\t\t\t\tidPrefix: pageController.getView()?.createId(\"FieldValueHelp\")\n\t\t\t});\n\t\t\tpageController.getView().addDependent(valueHelp);\n\t\t\treturn valueHelp;\n\t\t} else {\n\t\t\treturn foundDep as ValueHelp | undefined;\n\t\t}\n\t}\n\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis._getOwner()?.runAsOwner(() => {\n\t\t\t\tthis.content = this.createContent();\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateContent(): Control | undefined {\n\t\tconst metaContextPath = this.getMetaPathObject(this.metaPath, this.contextPath);\n\t\tconst metaModel = this._getOwner()?.getMetaModel(this.metaModel);\n\t\tif (metaContextPath && metaModel) {\n\t\t\tconst entitySetOrSingleton = metaContextPath.getClosestEntitySet();\n\t\t\tif (isEntitySet(entitySetOrSingleton)) {\n\t\t\t\tthis.collaborationEnabled = ModelHelper.isCollaborationDraftSupported(metaModel);\n\t\t\t}\n\n\t\t\tlet metaPath = metaModel.createBindingContext(metaContextPath.getPath());\n\t\t\tif (metaPath) {\n\t\t\t\tif (this.filterFieldValueHelp) {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpPropertyForFilterField(metaPath))!;\n\t\t\t\t} else {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpProperty(metaPath))!;\n\t\t\t\t}\n\t\t\t\tconst idPrefix = this.idPrefix ?? \"ValueHelp\";\n\t\t\t\treturn getValueHelpTemplate(metaPath, {\n\t\t\t\t\tmetaPath: metaModel.createBindingContext(metaContextPath.getPath())!,\n\t\t\t\t\tcontextPath: metaModel.createBindingContext(metaContextPath.getContextPath())!,\n\t\t\t\t\tfilterFieldValueHelp: this.filterFieldValueHelp,\n\t\t\t\t\tuseSemanticDateRange: this.useSemanticDateRange,\n\t\t\t\t\tuseMultiValueField: this.useMultiValueField,\n\t\t\t\t\tnavigationPrefix: this.navigationPrefix,\n\t\t\t\t\trequiresValidation: this.requiresValidation,\n\t\t\t\t\t_flexId: this._flexId,\n\t\t\t\t\tidPrefix: idPrefix,\n\t\t\t\t\tconditionModel: this.conditionModel,\n\t\t\t\t\trequestGroupId: this.requestGroupId,\n\t\t\t\t\tcollaborationEnabled: this.collaborationEnabled\n\t\t\t\t}) as Control | undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}