{"version":3,"names":["RadioButtons","_dec","defineUI5Class","_dec2","property","type","_dec3","_dec4","_dec5","_dec6","_dec7","isBindingInfo","_dec8","_dec9","_dec10","_class","_class2","_BuildingBlock","properties","others","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","content","createContent","_exports","_inheritsLoose","_proto","prototype","onRadioButtonSelect","event","radioButtonGroup","getSource","selectedIndex","getParameter","undefined","selectedRadioButtonKey","getButtons","getCustomData","getValue","setProperty","CommonUtils","getTargetView","getController","_sideEffects","handleFieldChange","bindProperty","name","bindingInfo","formatter","targetType","setValue","newValue","value","radioButtons","length","radioButtonIndex","radioButton","keyCustomData","getBinding","setSelectedIndex","buttonsBindingContext","path","fixedValuesPath","parameters","$count","events","dataReceived","ev","count","getCount","horizontalLayout","setColumns","getSelectedIndex","bind","_jsx","RadioButtonGroup","buttons","select","enabled","enabledExpression","fieldGroupIds","ariaLabelledBy","children","RadioButton","text","radioButtonTextProperty","customData","CustomData","key","radioButtonKeyProperty","class","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["RadioButtons.tsx"],"sourcesContent":["import type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport RadioButton from \"sap/m/RadioButton\";\nimport type { RadioButtonGroup$SelectEvent } from \"sap/m/RadioButtonGroup\";\nimport RadioButtonGroup from \"sap/m/RadioButtonGroup\";\nimport type Event from \"sap/ui/base/Event\";\nimport type { AggregationBindingInfo, PropertyBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport type PropertyBinding from \"sap/ui/model/PropertyBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\n@defineUI5Class(\"sap.fe.macros.controls.RadioButtons\")\nexport default class RadioButtons extends BuildingBlock<RadioButtonGroup> {\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic id!: string;\n\n\t@property({\n\t\ttype: \"string[]\"\n\t})\n\tpublic fieldGroupIds?: string[];\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic requiredExpression?: string;\n\n\t// We use type 'raw' here because otherwise the binding will refuse to update the value, as it doesn't know how to convert from any to string\n\t// Setting it to raw make sure that no conversion is attempted which then works\n\t@property({ type: \"any\" })\n\tpublic value!: string | number | boolean;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic fixedValuesPath!: `{${string}}`;\n\n\t@property({\n\t\ttype: \"any\",\n\t\tisBindingInfo: true\n\t})\n\tpublic radioButtonTextProperty: PropertyBindingInfo;\n\n\t@property({\n\t\ttype: \"any\",\n\t\tisBindingInfo: true\n\t})\n\tpublic radioButtonKeyProperty: PropertyBindingInfo;\n\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\tpublic horizontalLayout = false;\n\n\t@property({\n\t\ttype: \"string\"\n\t})\n\tpublic enabledExpression = \"\";\n\n\tconstructor(properties: $ControlSettings & PropertiesOf<RadioButtons>, others?: $ControlSettings) {\n\t\tsuper(properties, others);\n\t\tthis.content = this.createContent();\n\t}\n\n\t/**\n\t * Event handler for the RadioButtonGroup's select event.\n\t * We need to parse from the radio button group index to the model value.\n\t * @param event\n\t */\n\tonRadioButtonSelect(event: RadioButtonGroup$SelectEvent): void {\n\t\tconst radioButtonGroup: RadioButtonGroup = event.getSource();\n\t\tconst selectedIndex = event.getParameter(\"selectedIndex\");\n\t\tif (selectedIndex !== undefined) {\n\t\t\tconst selectedRadioButtonKey: string = radioButtonGroup?.getButtons()[selectedIndex].getCustomData()[0].getValue();\n\t\t\t// Now we have the value => write it to the model!\n\t\t\tthis.setProperty(\"value\", selectedRadioButtonKey);\n\t\t\tCommonUtils.getTargetView(radioButtonGroup)?.getController()?._sideEffects?.handleFieldChange(event, true);\n\t\t}\n\t}\n\n\t/**\n\t * The value property type needs to be initially 'any' but has to be changed to 'raw' to avoid parsing errors.\n\t * @param name\n\t * @param bindingInfo\n\t * @returns This\n\t */\n\tbindProperty(name: string, bindingInfo: PropertyBindingInfo): this {\n\t\tif (name === \"value\" && !bindingInfo.formatter) {\n\t\t\t// not if a formatter is used, as this needs to be executed\n\t\t\tbindingInfo.targetType = \"raw\";\n\t\t}\n\n\t\treturn super.bindProperty(name, bindingInfo);\n\t}\n\n\t/**\n\t * This is being called when the model fetches the data from the backend or when we call it directly.\n\t * We need to parse from the model value to the radio button group index.\n\t * @param newValue\n\t */\n\tsetValue(newValue: string | number | boolean): void {\n\t\tthis.value = newValue;\n\t\tif (this.content) {\n\t\t\t// Compute the new radio button index\n\t\t\tconst radioButtons = this.content.getButtons();\n\t\t\tif (radioButtons.length != 0) {\n\t\t\t\tlet radioButtonIndex = 0;\n\t\t\t\tfor (const radioButton of radioButtons) {\n\t\t\t\t\tconst keyCustomData = (radioButton.getCustomData()[0].getBinding(\"value\") as PropertyBinding | undefined)?.getValue();\n\t\t\t\t\tif (keyCustomData === newValue) {\n\t\t\t\t\t\tthis.content.setSelectedIndex(radioButtonIndex);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tradioButtonIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If no value could be found or if the radio button aggregation was empty, which can happen due to\n\t\t\t// a very early call of setValue, set the selected to index to -1 which results in NO radio button to be selected.\n\t\t\tthis.content.setSelectedIndex(-1);\n\t\t}\n\t}\n\n\t/**\n\t * The building block render function.\n\t * @returns The radio button group\n\t */\n\tcreateContent(): RadioButtonGroup {\n\t\t// Setting up the binding so that we can access $count for getting the number\n\t\t// of entries in the fixed value list and set this as number of radio button columns\n\t\t// in case horizontal layout is configured\n\t\tconst buttonsBindingContext: AggregationBindingInfo = {\n\t\t\tpath: `${this.fixedValuesPath}`,\n\t\t\tparameters: { $count: true },\n\t\t\tevents: {\n\t\t\t\tdataReceived: (ev: Event) => {\n\t\t\t\t\tconst count: number | undefined = (ev.getSource() as unknown as ODataListBinding)?.getCount();\n\t\t\t\t\tif (count !== undefined && this.horizontalLayout) {\n\t\t\t\t\t\tradioButtonGroup.setColumns(count);\n\t\t\t\t\t}\n\t\t\t\t\t// Check if there is a value stored from the initialization but the radio\n\t\t\t\t\t// button selection has not yet been done and do this now\n\t\t\t\t\tif (this.value !== undefined && radioButtonGroup.getSelectedIndex() === -1) {\n\t\t\t\t\t\tthis.setValue(this.value as string);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onRadioButtonSelect.bind(this);\n\t\tconst radioButtonGroup = (\n\t\t\t<RadioButtonGroup\n\t\t\t\tbuttons={buttonsBindingContext}\n\t\t\t\tselect={this.onRadioButtonSelect.bind(this)}\n\t\t\t\tenabled={this.enabledExpression}\n\t\t\t\tfieldGroupIds={this.fieldGroupIds}\n\t\t\t\tariaLabelledBy={this.ariaLabelledBy}\n\t\t\t>\n\t\t\t\t<RadioButton\n\t\t\t\t\ttext={this.radioButtonTextProperty}\n\t\t\t\t\tcustomData={[new CustomData({ key: \"key\", value: this.radioButtonKeyProperty })]}\n\t\t\t\t\tclass=\"sapUiSmallMarginEnd\"\n\t\t\t\t/>\n\t\t\t</RadioButtonGroup>\n\t\t) as RadioButtonGroup;\n\n\t\treturn radioButtonGroup;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"RadioButtons-dbg.js"}