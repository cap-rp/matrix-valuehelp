{"version":3,"names":["FieldWrapper","_dec","defineUI5Class","_dec2","implementInterface","_dec3","property","type","_dec4","defaultValue","_dec5","_dec6","_dec7","_dec8","association","multiple","singularName","_dec9","aggregation","isDefault","_dec10","_class","_class2","_Control","id","settings","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","resourceBundle","Lib","getResourceBundleFor","_inheritsLoose","_proto","prototype","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","addAggregation","sAggregationName","oObject","bSuppressInvalidate","isA","setPreferUserInteraction","getAccessibilityInfo","oContent","editMode","contentDisplay","contentEdit","length","getIdForLabel","_setAriaLabelledBy","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","sId","aAriaLabelledBys","getAriaLabelledBy","includes","onBeforeRendering","aContentEdit","item","render","oRm","oControl","openStart","style","textAlign","width","hasInlineEdit","attr","getText","openEnd","renderControl","close","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["FieldWrapper.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, association, defineUI5Class, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type InputBase from \"sap/m/InputBase\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Control from \"sap/ui/core/Control\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { AccessibilityInfo, CSSSize, IFormContent, TextAlign } from \"sap/ui/core/library\";\nimport type Field from \"../Field\";\n\ntype ControlWithAccessibility = Control & { addAriaLabelledBy?: (id: string) => void; getAriaLabelledBy: () => string[] };\n\n@defineUI5Class(\"sap.fe.macros.controls.FieldWrapper\")\nclass FieldWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({ type: \"sap.ui.core.TextAlign\" })\n\ttextAlign!: TextAlign;\n\n\t@property({ type: \"sap.ui.core.CSSSize\", defaultValue: null })\n\twidth!: CSSSize;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tformDoNotAdjustWidth!: boolean;\n\n\t@property({ type: \"string\", defaultValue: \"Display\" })\n\teditMode!: string;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\trequired!: boolean;\n\n\t/**\n\t * Association to controls / IDs that label this control (see WAI-ARIA attribute aria-labelledby).\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: string[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontentDisplay!: ControlWithAccessibility;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: true })\n\tcontentEdit!: ControlWithAccessibility[];\n\n\tprivate resourceBundle: ResourceBundle;\n\n\tconstructor(\n\t\tid?: string | undefined | (PropertiesOf<FieldWrapper> & $ControlSettings),\n\t\tsettings?: $ControlSettings & PropertiesOf<FieldWrapper>\n\t) {\n\t\tsuper(id as string, settings);\n\t\tthis.resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\t}\n\n\tenhanceAccessibilityState(oElement: object, mAriaProps: object): object {\n\t\tconst oParent = this.getParent();\n\n\t\tif (oParent && (oParent as ManagedObject & { enhanceAccessibilityState?: Function }).enhanceAccessibilityState) {\n\t\t\t// forward  enhanceAccessibilityState call to the parent\n\t\t\t(oParent as ManagedObject & { enhanceAccessibilityState: Function }).enhanceAccessibilityState(oElement, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\n\t/**\n\t * Adds a control to the aggregation.\n\t * @param sAggregationName\n\t * @param oObject\n\t * @param bSuppressInvalidate\n\t * @returns The FieldWrapper instance\n\t */\n\taddAggregation(sAggregationName: string, oObject: ManagedObject, bSuppressInvalidate?: boolean): this {\n\t\tif (sAggregationName === \"contentEdit\" && oObject.isA<InputBase>(\"sap.m.InputBase\")) {\n\t\t\toObject.setPreferUserInteraction(true);\n\t\t}\n\t\treturn super.addAggregation(sAggregationName, oObject, bSuppressInvalidate);\n\t}\n\n\tgetAccessibilityInfo(): AccessibilityInfo {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn (oContent as Control)?.getIdForLabel();\n\t}\n\n\t_setAriaLabelledBy(oContent?: ControlWithAccessibility): void {\n\t\tif (oContent && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (const sId of aAriaLabelledBy) {\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (!aAriaLabelledBys.includes(sId)) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRendering(): void {\n\t\t// before calling the renderer of the FieldWrapper parent control may have set ariaLabelledBy\n\t\t// we ensure it is passed to its inner controls\n\t\tthis._setAriaLabelledBy(this.contentDisplay);\n\t\tconst aContentEdit = this.contentEdit;\n\t\tfor (const item of aContentEdit) {\n\t\t\tthis._setAriaLabelledBy(item);\n\t\t}\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: FieldWrapper): void {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.style(\"text-align\", oControl.textAlign);\n\t\tif (oControl.editMode === \"Display\") {\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\tif ((oControl.getParent() as Field).hasInlineEdit) {\n\t\t\t\t// tooltip\n\t\t\t\toRm.attr(\"title\", oControl.resourceBundle.getText(\"M_INLINE_EDIT_TOOLTIP_DOUBLECLICK_EDIT\"));\n\t\t\t\t// focus\n\t\t\t\toRm.attr(\"tabindex\", 0);\n\t\t\t}\n\t\t\toRm.openEnd();\n\t\t\toRm.renderControl(oControl.contentDisplay); // render the child Control for display\n\t\t} else {\n\t\t\tconst aContentEdit = oControl.contentEdit;\n\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\toRm.openEnd();\n\t\t\tfor (const oContent of aContentEdit) {\n\t\t\t\t// render the child Control  for edit\n\t\t\t\toRm.renderControl(oContent);\n\t\t\t}\n\t\t}\n\t\toRm.close(\"div\"); // end of the complete Control\n\t}\n}\n\nexport default FieldWrapper;\n"],"mappings":"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","ignoreList":[],"file":"FieldWrapper-dbg.js"}