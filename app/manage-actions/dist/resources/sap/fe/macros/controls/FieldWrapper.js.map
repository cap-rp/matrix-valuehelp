{"version":3,"file":"FieldWrapper.js","names":["FieldWrapper","_dec","defineUI5Class","_dec2","implementInterface","_dec3","property","type","_dec4","defaultValue","_dec5","_dec6","_dec7","_dec8","association","multiple","singularName","_dec9","aggregation","isDefault","_dec10","_class","_class2","_Control","id","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","resourceBundle","Lib","getResourceBundleFor","_inheritsLoose","_proto","prototype","enhanceAccessibilityState","oElement","mAriaProps","oParent","getParent","addAggregation","sAggregationName","oObject","bSuppressInvalidate","isA","setPreferUserInteraction","getAccessibilityInfo","oContent","editMode","contentDisplay","contentEdit","length","getIdForLabel","_setAriaLabelledBy","addAriaLabelledBy","aAriaLabelledBy","ariaLabelledBy","sId","aAriaLabelledBys","getAriaLabelledBy","includes","onBeforeRendering","aContentEdit","item","render","oRm","oControl","openStart","style","textAlign","width","hasInlineEdit","attr","getText","openEnd","renderControl","close","Control","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FieldWrapper.ts"],"sourcesContent":["import type ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, association, defineUI5Class, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type InputBase from \"sap/m/InputBase\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type { $ControlSettings } from \"sap/ui/core/Control\";\nimport Control from \"sap/ui/core/Control\";\nimport Lib from \"sap/ui/core/Lib\";\nimport type RenderManager from \"sap/ui/core/RenderManager\";\nimport type { AccessibilityInfo, CSSSize, IFormContent, TextAlign } from \"sap/ui/core/library\";\nimport type Field from \"../Field\";\n\ntype ControlWithAccessibility = Control & { addAriaLabelledBy?: (id: string) => void; getAriaLabelledBy: () => string[] };\n\n@defineUI5Class(\"sap.fe.macros.controls.FieldWrapper\")\nclass FieldWrapper extends Control implements IFormContent {\n\t@implementInterface(\"sap.ui.core.IFormContent\")\n\t__implements__sap_ui_core_IFormContent = true;\n\n\t@property({ type: \"sap.ui.core.TextAlign\" })\n\ttextAlign!: TextAlign;\n\n\t@property({ type: \"sap.ui.core.CSSSize\", defaultValue: null })\n\twidth!: CSSSize;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\tformDoNotAdjustWidth!: boolean;\n\n\t@property({ type: \"string\", defaultValue: \"Display\" })\n\teditMode!: string;\n\n\t@property({ type: \"boolean\", defaultValue: false })\n\trequired!: boolean;\n\n\t/**\n\t * Association to controls / IDs that label this control (see WAI-ARIA attribute aria-labelledby).\n\t */\n\t@association({ type: \"sap.ui.core.Control\", multiple: true, singularName: \"ariaLabelledBy\" })\n\tariaLabelledBy!: string[];\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: false, isDefault: true })\n\tcontentDisplay!: ControlWithAccessibility;\n\n\t@aggregation({ type: \"sap.ui.core.Control\", multiple: true })\n\tcontentEdit!: ControlWithAccessibility[];\n\n\tprivate resourceBundle: ResourceBundle;\n\n\tconstructor(\n\t\tid?: string | undefined | (PropertiesOf<FieldWrapper> & $ControlSettings),\n\t\tsettings?: $ControlSettings & PropertiesOf<FieldWrapper>\n\t) {\n\t\tsuper(id as string, settings);\n\t\tthis.resourceBundle = Lib.getResourceBundleFor(\"sap.fe.controls\")!;\n\t}\n\n\tenhanceAccessibilityState(oElement: object, mAriaProps: object): object {\n\t\tconst oParent = this.getParent();\n\n\t\tif (oParent && (oParent as ManagedObject & { enhanceAccessibilityState?: Function }).enhanceAccessibilityState) {\n\t\t\t// forward  enhanceAccessibilityState call to the parent\n\t\t\t(oParent as ManagedObject & { enhanceAccessibilityState: Function }).enhanceAccessibilityState(oElement, mAriaProps);\n\t\t}\n\n\t\treturn mAriaProps;\n\t}\n\n\t/**\n\t * Adds a control to the aggregation.\n\t * @param sAggregationName\n\t * @param oObject\n\t * @param bSuppressInvalidate\n\t * @returns The FieldWrapper instance\n\t */\n\taddAggregation(sAggregationName: string, oObject: ManagedObject, bSuppressInvalidate?: boolean): this {\n\t\tif (sAggregationName === \"contentEdit\" && oObject.isA<InputBase>(\"sap.m.InputBase\")) {\n\t\t\toObject.setPreferUserInteraction(true);\n\t\t}\n\t\treturn super.addAggregation(sAggregationName, oObject, bSuppressInvalidate);\n\t}\n\n\tgetAccessibilityInfo(): AccessibilityInfo {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn oContent && oContent.getAccessibilityInfo ? oContent.getAccessibilityInfo() : {};\n\t}\n\n\t/**\n\t * Returns the DOMNode ID to be used for the \"labelFor\" attribute.\n\t *\n\t * We forward the call of this method to the content control.\n\t * @returns ID to be used for the <code>labelFor</code>\n\t */\n\tgetIdForLabel(): string {\n\t\tlet oContent;\n\t\tif (this.editMode === \"Display\") {\n\t\t\toContent = this.contentDisplay;\n\t\t} else {\n\t\t\toContent = this.contentEdit.length ? this.contentEdit[0] : null;\n\t\t}\n\t\treturn (oContent as Control)?.getIdForLabel();\n\t}\n\n\t_setAriaLabelledBy(oContent?: ControlWithAccessibility): void {\n\t\tif (oContent && oContent.addAriaLabelledBy) {\n\t\t\tconst aAriaLabelledBy = this.ariaLabelledBy;\n\n\t\t\tfor (const sId of aAriaLabelledBy) {\n\t\t\t\tconst aAriaLabelledBys = oContent.getAriaLabelledBy() || [];\n\t\t\t\tif (!aAriaLabelledBys.includes(sId)) {\n\t\t\t\t\toContent.addAriaLabelledBy(sId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRendering(): void {\n\t\t// before calling the renderer of the FieldWrapper parent control may have set ariaLabelledBy\n\t\t// we ensure it is passed to its inner controls\n\t\tthis._setAriaLabelledBy(this.contentDisplay);\n\t\tconst aContentEdit = this.contentEdit;\n\t\tfor (const item of aContentEdit) {\n\t\t\tthis._setAriaLabelledBy(item);\n\t\t}\n\t}\n\n\tstatic render(oRm: RenderManager, oControl: FieldWrapper): void {\n\t\toRm.openStart(\"div\", oControl);\n\t\toRm.style(\"text-align\", oControl.textAlign);\n\t\tif (oControl.editMode === \"Display\") {\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\tif ((oControl.getParent() as Field).hasInlineEdit) {\n\t\t\t\t// tooltip\n\t\t\t\toRm.attr(\"title\", oControl.resourceBundle.getText(\"M_INLINE_EDIT_TOOLTIP_DOUBLECLICK_EDIT\"));\n\t\t\t\t// focus\n\t\t\t\toRm.attr(\"tabindex\", 0);\n\t\t\t}\n\t\t\toRm.openEnd();\n\t\t\toRm.renderControl(oControl.contentDisplay); // render the child Control for display\n\t\t} else {\n\t\t\tconst aContentEdit = oControl.contentEdit;\n\n\t\t\toRm.style(\"width\", oControl.width);\n\t\t\toRm.openEnd();\n\t\t\tfor (const oContent of aContentEdit) {\n\t\t\t\t// render the child Control  for edit\n\t\t\t\toRm.renderControl(oContent);\n\t\t\t}\n\t\t}\n\t\toRm.close(\"div\"); // end of the complete Control\n\t}\n}\n\nexport default FieldWrapper;\n"],"mappings":";;;;itCAeMA,GAAYC,EADjBC,EAAe,uCAAsCC,EAEpDC,EAAmB,4BAA2BC,EAG9CC,EAAS,CAAEC,KAAM,0BAA0BC,EAG3CF,EAAS,CAAEC,KAAM,sBAAuBE,aAAc,OAAOC,EAG7DJ,EAAS,CAAEC,KAAM,UAAWE,aAAc,QAAQE,EAGlDL,EAAS,CAAEC,KAAM,SAAUE,aAAc,YAAYG,EAGrDN,EAAS,CAAEC,KAAM,UAAWE,aAAc,QAAQI,EAMlDC,EAAY,CAAEP,KAAM,sBAAuBQ,SAAU,KAAMC,aAAc,mBAAmBC,EAG5FC,EAAY,CAAEX,KAAM,sBAAuBQ,SAAU,MAAOI,UAAW,OAAOC,EAG9EF,EAAY,CAAEX,KAAM,sBAAuBQ,SAAU,OAAOd,EAAAoB,GAAAC,EAAA,SAAAC,GAK7D,SAAAvB,EACCwB,EACAC,GACC,IAAAC,EACDA,EAAAH,EAAAI,KAAAC,KAAMJ,EAAcC,IAASG,KAACC,EAAAH,EAAA,yCAAAI,EAAAJ,GAAAG,EAAAH,EAAA,YAAAK,EAAAL,GAAAG,EAAAH,EAAA,QAAAM,EAAAN,GAAAG,EAAAH,EAAA,uBAAAO,EAAAP,GAAAG,EAAAH,EAAA,WAAAQ,EAAAR,GAAAG,EAAAH,EAAA,WAAAS,EAAAT,GAlB/BG,EAAAH,EAAA,iBAAAU,EAAAV,GAAAG,EAAAH,EAAA,iBAAAW,EAAAX,GAAAG,EAAAH,EAAA,cAAAY,EAAAZ,GAmBCA,EAAKa,eAAiBC,EAAIC,qBAAqB,mBAAoB,OAAAf,CACpE,CAACgB,EAAA1C,EAAAuB,GAAA,IAAAoB,EAAA3C,EAAA4C,UAAAD,EAEDE,0BAAA,SAAAA,EAA0BC,EAAkBC,GAC3C,MAAMC,EAAUpB,KAAKqB,YAErB,GAAID,GAAYA,EAAqEH,0BAA2B,CAE9GG,EAAoEH,0BAA0BC,EAAUC,EAC1G,CAEA,OAAOA,CACR,EAEAJ,EAOAO,eAAA,SAAAA,EAAeC,EAA0BC,EAAwBC,GAChE,GAAIF,IAAqB,eAAiBC,EAAQE,IAAe,mBAAoB,CACpFF,EAAQG,yBAAyB,KAClC,CACA,OAAAhC,EAAAqB,UAAaM,eAAcvB,KAAAC,KAACuB,EAAkBC,EAASC,EACxD,EAACV,EAEDa,qBAAA,SAAAA,IACC,IAAIC,EACJ,GAAI7B,KAAK8B,WAAa,UAAW,CAChCD,EAAW7B,KAAK+B,cACjB,KAAO,CACNF,EAAW7B,KAAKgC,YAAYC,OAASjC,KAAKgC,YAAY,GAAK,IAC5D,CACA,OAAOH,GAAYA,EAASD,qBAAuBC,EAASD,uBAAyB,CAAC,CACvF,EAEAb,EAMAmB,cAAA,SAAAA,IACC,IAAIL,EACJ,GAAI7B,KAAK8B,WAAa,UAAW,CAChCD,EAAW7B,KAAK+B,cACjB,KAAO,CACNF,EAAW7B,KAAKgC,YAAYC,OAASjC,KAAKgC,YAAY,GAAK,IAC5D,CACA,OAAQH,GAAsBK,eAC/B,EAACnB,EAEDoB,mBAAA,SAAAA,EAAmBN,GAClB,GAAIA,GAAYA,EAASO,kBAAmB,CAC3C,MAAMC,EAAkBrC,KAAKsC,eAE7B,IAAK,MAAMC,KAAOF,EAAiB,CAClC,MAAMG,EAAmBX,EAASY,qBAAuB,GACzD,IAAKD,EAAiBE,SAASH,GAAM,CACpCV,EAASO,kBAAkBG,EAC5B,CACD,CACD,CACD,EAACxB,EAED4B,kBAAA,SAAAA,IAGC3C,KAAKmC,mBAAmBnC,KAAK+B,gBAC7B,MAAMa,EAAe5C,KAAKgC,YAC1B,IAAK,MAAMa,KAAQD,EAAc,CAChC5C,KAAKmC,mBAAmBU,EACzB,CACD,EAACzE,EAEM0E,OAAP,SAAOA,EAAOC,EAAoBC,GACjCD,EAAIE,UAAU,MAAOD,GACrBD,EAAIG,MAAM,aAAcF,EAASG,WACjC,GAAIH,EAASlB,WAAa,UAAW,CACpCiB,EAAIG,MAAM,QAASF,EAASI,OAC5B,GAAKJ,EAAS3B,YAAsBgC,cAAe,CAElDN,EAAIO,KAAK,QAASN,EAASrC,eAAe4C,QAAQ,2CAElDR,EAAIO,KAAK,WAAY,EACtB,CACAP,EAAIS,UACJT,EAAIU,cAAcT,EAASjB,eAC5B,KAAO,CACN,MAAMa,EAAeI,EAAShB,YAE9Be,EAAIG,MAAM,QAASF,EAASI,OAC5BL,EAAIS,UACJ,IAAK,MAAM3B,KAAYe,EAAc,CAEpCG,EAAIU,cAAc5B,EACnB,CACD,CACAkB,EAAIW,MAAM,MACX,EAAC,OAAAtF,CAAA,CA/G4D,CA5BnCuF,GAAOzD,EAAA0D,EAAAlE,EAAAsB,UAAA,0CAAAzC,GAAA,CAAAsF,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAEQ,IAAI,IAAA7D,EAAAyD,EAAAlE,EAAAsB,UAAA,aAAAvC,GAAA,CAAAoF,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA5D,EAAAwD,EAAAlE,EAAAsB,UAAA,SAAApC,GAAA,CAAAiF,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA3D,EAAAuD,EAAAlE,EAAAsB,UAAA,wBAAAlC,GAAA,CAAA+E,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA1D,EAAAsD,EAAAlE,EAAAsB,UAAA,YAAAjC,GAAA,CAAA8E,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAzD,EAAAqD,EAAAlE,EAAAsB,UAAA,YAAAhC,GAAA,CAAA6E,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAxD,EAAAoD,EAAAlE,EAAAsB,UAAA,kBAAA/B,GAAA,CAAA4E,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAvD,EAAAmD,EAAAlE,EAAAsB,UAAA,kBAAA3B,GAAA,CAAAwE,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAtD,EAAAkD,EAAAlE,EAAAsB,UAAA,eAAAxB,GAAA,CAAAqE,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAtE,KAAAD,GAAA,OA4I/BrB,CAAY","ignoreList":[]}