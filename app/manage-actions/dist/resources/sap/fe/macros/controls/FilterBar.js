/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/base/ClassSupport","sap/fe/macros/controls/filterbar/FilterContainer","sap/fe/macros/controls/filterbar/VisualFilterContainer","sap/ui/core/Element","sap/ui/mdc/FilterBar","sap/ui/mdc/filterbar/aligned/FilterItemLayout"],function(t,e,i,o,r,a,n){"use strict";var l,s,u,c,d,f,h;var g=e.property;var y=e.defineUI5Class;var F=e.association;function p(t,e,i,o){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function _(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,m(t,e)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function B(t,e,i,o,r){var a={};return Object.keys(o).forEach(function(t){a[t]=o[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,o){return o(t,e,i)||i},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(t,e,a),null):a}function b(t,e){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let L=(l=y("sap.fe.macros.controls.FilterBar"),s=g({type:"string",defaultValue:"compact"}),u=F({type:"sap.m.SegmentedButton",multiple:false}),l(c=(d=function(e){function a(t,i){var o;o=e.call(this,t,i)||this;p(o,"initialLayout",f,o);p(o,"toggleControl",h,o);o._isInitialized=false;o._initializeStatus();return o}_(a,e);var l=a.prototype;l._initializeStatus=async function t(){await this.waitForInitialization();this._isInitialized=true};l.isInitialized=function t(){return!!this._isInitialized};l.setToggleControl=function t(e){if(typeof e==="string"){this._oSegmentedButton=r.getElementById(e)}else{this._oSegmentedButton=e}if(this.toggleControl&&this._oSegmentedButton){this._oSegmentedButton.detachEvent("selectionChange",this._toggleLayout.bind(this))}if(this._oSegmentedButton){this._oSegmentedButton.attachEvent("selectionChange",this._toggleLayout.bind(this))}this.setAssociation("toggleControl",e,true)};l._toggleLayout=function e(){this.waitForInitialization().then(()=>{const t=this._oSegmentedButton?.getSelectedKey();if(t==="visual"&&this._oFilterBarLayout?.isA("sap.fe.macros.controls.filterbar.VisualFilterContainer")||t==="compact"&&!this._oFilterBarLayout?.isA("sap.fe.macros.controls.filterbar.VisualFilterContainer")){return}if(!this._oSecondaryFilterBarLayout){this._oSecondaryFilterBarLayout=new o}if(this._oSecondaryFilterBarLayout?.isA("sap.fe.macros.controls.filterbar.VisualFilterContainer")){this.setShowAdaptFiltersButton(false)}else{this.setShowAdaptFiltersButton(true)}const e=this._oFilterBarLayout;const i=this.getFilterItems();const r=e.getAllFilterFields();const a=this.getSortedFilterFields(i,r);const n=e.getAllButtons();const l=e.getAllVisualFilterFields&&e.getAllVisualFilterFields();if(this._oSecondaryFilterBarLayout?.isA("sap.fe.macros.controls.filterbar.VisualFilterContainer")){this._oSecondaryFilterBarLayout.setAllFilterFields(a,l)}this._oFilterBarLayout=this._oSecondaryFilterBarLayout;r.forEach((t,i)=>{e.removeFilterField(t);this._oFilterBarLayout.insertFilterField(t,i)});n.forEach(t=>{e.removeButton(t);this._oFilterBarLayout.addButton(t)});this._oSecondaryFilterBarLayout=e;this.setAggregation("layout",this._oFilterBarLayout,true);this._oFilterBarLayout.invalidate();return}).catch(e=>{t.error(e)})};l.getSortedFilterFields=function t(e,i){const o=[];e.forEach(function(t){o.push(t.getId())});i.sort(function(t,e){let i,r;t.getContent().forEach(function(t){if(t.isA("sap.ui.mdc.FilterField")){i=t.getId()}});e.getContent().forEach(function(t){if(t.isA("sap.ui.mdc.FilterField")){r=t.getId()}});return o.indexOf(i??"")-o.indexOf(r??"")});return i};l._createInnerLayout=function t(){this._oFilterBarLayout=new i;this._cLayoutItem=n;this._oFilterBarLayout.getInner().addStyleClass("sapUiMdcFilterBarBaseAFLayout");this._addButtons();const e=this._oFilterBarLayout.getInner();const o={onBeforeRendering:()=>{if(this.initialLayout==="visual"){this._toggleLayout()}e.removeEventDelegate(o)}};e.addEventDelegate(o);this.setAggregation("layout",this._oFilterBarLayout,true)};l.exit=function t(){e.prototype.exit.call(this);if(this._oSegmentedButton){this._oSegmentedButton.detachEvent("selectionChange",this._toggleLayout);delete this._oSegmentedButton}};l.getSegmentedButton=function t(){return this._oSegmentedButton};return a}(a),f=B(d.prototype,"initialLayout",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),h=B(d.prototype,"toggleControl",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),d))||c);return L},false);
//# sourceMappingURL=FilterBar.js.map