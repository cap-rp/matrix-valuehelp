/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/TypeGuards","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,o,s){"use strict";var r={};var a=n.isProperty;var l=t.convertTypes;function i(e,t,n,s){let r=s;if(typeof r==="string"&&t.annotations.Common?.IsUpperCase?.valueOf()===true){r=r.toUpperCase()}return new o({path:e.keyPath,operator:n,value1:r})}async function u(t,n,o,r){const a=t.valueListInfo.$model;const l=`/${t.valueListInfo.CollectionPath}`;const u=d(t);const p=e.normalizeSearchTerm(r instanceof Date?r.toISOString():r.toString());const f=i(t,n,o,r);const[v,m]=await Promise.allSettled([a.bindList(l,undefined,undefined,f,{$select:u}).requestContexts(0,1),a.bindList(l,undefined,undefined,undefined,{$search:p,$select:u}).requestContexts()]);const h=c(t,true);if(v.status==="fulfilled"&&v.value.length>0){return o===s.EQ?{operator:o,selectedValues:v.value.map(h)}:{operator:o,selectedValues:[{value:r,description:r}]}}if(m.status==="fulfilled"&&m.value.length>0){return{operator:s.EQ,selectedValues:m.value.map(h)}}return{operator:o,selectedValues:[{value:r,description:r}]}}function c(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return n=>{const o=n.getObject();const s=o[e.keyPath];const r=e.descriptionPath?o[e.descriptionPath]:undefined;return{value:s,description:t?r??s:r}}}r.mapValueListToCodeList=c;function d(e){return[e.keyPath,e.descriptionPath].filter(e=>e&&!e.includes("/")).join(",")}r.generateSelectParameter=d;function p(e,t){const[n,o]=t;const s=[];for(const{value:t,description:r}of n.selectedValues){for(const{value:n,description:a}of o.selectedValues){s.push({operator:e,selectedValues:[{value:t,description:r??t},{value:n,description:a??n}]})}}return s}async function f(e,t){const{operator:n,selectedValues:o}=t;const r=e.valueListInfo.$model;r.setContinueOnError("$auto");const i=l(r.getMetaModel());const c=i.resolvePath(`/${e.valueListInfo.CollectionPath}/${e.keyPath}`)?.target;if(!a(c)){return v([t])}const d=n===s.BT||n===s.NB?s.EQ:n;const f=await Promise.all(o.map(async t=>u(e,c,d,t)));return n===s.BT||n===s.NB?p(n,f):f.flat()}r.resolveTokenValue=f;function v(e){return e.map(e=>{let{operator:t,selectedValues:n}=e;return{operator:t,selectedValues:n.map(e=>({value:e,description:e}))}})}r.unresolvedResult=v;return r},false);
//# sourceMappingURL=EasyFilterDataFetcher.js.map