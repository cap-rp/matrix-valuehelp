/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/EventDelegateHook","sap/fe/core/converters/MetaModelConverter","sap/fe/core/formatters/CollaborationFormatter","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/controls/CollaborationHBox","sap/fe/macros/controls/RadioButtons","sap/fe/macros/field/FieldTemplating","sap/m/Avatar","sap/m/CheckBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/Input","sap/m/MaskInput","sap/m/MaskInputRule","sap/m/RatingIndicator","sap/m/TextArea","sap/m/TimePicker","sap/ui/core/CustomData","sap/ui/mdc/Field","sap/ui/mdc/enums/FieldEditMode","../../field/FieldHelper","../../field/TextAreaEx","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(e,t,a,i,o,r,l,n,s,d,p,u,c,m,h,g,v,x,f,b,y,P,I,T,E,L,F){"use strict";var k=s.getTextAlignment;var D=s.getMultipleLinesForDataField;var C=o.hasValueHelpWithFixedValues;var M=e.pathInModel;var B=e.compileExpression;const S={getLayoutData(e){let t="";if(e.collaborationEnabled){t=L(m,{growFactor:"9"})}return t},getCollaborationAvatar(e){const a=B(e.collaborationExpression);const o=B(r.getCollaborationExpression(e.dataModelPath,i.getCollaborationActivityInitials));const l=B(r.getCollaborationExpression(e.dataModelPath,i.getCollaborationActivityColor));return L(d,{"core:require":"{FieldRuntimeHelper: 'sap/fe/macros/field/FieldRuntimeHelper'}",visible:a,initials:o,displaySize:"Custom",customDisplaySize:"1.5rem",customFontSize:"0.8rem",backgroundColor:l,press:e.eventHandlers.showCollaborationEditUser,children:{dependents:L(t,{stopTapPropagation:true})}})},getDateTimePickerGeneric(e,t){const i=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const o=k(i,e.formatOptions,e.editModeAsObject);const r={"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,width:"100%",editable:e.editableExpression,enabled:e.enabledExpression,required:e.requiredExpression,textAlign:o,ariaLabelledBy:e.ariaLabelledBy,value:e.valueBindingExpression,fieldGroupIds:e.fieldGroupIds,showTimezone:e.showTimezone,minDate:t==="DateTimePicker"||t==="DatePicker"?e.minDateExpression:undefined,maxDate:t==="DateTimePicker"||t==="DatePicker"?e.maxDateExpression:undefined,change:t==="DateTimePicker"?e.change||e.eventHandlers.change:e.eventHandlers.change,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup};function l(t){let a;switch(t){case"DatePicker":a=L(u,{...r,children:{customData:L(y,{value:e.dataSourcePath},"sourcePath")}});break;case"DateTimePicker":a=L(c,{...r,children:{customData:L(y,{value:e.dataSourcePath},"sourcePath")}});break;case"TimePicker":a=L(b,{...r,children:{customData:L(y,{value:e.dataSourcePath},"sourcePath")}});break}return a}return l(t)},getInputTemplate(e){const t=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const i=k(t,e.formatOptions,e.editModeAsObject);return L(h,{"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,width:"100%",editable:e.editableExpression,description:e.staticDescription,enabled:e.enabledExpression,required:e.requiredExpression,fieldGroupIds:e.fieldGroupIds,textAlign:i,type:e.editStyle==="Masked"?"Password":undefined,ariaLabelledBy:e.ariaLabelledBy,maxLength:e.formatOptions.textMaxLength,change:e.eventHandlers.change,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{layoutData:S.getLayoutData(e),customData:L(y,{value:e.dataSourcePath},"sourcePath")}})},showAsRadioButton(e){const t=e.property.annotations?.Common?.ValueListWithFixedValues&&C(e.property)===true&&(e.property.annotations.Common.ValueListWithFixedValues.annotations?.Common?.ValueListShowValuesImmediately&&e.property.annotations.Common.ValueListWithFixedValues.annotations?.Common?.ValueListShowValuesImmediately.valueOf()===true||e.formatOptions.fieldEditStyle==="RadioButtons");const a=e.property?.annotations?.Common?.ValueList?.Parameters.find(t=>(t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut")&&t.LocalDataProperty.value===e.property.name);return t&&a!==undefined&&!e.property.annotations?.Common?.ValueListRelevantQualifiers},getRadioButtonTemplate(e){const t="/"+e.property?.annotations?.Common?.ValueList?.CollectionPath;const a=e.property?.annotations?.Common?.ValueList?.Parameters.find(t=>(t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||t.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterOut")&&t.LocalDataProperty.value===e.property.name);const i=M(a.ValueListProperty);let o;const r=e.dataModelPath.targetEntityType.resolvePath(t).entityType.keys[0].annotations?.Common?.Text?.path;if(r){o=M(r)}else{o=i}return L(n,{id:e.editStyleId,requiredExpression:e.requiredExpression,validateFieldGroup:e.eventHandlers.validateFieldGroup,fixedValuesPath:t,fieldGroupIds:e.fieldGroupIds,value:e.valueBindingExpression,enabledExpression:e.enabledExpression,radioButtonTextProperty:o,radioButtonKeyProperty:i,horizontalLayout:e.formatOptions.radioButtonsHorizontalLayout})},getInputWithValueHelpTemplate(e){const t=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const i=T.computeFieldBaseDelegate("sap/fe/macros/field/FieldBaseDelegate",e.formatOptions.retrieveTextFromValueList);const o=r.getFieldDisplay(e.property,e.formatOptions.displayMode,e.editModeAsObject);const l=!!e.property?.annotations?.UI?.MultiLineText;const n=D(e,l);const s=k(t,e.formatOptions,e.editModeAsObject,true);const d=T.computeLabelText(e,{context:e.metaPath});let p="";if(e.property.type==="Edm.String"&&l){p=L(f,{value:e.valueBindingExpression,required:e.requiredExpression,rows:e.formatOptions.textLinesEdit,growing:e.formatOptions.textMaxLines>0?true:undefined,growingMaxLines:e.formatOptions.textMaxLines,width:"100%",change:e.eventHandlers.change,fieldGroupIds:e.fieldGroupIds})}let u="";if(e.collaborationEnabled===true){u=L(m,{growFactor:"9"})}if(this.showAsRadioButton(e)!==true){return L(P,{"core:require":"{Field: 'sap/fe/macros/Field'}",delegate:i,id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,valueState:e.valueState,editMode:e.editMode??e.computedEditMode,width:"100%",required:e.requiredExpression,additionalValue:e.textBindingExpression,display:o,multipleLines:n===false?undefined:n,valueHelp:e.valueHelpId,fieldGroupIds:e.fieldGroupIds,textAlign:s,ariaLabelledBy:e.ariaLabelledBy,label:d,change:e.eventHandlers.change,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{contentEdit:p,layoutData:u,customData:L(y,{value:e.dataSourcePath},"sourcePath")}})}else{return this.getRadioButtonTemplate(e)}},getCheckBoxTemplate(e){return L(p,{"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,selected:e.valueBindingExpression,editable:e.editableExpression,enabled:e.enabledExpression,fieldGroupIds:e.fieldGroupIds,ariaLabelledBy:e.ariaLabelledBy,select:e.eventHandlers.change,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{customData:L(y,{value:e.dataSourcePath},"sourcePath")}})},getTextAreaTemplate(e){const t=e.formatOptions.textMaxLines?true:false;const a=!!e.formatOptions.textMaxLength;let i="";if(e.collaborationEnabled){i=L(m,{growFactor:"9"})}return L(E,{"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,required:e.requiredExpression,rows:e.formatOptions.textLinesEdit,growing:t,growingMaxLines:e.formatOptions.textMaxLines,cols:300,width:"100%",editable:e.editableExpression,enabled:e.enabledExpression,fieldGroupIds:e.fieldGroupIds,ariaLabelledBy:e.ariaLabelledBy,maxLength:e.formatOptions.textMaxLength,showExceededText:a,change:e.eventHandlers.change,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{layoutData:i,customData:L(y,{value:e.dataSourcePath},"sourcePath")}})},getRatingIndicatorTemplate:e=>{const t=e.ratingIndicatorTooltip||"{sap.fe.i18n>T_COMMON_RATING_INDICATOR_TITLE_LABEL}";return L(x,{"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,maxValue:e.ratingIndicatorTargetValue,value:e.valueBindingExpression,tooltip:t,fieldGroupIds:e.fieldGroupIds,iconSize:"1.375rem",class:"sapUiTinyMarginTopBottom",editable:"true",change:e.eventHandlers.change,children:{layoutData:S.getLayoutData(e)}})},getTemplateWithWrapper(e){let t;if((e.editMode??e.computedEditMode)!==I.Display&&!!e.editStyle){if(e.collaborationEnabled??false){t=F(l,{width:"100%",alignItems:"End",children:[S.getTemplate(e),S.getCollaborationAvatar(e)]})}else{t=S.getTemplate(e)}}return t||""},getInputMaskTemplate(e){const t=[];const i=a.getInvolvedDataModelObjects(e.metaPath,e.contextPath);const o=k(i,e.formatOptions,e.editModeAsObject);if(e.mask?.maskRule){for(const a of e.mask.maskRule){t.push(L(v,{maskFormatSymbol:a.symbol,regex:a.regex}))}}return L(g,{"core:require":"{Field: 'sap/fe/macros/Field'}",id:e.editStyleId,value:e.valueBindingExpression,placeholder:e.editStylePlaceholder,width:"100%",editable:e.editableExpression,ariaLabelledBy:e.ariaLabelledBy,mask:e.mask?.mask,enabled:e.enabledExpression,required:e.requiredExpression,fieldGroupIds:e.fieldGroupIds,textAlign:o,placeholderSymbol:e.mask?.placeholderSymbol,liveChange:e.eventHandlers.liveChange,validateFieldGroup:e.eventHandlers.validateFieldGroup,children:{rules:t,customData:L(y,{value:e.dataSourcePath},"sourcePath")}})},getTemplate:e=>{let t;switch(e.editStyle){case"CheckBox":t=S.getCheckBoxTemplate(e);break;case"DatePicker":case"DateTimePicker":case"TimePicker":{t=S.getDateTimePickerGeneric(e,e.editStyle);break}case"Input":{t=S.getInputTemplate(e);break}case"Masked":{t=S.getInputTemplate(e);break}case"InputWithValueHelp":{t=S.getInputWithValueHelpTemplate(e);break}case"RatingIndicator":t=S.getRatingIndicatorTemplate(e);break;case"TextArea":t=S.getTextAreaTemplate(e);break;case"InputMask":t=S.getInputMaskTemplate(e);break;default:}return t}};return S},false);
//# sourceMappingURL=EditStyle.js.map