{"version":3,"file":"FilterField.block.js","names":["FilterFieldBlock","_dec","defineBuildingBlock","name","namespace","_dec2","blockAttribute","type","required","isPublic","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_class","_class2","_BuildingBlockTemplat","props","configuration","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","propertyConverted","MetaModelConverter","convertMetaModelContext","property","externalIdPropertyPath","getAssociatedExternalIdPropertyPath","propertyExternalId","getModel","createBindingContext","getPath","replace","propertyConvertedExternalId","undefined","dataModelPath","getInvolvedDataModelObjects","contextPath","propertyName","originalPropertyName","fixedValues","annotations","Common","ValueListWithFixedValues","controlId","idPrefix","generate","sourcePath","getTargetObjectPath","documentRefText","targetObject","DocumentationRef","toString","dataType","getDataType","labelTerm","Label","labelExpression","constant","label","compileExpression","conditionsBinding","getConditionsBinding","placeholder","getPlaceholder","propertyKey","getContextRelativeTargetObjectPath","vfEnabled","visualFilter","includes","vfId","vfRuntimeId","propertyContext","model","vhPropertyPath","FieldHelper","valueHelpPropertyForFilterField","filterable","CommonHelper","isPropertyFilterable","propertyObject","getObject","propertyInterface","context","display","getFilterFieldDisplayFormat","isFilterable","maxConditions","getMaxConditions","dataTypeConstraints","constraints","dataTypeFormatOptions","formatOptions","isRequiredInFilter","operators","useSemanticDateRange","ExtendedSemanticDateOperators","addExtendedFilterOperators","split","vhProperty","vhPropertyObject","vhPropertyInterface","relativeVhPropertyPath","getRelativePropertyPath","relativePropertyPath","valueHelpProperty","getValueHelpPropertyForFilterField","$Type","vhIdPrefix","targetEntityType","_exports","_inheritsLoose","_proto","prototype","getVisualFilterContent","visualFilterObject","vfXML","isA","SAP_UI_MODEL_CONTEXT","presentationAnnotation","outParameter","inParameters","valuelistProperty","selectionVariantAnnotation","multipleSelectionAllowed","requiredProperties","showOverlayInitially","renderLineChart","isValueListWithFixedValues","xml","stringifyCustomData","getTemplate","async","xmlRet","companionTextAvailable","formattedResult","formatResult","dataModelPathExternalId","getDisplayMode","err","Log","error","attr","editMode","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FilterField.block.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport type { PropertyAnnotations_Common } from \"@sap-ux/vocabularies-types/vocabularies/Common_Edm\";\nimport Log from \"sap/base/Log\";\nimport type { CompiledBindingToolkitExpression } from \"sap/fe/base/BindingToolkit\";\nimport { compileExpression, constant, formatResult } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { blockAttribute, defineBuildingBlock } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport { SAP_UI_MODEL_CONTEXT, xml } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport * as MetaModelConverter from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getMaxConditions } from \"sap/fe/core/converters/controls/ListReport/FilterField\";\nimport type { VisualFilters } from \"sap/fe/core/converters/controls/ListReport/VisualFilters\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport {\n\tgetContextRelativeTargetObjectPath,\n\tgetTargetObjectPath,\n\ttype DataModelObjectPath\n} from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getRelativePropertyPath } from \"sap/fe/core/templating/PropertyFormatters\";\nimport { getAssociatedExternalIdPropertyPath } from \"sap/fe/core/templating/PropertyHelper\";\nimport { getDisplayMode, type ComputedAnnotationInterface, type MetaModelContext } from \"sap/fe/core/templating/UIFormatters\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport {\n\tconstraints,\n\tformatOptions,\n\tgetConditionsBinding,\n\tgetDataType,\n\tgetPlaceholder,\n\tisRequiredInFilter\n} from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport { getFilterFieldDisplayFormat } from \"sap/fe/macros/filter/FilterFieldTemplating\";\nimport ExtendedSemanticDateOperators from \"sap/fe/macros/filterBar/ExtendedSemanticDateOperators\";\nimport type Context from \"sap/ui/model/Context\";\nimport type MetaModel from \"sap/ui/model/MetaModel\";\n\n/**\n * Building block for creating a Filter Field based on the metadata provided by OData V4.\n * <br>\n * It is designed to work based on a property context(property) pointing to an entity type property\n * needed to be used as filterfield and entityType context(contextPath) to consider the relativity of\n * the propertyPath of the property wrt entityType.\n *\n * Usage example:\n * <pre>\n * &lt;macros:FilterField id=\"MyFilterField\" property=\"CompanyName\" /&gt;\n * </pre>\n * @private\n */\n@defineBuildingBlock({\n\tname: \"FilterField\",\n\tnamespace: \"sap.fe.macros.internal\"\n})\nexport default class FilterFieldBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tproperty!: Context;\n\n\t/**\n\t * Metadata path to the entitySet or navigationProperty\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Visual filter settings for filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tvisualFilter?: Context | VisualFilters;\n\n\t/**\n\t * A prefix that is added to the generated ID of the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tidPrefix = \"FilterField\";\n\n\t/**\n\t * A prefix that is added to the generated ID of the value help used for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tvhIdPrefix = \"FilterFieldValueHelp\";\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Settings from the manifest.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tsettings = \"\";\n\n\t/**\n\t * Speficies the enablement of the filter field.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: false\n\t})\n\teditMode?: string;\n\n\t/***********************************************\n\t *            INTERNAL ATTRIBUTES              *\n\t **********************************************/\n\n\t/**\n\t * Control Id for MDC filter field used inside.\n\t */\n\tcontrolId!: string;\n\n\t/**\n\t * Property key for filter field.\n\t */\n\tpropertyKey!: string;\n\n\t/**\n\t * Source annotation path of the property.\n\t */\n\tsourcePath!: string;\n\n\t/**\n\t * Source annotation path of the property.\n\t */\n\tdocumentRefText?: string;\n\n\t/**\n\t * Label for filterfield.\n\t */\n\tlabel!: string;\n\n\t/**\n\t * Data Type of the filter field.\n\t */\n\tdataType!: string;\n\n\t/**\n\t * Maximum conditions that can be added to the filter field.\n\t */\n\tmaxConditions!: number;\n\n\t/**\n\t * Value Help id as association for the filter field.\n\t */\n\tvalueHelpProperty?: string;\n\n\t/**\n\t * Binding path for conditions added to filter field.\n\t */\n\tconditionsBinding!: string;\n\n\t/**\n\t * Datatype constraints of the filter field.\n\t */\n\tdataTypeConstraints?: string;\n\n\t/**\n\t * Datatype format options of the filter field.\n\t */\n\tdataTypeFormatOptions?: string;\n\n\t/**\n\t * To specify filter field is mandatory for filtering.\n\t */\n\trequired!: boolean;\n\n\t/**\n\t * Valid operators for the filter field.\n\t */\n\toperators?: string;\n\n\t/**\n\t * Visual Filter id to be used.\n\t */\n\tvfId?: string;\n\n\t/**\n\t * Visual Filter building block id to be used.\n\t */\n\tvfRuntimeId?: string;\n\n\t/**\n\t * Visual Filter is expected.\n\t */\n\tvfEnabled!: boolean;\n\n\t/**\n\t * Property used is filterable\n\t */\n\tisFilterable!: boolean;\n\n\t/**\n\t * Property for placeholder\n\t */\n\tplaceholder?: string;\n\n\t/**\n\t * Property to hold promise for display\n\t */\n\tdisplay?: Promise<string | undefined>;\n\n\tpropertyExternalId?: Context;\n\n\tconstructor(props: PropertiesOf<FilterFieldBlock>, configuration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, settings);\n\n\t\tconst propertyConverted = MetaModelConverter.convertMetaModelContext(this.property) as Property;\n\n\t\tconst externalIdPropertyPath = getAssociatedExternalIdPropertyPath(propertyConverted) as string;\n\t\tif (externalIdPropertyPath) {\n\t\t\tthis.propertyExternalId = this.property\n\t\t\t\t.getModel()\n\t\t\t\t.createBindingContext(this.property.getPath().replace(propertyConverted.name, externalIdPropertyPath), this.property);\n\t\t}\n\n\t\tconst propertyConvertedExternalId = this.propertyExternalId\n\t\t\t? (MetaModelConverter.convertMetaModelContext(this.propertyExternalId) as Property)\n\t\t\t: undefined;\n\n\t\tconst dataModelPath = MetaModelConverter.getInvolvedDataModelObjects<Property>(this.property, this.contextPath);\n\n\t\t// Property settings\n\t\tconst propertyName = propertyConverted.name,\n\t\t\toriginalPropertyName = propertyConverted.name,\n\t\t\tfixedValues =\n\t\t\t\t!!propertyConvertedExternalId?.annotations?.Common?.ValueListWithFixedValues ||\n\t\t\t\t!!propertyConverted.annotations?.Common?.ValueListWithFixedValues;\n\n\t\tthis.controlId = this.idPrefix && generate([this.idPrefix, originalPropertyName]);\n\t\tthis.sourcePath = getTargetObjectPath(dataModelPath);\n\n\t\ttype PropertyAnnotations_Common_extended = PropertyAnnotations_Common & { DocumentationRef?: string };\n\t\tthis.documentRefText = (\n\t\t\tdataModelPath.targetObject?.annotations.Common as PropertyAnnotations_Common_extended\n\t\t)?.DocumentationRef?.toString();\n\n\t\tthis.dataType = getDataType(propertyConvertedExternalId || propertyConverted); // data type for LR-FilterBar condition of the value help\n\t\tconst labelTerm = propertyConverted?.annotations?.Common?.Label;\n\t\tconst labelExpression = labelTerm?.toString() ?? constant(propertyName);\n\t\tthis.label = compileExpression(labelExpression) || propertyName;\n\t\tthis.conditionsBinding = getConditionsBinding(dataModelPath) || \"\";\n\t\tthis.placeholder = getPlaceholder(propertyConverted);\n\t\tthis.propertyKey = getContextRelativeTargetObjectPath(dataModelPath, false, true) || propertyName;\n\t\t// Visual Filter settings\n\t\tthis.vfEnabled = !!this.visualFilter && !(this.idPrefix && this.idPrefix.includes(\"Adaptation\"));\n\t\tthis.vfId = this.vfEnabled ? generate([this.idPrefix, propertyName, \"VisualFilter\"]) : undefined;\n\t\tthis.vfRuntimeId = this.vfEnabled ? generate([this.idPrefix, propertyName, \"VisualFilterContainer\"]) : undefined;\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t\t// TODO: need to change operations from MetaModel to Converters.\n\t\t// This mainly included changing changing getFilterRestrictions operations from metaModel to converters\n\t\tconst propertyContext = this.property,\n\t\t\tmodel: MetaModel = propertyContext.getModel(),\n\t\t\tvhPropertyPath: string = FieldHelper.valueHelpPropertyForFilterField(propertyContext),\n\t\t\tfilterable = CommonHelper.isPropertyFilterable(propertyContext),\n\t\t\tpropertyObject = propertyContext.getObject(),\n\t\t\tpropertyInterface = { context: propertyContext } as ComputedAnnotationInterface;\n\n\t\tthis.display = getFilterFieldDisplayFormat(dataModelPath, propertyConverted, propertyInterface);\n\t\tthis.isFilterable = !(filterable === false || filterable === \"false\");\n\t\tthis.maxConditions = getMaxConditions(dataModelPath);\n\t\tthis.dataTypeConstraints = constraints(propertyObject, propertyInterface);\n\t\tthis.dataTypeFormatOptions = formatOptions(propertyObject, propertyInterface);\n\t\tthis.required = isRequiredInFilter(propertyObject, propertyInterface);\n\t\tthis.operators = FieldHelper.operators(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tthis.useSemanticDateRange,\n\t\t\tthis.settings || \"\",\n\t\t\tthis.contextPath.getPath()\n\t\t);\n\t\tif (this.operators) {\n\t\t\t// Extended operators are not added by default.\n\t\t\t// We add them to MDC filter environment.\n\t\t\tExtendedSemanticDateOperators.addExtendedFilterOperators(this.operators.split(\",\"));\n\t\t}\n\t\t// Value Help settings\n\t\t// TODO: This needs to be updated when VH macro is converted to 2.0\n\t\tconst vhProperty = model.createBindingContext(vhPropertyPath) as Context;\n\t\tconst vhPropertyObject = vhProperty.getObject() as MetaModelContext,\n\t\t\tvhPropertyInterface = { context: vhProperty },\n\t\t\trelativeVhPropertyPath = getRelativePropertyPath(vhPropertyObject, vhPropertyInterface),\n\t\t\trelativePropertyPath = getRelativePropertyPath(propertyObject, propertyInterface);\n\t\tthis.valueHelpProperty = FieldHelper.getValueHelpPropertyForFilterField(\n\t\t\tpropertyContext,\n\t\t\tpropertyObject,\n\t\t\tpropertyObject.$Type,\n\t\t\tthis.vhIdPrefix,\n\t\t\tdataModelPath.targetEntityType.name,\n\t\t\trelativePropertyPath,\n\t\t\trelativeVhPropertyPath,\n\t\t\tfixedValues,\n\t\t\tthis.useSemanticDateRange\n\t\t);\n\n\t\t//-----------------------------------------------------------------------------------------------------//\n\t}\n\n\tgetVisualFilterContent(): string {\n\t\tlet visualFilterObject = this.visualFilter,\n\t\t\tvfXML = \"\";\n\t\tif (!this.vfEnabled || !visualFilterObject) {\n\t\t\treturn vfXML;\n\t\t}\n\t\tif ((visualFilterObject as Context)?.isA?.(SAP_UI_MODEL_CONTEXT)) {\n\t\t\tvisualFilterObject = (visualFilterObject as Context).getObject() as VisualFilters;\n\t\t}\n\n\t\tconst {\n\t\t\tcontextPath,\n\t\t\tpresentationAnnotation,\n\t\t\toutParameter,\n\t\t\tinParameters,\n\t\t\tvaluelistProperty,\n\t\t\tselectionVariantAnnotation,\n\t\t\tmultipleSelectionAllowed,\n\t\t\trequired,\n\t\t\trequiredProperties = [],\n\t\t\tshowOverlayInitially,\n\t\t\trenderLineChart,\n\t\t\tisValueListWithFixedValues\n\t\t} = visualFilterObject as VisualFilters;\n\t\tvfXML = xml`\n\t\t\t\t<visualFilter:VisualFilter\n\t\t\t\t    xmlns:visualFilter= \"sap.fe.macros.visualfilters\"\n\t\t\t\t\tid=\"${this.vfRuntimeId}\"\n\t\t\t\t\t_contentId=\"${this.vfId}\"\n\t\t\t\t\tcontextPath=\"${contextPath}\"\n\t\t\t\t\tmetaPath=\"${presentationAnnotation}\"\n\t\t\t\t\toutParameter=\"${outParameter}\"\n\t\t\t\t\tinParameters=\"${CommonHelper.stringifyCustomData(inParameters)}\"\n\t\t\t\t\tvaluelistProperty=\"${valuelistProperty}\"\n\t\t\t\t\tselectionVariantAnnotation=\"${selectionVariantAnnotation}\"\n\t\t\t\t\tmultipleSelectionAllowed=\"${multipleSelectionAllowed}\"\n\t\t\t\t\trequired=\"${required}\"\n\t\t\t\t\trequiredProperties=\"${CommonHelper.stringifyCustomData(requiredProperties)}\"\n\t\t\t\t\tshowOverlayInitially=\"${showOverlayInitially}\"\n\t\t\t\t\trenderLineChart=\"${renderLineChart}\"\n\t\t\t\t\tisValueListWithFixedValues=\"${isValueListWithFixedValues}\"\n\t\t\t\t\tfilterBarEntityType=\"${contextPath}\"\n\t\t\t\t/>\n\t\t\t`;\n\n\t\treturn vfXML;\n\t}\n\n\tasync getTemplate(): Promise<string> {\n\t\tlet xmlRet = ``;\n\t\tif (this.isFilterable) {\n\t\t\tlet display;\n\t\t\tconst companionTextAvailable = this.documentRefText === undefined || null ? false : true;\n\t\t\tconst formattedResult: CompiledBindingToolkitExpression = compileExpression(\n\t\t\t\tformatResult([this.documentRefText], \"sap.fe.core.formatters.StandardFormatter#asArray\")\n\t\t\t);\n\t\t\ttry {\n\t\t\t\tconst dataModelPathExternalId =\n\t\t\t\t\tthis.propertyExternalId && MetaModelConverter.getInvolvedDataModelObjects(this.propertyExternalId, this.contextPath);\n\t\t\t\tdisplay = dataModelPathExternalId\n\t\t\t\t\t? getDisplayMode(dataModelPathExternalId as DataModelObjectPath<Property>)\n\t\t\t\t\t: await this.display;\n\t\t\t} catch (err: unknown) {\n\t\t\t\tLog.error(`FE : FilterField BuildingBlock : Error fetching display property for ${this.sourcePath} : ${err}`);\n\t\t\t}\n\t\t\txmlRet = xml`\n\t\t\t\t<mdc:FilterField\n\t\t\t\t\txmlns:mdc=\"sap.ui.mdc\"\n\t\t\t\t\txmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"\n\t\t\t\t\txmlns:macro=\"sap.fe.macros\"\n\t\t\t\t\txmlns:customData=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\"\n\t\t\t\t\txmlns:fieldhelp=\"sap.ui.core.fieldhelp\"\n\t\t\t\t\tcustomData:sourcePath=\"${this.sourcePath}\"\n\t\t\t\t\tid=\"${this.controlId}\"\n\t\t\t\t\tdelegate=\"{name: 'sap/fe/macros/field/FieldBaseDelegate', payload:{isFilterField:true}}\"\n\t\t\t\t\tpropertyKey=\"${this.propertyKey}\"\n\t\t\t\t\tlabel=\"${this.label}\"\n\t\t\t\t\tdataType=\"${this.dataType}\"\n\t\t\t\t\tdisplay=\"${display}\"\n\t\t\t\t\tmaxConditions=\"${this.maxConditions}\"\n\t\t\t\t\tvalueHelp=\"${this.valueHelpProperty}\"\n\t\t\t\t\tconditions=\"${this.conditionsBinding}\"\n\t\t\t\t\tdataTypeConstraints=\"${this.dataTypeConstraints}\"\n\t\t\t\t\tdataTypeFormatOptions=\"${this.dataTypeFormatOptions}\"\n\t\t\t\t\trequired=\"${this.required}\"\n\t\t\t\t\toperators=\"${this.operators}\"\n\t\t\t\t\tplaceholder=\"${this.placeholder}\"\n\t\t\t\t\t${this.attr(\"editMode\", this.editMode)}\n\t\t\t\t>\n\t\t\t\t\t${\n\t\t\t\t\t\tcompanionTextAvailable\n\t\t\t\t\t\t\t? xml`\n\t\t\t\t\t\t<mdc:customData>\n\t\t\t\t\t\t\t<fieldhelp:FieldHelpCustomData\n\t\t\t\t\t\t\t\t${this.attr(\"value\", formattedResult)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</mdc:customData>\n\t\t\t\t\t`\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t}\n\t\t\t\t\t${this.vfEnabled ? this.getVisualFilterContent() : \"\"}\n\t\t\t\t</mdc:FilterField>\n\t\t\t`;\n\t\t}\n\n\t\treturn xmlRet;\n\t}\n}\n"],"mappings":";;;;+1EAqCA,IAiBqBA,IAAgBC,EAJpCC,EAAoB,CACpBC,KAAM,cACNC,UAAW,2BACVC,EAKAC,GAAe,CACfC,KAAM,uBACNC,SAAU,KACVC,SAAU,OACTC,EAMDJ,GAAe,CACfC,KAAM,uBACNC,SAAU,KACVC,SAAU,OACTE,EAMDL,GAAe,CACfC,KAAM,uBACNE,SAAU,OACTG,EAMDN,GAAe,CACfC,KAAM,SACNE,SAAU,OACTI,EAMDP,GAAe,CACfC,KAAM,SACNE,SAAU,OACTK,EAMDR,GAAe,CACfC,KAAM,UACNE,SAAU,OACTM,EAMDT,GAAe,CACfC,KAAM,SACNE,SAAU,OACTO,EAMDV,GAAe,CACfC,KAAM,SACNE,SAAU,QACTR,EAAAgB,GAAAC,EAAA,SAAAC,GAwGF,SAAAnB,EAAYoB,EAAuCC,EAAwBC,GAAqC,IAAAC,EAC/GA,EAAAJ,EAAAK,KAAAC,KAAML,EAAOC,EAAeC,IAASG,KAhLtCC,GAAAH,EAAA,WAAAI,EAAAJ,GAUAG,GAAAH,EAAA,cAAAK,EAAAL,GAUAG,GAAAH,EAAA,eAAAM,EAAAN,GASAG,GAAAH,EAAA,WAAAO,EAAAP,GASAG,GAAAH,EAAA,aAAAQ,EAAAR,GASAG,GAAAH,EAAA,uBAAAS,EAAAT,GASAG,GAAAH,EAAA,WAAAU,EAAAV,GASAG,GAAAH,EAAA,WAAAW,EAAAX,GAiHC,MAAMY,EAAoBC,EAAmBC,wBAAwBd,EAAKe,UAE1E,MAAMC,EAAyBC,EAAoCL,GACnE,GAAII,EAAwB,CAC3BhB,EAAKkB,mBAAqBlB,EAAKe,SAC7BI,WACAC,qBAAqBpB,EAAKe,SAASM,UAAUC,QAAQV,EAAkBhC,KAAMoC,GAAyBhB,EAAKe,SAC9G,CAEA,MAAMQ,EAA8BvB,EAAKkB,mBACrCL,EAAmBC,wBAAwBd,EAAKkB,oBACjDM,UAEH,MAAMC,EAAgBZ,EAAmBa,4BAAsC1B,EAAKe,SAAUf,EAAK2B,aAGnG,MAAMC,EAAehB,EAAkBhC,KACtCiD,EAAuBjB,EAAkBhC,KACzCkD,IACGP,GAA6BQ,aAAaC,QAAQC,4BAClDrB,EAAkBmB,aAAaC,QAAQC,yBAE3CjC,EAAKkC,UAAYlC,EAAKmC,UAAYC,EAAS,CAACpC,EAAKmC,SAAUN,IAC3D7B,EAAKqC,WAAaC,EAAoBb,GAGtCzB,EAAKuC,gBACJd,EAAce,cAAcT,YAAYC,QACtCS,kBAAkBC,WAErB1C,EAAK2C,SAAWC,EAAYrB,GAA+BX,GAC3D,MAAMiC,EAAYjC,GAAmBmB,aAAaC,QAAQc,MAC1D,MAAMC,EAAkBF,GAAWH,YAAcM,GAASpB,GAC1D5B,EAAKiD,MAAQC,GAAkBH,IAAoBnB,EACnD5B,EAAKmD,kBAAoBC,EAAqB3B,IAAkB,GAChEzB,EAAKqD,YAAcC,EAAe1C,GAClCZ,EAAKuD,YAAcC,EAAmC/B,EAAe,MAAO,OAASG,EAErF5B,EAAKyD,YAAczD,EAAK0D,gBAAkB1D,EAAKmC,UAAYnC,EAAKmC,SAASwB,SAAS,eAClF3D,EAAK4D,KAAO5D,EAAKyD,UAAYrB,EAAS,CAACpC,EAAKmC,SAAUP,EAAc,iBAAmBJ,UACvFxB,EAAK6D,YAAc7D,EAAKyD,UAAYrB,EAAS,CAACpC,EAAKmC,SAAUP,EAAc,0BAA4BJ,UAKvG,MAAMsC,EAAkB9D,EAAKe,SAC5BgD,EAAmBD,EAAgB3C,WACnC6C,EAAyBC,EAAYC,gCAAgCJ,GACrEK,EAAaC,EAAaC,qBAAqBP,GAC/CQ,EAAiBR,EAAgBS,YACjCC,EAAoB,CAAEC,QAASX,GAEhC9D,EAAK0E,QAAUC,EAA4BlD,EAAeb,EAAmB4D,GAC7ExE,EAAK4E,eAAiBT,IAAe,OAASA,IAAe,SAC7DnE,EAAK6E,cAAgBC,EAAiBrD,GACtCzB,EAAK+E,oBAAsBC,EAAYV,EAAgBE,GACvDxE,EAAKiF,sBAAwBC,EAAcZ,EAAgBE,GAC3DxE,EAAKf,SAAWkG,EAAmBb,EAAgBE,GACnDxE,EAAKoF,UAAYnB,EAAYmB,UAC5BtB,EACAQ,EACAtE,EAAKqF,qBACLrF,EAAKD,UAAY,GACjBC,EAAK2B,YAAYN,WAElB,GAAIrB,EAAKoF,UAAW,CAGnBE,EAA8BC,2BAA2BvF,EAAKoF,UAAUI,MAAM,KAC/E,CAGA,MAAMC,EAAa1B,EAAM3C,qBAAqB4C,GAC9C,MAAM0B,EAAmBD,EAAWlB,YACnCoB,EAAsB,CAAElB,QAASgB,GACjCG,EAAyBC,EAAwBH,EAAkBC,GACnEG,EAAuBD,EAAwBvB,EAAgBE,GAChExE,EAAK+F,kBAAoB9B,EAAY+B,mCACpClC,EACAQ,EACAA,EAAe2B,MACfjG,EAAKkG,WACLzE,EAAc0E,iBAAiBvH,KAC/BkH,EACAF,EACA9D,EACA9B,EAAKqF,sBAGN,OAAArF,CACD,CAACoG,EAAA3H,EAAA4H,GAAA5H,EAAAmB,GAAA,IAAA0G,EAAA7H,EAAA8H,UAAAD,EAEDE,uBAAA,SAAAA,IACC,IAAIC,EAAqBvG,KAAKwD,aAC7BgD,EAAQ,GACT,IAAKxG,KAAKuD,YAAcgD,EAAoB,CAC3C,OAAOC,CACR,CACA,GAAKD,GAAgCE,MAAMC,GAAuB,CACjEH,EAAsBA,EAA+BlC,WACtD,CAEA,MAAM5C,YACLA,EAAWkF,uBACXA,EAAsBC,aACtBA,EAAYC,aACZA,EAAYC,kBACZA,EAAiBC,2BACjBA,EAA0BC,yBAC1BA,EAAwBjI,SACxBA,EAAQkI,mBACRA,EAAqB,GAAEC,qBACvBA,EAAoBC,gBACpBA,EAAeC,2BACfA,GACGb,EACJC,EAAQa,CAAG;;;WAGFrH,KAAK2D;mBACG3D,KAAK0D;oBACJjC;iBACHkF;qBACIC;qBACA1C,EAAaoD,oBAAoBT;0BAC5BC;mCACSC;iCACFC;iBAChBjI;2BACUmF,EAAaoD,oBAAoBL;6BAC/BC;wBACLC;mCACWC;4BACP3F;;KAI1B,OAAO+E,CACR,EAACJ,EAEKmB,YAANC,eAAMD,IACL,IAAIE,EAAS,GACb,GAAIzH,KAAK0E,aAAc,CACtB,IAAIF,EACJ,MAAMkD,EAAyB1H,KAAKqC,kBAAoBf,WAAa,KAAO,MAAQ,KACpF,MAAMqG,EAAoD3E,GACzD4E,GAAa,CAAC5H,KAAKqC,iBAAkB,qDAEtC,IACC,MAAMwF,EACL7H,KAAKgB,oBAAsBL,EAAmBa,4BAA4BxB,KAAKgB,mBAAoBhB,KAAKyB,aACzG+C,EAAUqD,EACPC,EAAeD,SACT7H,KAAKwE,OACf,CAAE,MAAOuD,GACRC,EAAIC,MAAM,wEAAwEjI,KAAKmC,gBAAgB4F,IACxG,CACAN,EAASJ,CAAG;;;;;;;8BAOerH,KAAKmC;WACxBnC,KAAKgC;;oBAEIhC,KAAKqD;cACXrD,KAAK+C;iBACF/C,KAAKyC;gBACN+B;sBACMxE,KAAK2E;kBACT3E,KAAK6F;mBACJ7F,KAAKiD;4BACIjD,KAAK6E;8BACH7E,KAAK+E;iBAClB/E,KAAKjB;kBACJiB,KAAKkF;oBACHlF,KAAKmD;OAClBnD,KAAKkI,KAAK,WAAYlI,KAAKmI;;OAG5BT,EACGL,CAAG;;;UAGFrH,KAAKkI,KAAK,QAASP;;;OAIpB;OAEF3H,KAAKuD,UAAYvD,KAAKsG,yBAA2B;;IAGtD,CAEA,OAAOmB,CACR,EAAC,OAAAlJ,CAAA,CAjTC,CAxE2C6J,GAA2BlI,EAAAmI,GAAA5I,EAAA4G,UAAA,YAAAzH,GAAA,CAAA0J,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAtI,EAAAkI,GAAA5I,EAAA4G,UAAA,eAAApH,GAAA,CAAAqJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAArI,EAAAiI,GAAA5I,EAAA4G,UAAA,gBAAAnH,GAAA,CAAAoJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAApI,EAAAgI,GAAA5I,EAAA4G,UAAA,YAAAlH,GAAA,CAAAmJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBAqC7D,aAAa,IAAAnI,EAAA+H,GAAA5I,EAAA4G,UAAA,cAAAjH,GAAA,CAAAkJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBASX,sBAAsB,IAAAlI,EAAA8H,GAAA5I,EAAA4G,UAAA,wBAAAhH,GAAA,CAAAiJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBASZ,IAAI,IAAAjI,EAAA6H,GAAA5I,EAAA4G,UAAA,YAAA/G,GAAA,CAAAgJ,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBAShB,EAAE,IAAAhI,EAAA4H,GAAA5I,EAAA4G,UAAA,YAAA9G,GAAA,CAAA+I,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAhJ,KAAAD,GAAA0G,EAAA3H,GAAA,OAAA2H,CAAA","ignoreList":[]}