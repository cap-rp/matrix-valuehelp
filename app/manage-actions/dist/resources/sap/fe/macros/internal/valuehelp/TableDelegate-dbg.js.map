{"version":3,"names":["ODataTableDelegate","Object","assign","TableDelegate","fetchProperties","table","model","_getModel","properties","_createPropertyInfos","createInternalBindingContext","MacrosDelegateUtil","setCachedProperties","getBindingContext","setProperty","dialog","isA","getParent","internalModel","getModel","internalBindingContext","newInternalBindingContextPath","getPath","getId","getProperty","newInternalBindingContext","bindContext","getBoundContext","setBindingContext","collectRelatedProperties","dataModelPropertyPath","dataModelAdditionalPropertyPath","getAdditionalProperty","relatedProperties","targetObject","additionalProperty","additionalPropertyPath","getTargetObjectPath","property","propertyPath","textAnnotation","annotations","Common","Text","textArrangement","UI","TextArrangement","toString","displayMode","getDisplayMode","metadataInfo","getDelegate","payload","entitySetPath","collectionName","metaModel","getMetaModel","requestObject","then","entitySetAnnotations","sortRestrictionsInfo","getSortRestrictionsInfo","filterRestrictions","filterRestrictionsInfo","getFilterRestrictionsInfo","filterFunctions","caseSensitive","ModelHelper","isFilteringCaseSensitive","customDataForColumns","getCustomData","propertiesToBeCreated","dataModelEntityPath","getInvolvedDataModelObjects","getContext","customData","forEach","columnDef","typeConfig","isTypeFilterable","$Type","getTypeMap","getTypeConfig","TypeMap","propertyInfo","key","path","label","enhanceDataModelPath","targetPropertyPath","type","propertyTypeConfig","fetchTypeConfig","formatOptions","constraints","relatedPropertiesInfo","relatedPropertyPaths","keys","length","propertyInfos","find","dataType","className","typeInstance","oConstraints","oFormatOptions","sortable","isSortableProperty","filterable","isFilterableProperty","maxConditions","getPropertyMaxConditions","push","relatedColumns","createRelatedProperties","concat","updateBindingInfo","mdcTable","bindingInfo","apply","collectionPath","parameters","filterBar","Element","getElementById","getFilter","isFilterEnabled","isFilteringEnabled","conditions","innerFilterInfo","outerFilterInfo","filters","tableProperties","getCachedProperties","getConditions","FilterUtil","getFilterInfo","isTreeTable","hierarchyQualifier","$$aggregation","expandTo","initialExpansionLevel","parameterNames","DelegateUtil","getParameterNames","_updatePropertyInfo","parameterPath","getParametersInfo","$search","CommonUtils","normalizeSearchTerm","getSearch","undefined","search","Number","MAX_SAFE_INTEGER","$$sharedRequest","_applyDefaultSorting","$select","reduce","query","includes","$count","isDraftSupported","Filter","FilterOperator","EQ","Promise","resolve","attachEventOnce","sorter","defaultSortPropertyName","Sorter","aTableProperties","oMDCTable","mConditions","oMetadataInfo","aConditionKey","oMetaModel","conditionKey","conditionKeyType","getObject","tableProperty","index","findIndex","oColumnDef","baseType","updateBinding","oTable","oBindingInfo","oBinding","bNeedManualRefresh","oInternalBindingContext","sManualUpdatePropertyKey","sLastSearch","sLastFilter","bPendingManualUpdate","lastSearch","lastFilter","oRowBinding","getRowBinding","deepEqual","requestRefresh","getGroupId","finally","catch","oError","Log","error","fireEvent","existingColumns","relatedPropertyNameMap","relatedColumn","column","newName","valueHelpColumnTypeConfig","valueHelpTableColumn","getLabel","map","columnName","hasOwnProperty","isMultiValueFilterExpression","getAssociatedTextPropertyPath","getAssociatedCurrencyPropertyPath","getAssociatedUnitPropertyPath","getAssociatedTimezonePropertyPath","dataModelAdditionalProperty"],"sourceRoot":".","sources":["TableDelegate.ts"],"sourcesContent":["import type { Property } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport deepEqual from \"sap/base/util/deepEqual\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { fetchTypeConfig } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport type { FilterRestrictionsInfoType, SortRestrictionsInfoType } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport { getFilterRestrictionsInfo, getSortRestrictionsInfo, isMultiValueFilterExpression } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport type { DataModelObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { enhanceDataModelPath, getTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport { getDisplayMode } from \"sap/fe/core/templating/DisplayModeFormatter\";\nimport {\n\tgetAssociatedCurrencyPropertyPath,\n\tgetAssociatedTextPropertyPath,\n\tgetAssociatedTimezonePropertyPath,\n\tgetAssociatedUnitPropertyPath,\n\tgetLabel\n} from \"sap/fe/core/templating/PropertyHelper\";\nimport type { DefaultTypeForEdmType } from \"sap/fe/core/type/EDM\";\nimport { isTypeFilterable } from \"sap/fe/core/type/EDM\";\nimport type { CollectionBindingInfo, FilterInfo } from \"sap/fe/macros/CollectionBindingInfo\";\nimport MacrosDelegateUtil from \"sap/fe/macros/DelegateUtil\";\nimport type { FilterConditions } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport { getPath, isFilterableProperty, isSortableProperty } from \"sap/fe/macros/internal/valuehelp/TableDelegateHelper\";\nimport type ManagedObject from \"sap/ui/base/ManagedObject\";\nimport type { BaseAggregationBindingInfo } from \"sap/ui/base/ManagedObject\";\nimport Element from \"sap/ui/core/Element\";\nimport type FilterBar from \"sap/ui/mdc/FilterBar\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type { MDCTablePropertyInfo as PropertyInfo } from \"sap/ui/mdc/Table\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport TableDelegate from \"sap/ui/mdc/odata/v4/TableDelegate\";\nimport TypeMap from \"sap/ui/mdc/odata/v4/TypeMap\";\nimport DelegateUtil from \"sap/ui/mdc/odata/v4/util/DelegateUtil\";\nimport FilterUtil from \"sap/ui/mdc/util/FilterUtil\";\nimport type Context from \"sap/ui/model/Context\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport type Model from \"sap/ui/model/Model\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type { MetaModelEntitySetAnnotation } from \"../../../../../../../../types/metamodel_types\";\n\ntype ComplexPropertyMap = Record<string, Property>;\n\ntype MdcTableDelegate = { name: string; payload: Payload };\n\ntype Payload = {\n\tcollectionName?: string;\n\tcollectionPath?: string;\n\tdefaultSortPropertyName?: string;\n\thierarchyQualifier?: string;\n\tinitialExpansionLevel?: number;\n};\n/**\n * Test delegate for OData V4.\n */\nconst ODataTableDelegate = Object.assign({}, TableDelegate);\n\n/**\n * Fetches the relevant metadata for the table and returns property info array.\n * @param table Instance of the MDCtable\n * @returns Array of property info\n */\nODataTableDelegate.fetchProperties = async function (table: Table): Promise<PropertyInfo> {\n\tconst model = await this._getModel(table);\n\tconst properties = await this._createPropertyInfos(table, model);\n\tODataTableDelegate.createInternalBindingContext(table);\n\tMacrosDelegateUtil.setCachedProperties(table, properties);\n\t(table.getBindingContext(\"internal\") as Context).setProperty(\"tablePropertiesAvailable\", true);\n\treturn properties;\n};\n\nODataTableDelegate.createInternalBindingContext = function (table: Table): void {\n\tlet dialog: ManagedObject | null = table;\n\twhile (dialog && !dialog.isA(\"sap.ui.mdc.valuehelp.Dialog\")) {\n\t\tdialog = (dialog as ManagedObject).getParent();\n\t}\n\n\tconst internalModel = table.getModel(\"internal\") as JSONModel;\n\n\tif (dialog && internalModel) {\n\t\tconst internalBindingContext = dialog.getBindingContext(\"internal\");\n\t\tlet newInternalBindingContextPath;\n\t\tif (internalBindingContext) {\n\t\t\tnewInternalBindingContextPath = internalBindingContext.getPath() + `::VHDialog::${dialog.getId()}::table`;\n\t\t} else {\n\t\t\tnewInternalBindingContextPath = `/buildingblocks/${table.getId()}`;\n\t\t\tinternalModel.setProperty(\"/buildingblocks\", { ...internalModel.getProperty(\"/buildingblocks\") });\n\t\t}\n\t\tconst newInternalBindingContext = internalModel.bindContext(newInternalBindingContextPath).getBoundContext();\n\t\ttable.setBindingContext(newInternalBindingContext, \"internal\");\n\t}\n};\n\n/**\n * Collect related properties from a property's annotations.\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The related properties that were identified.\n * @private\n */\nfunction collectRelatedProperties(dataModelPropertyPath: DataModelObjectPath<Property>): ComplexPropertyMap {\n\tconst dataModelAdditionalPropertyPath = getAdditionalProperty(dataModelPropertyPath);\n\tconst relatedProperties: ComplexPropertyMap = {};\n\tif (dataModelAdditionalPropertyPath?.targetObject) {\n\t\tconst additionalProperty = dataModelAdditionalPropertyPath.targetObject;\n\t\tconst additionalPropertyPath = getTargetObjectPath(dataModelAdditionalPropertyPath, true);\n\n\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\tconst propertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\n\t\tconst textAnnotation = property.annotations?.Common?.Text,\n\t\t\ttextArrangement = textAnnotation?.annotations?.UI?.TextArrangement?.toString(),\n\t\t\tdisplayMode = textAnnotation && textArrangement && getDisplayMode(property);\n\n\t\tif (displayMode === \"Description\") {\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t} else if ((displayMode && displayMode !== \"Value\") || !textAnnotation) {\n\t\t\trelatedProperties[propertyPath] = property;\n\t\t\trelatedProperties[additionalPropertyPath] = additionalProperty;\n\t\t}\n\t}\n\treturn relatedProperties;\n}\n\nODataTableDelegate._createPropertyInfos = async function (table: Table, model: ODataModel): Promise<PropertyInfo[]> {\n\tconst metadataInfo = (table.getDelegate() as { payload: Payload }).payload;\n\tconst properties: PropertyInfo[] = [];\n\tconst entitySetPath = `/${metadataInfo.collectionName}`;\n\tconst metaModel = model.getMetaModel();\n\n\treturn metaModel.requestObject(`${entitySetPath}@`).then(function (entitySetAnnotations: MetaModelEntitySetAnnotation) {\n\t\tconst sortRestrictionsInfo = getSortRestrictionsInfo(entitySetAnnotations);\n\t\tconst filterRestrictions = entitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterRestrictions\"];\n\t\tconst filterRestrictionsInfo = getFilterRestrictionsInfo(filterRestrictions);\n\t\tconst filterFunctions = entitySetAnnotations[\"@Org.OData.Capabilities.V1.FilterFunctions\"];\n\t\tconst caseSensitive = ModelHelper.isFilteringCaseSensitive(metaModel, filterFunctions);\n\t\tconst customDataForColumns = MacrosDelegateUtil.getCustomData<{\n\t\t\tcustomData: (PropertyInfo & { $Type: keyof typeof DefaultTypeForEdmType })[];\n\t\t}>(table, \"columns\")!;\n\t\tconst propertiesToBeCreated: Record<string, Property> = {};\n\t\tconst dataModelEntityPath = getInvolvedDataModelObjects((table.getModel() as ODataModel).getMetaModel().getContext(entitySetPath));\n\t\tcustomDataForColumns.customData.forEach(function (columnDef: PropertyInfo & { $Type: keyof typeof DefaultTypeForEdmType }) {\n\t\t\tlet typeConfig = isTypeFilterable(columnDef.$Type)\n\t\t\t\t? table.getTypeMap().getTypeConfig(columnDef.$Type)\n\t\t\t\t: TypeMap.getTypeConfig(\"sap.ui.model.odata.type.String\");\n\t\t\tconst propertyInfo: PropertyInfo = {\n\t\t\t\tkey: columnDef.path!,\n\t\t\t\tlabel: columnDef.label\n\t\t\t};\n\n\t\t\tconst dataModelPropertyPath = enhanceDataModelPath<Property>(dataModelEntityPath, columnDef.path);\n\t\t\tconst property = dataModelPropertyPath.targetObject as Property;\n\t\t\tif (property) {\n\t\t\t\tconst targetPropertyPath = getTargetObjectPath(dataModelPropertyPath, true);\n\t\t\t\tif (isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)) {\n\t\t\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\t\t\ttypeConfig =\n\t\t\t\t\t\tTypeMap.getTypeConfig(\n\t\t\t\t\t\t\tpropertyTypeConfig.type ?? \"sap.ui.model.odata.type.String\",\n\t\t\t\t\t\t\tpropertyTypeConfig.formatOptions,\n\t\t\t\t\t\t\tpropertyTypeConfig.constraints\n\t\t\t\t\t\t) ?? typeConfig;\n\t\t\t\t}\n\t\t\t\t//Check if there is an additional property linked to the property as a Unit, Currency, Timezone or textArrangement\n\t\t\t\tconst relatedPropertiesInfo = collectRelatedProperties(dataModelPropertyPath);\n\t\t\t\tconst relatedPropertyPaths: string[] = Object.keys(relatedPropertiesInfo);\n\n\t\t\t\tif (relatedPropertyPaths.length) {\n\t\t\t\t\tpropertyInfo.propertyInfos = relatedPropertyPaths;\n\t\t\t\t\t// Collect information of related columns to be created.\n\t\t\t\t\trelatedPropertyPaths.forEach((path) => {\n\t\t\t\t\t\tpropertiesToBeCreated[path] = relatedPropertiesInfo[path];\n\t\t\t\t\t});\n\t\t\t\t\t// Also add property for the inOut Parameters on the ValueHelp when textArrangement is set to #TextOnly\n\t\t\t\t\t// It will not be linked to the complex Property (BCP 2270141154)\n\t\t\t\t\tif (!relatedPropertyPaths.find((path) => relatedPropertiesInfo[path] === property)) {\n\t\t\t\t\t\tpropertiesToBeCreated[targetPropertyPath] = property;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpropertyInfo.path = columnDef.path;\n\t\t\t\t\tpropertyInfo.dataType = typeConfig.className;\n\t\t\t\t\tpropertyInfo.constraints = typeConfig.typeInstance?.oConstraints;\n\t\t\t\t\tpropertyInfo.formatOptions = typeConfig.typeInstance?.oFormatOptions;\n\t\t\t\t\tpropertyInfo.sortable = isSortableProperty(sortRestrictionsInfo, columnDef);\n\t\t\t\t\tpropertyInfo.filterable = isFilterableProperty(filterRestrictionsInfo, columnDef);\n\t\t\t\t\tpropertyInfo.maxConditions = getPropertyMaxConditions(filterRestrictionsInfo, columnDef);\n\t\t\t\t\tpropertyInfo.caseSensitive = caseSensitive;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpropertyInfo.path = columnDef.path;\n\t\t\t\tpropertyInfo.caseSensitive = caseSensitive;\n\t\t\t\tpropertyInfo.dataType = typeConfig.className;\n\t\t\t}\n\t\t\tproperties.push(propertyInfo);\n\t\t});\n\t\tconst relatedColumns = createRelatedProperties(\n\t\t\tpropertiesToBeCreated,\n\t\t\tproperties,\n\t\t\tsortRestrictionsInfo,\n\t\t\tfilterRestrictionsInfo,\n\t\t\tcaseSensitive\n\t\t);\n\t\treturn properties.concat(relatedColumns);\n\t});\n};\n\n/**\n * Updates the binding info with the relevant path and model from the metadata.\n * @param mdcTable The MDCTable instance\n * @param bindingInfo The bindingInfo of the table\n */\nODataTableDelegate.updateBindingInfo = function (mdcTable: Table, bindingInfo: CollectionBindingInfo): void {\n\tTableDelegate.updateBindingInfo.apply(this, [mdcTable, bindingInfo]);\n\n\tconst metadataInfo = (mdcTable.getDelegate() as MdcTableDelegate).payload;\n\n\tif (metadataInfo) {\n\t\tbindingInfo.path = bindingInfo?.path || metadataInfo.collectionPath || `/${metadataInfo.collectionName}`;\n\t}\n\n\tbindingInfo.parameters = bindingInfo.parameters || {};\n\n\tconst filterBar = Element.getElementById(mdcTable.getFilter()) as FilterBar,\n\t\tisFilterEnabled = mdcTable.isFilteringEnabled();\n\tlet conditions: Record<string, FilterConditions[]>;\n\tlet innerFilterInfo, outerFilterInfo: FilterInfo;\n\tconst filters = [];\n\tconst tableProperties = MacrosDelegateUtil.getCachedProperties(mdcTable) as unknown as PropertyInfo[];\n\n\t//TODO: consider a mechanism ('FilterMergeUtil' or enhance 'FilterUtil') to allow the connection between different filters)\n\tif (isFilterEnabled) {\n\t\tconditions = mdcTable.getConditions();\n\t\tinnerFilterInfo = FilterUtil.getFilterInfo(mdcTable, conditions, tableProperties!, []) as FilterInfo;\n\t\tif (innerFilterInfo.filters) {\n\t\t\tfilters.push(innerFilterInfo.filters);\n\t\t}\n\t}\n\tconst isTreeTable = !!metadataInfo?.hierarchyQualifier;\n\tif (isTreeTable) {\n\t\tbindingInfo.parameters.$$aggregation = {\n\t\t\thierarchyQualifier: metadataInfo.hierarchyQualifier,\n\t\t\texpandTo: metadataInfo.initialExpansionLevel\n\t\t};\n\t}\n\tif (filterBar) {\n\t\tconditions = filterBar.getConditions();\n\t\tif (conditions) {\n\t\t\tconst parameterNames = DelegateUtil.getParameterNames(filterBar);\n\t\t\t// The table properties needs to updated with the filter field if no Selectionfields are annotated and not part as value help parameter\n\t\t\tODataTableDelegate._updatePropertyInfo(tableProperties, mdcTable, conditions, metadataInfo);\n\t\t\touterFilterInfo = FilterUtil.getFilterInfo(filterBar, conditions, tableProperties!, parameterNames);\n\n\t\t\tif (outerFilterInfo.filters) {\n\t\t\t\tfilters.push(outerFilterInfo.filters);\n\t\t\t}\n\n\t\t\tconst parameterPath = DelegateUtil.getParametersInfo(filterBar, conditions);\n\t\t\tif (parameterPath) {\n\t\t\t\tbindingInfo.path = parameterPath;\n\t\t\t}\n\t\t}\n\t\tif (!isTreeTable) {\n\t\t\t// get the basic search\n\t\t\tbindingInfo.parameters.$search = CommonUtils.normalizeSearchTerm(filterBar.getSearch()) || undefined;\n\t\t} else if (filterBar.getSearch()) {\n\t\t\tif (!bindingInfo.parameters.$$aggregation) {\n\t\t\t\tbindingInfo.parameters.$$aggregation = {};\n\t\t\t}\n\t\t\tbindingInfo.parameters.$$aggregation.search = CommonUtils.normalizeSearchTerm(filterBar.getSearch());\n\t\t\tbindingInfo.parameters.$$aggregation.expandTo = Number.MAX_SAFE_INTEGER;\n\t\t}\n\t}\n\t// BCP: 2370078660 - sharedRequest is set to false in order to avoid deadlock situation where the the oData\n\t// model cache is neither changeable (result of ListBinding.$$sharedRequest = true) nor deletable\n\t// (result of Context.setSelected(true) -> ListBinding.keepAlive)\n\tbindingInfo.parameters.$$sharedRequest = false;\n\n\tthis._applyDefaultSorting(bindingInfo, (mdcTable.getDelegate() as MdcTableDelegate).payload);\n\t// add select to bindingInfo (BCP 2170163012)\n\tbindingInfo.parameters.$select = tableProperties?.reduce(function (query: string, property: PropertyInfo) {\n\t\t// Navigation properties (represented by X/Y) should not be added to $select.\n\t\t// ToDo : They should be added as $expand=X($select=Y) instead\n\t\tif (property.path && !property.path.includes(\"/\")) {\n\t\t\tquery = query ? `${query},${property.path}` : property.path;\n\t\t}\n\t\treturn query;\n\t}, \"\");\n\n\t// Add $count\n\tbindingInfo.parameters.$count = true;\n\n\t//If the entity is DraftEnabled add a DraftFilter\n\tif (bindingInfo.path && ModelHelper.isDraftSupported(mdcTable.getModel()?.getMetaModel() as ODataMetaModel, bindingInfo.path)) {\n\t\tfilters.push(new Filter(\"IsActiveEntity\", FilterOperator.EQ, true));\n\t}\n\tbindingInfo.filters = new Filter(filters as Filter[], true);\n};\n\nODataTableDelegate.getTypeMap = function (): object {\n\treturn TypeMap;\n};\n\n/**\n * Get table Model.\n * @param table Instance of the MDCtable\n * @returns Model\n */\nODataTableDelegate._getModel = async function (table: Table): Promise<Model> {\n\tconst metadataInfo = (table.getDelegate() as { payload: { model: string } }).payload;\n\tlet model: Model = table.getModel(metadataInfo.model)!;\n\tif (!model) {\n\t\tawait new Promise((resolve) => {\n\t\t\ttable.attachEventOnce(\"modelContextChange\", resolve);\n\t\t});\n\t\tmodel = table.getModel(metadataInfo.model)!;\n\t}\n\treturn model;\n};\n\n/**\n * Applies a default sort order if needed. This is only the case if the request is not a $search request\n * (means the parameter $search of the bindingInfo is undefined) and if a sort order has not been set already,\n * for example, using a presentation variant or manually set by the user.\n * @param bindingInfo The bindingInfo of the table\n * @param payload The payload of the TableDelegate\n */\nODataTableDelegate._applyDefaultSorting = function (bindingInfo: CollectionBindingInfo, payload: Payload): void {\n\tif (\n\t\tbindingInfo.parameters &&\n\t\tbindingInfo.parameters.$search == undefined &&\n\t\tbindingInfo.parameters.$$aggregation?.search == undefined &&\n\t\tbindingInfo.sorter &&\n\t\tbindingInfo.sorter.length == 0\n\t) {\n\t\tconst defaultSortPropertyName = payload ? payload.defaultSortPropertyName : undefined;\n\t\tif (defaultSortPropertyName) {\n\t\t\tbindingInfo.sorter.push(new Sorter(defaultSortPropertyName, false));\n\t\t}\n\t}\n};\n\n/**\n * Updates the table properties with filter field infos.\n * @param aTableProperties Array with table properties\n * @param oMDCTable The MDCTable instance\n * @param mConditions The conditions of the table\n * @param oMetadataInfo The metadata info of the filter field\n */\nODataTableDelegate._updatePropertyInfo = function (\n\taTableProperties: PropertyInfo[],\n\toMDCTable: Table,\n\tmConditions: Record<string, ConditionObject[]>,\n\toMetadataInfo: Payload\n): void {\n\tconst aConditionKey = Object.keys(mConditions),\n\t\toMetaModel = (oMDCTable.getModel() as ODataModel).getMetaModel()!;\n\taConditionKey.forEach(function (conditionKey: string) {\n\t\t// The typeConfig is not set in the table propertyInfos, but we need to set it for the filter fields\n\t\tconst conditionKeyType = oMetaModel.getObject(`/${oMetadataInfo.collectionName}/${conditionKey}`)?.$Type ?? \"Edm.String\";\n\t\tconst typeConfig = oMDCTable.getTypeMap().getTypeConfig(conditionKeyType);\n\t\taTableProperties.forEach((tableProperty, index) => {\n\t\t\tif (tableProperty.path === conditionKey) {\n\t\t\t\t(aTableProperties[index] as PropertyInfo & { typeConfig: object }).typeConfig = typeConfig;\n\t\t\t}\n\t\t});\n\t\tif (\n\t\t\taTableProperties.findIndex(function (tableProperty: PropertyInfo) {\n\t\t\t\treturn tableProperty.path === conditionKey;\n\t\t\t}) === -1\n\t\t) {\n\t\t\tconst oColumnDef: PropertyInfo = {\n\t\t\t\tkey: conditionKey,\n\t\t\t\tlabel: conditionKey,\n\t\t\t\tpath: conditionKey,\n\t\t\t\tdataType: typeConfig.typeInstance.baseType,\n\t\t\t\tformatOptions: typeConfig.typeInstance?.oFormatOptions,\n\t\t\t\tconstraints: typeConfig.typeInstance?.oConstraints\n\t\t\t};\n\t\t\taTableProperties.push(oColumnDef);\n\t\t}\n\t});\n};\n\nODataTableDelegate.updateBinding = function (\n\toTable: Table,\n\toBindingInfo: BaseAggregationBindingInfo & {\n\t\tparameters: {\n\t\t\t$search?: string;\n\t\t};\n\t},\n\toBinding: ODataListBinding\n): void {\n\tlet bNeedManualRefresh = false;\n\tconst oInternalBindingContext = oTable.getBindingContext(\"internal\");\n\tconst sManualUpdatePropertyKey = \"pendingManualBindingUpdate\";\n\tconst sLastSearch = \"lastSearch\";\n\tconst sLastFilter = \"lastFilter\";\n\tconst bPendingManualUpdate = oInternalBindingContext?.getProperty(sManualUpdatePropertyKey);\n\tconst lastSearch = oInternalBindingContext?.getProperty(sLastSearch);\n\tconst lastFilter = oInternalBindingContext?.getProperty(sLastFilter);\n\tlet oRowBinding = oTable.getRowBinding();\n\n\t//oBinding=null means that a rebinding needs to be forced via updateBinding in mdc TableDelegate\n\tTableDelegate.updateBinding.apply(ODataTableDelegate, [oTable, oBindingInfo, oBinding]);\n\t//get row binding after rebind from TableDelegate.updateBinding in case oBinding was null\n\tif (!oRowBinding) {\n\t\toRowBinding = oTable.getRowBinding();\n\t}\n\tif (oRowBinding) {\n\t\t/**\n\t\t * Manual refresh if filters are not changed by binding.refresh() since updating the bindingInfo\n\t\t * is not enough to trigger a batch request.\n\t\t * In case there is no internalBindingContext (see BCP 2280161524) we can not determine if a manual\n\t\t * refresh is needed or not. Therefore, we always refresh in this special case\n\t\t */\n\t\tbNeedManualRefresh = oInternalBindingContext\n\t\t\t? deepEqual(oBindingInfo.filters, lastFilter) && oBindingInfo.parameters?.$search === lastSearch && !bPendingManualUpdate\n\t\t\t: true;\n\t}\n\toInternalBindingContext?.setProperty(sLastSearch, oBindingInfo.parameters?.$search);\n\toInternalBindingContext?.setProperty(sLastFilter, oBindingInfo.filters);\n\n\tif (bNeedManualRefresh && oTable.getFilter()) {\n\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, true);\n\t\toRowBinding\n\t\t\t.requestRefresh(oRowBinding.getGroupId())\n\t\t\t.finally(function () {\n\t\t\t\toInternalBindingContext?.setProperty(sManualUpdatePropertyKey, false);\n\t\t\t})\n\t\t\t.catch(function (oError: unknown) {\n\t\t\t\tLog.error(\"Error while refreshing a filterBar VH table\", oError as string);\n\t\t\t});\n\t}\n\toTable.fireEvent(\"bindingUpdated\");\n\t//no need to check for semantic targets here since we are in a VH and don't want to allow further navigation\n};\n\n/**\n * Creates a simple property for each identified complex property.\n * @param propertiesToBeCreated Identified properties.\n * @param existingColumns The list of columns created for properties defined on the Value List.\n * @param sortRestrictionsInfo An object containing the sort restriction information\n * @param filterRestrictionsInfo An object containing the filter restriction information\n * @returns The array of properties created.\n * @private\n */\nfunction createRelatedProperties(\n\tpropertiesToBeCreated: Record<string, Property>,\n\texistingColumns: PropertyInfo[],\n\tsortRestrictionsInfo: SortRestrictionsInfoType,\n\tfilterRestrictionsInfo: FilterRestrictionsInfoType,\n\tcaseSensitive?: boolean\n): PropertyInfo[] {\n\tconst relatedPropertyNameMap: Record<string, string> = {},\n\t\trelatedColumns: PropertyInfo[] = [];\n\tObject.keys(propertiesToBeCreated).forEach((path) => {\n\t\tconst property = propertiesToBeCreated[path],\n\t\t\trelatedColumn = existingColumns.find((column) => column.path === path); // Complex properties doesn't have path so only simple column are found\n\t\tif (!relatedColumn) {\n\t\t\tconst newName = `Property::${path}`;\n\t\t\trelatedPropertyNameMap[path] = newName;\n\t\t\tconst propertyTypeConfig = fetchTypeConfig(property);\n\t\t\tconst valueHelpColumnTypeConfig = TypeMap.getTypeConfig(\n\t\t\t\tpropertyTypeConfig.type ?? \"sap.ui.model.odata.type.String\",\n\t\t\t\tpropertyTypeConfig.formatOptions,\n\t\t\t\tpropertyTypeConfig.constraints\n\t\t\t);\n\t\t\tconst valueHelpTableColumn: PropertyInfo = {\n\t\t\t\tkey: newName,\n\t\t\t\tlabel: getLabel(property),\n\t\t\t\tpath,\n\t\t\t\tsortable: isSortableProperty(sortRestrictionsInfo, property),\n\t\t\t\tfilterable: isFilterableProperty(filterRestrictionsInfo, property),\n\t\t\t\tdataType: valueHelpColumnTypeConfig.className,\n\t\t\t\tformatOptions: isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)\n\t\t\t\t\t? valueHelpColumnTypeConfig.typeInstance?.oFormatOptions\n\t\t\t\t\t: undefined,\n\t\t\t\tconstraints: isTypeFilterable(property.type as keyof typeof DefaultTypeForEdmType)\n\t\t\t\t\t? valueHelpColumnTypeConfig.typeInstance?.oConstraints\n\t\t\t\t\t: undefined,\n\t\t\t\tcaseSensitive\n\t\t\t};\n\t\t\tvalueHelpTableColumn.maxConditions = getPropertyMaxConditions(filterRestrictionsInfo, valueHelpTableColumn);\n\t\t\trelatedColumns.push(valueHelpTableColumn);\n\t\t}\n\t});\n\t// The property 'key' has been prefixed with 'Property::' for uniqueness.\n\t// Update the same in other propertyInfos[] references which point to this property.\n\texistingColumns.forEach((column) => {\n\t\tif (column.propertyInfos) {\n\t\t\tcolumn.propertyInfos = column.propertyInfos?.map((columnName) => relatedPropertyNameMap[columnName] ?? columnName);\n\t\t}\n\t});\n\treturn relatedColumns;\n}\n\n/**\n * Identifies the maxConditions for a given property.\n * @param filterRestrictionsInfo The filter restriction information from the restriction annotation.\n * @param property The target property.\n * @returns `-1` or `1` if the property is a MultiValueFilterExpression.\n * @private\n */\n\nfunction getPropertyMaxConditions(filterRestrictionsInfo: FilterRestrictionsInfoType, property: PropertyInfo | Property): number {\n\tconst propertyPath = getPath(property);\n\treturn propertyPath &&\n\t\tfilterRestrictionsInfo.propertyInfo?.hasOwnProperty(propertyPath) &&\n\t\tisMultiValueFilterExpression(filterRestrictionsInfo.propertyInfo[propertyPath] as unknown as string)\n\t\t? -1\n\t\t: 1;\n}\n\n/**\n * Identifies the additional property which references to the unit, timezone, textArrangement or currency.\n * @param dataModelPropertyPath The model object path of the property.\n * @returns The additional property.\n * @private\n */\nfunction getAdditionalProperty(dataModelPropertyPath: DataModelObjectPath<Property>): DataModelObjectPath<Property> | undefined {\n\tconst property = dataModelPropertyPath.targetObject;\n\tconst additionalPropertyPath =\n\t\tproperty &&\n\t\t(getAssociatedTextPropertyPath(property) ||\n\t\t\tgetAssociatedCurrencyPropertyPath(property) ||\n\t\t\tgetAssociatedUnitPropertyPath(property) ||\n\t\t\tgetAssociatedTimezonePropertyPath(property));\n\tif (!additionalPropertyPath) {\n\t\treturn undefined;\n\t}\n\tconst dataModelAdditionalProperty = enhanceDataModelPath<Property>(dataModelPropertyPath, additionalPropertyPath);\n\n\t//Additional Property could refer to a navigation property, keep the key and path as navigation property\n\tconst additionalProperty = dataModelAdditionalProperty.targetObject;\n\tif (!additionalProperty) {\n\t\treturn undefined;\n\t}\n\treturn dataModelAdditionalProperty;\n}\n\nexport default ODataTableDelegate;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;EA0DA;AACA;AACA;EACA,MAAMA,kBAAkB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,CAAC;;EAE3D;AACA;AACA;AACA;AACA;EACAH,kBAAkB,CAACI,eAAe,GAAG,gBAAgBC,KAAY,EAAyB;IACzF,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACC,SAAS,CAACF,KAAK,CAAC;IACzC,MAAMG,UAAU,GAAG,MAAM,IAAI,CAACC,oBAAoB,CAACJ,KAAK,EAAEC,KAAK,CAAC;IAChEN,kBAAkB,CAACU,4BAA4B,CAACL,KAAK,CAAC;IACtDM,kBAAkB,CAACC,mBAAmB,CAACP,KAAK,EAAEG,UAAU,CAAC;IACxDH,KAAK,CAACQ,iBAAiB,CAAC,UAAU,CAAC,CAAaC,WAAW,CAAC,0BAA0B,EAAE,IAAI,CAAC;IAC9F,OAAON,UAAU;EAClB,CAAC;EAEDR,kBAAkB,CAACU,4BAA4B,GAAG,UAAUL,KAAY,EAAQ;IAC/E,IAAIU,MAA4B,GAAGV,KAAK;IACxC,OAAOU,MAAM,IAAI,CAACA,MAAM,CAACC,GAAG,CAAC,6BAA6B,CAAC,EAAE;MAC5DD,MAAM,GAAIA,MAAM,CAAmBE,SAAS,CAAC,CAAC;IAC/C;IAEA,MAAMC,aAAa,GAAGb,KAAK,CAACc,QAAQ,CAAC,UAAU,CAAc;IAE7D,IAAIJ,MAAM,IAAIG,aAAa,EAAE;MAC5B,MAAME,sBAAsB,GAAGL,MAAM,CAACF,iBAAiB,CAAC,UAAU,CAAC;MACnE,IAAIQ,6BAA6B;MACjC,IAAID,sBAAsB,EAAE;QAC3BC,6BAA6B,GAAGD,sBAAsB,CAACE,OAAO,CAAC,CAAC,GAAG,eAAeP,MAAM,CAACQ,KAAK,CAAC,CAAC,SAAS;MAC1G,CAAC,MAAM;QACNF,6BAA6B,GAAG,mBAAmBhB,KAAK,CAACkB,KAAK,CAAC,CAAC,EAAE;QAClEL,aAAa,CAACJ,WAAW,CAAC,iBAAiB,EAAE;UAAE,GAAGI,aAAa,CAACM,WAAW,CAAC,iBAAiB;QAAE,CAAC,CAAC;MAClG;MACA,MAAMC,yBAAyB,GAAGP,aAAa,CAACQ,WAAW,CAACL,6BAA6B,CAAC,CAACM,eAAe,CAAC,CAAC;MAC5GtB,KAAK,CAACuB,iBAAiB,CAACH,yBAAyB,EAAE,UAAU,CAAC;IAC/D;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;EACA,SAASI,wBAAwBA,CAACC,qBAAoD,EAAsB;IAC3G,MAAMC,+BAA+B,GAAGC,qBAAqB,CAACF,qBAAqB,CAAC;IACpF,MAAMG,iBAAqC,GAAG,CAAC,CAAC;IAChD,IAAIF,+BAA+B,EAAEG,YAAY,EAAE;MAClD,MAAMC,kBAAkB,GAAGJ,+BAA+B,CAACG,YAAY;MACvE,MAAME,sBAAsB,GAAGC,mBAAmB,CAACN,+BAA+B,EAAE,IAAI,CAAC;MAEzF,MAAMO,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;MAC/D,MAAMK,YAAY,GAAGF,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;MAErE,MAAMU,cAAc,GAAGF,QAAQ,CAACG,WAAW,EAAEC,MAAM,EAAEC,IAAI;QACxDC,eAAe,GAAGJ,cAAc,EAAEC,WAAW,EAAEI,EAAE,EAAEC,eAAe,EAAEC,QAAQ,CAAC,CAAC;QAC9EC,WAAW,GAAGR,cAAc,IAAII,eAAe,IAAIK,cAAc,CAACX,QAAQ,CAAC;MAE5E,IAAIU,WAAW,KAAK,aAAa,EAAE;QAClCf,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D,CAAC,MAAM,IAAKa,WAAW,IAAIA,WAAW,KAAK,OAAO,IAAK,CAACR,cAAc,EAAE;QACvEP,iBAAiB,CAACM,YAAY,CAAC,GAAGD,QAAQ;QAC1CL,iBAAiB,CAACG,sBAAsB,CAAC,GAAGD,kBAAkB;MAC/D;IACD;IACA,OAAOF,iBAAiB;EACzB;EAEAjC,kBAAkB,CAACS,oBAAoB,GAAG,gBAAgBJ,KAAY,EAAEC,KAAiB,EAA2B;IACnH,MAAM4C,YAAY,GAAI7C,KAAK,CAAC8C,WAAW,CAAC,CAAC,CAA0BC,OAAO;IAC1E,MAAM5C,UAA0B,GAAG,EAAE;IACrC,MAAM6C,aAAa,GAAG,IAAIH,YAAY,CAACI,cAAc,EAAE;IACvD,MAAMC,SAAS,GAAGjD,KAAK,CAACkD,YAAY,CAAC,CAAC;IAEtC,OAAOD,SAAS,CAACE,aAAa,CAAC,GAAGJ,aAAa,GAAG,CAAC,CAACK,IAAI,CAAC,UAAUC,oBAAkD,EAAE;MACtH,MAAMC,oBAAoB,GAAGC,uBAAuB,CAACF,oBAAoB,CAAC;MAC1E,MAAMG,kBAAkB,GAAGH,oBAAoB,CAAC,+CAA+C,CAAC;MAChG,MAAMI,sBAAsB,GAAGC,yBAAyB,CAACF,kBAAkB,CAAC;MAC5E,MAAMG,eAAe,GAAGN,oBAAoB,CAAC,4CAA4C,CAAC;MAC1F,MAAMO,aAAa,GAAGC,WAAW,CAACC,wBAAwB,CAACb,SAAS,EAAEU,eAAe,CAAC;MACtF,MAAMI,oBAAoB,GAAG1D,kBAAkB,CAAC2D,aAAa,CAE1DjE,KAAK,EAAE,SAAS,CAAE;MACrB,MAAMkE,qBAA+C,GAAG,CAAC,CAAC;MAC1D,MAAMC,mBAAmB,GAAGC,2BAA2B,CAAEpE,KAAK,CAACc,QAAQ,CAAC,CAAC,CAAgBqC,YAAY,CAAC,CAAC,CAACkB,UAAU,CAACrB,aAAa,CAAC,CAAC;MAClIgB,oBAAoB,CAACM,UAAU,CAACC,OAAO,CAAC,UAAUC,SAAuE,EAAE;QAC1H,IAAIC,UAAU,GAAGC,gBAAgB,CAACF,SAAS,CAACG,KAAK,CAAC,GAC/C3E,KAAK,CAAC4E,UAAU,CAAC,CAAC,CAACC,aAAa,CAACL,SAAS,CAACG,KAAK,CAAC,GACjDG,OAAO,CAACD,aAAa,CAAC,gCAAgC,CAAC;QAC1D,MAAME,YAA0B,GAAG;UAClCC,GAAG,EAAER,SAAS,CAACS,IAAK;UACpBC,KAAK,EAAEV,SAAS,CAACU;QAClB,CAAC;QAED,MAAMzD,qBAAqB,GAAG0D,oBAAoB,CAAWhB,mBAAmB,EAAEK,SAAS,CAACS,IAAI,CAAC;QACjG,MAAMhD,QAAQ,GAAGR,qBAAqB,CAACI,YAAwB;QAC/D,IAAII,QAAQ,EAAE;UACb,MAAMmD,kBAAkB,GAAGpD,mBAAmB,CAACP,qBAAqB,EAAE,IAAI,CAAC;UAC3E,IAAIiD,gBAAgB,CAACzC,QAAQ,CAACoD,IAA0C,CAAC,EAAE;YAC1E,MAAMC,kBAAkB,GAAGC,eAAe,CAACtD,QAAQ,CAAC;YACpDwC,UAAU,GACTK,OAAO,CAACD,aAAa,CACpBS,kBAAkB,CAACD,IAAI,IAAI,gCAAgC,EAC3DC,kBAAkB,CAACE,aAAa,EAChCF,kBAAkB,CAACG,WACpB,CAAC,IAAIhB,UAAU;UACjB;UACA;UACA,MAAMiB,qBAAqB,GAAGlE,wBAAwB,CAACC,qBAAqB,CAAC;UAC7E,MAAMkE,oBAA8B,GAAG/F,MAAM,CAACgG,IAAI,CAACF,qBAAqB,CAAC;UAEzE,IAAIC,oBAAoB,CAACE,MAAM,EAAE;YAChCd,YAAY,CAACe,aAAa,GAAGH,oBAAoB;YACjD;YACAA,oBAAoB,CAACpB,OAAO,CAAEU,IAAI,IAAK;cACtCf,qBAAqB,CAACe,IAAI,CAAC,GAAGS,qBAAqB,CAACT,IAAI,CAAC;YAC1D,CAAC,CAAC;YACF;YACA;YACA,IAAI,CAACU,oBAAoB,CAACI,IAAI,CAAEd,IAAI,IAAKS,qBAAqB,CAACT,IAAI,CAAC,KAAKhD,QAAQ,CAAC,EAAE;cACnFiC,qBAAqB,CAACkB,kBAAkB,CAAC,GAAGnD,QAAQ;YACrD;UACD,CAAC,MAAM;YACN8C,YAAY,CAACE,IAAI,GAAGT,SAAS,CAACS,IAAI;YAClCF,YAAY,CAACiB,QAAQ,GAAGvB,UAAU,CAACwB,SAAS;YAC5ClB,YAAY,CAACU,WAAW,GAAGhB,UAAU,CAACyB,YAAY,EAAEC,YAAY;YAChEpB,YAAY,CAACS,aAAa,GAAGf,UAAU,CAACyB,YAAY,EAAEE,cAAc;YACpErB,YAAY,CAACsB,QAAQ,GAAGC,kBAAkB,CAAC/C,oBAAoB,EAAEiB,SAAS,CAAC;YAC3EO,YAAY,CAACwB,UAAU,GAAGC,oBAAoB,CAAC9C,sBAAsB,EAAEc,SAAS,CAAC;YACjFO,YAAY,CAAC0B,aAAa,GAAGC,wBAAwB,CAAChD,sBAAsB,EAAEc,SAAS,CAAC;YACxFO,YAAY,CAAClB,aAAa,GAAGA,aAAa;UAC3C;QACD,CAAC,MAAM;UACNkB,YAAY,CAACE,IAAI,GAAGT,SAAS,CAACS,IAAI;UAClCF,YAAY,CAAClB,aAAa,GAAGA,aAAa;UAC1CkB,YAAY,CAACiB,QAAQ,GAAGvB,UAAU,CAACwB,SAAS;QAC7C;QACA9F,UAAU,CAACwG,IAAI,CAAC5B,YAAY,CAAC;MAC9B,CAAC,CAAC;MACF,MAAM6B,cAAc,GAAGC,uBAAuB,CAC7C3C,qBAAqB,EACrB/D,UAAU,EACVoD,oBAAoB,EACpBG,sBAAsB,EACtBG,aACD,CAAC;MACD,OAAO1D,UAAU,CAAC2G,MAAM,CAACF,cAAc,CAAC;IACzC,CAAC,CAAC;EACH,CAAC;;EAED;AACA;AACA;AACA;AACA;EACAjH,kBAAkB,CAACoH,iBAAiB,GAAG,UAAUC,QAAe,EAAEC,WAAkC,EAAQ;IAC3GnH,aAAa,CAACiH,iBAAiB,CAACG,KAAK,CAAC,IAAI,EAAE,CAACF,QAAQ,EAAEC,WAAW,CAAC,CAAC;IAEpE,MAAMpE,YAAY,GAAImE,QAAQ,CAAClE,WAAW,CAAC,CAAC,CAAsBC,OAAO;IAEzE,IAAIF,YAAY,EAAE;MACjBoE,WAAW,CAAChC,IAAI,GAAGgC,WAAW,EAAEhC,IAAI,IAAIpC,YAAY,CAACsE,cAAc,IAAI,IAAItE,YAAY,CAACI,cAAc,EAAE;IACzG;IAEAgE,WAAW,CAACG,UAAU,GAAGH,WAAW,CAACG,UAAU,IAAI,CAAC,CAAC;IAErD,MAAMC,SAAS,GAAGC,OAAO,CAACC,cAAc,CAACP,QAAQ,CAACQ,SAAS,CAAC,CAAC,CAAc;MAC1EC,eAAe,GAAGT,QAAQ,CAACU,kBAAkB,CAAC,CAAC;IAChD,IAAIC,UAA8C;IAClD,IAAIC,eAAe,EAAEC,eAA2B;IAChD,MAAMC,OAAO,GAAG,EAAE;IAClB,MAAMC,eAAe,GAAGzH,kBAAkB,CAAC0H,mBAAmB,CAAChB,QAAQ,CAA8B;;IAErG;IACA,IAAIS,eAAe,EAAE;MACpBE,UAAU,GAAGX,QAAQ,CAACiB,aAAa,CAAC,CAAC;MACrCL,eAAe,GAAGM,UAAU,CAACC,aAAa,CAACnB,QAAQ,EAAEW,UAAU,EAAEI,eAAe,EAAG,EAAE,CAAe;MACpG,IAAIH,eAAe,CAACE,OAAO,EAAE;QAC5BA,OAAO,CAACnB,IAAI,CAACiB,eAAe,CAACE,OAAO,CAAC;MACtC;IACD;IACA,MAAMM,WAAW,GAAG,CAAC,CAACvF,YAAY,EAAEwF,kBAAkB;IACtD,IAAID,WAAW,EAAE;MAChBnB,WAAW,CAACG,UAAU,CAACkB,aAAa,GAAG;QACtCD,kBAAkB,EAAExF,YAAY,CAACwF,kBAAkB;QACnDE,QAAQ,EAAE1F,YAAY,CAAC2F;MACxB,CAAC;IACF;IACA,IAAInB,SAAS,EAAE;MACdM,UAAU,GAAGN,SAAS,CAACY,aAAa,CAAC,CAAC;MACtC,IAAIN,UAAU,EAAE;QACf,MAAMc,cAAc,GAAGC,YAAY,CAACC,iBAAiB,CAACtB,SAAS,CAAC;QAChE;QACA1H,kBAAkB,CAACiJ,mBAAmB,CAACb,eAAe,EAAEf,QAAQ,EAAEW,UAAU,EAAE9E,YAAY,CAAC;QAC3FgF,eAAe,GAAGK,UAAU,CAACC,aAAa,CAACd,SAAS,EAAEM,UAAU,EAAEI,eAAe,EAAGU,cAAc,CAAC;QAEnG,IAAIZ,eAAe,CAACC,OAAO,EAAE;UAC5BA,OAAO,CAACnB,IAAI,CAACkB,eAAe,CAACC,OAAO,CAAC;QACtC;QAEA,MAAMe,aAAa,GAAGH,YAAY,CAACI,iBAAiB,CAACzB,SAAS,EAAEM,UAAU,CAAC;QAC3E,IAAIkB,aAAa,EAAE;UAClB5B,WAAW,CAAChC,IAAI,GAAG4D,aAAa;QACjC;MACD;MACA,IAAI,CAACT,WAAW,EAAE;QACjB;QACAnB,WAAW,CAACG,UAAU,CAAC2B,OAAO,GAAGC,WAAW,CAACC,mBAAmB,CAAC5B,SAAS,CAAC6B,SAAS,CAAC,CAAC,CAAC,IAAIC,SAAS;MACrG,CAAC,MAAM,IAAI9B,SAAS,CAAC6B,SAAS,CAAC,CAAC,EAAE;QACjC,IAAI,CAACjC,WAAW,CAACG,UAAU,CAACkB,aAAa,EAAE;UAC1CrB,WAAW,CAACG,UAAU,CAACkB,aAAa,GAAG,CAAC,CAAC;QAC1C;QACArB,WAAW,CAACG,UAAU,CAACkB,aAAa,CAACc,MAAM,GAAGJ,WAAW,CAACC,mBAAmB,CAAC5B,SAAS,CAAC6B,SAAS,CAAC,CAAC,CAAC;QACpGjC,WAAW,CAACG,UAAU,CAACkB,aAAa,CAACC,QAAQ,GAAGc,MAAM,CAACC,gBAAgB;MACxE;IACD;IACA;IACA;IACA;IACArC,WAAW,CAACG,UAAU,CAACmC,eAAe,GAAG,KAAK;IAE9C,IAAI,CAACC,oBAAoB,CAACvC,WAAW,EAAGD,QAAQ,CAAClE,WAAW,CAAC,CAAC,CAAsBC,OAAO,CAAC;IAC5F;IACAkE,WAAW,CAACG,UAAU,CAACqC,OAAO,GAAG1B,eAAe,EAAE2B,MAAM,CAAC,UAAUC,KAAa,EAAE1H,QAAsB,EAAE;MACzG;MACA;MACA,IAAIA,QAAQ,CAACgD,IAAI,IAAI,CAAChD,QAAQ,CAACgD,IAAI,CAAC2E,QAAQ,CAAC,GAAG,CAAC,EAAE;QAClDD,KAAK,GAAGA,KAAK,GAAG,GAAGA,KAAK,IAAI1H,QAAQ,CAACgD,IAAI,EAAE,GAAGhD,QAAQ,CAACgD,IAAI;MAC5D;MACA,OAAO0E,KAAK;IACb,CAAC,EAAE,EAAE,CAAC;;IAEN;IACA1C,WAAW,CAACG,UAAU,CAACyC,MAAM,GAAG,IAAI;;IAEpC;IACA,IAAI5C,WAAW,CAAChC,IAAI,IAAInB,WAAW,CAACgG,gBAAgB,CAAC9C,QAAQ,CAAClG,QAAQ,CAAC,CAAC,EAAEqC,YAAY,CAAC,CAAC,EAAoB8D,WAAW,CAAChC,IAAI,CAAC,EAAE;MAC9H6C,OAAO,CAACnB,IAAI,CAAC,IAAIoD,MAAM,CAAC,gBAAgB,EAAEC,cAAc,CAACC,EAAE,EAAE,IAAI,CAAC,CAAC;IACpE;IACAhD,WAAW,CAACa,OAAO,GAAG,IAAIiC,MAAM,CAACjC,OAAO,EAAc,IAAI,CAAC;EAC5D,CAAC;EAEDnI,kBAAkB,CAACiF,UAAU,GAAG,YAAoB;IACnD,OAAOE,OAAO;EACf,CAAC;;EAED;AACA;AACA;AACA;AACA;EACAnF,kBAAkB,CAACO,SAAS,GAAG,gBAAgBF,KAAY,EAAkB;IAC5E,MAAM6C,YAAY,GAAI7C,KAAK,CAAC8C,WAAW,CAAC,CAAC,CAAoCC,OAAO;IACpF,IAAI9C,KAAY,GAAGD,KAAK,CAACc,QAAQ,CAAC+B,YAAY,CAAC5C,KAAK,CAAE;IACtD,IAAI,CAACA,KAAK,EAAE;MACX,MAAM,IAAIiK,OAAO,CAAEC,OAAO,IAAK;QAC9BnK,KAAK,CAACoK,eAAe,CAAC,oBAAoB,EAAED,OAAO,CAAC;MACrD,CAAC,CAAC;MACFlK,KAAK,GAAGD,KAAK,CAACc,QAAQ,CAAC+B,YAAY,CAAC5C,KAAK,CAAE;IAC5C;IACA,OAAOA,KAAK;EACb,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACAN,kBAAkB,CAAC6J,oBAAoB,GAAG,UAAUvC,WAAkC,EAAElE,OAAgB,EAAQ;IAC/G,IACCkE,WAAW,CAACG,UAAU,IACtBH,WAAW,CAACG,UAAU,CAAC2B,OAAO,IAAII,SAAS,IAC3ClC,WAAW,CAACG,UAAU,CAACkB,aAAa,EAAEc,MAAM,IAAID,SAAS,IACzDlC,WAAW,CAACoD,MAAM,IAClBpD,WAAW,CAACoD,MAAM,CAACxE,MAAM,IAAI,CAAC,EAC7B;MACD,MAAMyE,uBAAuB,GAAGvH,OAAO,GAAGA,OAAO,CAACuH,uBAAuB,GAAGnB,SAAS;MACrF,IAAImB,uBAAuB,EAAE;QAC5BrD,WAAW,CAACoD,MAAM,CAAC1D,IAAI,CAAC,IAAI4D,MAAM,CAACD,uBAAuB,EAAE,KAAK,CAAC,CAAC;MACpE;IACD;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;EACA3K,kBAAkB,CAACiJ,mBAAmB,GAAG,UACxC4B,gBAAgC,EAChCC,SAAgB,EAChBC,WAA8C,EAC9CC,aAAsB,EACf;IACP,MAAMC,aAAa,GAAGhL,MAAM,CAACgG,IAAI,CAAC8E,WAAW,CAAC;MAC7CG,UAAU,GAAIJ,SAAS,CAAC3J,QAAQ,CAAC,CAAC,CAAgBqC,YAAY,CAAC,CAAE;IAClEyH,aAAa,CAACrG,OAAO,CAAC,UAAUuG,YAAoB,EAAE;MACrD;MACA,MAAMC,gBAAgB,GAAGF,UAAU,CAACG,SAAS,CAAC,IAAIL,aAAa,CAAC1H,cAAc,IAAI6H,YAAY,EAAE,CAAC,EAAEnG,KAAK,IAAI,YAAY;MACxH,MAAMF,UAAU,GAAGgG,SAAS,CAAC7F,UAAU,CAAC,CAAC,CAACC,aAAa,CAACkG,gBAAgB,CAAC;MACzEP,gBAAgB,CAACjG,OAAO,CAAC,CAAC0G,aAAa,EAAEC,KAAK,KAAK;QAClD,IAAID,aAAa,CAAChG,IAAI,KAAK6F,YAAY,EAAE;UACvCN,gBAAgB,CAACU,KAAK,CAAC,CAA2CzG,UAAU,GAAGA,UAAU;QAC3F;MACD,CAAC,CAAC;MACF,IACC+F,gBAAgB,CAACW,SAAS,CAAC,UAAUF,aAA2B,EAAE;QACjE,OAAOA,aAAa,CAAChG,IAAI,KAAK6F,YAAY;MAC3C,CAAC,CAAC,KAAK,CAAC,CAAC,EACR;QACD,MAAMM,UAAwB,GAAG;UAChCpG,GAAG,EAAE8F,YAAY;UACjB5F,KAAK,EAAE4F,YAAY;UACnB7F,IAAI,EAAE6F,YAAY;UAClB9E,QAAQ,EAAEvB,UAAU,CAACyB,YAAY,CAACmF,QAAQ;UAC1C7F,aAAa,EAAEf,UAAU,CAACyB,YAAY,EAAEE,cAAc;UACtDX,WAAW,EAAEhB,UAAU,CAACyB,YAAY,EAAEC;QACvC,CAAC;QACDqE,gBAAgB,CAAC7D,IAAI,CAACyE,UAAU,CAAC;MAClC;IACD,CAAC,CAAC;EACH,CAAC;EAEDzL,kBAAkB,CAAC2L,aAAa,GAAG,UAClCC,MAAa,EACbC,YAIC,EACDC,QAA0B,EACnB;IACP,IAAIC,kBAAkB,GAAG,KAAK;IAC9B,MAAMC,uBAAuB,GAAGJ,MAAM,CAAC/K,iBAAiB,CAAC,UAAU,CAAC;IACpE,MAAMoL,wBAAwB,GAAG,4BAA4B;IAC7D,MAAMC,WAAW,GAAG,YAAY;IAChC,MAAMC,WAAW,GAAG,YAAY;IAChC,MAAMC,oBAAoB,GAAGJ,uBAAuB,EAAExK,WAAW,CAACyK,wBAAwB,CAAC;IAC3F,MAAMI,UAAU,GAAGL,uBAAuB,EAAExK,WAAW,CAAC0K,WAAW,CAAC;IACpE,MAAMI,UAAU,GAAGN,uBAAuB,EAAExK,WAAW,CAAC2K,WAAW,CAAC;IACpE,IAAII,WAAW,GAAGX,MAAM,CAACY,aAAa,CAAC,CAAC;;IAExC;IACArM,aAAa,CAACwL,aAAa,CAACpE,KAAK,CAACvH,kBAAkB,EAAE,CAAC4L,MAAM,EAAEC,YAAY,EAAEC,QAAQ,CAAC,CAAC;IACvF;IACA,IAAI,CAACS,WAAW,EAAE;MACjBA,WAAW,GAAGX,MAAM,CAACY,aAAa,CAAC,CAAC;IACrC;IACA,IAAID,WAAW,EAAE;MAChB;AACF;AACA;AACA;AACA;AACA;MACER,kBAAkB,GAAGC,uBAAuB,GACzCS,SAAS,CAACZ,YAAY,CAAC1D,OAAO,EAAEmE,UAAU,CAAC,IAAIT,YAAY,CAACpE,UAAU,EAAE2B,OAAO,KAAKiD,UAAU,IAAI,CAACD,oBAAoB,GACvH,IAAI;IACR;IACAJ,uBAAuB,EAAElL,WAAW,CAACoL,WAAW,EAAEL,YAAY,CAACpE,UAAU,EAAE2B,OAAO,CAAC;IACnF4C,uBAAuB,EAAElL,WAAW,CAACqL,WAAW,EAAEN,YAAY,CAAC1D,OAAO,CAAC;IAEvE,IAAI4D,kBAAkB,IAAIH,MAAM,CAAC/D,SAAS,CAAC,CAAC,EAAE;MAC7CmE,uBAAuB,EAAElL,WAAW,CAACmL,wBAAwB,EAAE,IAAI,CAAC;MACpEM,WAAW,CACTG,cAAc,CAACH,WAAW,CAACI,UAAU,CAAC,CAAC,CAAC,CACxCC,OAAO,CAAC,YAAY;QACpBZ,uBAAuB,EAAElL,WAAW,CAACmL,wBAAwB,EAAE,KAAK,CAAC;MACtE,CAAC,CAAC,CACDY,KAAK,CAAC,UAAUC,MAAe,EAAE;QACjCC,GAAG,CAACC,KAAK,CAAC,6CAA6C,EAAEF,MAAgB,CAAC;MAC3E,CAAC,CAAC;IACJ;IACAlB,MAAM,CAACqB,SAAS,CAAC,gBAAgB,CAAC;IAClC;EACD,CAAC;;EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,SAAS/F,uBAAuBA,CAC/B3C,qBAA+C,EAC/C2I,eAA+B,EAC/BtJ,oBAA8C,EAC9CG,sBAAkD,EAClDG,aAAuB,EACN;IACjB,MAAMiJ,sBAA8C,GAAG,CAAC,CAAC;MACxDlG,cAA8B,GAAG,EAAE;IACpChH,MAAM,CAACgG,IAAI,CAAC1B,qBAAqB,CAAC,CAACK,OAAO,CAAEU,IAAI,IAAK;MACpD,MAAMhD,QAAQ,GAAGiC,qBAAqB,CAACe,IAAI,CAAC;QAC3C8H,aAAa,GAAGF,eAAe,CAAC9G,IAAI,CAAEiH,MAAM,IAAKA,MAAM,CAAC/H,IAAI,KAAKA,IAAI,CAAC,CAAC,CAAC;MACzE,IAAI,CAAC8H,aAAa,EAAE;QACnB,MAAME,OAAO,GAAG,aAAahI,IAAI,EAAE;QACnC6H,sBAAsB,CAAC7H,IAAI,CAAC,GAAGgI,OAAO;QACtC,MAAM3H,kBAAkB,GAAGC,eAAe,CAACtD,QAAQ,CAAC;QACpD,MAAMiL,yBAAyB,GAAGpI,OAAO,CAACD,aAAa,CACtDS,kBAAkB,CAACD,IAAI,IAAI,gCAAgC,EAC3DC,kBAAkB,CAACE,aAAa,EAChCF,kBAAkB,CAACG,WACpB,CAAC;QACD,MAAM0H,oBAAkC,GAAG;UAC1CnI,GAAG,EAAEiI,OAAO;UACZ/H,KAAK,EAAEkI,QAAQ,CAACnL,QAAQ,CAAC;UACzBgD,IAAI;UACJoB,QAAQ,EAAEC,kBAAkB,CAAC/C,oBAAoB,EAAEtB,QAAQ,CAAC;UAC5DsE,UAAU,EAAEC,oBAAoB,CAAC9C,sBAAsB,EAAEzB,QAAQ,CAAC;UAClE+D,QAAQ,EAAEkH,yBAAyB,CAACjH,SAAS;UAC7CT,aAAa,EAAEd,gBAAgB,CAACzC,QAAQ,CAACoD,IAA0C,CAAC,GACjF6H,yBAAyB,CAAChH,YAAY,EAAEE,cAAc,GACtD+C,SAAS;UACZ1D,WAAW,EAAEf,gBAAgB,CAACzC,QAAQ,CAACoD,IAA0C,CAAC,GAC/E6H,yBAAyB,CAAChH,YAAY,EAAEC,YAAY,GACpDgD,SAAS;UACZtF;QACD,CAAC;QACDsJ,oBAAoB,CAAC1G,aAAa,GAAGC,wBAAwB,CAAChD,sBAAsB,EAAEyJ,oBAAoB,CAAC;QAC3GvG,cAAc,CAACD,IAAI,CAACwG,oBAAoB,CAAC;MAC1C;IACD,CAAC,CAAC;IACF;IACA;IACAN,eAAe,CAACtI,OAAO,CAAEyI,MAAM,IAAK;MACnC,IAAIA,MAAM,CAAClH,aAAa,EAAE;QACzBkH,MAAM,CAAClH,aAAa,GAAGkH,MAAM,CAAClH,aAAa,EAAEuH,GAAG,CAAEC,UAAU,IAAKR,sBAAsB,CAACQ,UAAU,CAAC,IAAIA,UAAU,CAAC;MACnH;IACD,CAAC,CAAC;IACF,OAAO1G,cAAc;EACtB;;EAEA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEA,SAASF,wBAAwBA,CAAChD,sBAAkD,EAAEzB,QAAiC,EAAU;IAChI,MAAMC,YAAY,GAAGjB,OAAO,CAACgB,QAAQ,CAAC;IACtC,OAAOC,YAAY,IAClBwB,sBAAsB,CAACqB,YAAY,EAAEwI,cAAc,CAACrL,YAAY,CAAC,IACjEsL,4BAA4B,CAAC9J,sBAAsB,CAACqB,YAAY,CAAC7C,YAAY,CAAsB,CAAC,GAClG,CAAC,CAAC,GACF,CAAC;EACL;;EAEA;AACA;AACA;AACA;AACA;AACA;EACA,SAASP,qBAAqBA,CAACF,qBAAoD,EAA6C;IAC/H,MAAMQ,QAAQ,GAAGR,qBAAqB,CAACI,YAAY;IACnD,MAAME,sBAAsB,GAC3BE,QAAQ,KACPwL,6BAA6B,CAACxL,QAAQ,CAAC,IACvCyL,iCAAiC,CAACzL,QAAQ,CAAC,IAC3C0L,6BAA6B,CAAC1L,QAAQ,CAAC,IACvC2L,iCAAiC,CAAC3L,QAAQ,CAAC,CAAC;IAC9C,IAAI,CAACF,sBAAsB,EAAE;MAC5B,OAAOoH,SAAS;IACjB;IACA,MAAM0E,2BAA2B,GAAG1I,oBAAoB,CAAW1D,qBAAqB,EAAEM,sBAAsB,CAAC;;IAEjH;IACA,MAAMD,kBAAkB,GAAG+L,2BAA2B,CAAChM,YAAY;IACnE,IAAI,CAACC,kBAAkB,EAAE;MACxB,OAAOqH,SAAS;IACjB;IACA,OAAO0E,2BAA2B;EACnC;EAAC,OAEclO,kBAAkB;AAAA","ignoreList":[],"file":"TableDelegate-dbg.js"}