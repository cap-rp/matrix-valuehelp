{"version":3,"names":["ValueHelp","_dec","defineUI5Class","_dec2","association","type","_dec3","property","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_class","_class2","_BuildingBlock","props","others","_this","_flexId","id","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","requestGroupId","collaborationEnabled","_exports","_inheritsLoose","getValueHelpForMetaPath","pageController","metaPath","contextPath","metaModel","dependents","getView","getDependents","foundDep","find","child","isA","getMetaPath","valueHelp","getId","idPrefix","createId","addDependent","_proto","prototype","onMetadataAvailable","content","_getOwner","runAsOwner","createContent","metaContextPath","getMetaPathObject","getMetaModel","entitySetOrSingleton","getClosestEntitySet","isEntitySet","ModelHelper","isCollaborationDraftSupported","createBindingContext","getPath","filterFieldValueHelp","FieldHelper","valueHelpPropertyForFilterField","valueHelpProperty","getValueHelpTemplate","getContextPath","useSemanticDateRange","useMultiValueField","navigationPrefix","requiresValidation","conditionModel","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ValueHelp.tsx"],"sourcesContent":["import type { EnhanceWithUI5, PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { association, defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { isEntitySet } from \"sap/fe/core/helpers/TypeGuards\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { getValueHelpTemplate } from \"sap/fe/macros/internal/valuehelp/ValueHelpTemplating\";\n\nimport type PageController from \"sap/fe/core/PageController\";\nimport type Control from \"sap/ui/core/Control\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\n\n/**\n * Building block for creating a ValueHelp based on the provided OData V4 metadata.\n * @private\n */\n@defineUI5Class(\"sap.fe.macros.ValueHelp\")\nexport default class ValueHelp extends BuildingBlock {\n\t/**\n\t * A prefix that is added to the generated ID of the value help.\n\t */\n\t@association({ type: \"string\" })\n\tidPrefix?: string;\n\n\t/**\n\t * Defines the metadata path to the property.\n\t */\n\t@property({ type: \"string\" })\n\tmetaPath!: string;\n\n\t@property({ type: \"string\" })\n\tcontextPath!: string;\n\n\t/**\n\t * Indicator whether the value help is for a filter field.\n\t */\n\t@property({ type: \"string\" })\n\tconditionModel = \"\";\n\n\t/**\n\t * Indicates that this is a value help of a filter field. Necessary to decide if a\n\t * validation should occur on the back end or already on the client.\n\t */\n\t@property({ type: \"boolean\" })\n\tfilterFieldValueHelp = false;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter field.\n\t */\n\t@property({ type: \"boolean\" })\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Specifies whether the ValueHelp can be used with a MultiValueField\n\t */\n\t@property({ type: \"boolean\" })\n\tuseMultiValueField = false;\n\n\t@property({ type: \"string\" })\n\tnavigationPrefix?: string;\n\n\t@property({ type: \"boolean\" })\n\trequiresValidation = false;\n\n\t@association({ type: \"string\" })\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\t_flexId?: string;\n\n\trequestGroupId: string | undefined = \"$auto.Workers\";\n\n\tcollaborationEnabled = false;\n\n\tconstructor(props: PropertiesOf<ValueHelp>, others?: PropertiesOf<ValueHelp>) {\n\t\tif (props._flexId) {\n\t\t\tprops.id = props._flexId + \"::Block\";\n\t\t}\n\t\tsuper(props, others);\n\t}\n\n\tstatic getValueHelpForMetaPath(\n\t\tpageController: PageController,\n\t\tmetaPath: string,\n\t\tcontextPath: string,\n\t\tmetaModel: ODataMetaModel | undefined\n\t): ValueHelp | undefined {\n\t\tconst dependents = pageController.getView()?.getDependents();\n\t\tconst foundDep = dependents?.find((child) => {\n\t\t\treturn child.isA<EnhanceWithUI5<ValueHelp>>(\"sap.fe.macros.ValueHelp\") && child.getMetaPath() === metaPath;\n\t\t});\n\t\tif (!foundDep) {\n\t\t\tconst valueHelp = new ValueHelp({\n\t\t\t\tmetaPath: metaPath,\n\t\t\t\tcontextPath: contextPath,\n\t\t\t\tmetaModel: metaModel?.getId(),\n\t\t\t\tidPrefix: pageController.getView()?.createId(\"FieldValueHelp\")\n\t\t\t});\n\t\t\tpageController.getView().addDependent(valueHelp);\n\t\t\treturn valueHelp;\n\t\t} else {\n\t\t\treturn foundDep as ValueHelp | undefined;\n\t\t}\n\t}\n\n\tonMetadataAvailable(): void {\n\t\tif (!this.content) {\n\t\t\tthis._getOwner()?.runAsOwner(() => {\n\t\t\t\tthis.content = this.createContent();\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateContent(): Control | undefined {\n\t\tconst metaContextPath = this.getMetaPathObject(this.metaPath, this.contextPath);\n\t\tconst metaModel = this._getOwner()?.getMetaModel(this.metaModel);\n\t\tif (metaContextPath && metaModel) {\n\t\t\tconst entitySetOrSingleton = metaContextPath.getClosestEntitySet();\n\t\t\tif (isEntitySet(entitySetOrSingleton)) {\n\t\t\t\tthis.collaborationEnabled = ModelHelper.isCollaborationDraftSupported(metaModel);\n\t\t\t}\n\n\t\t\tlet metaPath = metaModel.createBindingContext(metaContextPath.getPath());\n\t\t\tif (metaPath) {\n\t\t\t\tif (this.filterFieldValueHelp) {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpPropertyForFilterField(metaPath))!;\n\t\t\t\t} else {\n\t\t\t\t\tmetaPath = metaModel.createBindingContext(FieldHelper.valueHelpProperty(metaPath))!;\n\t\t\t\t}\n\t\t\t\tconst idPrefix = this.idPrefix ?? \"ValueHelp\";\n\t\t\t\treturn getValueHelpTemplate(metaPath, {\n\t\t\t\t\tmetaPath: metaModel.createBindingContext(metaContextPath.getPath())!,\n\t\t\t\t\tcontextPath: metaModel.createBindingContext(metaContextPath.getContextPath())!,\n\t\t\t\t\tfilterFieldValueHelp: this.filterFieldValueHelp,\n\t\t\t\t\tuseSemanticDateRange: this.useSemanticDateRange,\n\t\t\t\t\tuseMultiValueField: this.useMultiValueField,\n\t\t\t\t\tnavigationPrefix: this.navigationPrefix,\n\t\t\t\t\trequiresValidation: this.requiresValidation,\n\t\t\t\t\t_flexId: this._flexId,\n\t\t\t\t\tidPrefix: idPrefix,\n\t\t\t\t\tconditionModel: this.conditionModel,\n\t\t\t\t\trequestGroupId: this.requestGroupId,\n\t\t\t\t\tcollaborationEnabled: this.collaborationEnabled\n\t\t\t\t}) as Control | undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ValueHelp-dbg.js"}