{"version":3,"names":["ContentSwitcher","_dec","defineUI5Class","_dec2","implementInterface","_dec3","aggregation","type","multiple","isDefault","_dec4","event","_dec5","defineReference","_dec6","property","bindToState","_class","_class2","_ref","propertiesOrId","properties","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","content","createContent","state","selectedKey","onStateChange","_exports","_inheritsLoose","_proto","prototype","retrieveState","$segmentedButton","current","getSelectedKey","applyState","appState","items","key","_getControlFromItem","item","controlToSwitch","control","UI5Element","getElementById","isA","showHideControls","controlsToHide","controlsToDisplay","push","includes","setVisible","changedKeys","getPageController","getExtensionAPI","updateAppState","fireEvent","segmentedButtonId","createId","_jsx","SegmentedButton","ref","id","bindState","children","map","index","createSegmentedButtonItem","itemIdx","segmentButtonItemId","icon","SegmentedButtonItem","tooltip","text","BuildingBlock","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["ContentSwitcher.tsx"],"sourcesContent":["import { bindState } from \"sap/fe/base/BindingToolkit\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport { aggregation, defineReference, defineUI5Class, event, implementInterface, property } from \"sap/fe/base/ClassSupport\";\nimport type { Ref } from \"sap/fe/base/jsx-runtime/jsx\";\nimport BuildingBlock from \"sap/fe/core/buildingBlocks/BuildingBlock\";\nimport type IViewStateContributor from \"sap/fe/core/controllerextensions/viewState/IViewStateContributor\";\nimport type ContentSwitcherItem from \"sap/fe/macros/contentSwitcher/ContentSwitcherItem\";\nimport SegmentedButton from \"sap/m/SegmentedButton\";\nimport SegmentedButtonItem from \"sap/m/SegmentedButtonItem\";\nimport type Control from \"sap/ui/core/Control\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport type { EventHandler } from \"../../../../../../../types/extension_types\";\n\ntype ContentSwitcherState = {\n\tselectedKey?: string;\n};\n/**\n * Defines a new building block which can be used to toggle the visibility of the content referenced by the item.\n * Each item will be displayed in a segmented button with the\n */\n@defineUI5Class(\"sap.fe.macros.contentSwitcher.ContentSwitcher\")\nexport default class ContentSwitcher\n\textends BuildingBlock<\n\t\tSegmentedButton,\n\t\t{\n\t\t\tselectedKey: string;\n\t\t}\n\t>\n\timplements IViewStateContributor<ContentSwitcherState>\n{\n\t@implementInterface(\"sap.fe.core.controllerextensions.viewState.IViewStateContributor\")\n\t__implements__sap_fe_core_controllerextensions_viewState_IViewStateContributor = true;\n\n\t@aggregation({ type: \"sap.fe.macros.contentSwitcher.ContentSwitcherItem\", multiple: true, isDefault: true })\n\titems!: ContentSwitcherItem[];\n\n\t@event()\n\tselectionChange?: EventHandler;\n\n\t@defineReference()\n\t$segmentedButton!: Ref<SegmentedButton>;\n\n\t@property({ type: \"string\", bindToState: true })\n\tselectedKey?: string;\n\n\tconstructor(propertiesOrId: string | PropertiesOf<ContentSwitcher>, properties?: PropertiesOf<ContentSwitcher>) {\n\t\tsuper(propertiesOrId, properties);\n\t\tthis.content = this.createContent();\n\t\tif (this.state.selectedKey) {\n\t\t\t// if there is already a selected key let's make sure to apply it\n\t\t\tthis.onStateChange([\"selectedKey\"]);\n\t\t} else {\n\t\t\t// otherwise let's set an initial state\n\t\t\tthis.state.selectedKey = \"key0\";\n\t\t}\n\t}\n\n\tretrieveState(): ContentSwitcherState {\n\t\treturn {\n\t\t\tselectedKey: this.$segmentedButton.current?.getSelectedKey()\n\t\t};\n\t}\n\n\tapplyState(appState?: ContentSwitcherState): void {\n\t\tif (appState) {\n\t\t\tthis.state.selectedKey = appState.selectedKey ?? this.items[0]?.key ?? \"key0\";\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the control referenced by the ContentSwitcherItem.\n\t * @param item The ContentSwitcherItem\n\t * @returns The control referenced by the ContentSwitcherItem\n\t */\n\t_getControlFromItem(item: ContentSwitcherItem): Control | undefined {\n\t\tconst controlToSwitch = item.controlToSwitch;\n\t\tif (controlToSwitch) {\n\t\t\tconst control = UI5Element.getElementById(controlToSwitch);\n\t\t\tif (control?.isA<Control>(\"sap.ui.core.Control\")) {\n\t\t\t\treturn control;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate showHideControls(selectedKey: string): void {\n\t\tconst controlsToHide: Control[] = [];\n\t\tconst controlsToDisplay: Control[] = [];\n\t\tfor (const item of this.items) {\n\t\t\tconst control = this._getControlFromItem(item);\n\t\t\t// item.key -> compact\n\t\t\t// selectedKey -> compact & { czxmcz;lkxzc }\n\t\t\tif (control && item.key !== selectedKey) {\n\t\t\t\tcontrolsToHide.push(control);\n\t\t\t} else if (control) {\n\t\t\t\tcontrolsToDisplay.push(control);\n\t\t\t}\n\t\t}\n\t\tfor (const control of controlsToHide) {\n\t\t\tif (!controlsToDisplay.includes(control)) {\n\t\t\t\tcontrol.setVisible(false);\n\t\t\t}\n\t\t}\n\t\tfor (const control of controlsToDisplay) {\n\t\t\tcontrol.setVisible(true);\n\t\t}\n\t}\n\n\tonStateChange(changedKeys: string[]): void {\n\t\tif (changedKeys?.includes(\"selectedKey\")) {\n\t\t\tthis.showHideControls(this.state.selectedKey);\n\t\t\tthis.getPageController()?.getExtensionAPI().updateAppState();\n\t\t\tthis.fireEvent(\"selectionChange\");\n\t\t}\n\t}\n\n\t/**\n\t * Creates the content of the building block.\n\t * @returns The SegmentedButton\n\t */\n\tcreateContent(): SegmentedButton {\n\t\tconst segmentedButtonId = this.createId(\"filterTypeSwitch\");\n\n\t\treturn (\n\t\t\t<SegmentedButton ref={this.$segmentedButton} id={segmentedButtonId} selectedKey={bindState(this.state, \"selectedKey\")}>\n\t\t\t\t{{ items: this.items.map((item, index) => this.createSegmentedButtonItem(item, index)) }}\n\t\t\t</SegmentedButton>\n\t\t);\n\t}\n\n\t/**\n\t * Creates the SegmentedButtonItem for the SegmentedButton and associate a key to it.\n\t * @param item The ContentSwitcherItem\n\t * @param itemIdx The index of the item\n\t * @returns The SegmentedButtonItem\n\t */\n\tcreateSegmentedButtonItem(item: ContentSwitcherItem, itemIdx: number): SegmentedButtonItem {\n\t\tconst segmentButtonItemId = this.createId(item.key);\n\t\titem.key ??= `key${itemIdx}`;\n\t\tif (item.icon) {\n\t\t\treturn <SegmentedButtonItem icon={item.icon} tooltip={item.text} key={item.key} id={segmentButtonItemId} />;\n\t\t}\n\t\treturn <SegmentedButtonItem text={item.text} key={item.key} id={segmentButtonItemId} />;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"ContentSwitcher-dbg.js"}