{"version":3,"file":"FilterBar.block.js","names":["setCustomFilterFieldProperties","childFilterField","aggregationObject","slotName","key","replace","property","getAttribute","label","required","template","FilterBarBlock","_dec","defineBuildingBlock","name","namespace","publicNamespace","returnTypes","_dec2","blockAttribute","type","isPublic","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","blockEvent","_dec27","_dec28","_dec29","_dec30","_dec31","blockAggregation","hasVirtualNode","processAggregations","_dec32","_class","_class2","_BuildingBlockTemplat","props","configuration","mSettings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","showDraftEditState","_descriptor31","checkIfEditingFilterIsDisabled","targetEntitySet","annotations","Capabilities","NavigationRestrictions","RestrictedProperties","some","r","NavigationProperty","value","FilterRestrictions","Filterable","checkIfCollaborationDraftSupported","oMetaModel","ModelHelper","isCollaborationDraftSupported","isDraftCollaborative","getEntityTypePath","metaPathParts","endsWith","getSearch","hideBasicSearch","_jsx","MDCFilterField","id","generate","placeholder","propertyKey","conditions","dataType","maxConditions","dataTypeConstraints","processSelectionFields","draftEditState","draftStates","DraftEditState","getEditStates","getTranslatedText","operators","display","children","contentEdit","Select","width","forceSelection","selectedKey","items","map","state","ListItem","text","_valueHelps","_filterFields","push","Array","isArray","selectionFields","getObject","forEach","selectionField","availability","setFilterFieldsAndValueHelps","length","undefined","pushFilterFieldsAndValueHelps","annotationPath","propertyContext","metaPath","getModel","createBindingContext","propertyObject","filterContent","SlotColumn","templateId","CustomFragmentBlock","fragmentName","contextPath","maxConditionValue","context","delegate","conditionPath","FieldHelper","useSemanticDateRange","settings","getPath","constraints","dataTypeFormatOptions","formatOptions","valueHelp","content","CustomFilterFieldContentWrapper","binding","FilterUtils","conditionToModelPath","customData","CustomData","FieldHelpCustomData","documentRefText","InternalFilterField","idPrefix","CommonHelper","getNavigationPath","vhIdPrefix","_getContextPathForFilterField","_internalContextPath","stringifyCustomData","visualFilter","storeObjectValue","editMode","ValueHelp","conditionModel","filterFieldValueHelp","Log","error","_assertThisInitialized","sMetaPath","entityTypePath","split","sEntitySetPath","getEntitySetPath","parentContextPath","fullContextPath","sObjectPath","startsWith","_annotationPath","oExtraParams","filterFields","oVisualizationObjectPath","getInvolvedDataModelObjects","oConverterContext","getConverterContext","propertyInfo","getSelectionFields","sPropertyInfo","Common","DraftRoot","disableDraftEditStateFilter","oSelectionFields","TemplateModel","viewData","models","getData","oEntityType","getEntityType","oSelectionVariant","getSelectionVariant","oEntitySetContext","getContext","oFilterConditions","getFilterConditions","selectionVariant","filterConditions","_processPropertyInfos","_applyIdToContent","_apiId","_contentId","getContentId","oSearchRestrictionAnnotation","getSearchRestrictions","Boolean","Searchable","jsx","renderAsXML","designtime","getDesigntime","_exports","_inheritsLoose","_proto","prototype","model","aParameterFields","sFetchedProperties","aFetchedProperties","JSON","parse","editStateLabel","propInfo","isParameter","path","includes","propertyLocationPath","getLocationForPropertyPath","propertyPath","CommonUtils","getFilterRestrictionsByPath","RequiredProperties","stringify","_parameters","getPersistenceProvider","filterBarId","ignorePersonalizationChanges","PersistenceProvider","for","mode","filterBarContextPath","annoPath","substring","lastIndexOf","getTemplate","internalContextPath","filterDelegate","filterBarDelegate","_propertyInfoControl","formatPropertyInfo","FilterBarAPI","search","filterChanged","afterClear","internalSearch","internalFilterChanged","FEFilterBar","liveMode","variantBackreference","showAdaptFiltersButton","showClearButton","p13nMode","filtersChanged","suspendSelection","showMessages","toggleControl","toggleControlId","initialLayout","visible","dependents","basicSearchField","filterItems","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FilterBar.block.tsx"],"sourcesContent":["import type { EntitySet } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport jsx from \"sap/fe/base/jsx-runtime/jsx\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TemplateModel from \"sap/fe/core/TemplateModel\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport { storeObjectValue } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport { getSelectionVariant } from \"sap/fe/core/converters/controls/Common/DataVisualization\";\nimport type { FilterField as ConvertedFilterField, ManifestFilterField } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getSelectionFields } from \"sap/fe/core/converters/controls/ListReport/FilterBar\";\nimport { getSearchRestrictions } from \"sap/fe/core/helpers/MetaModelFunction\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { generate } from \"sap/fe/core/helpers/StableIdHelper\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport FieldHelper from \"sap/fe/macros/field/FieldHelper\";\nimport { maxConditions } from \"sap/fe/macros/filter/FilterFieldHelper\";\nimport FilterUtils from \"sap/fe/macros/filter/FilterUtils\";\nimport DraftEditState from \"sap/fe/macros/filterBar/DraftEditState\";\nimport type FilterField from \"sap/fe/macros/filterBar/FilterField\";\nimport { getFilterConditions } from \"sap/fe/macros/filterBar/FilterHelper\";\nimport CustomFragmentBlock from \"sap/fe/macros/fpm/CustomFragment.block\";\nimport InternalFilterField from \"sap/fe/macros/internal/FilterField.block\";\nimport Select from \"sap/m/Select\";\nimport type Control from \"sap/ui/core/Control\";\nimport CustomData from \"sap/ui/core/CustomData\";\nimport ListItem from \"sap/ui/core/ListItem\";\nimport FieldHelpCustomData from \"sap/ui/core/fieldhelp/FieldHelpCustomData\";\nimport type { IContext } from \"sap/ui/core/util/XMLPreprocessor\";\nimport MDCFilterField from \"sap/ui/mdc/FilterField\";\nimport type { ConditionObject } from \"sap/ui/mdc/condition/Condition\";\nimport type { FilterBarBase$FiltersChangedEvent, FilterBarBase$SearchEvent } from \"sap/ui/mdc/filterbar/FilterBarBase\";\nimport PersistenceProvider from \"sap/ui/mdc/p13n/PersistenceProvider\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataMetaModel from \"sap/ui/model/odata/v4/ODataMetaModel\";\nimport type { PropertyInfo } from \"../DelegateUtil\";\nimport ValueHelp from \"../ValueHelp\";\nimport CustomFilterFieldContentWrapper from \"../controls/CustomFilterFieldContentWrapper\";\nimport FEFilterBar from \"../controls/FilterBar\";\nimport SlotColumn from \"../table/SlotColumn\";\nimport FilterBarAPI from \"./FilterBarAPI\";\n\nconst setCustomFilterFieldProperties = function (childFilterField: Element, aggregationObject: FilterField): FilterField {\n\taggregationObject.slotName = aggregationObject.key;\n\taggregationObject.key = aggregationObject.key.replace(\"InlineXML_\", \"\");\n\taggregationObject.property = childFilterField.getAttribute(\"property\")!;\n\taggregationObject.label = childFilterField.getAttribute(\"label\")!;\n\taggregationObject.required = childFilterField.getAttribute(\"required\") === \"true\";\n\taggregationObject.template = childFilterField.getAttribute(\"template\") as unknown as Control; // But it's a string;\n\treturn aggregationObject;\n};\n\n/**\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:FilterBar\n * id=\"SomeID\"\n * showAdaptFiltersButton=\"true\"\n * p13nMode=[\"Item\",\"Value\"]\n * listBindingNames = \"sap.fe.tableBinding\"\n * liveMode=\"true\"\n * search=\".handlers.onSearch\"\n * filterChanged=\".handlers.onFiltersChanged\"\n * /&gt;\n * </pre>\n *\n * Building block for creating a FilterBar based on the metadata provided by OData V4.\n * @since 1.94.0\n */\n@defineBuildingBlock({\n\tname: \"FilterBar\",\n\tnamespace: \"sap.fe.macros.internal\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.fe.macros.filterBar.FilterBarAPI\"]\n})\nexport default class FilterBarBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * ID of the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\tisPublic: true\n\t})\n\tid?: string;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tvisible?: string;\n\n\t/**\n\t * selectionFields to be displayed\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tselectionFields?: ConvertedFilterField[] | Context;\n\n\t@blockAttribute({ type: \"string\" })\n\tfilterBarDelegate?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tmetaPath?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true\n\t})\n\tcontextPath?: Context;\n\n\t/**\n\t * Displays possible errors during the search in a message box\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tshowMessages = false;\n\n\t/**\n\t * ID of the assigned variant management\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tvariantBackreference?: string;\n\n\t/**\n\t * Don't show the basic search field\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\thideBasicSearch?: boolean;\n\n\t/**\n\t * Enables the fallback to show all fields of the EntityType as filter fields if com.sap.vocabularies.UI.v1.SelectionFields are not present\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tenableFallback = false;\n\n\t/**\n\t * Handles visibility of the 'Adapt Filters' button on the FilterBar\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tshowAdaptFiltersButton = true;\n\n\t/**\n\t * Specifies the personalization options for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string[]\"\n\t})\n\tp13nMode = \"Item,Value\";\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tpropertyInfo?: string;\n\n\t/**\n\t * Specifies the Sematic Date Range option for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tuseSemanticDateRange = true;\n\n\t/**\n\t * Specifies the navigation properties option for the filter bar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"string[]\"\n\t})\n\tnavigationProperties?: string[];\n\n\t/**\n\t * If set, the search is automatically triggered when a filter value is changed.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tliveMode = false;\n\n\t/**\n\t * Filter conditions to be applied to the filter bar\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\",\n\t\trequired: false\n\t})\n\tfilterConditions?: string | undefined;\n\n\t/**\n\t * If set to <code>true</code>, all search requests are ignored. Once it has been set to <code>false</code>,\n\t * a search is triggered immediately if one or more search requests have been triggered in the meantime\n\t * but were ignored based on the setting.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tsuspendSelection = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tisDraftCollaborative = false;\n\n\t/**\n\t * Id of control that will allow for switching between normal and visual filter\n\t */\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\ttoggleControlId?: string;\n\n\t@blockAttribute({\n\t\ttype: \"string\"\n\t})\n\tinitialLayout = \"compact\";\n\n\t/**\n\t * Handles the visibility of the 'Clear' button on the FilterBar.\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tshowClearButton = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\t_applyIdToContent = false;\n\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdisableDraftEditStateFilter = false;\n\n\t/**\n\t * Temporary workaround only\n\t * path to contextPath to be used by child filterfields\n\t */\n\t_internalContextPath!: Context;\n\n\t_parameters: string | undefined;\n\n\t_annotationPath: string | undefined;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar\n\t */\n\t@blockEvent()\n\tsearch?: string;\n\n\t/**\n\t * Event handler to react to the filterChange event of the FilterBar\n\t */\n\t@blockEvent()\n\tfilterChanged?: string;\n\n\t/**\n\t * Event handler to react to the filterChanged event of the FilterBar. Exposes parameters from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalFilterChanged?: string;\n\n\t/**\n\t * Event handler to react to the search event of the FilterBar. Exposes parameteres from the MDC filter bar\n\t */\n\t@blockEvent()\n\tinternalSearch?: string;\n\n\t/**\n\t * Event handler to react to the afterClear event of the FilterBar\n\t */\n\t@blockEvent()\n\tafterClear?: string;\n\n\t@blockAggregation({\n\t\ttype: \"sap.fe.macros.filterBar.FilterField\",\n\t\tisPublic: true,\n\t\thasVirtualNode: true,\n\t\tprocessAggregations: setCustomFilterFieldProperties\n\t})\n\tfilterFields?: FilterField;\n\n\t_apiId: string | undefined;\n\n\t_contentId: string | undefined;\n\n\t_valueHelps: Array<string> | \"\" | undefined;\n\n\t_filterFields: Array<string> | \"\" | undefined;\n\n\tshowDraftEditState = false;\n\n\tdesigntime?: string;\n\n\t/**\n\t * This mode must be used when it is certain that a control must not persist it´s personalization state upon initialization.\n\t * @experimental\n\t * @since 1.136.0\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\",\n\t\tisPublic: true\n\t})\n\tignorePersonalizationChanges = false;\n\n\tconstructor(props: PropertiesOf<FilterBarBlock>, configuration: unknown, mSettings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, mSettings);\n\t\tif (!this.metaPath) {\n\t\t\tLog.error(\"Context Path not available for FilterBar Macro.\");\n\t\t\treturn;\n\t\t}\n\t\tconst sMetaPath = this.metaPath.getPath();\n\t\tlet entityTypePath = \"\";\n\t\tconst metaPathParts = sMetaPath?.split(\"/@com.sap.vocabularies.UI.v1.SelectionFields\") || []; // [0]: entityTypePath, [1]: SF Qualifier.\n\t\tif (metaPathParts.length > 0) {\n\t\t\tentityTypePath = this.getEntityTypePath(metaPathParts);\n\t\t}\n\t\tconst sEntitySetPath = ModelHelper.getEntitySetPath(entityTypePath);\n\t\tconst oMetaModel = this.contextPath?.getModel();\n\t\tthis._internalContextPath = oMetaModel?.createBindingContext(entityTypePath) as Context;\n\t\tconst annotationPath: string = \"@com.sap.vocabularies.UI.v1.SelectionFields\" + ((metaPathParts.length && metaPathParts[1]) || \"\");\n\t\tconst parentContextPath = mSettings?.fullContextPath as string;\n\t\tlet sObjectPath = annotationPath;\n\t\tif (parentContextPath !== \"\" && this._internalContextPath.getPath()?.startsWith(parentContextPath)) {\n\t\t\tsObjectPath = sMetaPath.replace(parentContextPath, \"\");\n\t\t}\n\t\tthis._annotationPath = annotationPath;\n\t\tconst oExtraParams: Record<string, { filterFields?: FilterField }> = {};\n\t\tif (this.filterFields) {\n\t\t\toExtraParams[sObjectPath] = {\n\t\t\t\tfilterFields: this.filterFields\n\t\t\t};\n\t\t}\n\n\t\tconst oVisualizationObjectPath = getInvolvedDataModelObjects(this._internalContextPath);\n\t\tconst oConverterContext = this.getConverterContext(oVisualizationObjectPath, undefined, mSettings, oExtraParams);\n\t\tif (!this.propertyInfo) {\n\t\t\tthis.propertyInfo = getSelectionFields(oConverterContext, [], annotationPath).sPropertyInfo;\n\t\t}\n\n\t\tconst targetEntitySet = getInvolvedDataModelObjects(this.metaPath, this.contextPath).targetEntitySet as EntitySet;\n\t\tif (targetEntitySet?.annotations?.Common?.DraftRoot && !this.disableDraftEditStateFilter) {\n\t\t\tthis.showDraftEditState = true;\n\t\t\tthis.checkIfEditingFilterIsDisabled(targetEntitySet);\n\t\t\tthis.checkIfCollaborationDraftSupported(oMetaModel as ODataMetaModel);\n\t\t}\n\n\t\t//Filter Fields and values to the field are filled based on the selectionFields and this would be empty in case of macro outside the FE template\n\t\tif (!this.selectionFields) {\n\t\t\tconst oSelectionFields = getSelectionFields(oConverterContext, [], annotationPath).selectionFields;\n\t\t\tthis.selectionFields = new TemplateModel(oSelectionFields, oMetaModel as ODataMetaModel).createBindingContext(\"/\");\n\t\t\tconst viewData = mSettings?.models?.viewData?.getData();\n\t\t\tconst oEntityType = oConverterContext.getEntityType(),\n\t\t\t\toSelectionVariant = getSelectionVariant(oEntityType, oConverterContext),\n\t\t\t\toEntitySetContext = (oMetaModel as ODataMetaModel).getContext(sEntitySetPath) as ODataV4Context,\n\t\t\t\toFilterConditions = getFilterConditions(\n\t\t\t\t\toEntitySetContext as unknown as IContext, // Wrong but somehow works ?,\n\t\t\t\t\t{ selectionVariant: oSelectionVariant },\n\t\t\t\t\toEntitySetContext.getObject(),\n\t\t\t\t\tviewData,\n\t\t\t\t\tthis.showDraftEditState\n\t\t\t\t);\n\t\t\tthis.filterConditions = oFilterConditions;\n\t\t}\n\t\tthis._processPropertyInfos(this.propertyInfo, oMetaModel);\n\n\t\tif (this._applyIdToContent) {\n\t\t\tthis._apiId = this.id + \"::FilterBar\";\n\t\t\tthis._contentId = this.id;\n\t\t} else {\n\t\t\tthis._apiId = this.id;\n\t\t\tthis._contentId = this.getContentId(this.id + \"\");\n\t\t}\n\n\t\tif (this.hideBasicSearch !== true) {\n\t\t\tconst oSearchRestrictionAnnotation = getSearchRestrictions(sEntitySetPath, oMetaModel as ODataMetaModel);\n\t\t\tthis.hideBasicSearch = Boolean(oSearchRestrictionAnnotation && !oSearchRestrictionAnnotation.Searchable);\n\t\t}\n\t\tjsx.renderAsXML(() => this.processSelectionFields());\n\n\t\tthis.designtime = this.getDesigntime();\n\t}\n\n\t_processPropertyInfos(propertyInfo: string, model: ODataMetaModel): void {\n\t\tconst aParameterFields: string[] = [];\n\t\tif (propertyInfo) {\n\t\t\tconst sFetchedProperties = propertyInfo.replace(/\\\\{/g, \"{\").replace(/\\\\}/g, \"}\");\n\t\t\tconst aFetchedProperties = JSON.parse(sFetchedProperties);\n\t\t\tconst editStateLabel = this.getTranslatedText(\"FILTERBAR_EDITING_STATUS\");\n\t\t\taFetchedProperties.forEach(function (propInfo: PropertyInfo) {\n\t\t\t\tpropInfo.key = propInfo.name;\n\t\t\t\tif (propInfo.isParameter) {\n\t\t\t\t\taParameterFields.push(propInfo.name);\n\t\t\t\t}\n\t\t\t\tif (propInfo.path === \"$editState\") {\n\t\t\t\t\tpropInfo.label = editStateLabel;\n\t\t\t\t}\n\t\t\t\tif (propInfo.key?.includes(\"/\")) {\n\t\t\t\t\t//TO DO: Need to place this logic in common place when we cover filterRetrictions with this BLI FIORITECHP1-25080\n\t\t\t\t\tconst annotationPath = (propInfo as ConvertedFilterField).annotationPath;\n\t\t\t\t\tconst propertyLocationPath = CommonHelper.getLocationForPropertyPath(model, annotationPath);\n\t\t\t\t\tconst propertyPath = annotationPath.replace(`${propertyLocationPath}/`, \"\");\n\t\t\t\t\tpropInfo.required = CommonUtils.getFilterRestrictionsByPath(propertyLocationPath, model)?.RequiredProperties?.includes(\n\t\t\t\t\t\tpropertyPath\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.propertyInfo = JSON.stringify(aFetchedProperties).replace(/\\{/g, \"\\\\{\").replace(/\\}/g, \"\\\\}\");\n\t\t}\n\t\tthis._parameters = JSON.stringify(aParameterFields);\n\t}\n\n\tcheckIfEditingFilterIsDisabled = (targetEntitySet: EntitySet): void => {\n\t\tif (\n\t\t\ttargetEntitySet.annotations?.Capabilities?.NavigationRestrictions?.RestrictedProperties?.some(\n\t\t\t\t(r) => r.NavigationProperty?.value === \"DraftAdministrativeData\" && r.FilterRestrictions?.Filterable === false\n\t\t\t) === true\n\t\t) {\n\t\t\tthis.showDraftEditState = false;\n\t\t}\n\t};\n\n\tcheckIfCollaborationDraftSupported = (oMetaModel: ODataMetaModel | undefined): void => {\n\t\tif (ModelHelper.isCollaborationDraftSupported(oMetaModel)) {\n\t\t\tthis.isDraftCollaborative = true;\n\t\t}\n\t};\n\n\tgetEntityTypePath = (metaPathParts: string[]): string => {\n\t\treturn metaPathParts[0].endsWith(\"/\") ? metaPathParts[0] : metaPathParts[0] + \"/\";\n\t};\n\n\tgetSearch = (): string => {\n\t\tif (!this.hideBasicSearch) {\n\t\t\treturn (\n\t\t\t\t<MDCFilterField\n\t\t\t\t\tid={generate([this.id, \"BasicSearchField\"])}\n\t\t\t\t\tplaceholder=\"{sap.fe.i18n>M_FILTERBAR_SEARCH}\"\n\t\t\t\t\tpropertyKey=\"$search\"\n\t\t\t\t\tconditions=\"{$filters>/conditions/$search}\"\n\t\t\t\t\tdataType=\"sap.ui.model.odata.type.String\"\n\t\t\t\t\tmaxConditions=\"1\"\n\t\t\t\t\tdataTypeConstraints=\"{'maxLength':1000}\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tprocessSelectionFields = (): void => {\n\t\tlet draftEditState = \"\";\n\t\tif (this.showDraftEditState) {\n\t\t\tconst draftStates = DraftEditState.getEditStates(this.isDraftCollaborative);\n\t\t\tconst label = this.getTranslatedText(\"FILTERBAR_EDITING_STATUS\");\n\t\t\tdraftEditState = (\n\t\t\t\t<MDCFilterField\n\t\t\t\t\tlabel={label}\n\t\t\t\t\tconditions=\"{$filters>/conditions/$editState}\"\n\t\t\t\t\tmaxConditions=\"1\"\n\t\t\t\t\tid={generate([this.id, \"FilterField\", \"DraftEditingStatus\"])}\n\t\t\t\t\toperators=\"EQ\"\n\t\t\t\t\tdataType=\"sap.ui.model.odata.type.String\"\n\t\t\t\t\tpropertyKey=\"$editState\"\n\t\t\t\t\tdisplay=\"Description\"\n\t\t\t\t>\n\t\t\t\t\t{{\n\t\t\t\t\t\tcontentEdit: (\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tid={generate([this.id, \"FilterField\", \"DraftEditingStatusSelect\"])}\n\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\tforceSelection=\"true\"\n\t\t\t\t\t\t\t\tselectedKey=\"{path: '$field>/conditions', type: 'sap.ui.mdc.field.ConditionsType'}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ items: draftStates.map((state) => <ListItem key={state.id} text={state.display} />) }}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t</MDCFilterField>\n\t\t\t);\n\t\t}\n\t\tthis._valueHelps = [];\n\t\tthis._filterFields = [];\n\t\tthis._filterFields?.push(draftEditState);\n\t\tif (!Array.isArray(this.selectionFields)) {\n\t\t\tthis.selectionFields = this.selectionFields!.getObject() as ConvertedFilterField[];\n\t\t}\n\t\tthis.selectionFields?.forEach((selectionField: ConvertedFilterField) => {\n\t\t\tif (selectionField.availability === \"Default\") {\n\t\t\t\tthis.setFilterFieldsAndValueHelps(selectionField);\n\t\t\t}\n\t\t});\n\t\tthis._filterFields = this._filterFields?.length > 0 ? this._filterFields : \"\";\n\t\tthis._valueHelps = this._valueHelps?.length > 0 ? this._valueHelps : \"\";\n\t};\n\n\tgetPersistenceProvider(filterBarId: string): string | undefined {\n\t\tif (this.ignorePersonalizationChanges) {\n\t\t\treturn <PersistenceProvider id={generate([filterBarId, \"PersistenceProvider\"])} for={filterBarId} mode={\"Transient\"} />;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsetFilterFieldsAndValueHelps = (selectionField: ConvertedFilterField): void => {\n\t\tif (selectionField.template === undefined && selectionField.type !== \"Slot\") {\n\t\t\tthis.pushFilterFieldsAndValueHelps(selectionField);\n\t\t} else if (Array.isArray(this._filterFields)) {\n\t\t\tconst property = selectionField.annotationPath;\n\t\t\tconst propertyContext = this.metaPath!.getModel().createBindingContext(property);\n\t\t\tconst propertyObject = propertyContext?.getObject();\n\t\t\tlet filterContent;\n\t\t\tif (selectionField.type === \"Slot\") {\n\t\t\t\tfilterContent = (\n\t\t\t\t\t<SlotColumn templateId={selectionField.template}>\n\t\t\t\t\t\t<slot name={(selectionField as ManifestFilterField).slotName!} />\n\t\t\t\t\t</SlotColumn>\n\t\t\t\t);\n\t\t\t} else if (selectionField.template) {\n\t\t\t\tfilterContent = (\n\t\t\t\t\t<CustomFragmentBlock\n\t\t\t\t\t\tfragmentName={selectionField.template}\n\t\t\t\t\t\tid={generate([this.id, \"CustomFilterField\", selectionField.key])}\n\t\t\t\t\t\tcontextPath={\"{contextPath>}\" as unknown as Context}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tlet maxConditionValue = -1;\n\t\t\tif (propertyContext) {\n\t\t\t\tmaxConditionValue = maxConditions(selectionField.annotationPath, { context: propertyContext }) ?? -1;\n\t\t\t}\n\t\t\tthis._filterFields?.push(\n\t\t\t\t<MDCFilterField\n\t\t\t\t\tid={generate([this.id, \"CustomFilterField\", selectionField.key])}\n\t\t\t\t\tdelegate={{ name: \"sap/fe/macros/field/FieldBaseDelegate\" }}\n\t\t\t\t\tpropertyKey={selectionField.conditionPath}\n\t\t\t\t\tlabel={selectionField.label}\n\t\t\t\t\tdataType=\"Edm.String\"\n\t\t\t\t\tmaxConditions={maxConditionValue}\n\t\t\t\t\tconditions={`{$filters>/conditions/${selectionField.conditionPath}}`}\n\t\t\t\t\toperators={FieldHelper.operators(\n\t\t\t\t\t\tpropertyContext,\n\t\t\t\t\t\tpropertyObject,\n\t\t\t\t\t\tthis.useSemanticDateRange,\n\t\t\t\t\t\tselectionField.settings as unknown as string,\n\t\t\t\t\t\tthis.contextPath!.getPath()\n\t\t\t\t\t)}\n\t\t\t\t\tdataTypeConstraints={(selectionField as unknown as { constraints: unknown }).constraints}\n\t\t\t\t\tdataTypeFormatOptions={(selectionField as unknown as { formatOptions: unknown }).formatOptions}\n\t\t\t\t\tvalueHelp={\"undefined\"}\n\t\t\t\t\trequired={selectionField.required}\n\t\t\t\t>\n\t\t\t\t\t{{\n\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t<CustomFilterFieldContentWrapper\n\t\t\t\t\t\t\t\tcore:require=\"{handler: 'sap/fe/macros/filter/FilterUtils'}\"\n\t\t\t\t\t\t\t\tid={generate([this.id, \"FilterFieldContentWrapper\", selectionField.key])}\n\t\t\t\t\t\t\t\tbinding={`{filterValues>/'${FilterUtils.conditionToModelPath(selectionField.conditionPath)}}`}\n\t\t\t\t\t\t\t\tconditions={\"{path: '$field>/conditions'}\" as unknown as ConditionObject[]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ content: filterContent }}\n\t\t\t\t\t\t\t</CustomFilterFieldContentWrapper>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcustomData: [\n\t\t\t\t\t\t\t<CustomData key={\"isSlot\"} value={selectionField.type === \"Slot\"} />,\n\t\t\t\t\t\t\t<FieldHelpCustomData\n\t\t\t\t\t\t\t\tkey={\"sap-ui-DocumentationRef\"}\n\t\t\t\t\t\t\t\tvalue={`{parts: [{value: 'asArray'}, {value: '${selectionField.documentRefText}'}], formatter: 'sap.fe.core.formatters.StandardFormatter'}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t]\n\t\t\t\t\t}}\n\t\t\t\t</MDCFilterField>\n\t\t\t);\n\t\t}\n\t};\n\n\t_getContextPathForFilterField(selectionField: ConvertedFilterField, filterBarContextPath: Context): string {\n\t\tlet contextPath: string = filterBarContextPath?.getPath();\n\t\tif (selectionField.isParameter) {\n\t\t\t// Example:\n\t\t\t// FilterBarContextPath: /Customer/Set\n\t\t\t// ParameterPropertyPath: /Customer/P_CC\n\t\t\t// ContextPathForFilterField: /Customer\n\t\t\tconst annoPath = selectionField.annotationPath;\n\t\t\tcontextPath = annoPath.substring(0, annoPath.lastIndexOf(\"/\") + 1);\n\t\t}\n\t\treturn contextPath;\n\t}\n\n\tpushFilterFieldsAndValueHelps = (selectionField: ConvertedFilterField): void => {\n\t\tif (Array.isArray(this._filterFields)) {\n\t\t\tthis._filterFields?.push(\n\t\t\t\t<InternalFilterField\n\t\t\t\t\tidPrefix={generate([this.id, \"FilterField\", CommonHelper.getNavigationPath(selectionField.annotationPath)])}\n\t\t\t\t\tvhIdPrefix={generate([this.id, \"FilterFieldValueHelp\"])}\n\t\t\t\t\tproperty={selectionField.annotationPath as unknown as Context}\n\t\t\t\t\tcontextPath={this._getContextPathForFilterField(selectionField, this._internalContextPath) as unknown as Context}\n\t\t\t\t\tuseSemanticDateRange={this.useSemanticDateRange}\n\t\t\t\t\tsettings={CommonHelper.stringifyCustomData(selectionField.settings)}\n\t\t\t\t\tvisualFilter={\n\t\t\t\t\t\tselectionField.visualFilter !== undefined\n\t\t\t\t\t\t\t? (storeObjectValue(selectionField.visualFilter) as unknown as Context)\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t\teditMode={`{internal>/${this.id}/filterFields/${selectionField.conditionPath}/editMode}`}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tif (Array.isArray(this._valueHelps)) {\n\t\t\tthis._valueHelps?.push(\n\t\t\t\t<ValueHelp\n\t\t\t\t\tidPrefix={generate([this.id, \"FilterFieldValueHelp\"])}\n\t\t\t\t\tconditionModel=\"$filters\"\n\t\t\t\t\tmetaPath={selectionField.annotationPath}\n\t\t\t\t\tcontextPath={this._getContextPathForFilterField(selectionField, this._internalContextPath)}\n\t\t\t\t\tfilterFieldValueHelp={true}\n\t\t\t\t\tuseSemanticDateRange={this.useSemanticDateRange}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t};\n\n\t/**\n\t * Determines the design time for the MDC FilterBar.\n\t * @returns The value to be assigned to dt:designtime\n\t */\n\tgetDesigntime(): string | undefined {\n\t\treturn \"sap/fe/macros/filterBar/designtime/FilterBar.designtime\";\n\t}\n\n\tgetTemplate(): string {\n\t\tconst internalContextPath = this._internalContextPath?.getPath();\n\t\tlet filterDelegate = \"\";\n\t\tif (this.filterBarDelegate) {\n\t\t\tfilterDelegate = this.filterBarDelegate;\n\t\t} else {\n\t\t\tfilterDelegate = \"{name:'sap/fe/macros/filterBar/FilterBarDelegate', payload: {entityTypePath: '\" + internalContextPath + \"'}}\";\n\t\t}\n\t\t// after removing the unwanted properties PropertyInfo is added to the control, and we also save the full version as custom data for FE internal use\n\t\tconst _propertyInfoControl = FilterUtils.formatPropertyInfo(this.propertyInfo as string);\n\t\treturn (\n\t\t\t<FilterBarAPI\n\t\t\t\tid={this._apiId}\n\t\t\t\tmetaPath={this.metaPath!.getPath()}\n\t\t\t\tsearch={this.search}\n\t\t\t\tfilterChanged={this.filterChanged}\n\t\t\t\tafterClear={this.afterClear}\n\t\t\t\tinternalSearch={this.internalSearch}\n\t\t\t\tinternalFilterChanged={this.internalFilterChanged}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<FEFilterBar\n\t\t\t\t\t\t\tcore:require=\"{API: 'sap/fe/macros/filterBar/FilterBarAPI'}\"\n\t\t\t\t\t\t\tid={this._contentId}\n\t\t\t\t\t\t\tliveMode={this.liveMode}\n\t\t\t\t\t\t\tdelegate={filterDelegate}\n\t\t\t\t\t\t\tvariantBackreference={this.liveMode ? undefined : this.variantBackreference}\n\t\t\t\t\t\t\tshowAdaptFiltersButton={this.showAdaptFiltersButton}\n\t\t\t\t\t\t\tshowClearButton={this.showClearButton}\n\t\t\t\t\t\t\tp13nMode={this.p13nMode}\n\t\t\t\t\t\t\tsearch={\"API.handleSearch($event)\" as unknown as (e: FilterBarBase$SearchEvent) => void}\n\t\t\t\t\t\t\tfiltersChanged={\"API.handleFilterChanged($event)\" as unknown as (e: FilterBarBase$FiltersChangedEvent) => void}\n\t\t\t\t\t\t\tfilterConditions={this.filterConditions}\n\t\t\t\t\t\t\tsuspendSelection={this.suspendSelection}\n\t\t\t\t\t\t\tshowMessages={this.showMessages}\n\t\t\t\t\t\t\ttoggleControl={this.toggleControlId}\n\t\t\t\t\t\t\tinitialLayout={this.initialLayout}\n\t\t\t\t\t\t\tpropertyInfo={_propertyInfoControl}\n\t\t\t\t\t\t\tvisible={this.visible}\n\t\t\t\t\t\t\tdt:designtime={this.designtime}\n\t\t\t\t\t\t\tcustomData:entityType={internalContextPath}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tcustomData: [\n\t\t\t\t\t\t\t\t\t<CustomData key={\"localId\"} value={this.id} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"hideBasicSearch\"} value={this.hideBasicSearch} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"showDraftEditState\"} value={this.showDraftEditState} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"useSemanticDateRange\"} value={this.useSemanticDateRange} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"parameters\"} value={this._parameters} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"feFilterInfo\"} value={this.propertyInfo} />,\n\t\t\t\t\t\t\t\t\t<CustomData key={\"annotationPath\"} value={this._annotationPath} />\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tdependents: [this._valueHelps, this.getPersistenceProvider(this._contentId as string)],\n\t\t\t\t\t\t\t\tbasicSearchField: this.getSearch(),\n\t\t\t\t\t\t\t\tfilterItems: this._filterFields\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</FEFilterBar>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</FilterBarAPI>\n\t\t);\n\t}\n}\n"],"mappings":";;;;w1FAmDA,MAAMA,GAAiC,SAAUC,EAA2BC,GAC3EA,EAAkBC,SAAWD,EAAkBE,IAC/CF,EAAkBE,IAAMF,EAAkBE,IAAIC,QAAQ,aAAc,IACpEH,EAAkBI,SAAWL,EAAiBM,aAAa,YAC3DL,EAAkBM,MAAQP,EAAiBM,aAAa,SACxDL,EAAkBO,SAAWR,EAAiBM,aAAa,cAAgB,OAC3EL,EAAkBQ,SAAWT,EAAiBM,aAAa,YAC3D,OAAOL,CACR,EAEA,IA0BqBS,IAAcC,EANlCC,GAAoB,CACpBC,KAAM,YACNC,UAAW,yBACXC,gBAAiB,gBACjBC,YAAa,CAAC,0CACbC,EAKAC,GAAe,CACfC,KAAM,SACNC,SAAU,OACTC,EAGDH,GAAe,CACfC,KAAM,UACNC,SAAU,OACTE,EAMDJ,GAAe,CACfC,KAAM,yBACLI,EAGDL,GAAe,CAAEC,KAAM,WAAWK,EAGlCN,GAAe,CACfC,KAAM,uBACNC,SAAU,OACTK,EAGDP,GAAe,CACfC,KAAM,uBACNC,SAAU,OACTM,EAMDR,GAAe,CACfC,KAAM,UACNC,SAAU,OACTO,EAMDT,GAAe,CACfC,KAAM,WACLS,EAMDV,GAAe,CACfC,KAAM,YACLU,EAMDX,GAAe,CACfC,KAAM,YACLW,EAMDZ,GAAe,CACfC,KAAM,YACLY,EAMDb,GAAe,CACfC,KAAM,aACLa,EAGDd,GAAe,CACfC,KAAM,WACLc,EAMDf,GAAe,CACfC,KAAM,YACLe,EAMDhB,GAAe,CACfC,KAAM,aACLgB,EAMDjB,GAAe,CACfC,KAAM,UACNC,SAAU,OACTgB,EAMDlB,GAAe,CACfC,KAAM,SACNX,SAAU,QACT6B,EAQDnB,GAAe,CACfC,KAAM,YACLmB,EAGDpB,GAAe,CACfC,KAAM,YACLoB,EAMDrB,GAAe,CACfC,KAAM,WACLqB,GAGDtB,GAAe,CACfC,KAAM,WACLsB,GAMDvB,GAAe,CACfC,KAAM,UACNC,SAAU,OACTsB,GAGDxB,GAAe,CACfC,KAAM,YACLwB,GAGDzB,GAAe,CACfC,KAAM,YACLyB,GAgBDC,KAAYC,GAMZD,KAAYE,GAMZF,KAAYG,GAMZH,KAAYI,GAMZJ,KAAYK,GAGZC,GAAiB,CACjBhC,KAAM,sCACNC,SAAU,KACVgC,eAAgB,KAChBC,oBAAqBtD,KACpBuD,GAoBDpC,GAAe,CACfC,KAAM,UACNC,SAAU,OACTT,EAAA4C,IAAAC,GAAA,SAAAC,GAGF,SAAA/C,EAAYgD,EAAqCC,EAAwBC,GAAsC,IAAAC,EAC9GA,EAAAJ,EAAAK,KAAAC,KAAML,EAAOC,EAAeC,IAAUG,KArPvCC,GAAAH,EAAA,KAAAI,GAAAJ,GAAAG,GAAAH,EAAA,UAAAK,GAAAL,GAeAG,GAAAH,EAAA,kBAAAM,GAAAN,GAAAG,GAAAH,EAAA,oBAAAO,GAAAP,GAAAG,GAAAH,EAAA,WAAAQ,GAAAR,GAAAG,GAAAH,EAAA,cAAAS,GAAAT,GAuBAG,GAAAH,EAAA,eAAAU,GAAAV,GASAG,GAAAH,EAAA,uBAAAW,GAAAX,GAQAG,GAAAH,EAAA,kBAAAY,GAAAZ,GAQAG,GAAAH,EAAA,iBAAAa,GAAAb,GAQAG,GAAAH,EAAA,yBAAAc,GAAAd,GAQAG,GAAAH,EAAA,WAAAe,GAAAf,GAAAG,GAAAH,EAAA,eAAAgB,GAAAhB,GAaAG,GAAAH,EAAA,uBAAAiB,GAAAjB,GAQAG,GAAAH,EAAA,uBAAAkB,GAAAlB,GAQAG,GAAAH,EAAA,WAAAmB,GAAAnB,GASAG,GAAAH,EAAA,mBAAAoB,GAAApB,GASAG,GAAAH,EAAA,mBAAAqB,GAAArB,GAAAG,GAAAH,EAAA,uBAAAsB,GAAAtB,GAeAG,GAAAH,EAAA,kBAAAuB,GAAAvB,GAAAG,GAAAH,EAAA,gBAAAwB,GAAAxB,GAaAG,GAAAH,EAAA,kBAAAyB,GAAAzB,GAAAG,GAAAH,EAAA,oBAAA0B,GAAA1B,GAAAG,GAAAH,EAAA,8BAAA2B,GAAA3B,GA6BAG,GAAAH,EAAA,SAAA4B,GAAA5B,GAMAG,GAAAH,EAAA,gBAAA6B,GAAA7B,GAMAG,GAAAH,EAAA,wBAAA8B,GAAA9B,GAMAG,GAAAH,EAAA,iBAAA+B,GAAA/B,GAMAG,GAAAH,EAAA,aAAAgC,GAAAhC,GAAAG,GAAAH,EAAA,eAAAiC,GAAAjC,KAsBAkC,mBAAqB,MAIrB/B,GAAAH,EAAA,+BAAAmC,GAAAnC,KAuHAoC,+BAAkCC,IACjC,GACCA,EAAgBC,aAAaC,cAAcC,wBAAwBC,sBAAsBC,KACvFC,GAAMA,EAAEC,oBAAoBC,QAAU,2BAA6BF,EAAEG,oBAAoBC,aAAe,SACpG,KACL,CACD/C,EAAKkC,mBAAqB,KAC3B,GACAlC,EAEDgD,mCAAsCC,IACrC,GAAIC,EAAYC,8BAA8BF,GAAa,CAC1DjD,EAAKoD,qBAAuB,IAC7B,GACApD,EAEDqD,kBAAqBC,GACbA,EAAc,GAAGC,SAAS,KAAOD,EAAc,GAAKA,EAAc,GAAK,IAC9EtD,EAEDwD,UAAY,KACX,IAAKxD,EAAKyD,gBAAiB,CAC1B,OACCC,EAACC,EAAc,CACdC,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,qBACvBE,YAAY,mCACZC,YAAY,UACZC,WAAW,iCACXC,SAAS,iCACTC,cAAc,IACdC,oBAAoB,sBAGvB,CACA,MAAO,IACPnE,EAEDoE,uBAAyB,KACxB,IAAIC,EAAiB,GACrB,GAAIrE,EAAKkC,mBAAoB,CAC5B,MAAMoC,EAAcC,EAAeC,cAAcxE,EAAKoD,sBACtD,MAAM1G,EAAQsD,EAAKyE,kBAAkB,4BACrCJ,EACCX,EAACC,EAAc,CACdjH,MAAOA,EACPsH,WAAW,oCACXE,cAAc,IACdN,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,cAAe,uBACtCc,UAAU,KACVT,SAAS,iCACTF,YAAY,aACZY,QAAQ,cAAaC,SAEpB,CACAC,YACCnB,EAACoB,EAAM,CACNlB,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,cAAe,6BACtCmB,MAAM,OACNC,eAAe,OACfC,YAAY,wEAAuEL,SAElF,CAAEM,MAAOZ,EAAYa,IAAKC,GAAU1B,EAAC2B,EAAQ,CAAgBC,KAAMF,EAAMT,SAAtBS,EAAMxB,UAMhE,CACA5D,EAAKuF,YAAc,GACnBvF,EAAKwF,cAAgB,GACrBxF,EAAKwF,eAAeC,KAAKpB,GACzB,IAAKqB,MAAMC,QAAQ3F,EAAK4F,iBAAkB,CACzC5F,EAAK4F,gBAAkB5F,EAAK4F,gBAAiBC,WAC9C,CACA7F,EAAK4F,iBAAiBE,QAASC,IAC9B,GAAIA,EAAeC,eAAiB,UAAW,CAC9ChG,EAAKiG,6BAA6BF,EACnC,IAED/F,EAAKwF,cAAgBxF,EAAKwF,eAAeU,OAAS,EAAIlG,EAAKwF,cAAgB,GAC3ExF,EAAKuF,YAAcvF,EAAKuF,aAAaW,OAAS,EAAIlG,EAAKuF,YAAc,IACrEvF,EASDiG,6BAAgCF,IAC/B,GAAIA,EAAenJ,WAAauJ,WAAaJ,EAAezI,OAAS,OAAQ,CAC5E0C,EAAKoG,8BAA8BL,EACpC,MAAO,GAAIL,MAAMC,QAAQ3F,EAAKwF,eAAgB,CAC7C,MAAMhJ,EAAWuJ,EAAeM,eAChC,MAAMC,EAAkBtG,EAAKuG,SAAUC,WAAWC,qBAAqBjK,GACvE,MAAMkK,EAAiBJ,GAAiBT,YACxC,IAAIc,EACJ,GAAIZ,EAAezI,OAAS,OAAQ,CACnCqJ,EACCjD,EAACkD,EAAU,CAACC,WAAYd,EAAenJ,SAASgI,SAC/ClB,EAAA,QAAM1G,KAAO+I,EAAuC1J,YAGvD,MAAO,GAAI0J,EAAenJ,SAAU,CACnC+J,EACCjD,EAACoD,EAAmB,CACnBC,aAAchB,EAAenJ,SAC7BgH,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,oBAAqBmC,EAAezJ,MAC3D0K,YAAa,kBAGhB,CACA,IAAIC,GAAqB,EACzB,GAAIX,EAAiB,CACpBW,EAAoB/C,GAAc6B,EAAeM,eAAgB,CAAEa,QAASZ,MAAuB,CACpG,CACAtG,EAAKwF,eAAeC,KACnB/B,EAACC,EAAc,CACdC,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,oBAAqBmC,EAAezJ,MAC3D6K,SAAU,CAAEnK,KAAM,yCAClB+G,YAAagC,EAAeqB,cAC5B1K,MAAOqJ,EAAerJ,MACtBuH,SAAS,aACTC,cAAe+C,EACfjD,WAAY,yBAAyB+B,EAAeqB,iBACpD1C,UAAW2C,EAAY3C,UACtB4B,EACAI,EACA1G,EAAKsH,qBACLvB,EAAewB,SACfvH,EAAKgH,YAAaQ,WAEnBrD,oBAAsB4B,EAAuD0B,YAC7EC,sBAAwB3B,EAAyD4B,cACjFC,UAAW,YACXjL,SAAUoJ,EAAepJ,SAASiI,SAEjC,CACAiD,QACCnE,EAACoE,EAA+B,CAC/B,eAAa,gDACblE,GAAIC,GAAS,CAAC7D,EAAK4D,GAAI,4BAA6BmC,EAAezJ,MACnEyL,QAAS,mBAAmBC,EAAYC,qBAAqBlC,EAAeqB,kBAC5EpD,WAAY,+BAA+DY,SAE1E,CAAEiD,QAASlB,KAGduB,WAAY,CACXxE,EAACyE,EAAU,CAAgBtF,MAAOkD,EAAezI,OAAS,QAAzC,UACjBoG,EAAC0E,EAAmB,CAEnBvF,MAAO,yCAAyCkD,EAAesC,8EAD1D,+BAOX,GACArI,EAeDoG,8BAAiCL,IAChC,GAAIL,MAAMC,QAAQ3F,EAAKwF,eAAgB,CACtCxF,EAAKwF,eAAeC,KACnB/B,EAAC4E,EAAmB,CACnBC,SAAU1E,GAAS,CAAC7D,EAAK4D,GAAI,cAAe4E,EAAaC,kBAAkB1C,EAAeM,kBAC1FqC,WAAY7E,GAAS,CAAC7D,EAAK4D,GAAI,yBAC/BpH,SAAUuJ,EAAeM,eACzBW,YAAahH,EAAK2I,8BAA8B5C,EAAgB/F,EAAK4I,sBACrEtB,qBAAsBtH,EAAKsH,qBAC3BC,SAAUiB,EAAaK,oBAAoB9C,EAAewB,UAC1DuB,aACC/C,EAAe+C,eAAiB3C,UAC5B4C,GAAiBhD,EAAe+C,cACjC3C,UAEJ6C,SAAU,cAAchJ,EAAK4D,mBAAmBmC,EAAeqB,4BAGlE,CACA,GAAI1B,MAAMC,QAAQ3F,EAAKuF,aAAc,CACpCvF,EAAKuF,aAAaE,KACjB/B,EAACuF,EAAS,CACTV,SAAU1E,GAAS,CAAC7D,EAAK4D,GAAI,yBAC7BsF,eAAe,WACf3C,SAAUR,EAAeM,eACzBW,YAAahH,EAAK2I,8BAA8B5C,EAAgB/F,EAAK4I,sBACrEO,qBAAsB,KACtB7B,qBAAsBtH,EAAKsH,uBAG9B,GAvTA,IAAKtH,EAAKuG,SAAU,CACnB6C,EAAIC,MAAM,mDACV,OAAAC,GAAAtJ,EACD,CACA,MAAMuJ,EAAYvJ,EAAKuG,SAASiB,UAChC,IAAIgC,EAAiB,GACrB,MAAMlG,EAAgBiG,GAAWE,MAAM,iDAAmD,GAC1F,GAAInG,EAAc4C,OAAS,EAAG,CAC7BsD,EAAiBxJ,EAAKqD,kBAAkBC,EACzC,CACA,MAAMoG,EAAiBxG,EAAYyG,iBAAiBH,GACpD,MAAMvG,EAAajD,EAAKgH,aAAaR,WACrCxG,EAAK4I,qBAAuB3F,GAAYwD,qBAAqB+C,GAC7D,MAAMnD,EAAyB,+CAAkD/C,EAAc4C,QAAU5C,EAAc,IAAO,IAC9H,MAAMsG,EAAoB7J,GAAW8J,gBACrC,IAAIC,EAAczD,EAClB,GAAIuD,IAAsB,IAAM5J,EAAK4I,qBAAqBpB,WAAWuC,WAAWH,GAAoB,CACnGE,EAAcP,EAAUhN,QAAQqN,EAAmB,GACpD,CACA5J,EAAKgK,gBAAkB3D,EACvB,MAAM4D,EAA+D,CAAC,EACtE,GAAIjK,EAAKkK,aAAc,CACtBD,EAAaH,GAAe,CAC3BI,aAAclK,EAAKkK,aAErB,CAEA,MAAMC,EAA2BC,GAA4BpK,EAAK4I,sBAClE,MAAMyB,EAAoBrK,EAAKsK,oBAAoBH,EAA0BhE,UAAWpG,EAAWkK,GACnG,IAAKjK,EAAKuK,aAAc,CACvBvK,EAAKuK,aAAeC,GAAmBH,EAAmB,GAAIhE,GAAgBoE,aAC/E,CAEA,MAAMpI,EAAkB+H,GAA4BpK,EAAKuG,SAAUvG,EAAKgH,aAAa3E,gBACrF,GAAIA,GAAiBC,aAAaoI,QAAQC,YAAc3K,EAAK4K,4BAA6B,CACzF5K,EAAKkC,mBAAqB,KAC1BlC,EAAKoC,+BAA+BC,GACpCrC,EAAKgD,mCAAmCC,EACzC,CAGA,IAAKjD,EAAK4F,gBAAiB,CAC1B,MAAMiF,EAAmBL,GAAmBH,EAAmB,GAAIhE,GAAgBT,gBACnF5F,EAAK4F,gBAAkB,IAAIkF,EAAcD,EAAkB5H,GAA8BwD,qBAAqB,KAC9G,MAAMsE,EAAWhL,GAAWiL,QAAQD,UAAUE,UAC9C,MAAMC,EAAcb,EAAkBc,gBACrCC,EAAoBC,GAAoBH,EAAab,GACrDiB,EAAqBrI,EAA8BsI,WAAW7B,GAC9D8B,EAAoBC,GACnBH,EACA,CAAEI,iBAAkBN,GACpBE,EAAkBzF,YAClBkF,EACA/K,EAAKkC,oBAEPlC,EAAK2L,iBAAmBH,CACzB,CACAxL,EAAK4L,sBAAsB5L,EAAKuK,aAActH,GAE9C,GAAIjD,EAAK6L,kBAAmB,CAC3B7L,EAAK8L,OAAS9L,EAAK4D,GAAK,cACxB5D,EAAK+L,WAAa/L,EAAK4D,EACxB,KAAO,CACN5D,EAAK8L,OAAS9L,EAAK4D,GACnB5D,EAAK+L,WAAa/L,EAAKgM,aAAahM,EAAK4D,GAAK,GAC/C,CAEA,GAAI5D,EAAKyD,kBAAoB,KAAM,CAClC,MAAMwI,EAA+BC,GAAsBxC,EAAgBzG,GAC3EjD,EAAKyD,gBAAkB0I,QAAQF,IAAiCA,EAA6BG,WAC9F,CACAC,EAAIC,YAAY,IAAMtM,EAAKoE,0BAE3BpE,EAAKuM,WAAavM,EAAKwM,gBAAgB,OAAAxM,CACxC,CAACyM,GAAA5P,EAAA6P,GAAA7P,EAAA+C,GAAA,IAAA+M,EAAA9P,EAAA+P,UAAAD,EAEDf,sBAAA,SAAAA,EAAsBrB,EAAsBsC,GAC3C,MAAMC,EAA6B,GACnC,GAAIvC,EAAc,CACjB,MAAMwC,EAAqBxC,EAAahO,QAAQ,OAAQ,KAAKA,QAAQ,OAAQ,KAC7E,MAAMyQ,EAAqBC,KAAKC,MAAMH,GACtC,MAAMI,EAAiBjN,KAAKuE,kBAAkB,4BAC9CuI,EAAmBlH,QAAQ,SAAUsH,GACpCA,EAAS9Q,IAAM8Q,EAASpQ,KACxB,GAAIoQ,EAASC,YAAa,CACzBP,EAAiBrH,KAAK2H,EAASpQ,KAChC,CACA,GAAIoQ,EAASE,OAAS,aAAc,CACnCF,EAAS1Q,MAAQyQ,CAClB,CACA,GAAIC,EAAS9Q,KAAKiR,SAAS,KAAM,CAEhC,MAAMlH,EAAkB+G,EAAkC/G,eAC1D,MAAMmH,EAAuBhF,EAAaiF,2BAA2BZ,EAAOxG,GAC5E,MAAMqH,EAAerH,EAAe9J,QAAQ,GAAGiR,KAAyB,IACxEJ,EAASzQ,SAAWgR,EAAYC,4BAA4BJ,EAAsBX,IAAQgB,oBAAoBN,SAC7GG,EAEF,CACD,GAEAxN,KAAKqK,aAAe0C,KAAKa,UAAUd,GAAoBzQ,QAAQ,MAAO,OAAOA,QAAQ,MAAO,MAC7F,CACA2D,KAAK6N,YAAcd,KAAKa,UAAUhB,EACnC,EAACH,EAqFDqB,uBAAA,SAAAA,EAAuBC,GACtB,GAAI/N,KAAKgO,6BAA8B,CACtC,OAAOxK,EAACyK,EAAmB,CAACvK,GAAIC,GAAS,CAACoK,EAAa,wBAAyBG,IAAKH,EAAaI,KAAM,aACzG,CACA,OAAOlI,SACR,EAACwG,EA0EDhE,8BAAA,SAAAA,EAA8B5C,EAAsCuI,GACnE,IAAItH,EAAsBsH,GAAsB9G,UAChD,GAAIzB,EAAesH,YAAa,CAK/B,MAAMkB,EAAWxI,EAAeM,eAChCW,EAAcuH,EAASC,UAAU,EAAGD,EAASE,YAAY,KAAO,EACjE,CACA,OAAOzH,CACR,EAmCA2F,EAIAH,cAAA,SAAAA,IACC,MAAO,yDACR,EAACG,EAED+B,YAAA,SAAAA,IACC,MAAMC,EAAsBzO,KAAK0I,sBAAsBpB,UACvD,IAAIoH,EAAiB,GACrB,GAAI1O,KAAK2O,kBAAmB,CAC3BD,EAAiB1O,KAAK2O,iBACvB,KAAO,CACND,EAAiB,iFAAmFD,EAAsB,KAC3H,CAEA,MAAMG,EAAuB9G,EAAY+G,mBAAmB7O,KAAKqK,cACjE,OACC7G,EAACsL,EAAY,CACZpL,GAAI1D,KAAK4L,OACTvF,SAAUrG,KAAKqG,SAAUiB,UACzByH,OAAQ/O,KAAK+O,OACbC,cAAehP,KAAKgP,cACpBC,WAAYjP,KAAKiP,WACjBC,eAAgBlP,KAAKkP,eACrBC,sBAAuBnP,KAAKmP,sBAAsBzK,SAEjD,CACAiD,QACCnE,EAAC4L,EAAW,CACX,eAAa,gDACb1L,GAAI1D,KAAK6L,WACTwD,SAAUrP,KAAKqP,SACfpI,SAAUyH,EACVY,qBAAsBtP,KAAKqP,SAAWpJ,UAAYjG,KAAKsP,qBACvDC,uBAAwBvP,KAAKuP,uBAC7BC,gBAAiBxP,KAAKwP,gBACtBC,SAAUzP,KAAKyP,SACfV,OAAQ,2BACRW,eAAgB,kCAChBjE,iBAAkBzL,KAAKyL,iBACvBkE,iBAAkB3P,KAAK2P,iBACvBC,aAAc5P,KAAK4P,aACnBC,cAAe7P,KAAK8P,gBACpBC,cAAe/P,KAAK+P,cACpB1F,aAAcuE,EACdoB,QAAShQ,KAAKgQ,QACd,gBAAehQ,KAAKqM,WACpB,wBAAuBoC,EAAoB/J,SAE1C,CACAsD,WAAY,CACXxE,EAACyE,EAAU,CAAiBtF,MAAO3C,KAAK0D,IAAvB,WACjBF,EAACyE,EAAU,CAAyBtF,MAAO3C,KAAKuD,iBAA/B,mBACjBC,EAACyE,EAAU,CAA4BtF,MAAO3C,KAAKgC,oBAAlC,sBACjBwB,EAACyE,EAAU,CAA8BtF,MAAO3C,KAAKoH,sBAApC,wBACjB5D,EAACyE,EAAU,CAAoBtF,MAAO3C,KAAK6N,aAA1B,cACjBrK,EAACyE,EAAU,CAAsBtF,MAAO3C,KAAKqK,cAA5B,gBACjB7G,EAACyE,EAAU,CAAwBtF,MAAO3C,KAAK8J,iBAA9B,mBAElBmG,WAAY,CAACjQ,KAAKqF,YAAarF,KAAK8N,uBAAuB9N,KAAK6L,aAChEqE,iBAAkBlQ,KAAKsD,YACvB6M,YAAanQ,KAAKsF,mBAOzB,EAAC,OAAA3I,CAAA,CArYC,CAlPyCyT,GAA2BlQ,GAAAmQ,GAAA5Q,GAAAiN,UAAA,MAAAxP,GAAA,CAAAoT,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAtQ,GAAAkQ,GAAA5Q,GAAAiN,UAAA,WAAApP,GAAA,CAAAgT,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAArQ,GAAAiQ,GAAA5Q,GAAAiN,UAAA,mBAAAnP,GAAA,CAAA+S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAApQ,GAAAgQ,GAAA5Q,GAAAiN,UAAA,qBAAAlP,GAAA,CAAA8S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAnQ,GAAA+P,GAAA5Q,GAAAiN,UAAA,YAAAjP,GAAA,CAAA6S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAlQ,GAAA8P,GAAA5Q,GAAAiN,UAAA,eAAAhP,GAAA,CAAA4S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAjQ,GAAA6P,GAAA5Q,GAAAiN,UAAA,gBAAA/O,GAAA,CAAA2S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBA8CvD,KAAK,IAAAhQ,GAAA4P,GAAA5Q,GAAAiN,UAAA,wBAAA9O,GAAA,CAAA0S,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA/P,GAAA2P,GAAA5Q,GAAAiN,UAAA,mBAAA7O,GAAA,CAAAyS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9P,GAAA0P,GAAA5Q,GAAAiN,UAAA,kBAAA5O,GAAA,CAAAwS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAwBH,KAAK,IAAA7P,GAAAyP,GAAA5Q,GAAAiN,UAAA,0BAAA3O,GAAA,CAAAuS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAQG,IAAI,IAAA5P,GAAAwP,GAAA5Q,GAAAiN,UAAA,YAAA1O,GAAA,CAAAsS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBAQlB,YAAY,IAAA3P,GAAAuP,GAAA5Q,GAAAiN,UAAA,gBAAAzO,GAAA,CAAAqS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA1P,GAAAsP,GAAA5Q,GAAAiN,UAAA,wBAAAxO,GAAA,CAAAoS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAaA,IAAI,IAAAzP,GAAAqP,GAAA5Q,GAAAiN,UAAA,wBAAAvO,GAAA,CAAAmS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAxP,GAAAoP,GAAA5Q,GAAAiN,UAAA,YAAAtO,GAAA,CAAAkS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAiBhB,KAAK,IAAAvP,GAAAmP,GAAA5Q,GAAAiN,UAAA,oBAAArO,GAAA,CAAAiS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAtP,GAAAkP,GAAA5Q,GAAAiN,UAAA,oBAAApO,GAAA,CAAAgS,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAmBG,KAAK,IAAArP,GAAAiP,GAAA5Q,GAAAiN,UAAA,wBAAAnO,GAAA,CAAA+R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAKD,KAAK,IAAApP,GAAAgP,GAAA5Q,GAAAiN,UAAA,mBAAAlO,GAAA,CAAA8R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAnP,GAAA+O,GAAA5Q,GAAAiN,UAAA,iBAAAjO,IAAA,CAAA6R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,iBAaZ,SAAS,IAAAlP,GAAA8O,GAAA5Q,GAAAiN,UAAA,mBAAAhO,IAAA,CAAA4R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBASP,KAAK,IAAAjP,GAAA6O,GAAA5Q,GAAAiN,UAAA,qBAAA/N,IAAA,CAAA2R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAKH,KAAK,IAAAhP,GAAA4O,GAAA5Q,GAAAiN,UAAA,+BAAA9N,IAAA,CAAA0R,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAKK,KAAK,IAAA/O,GAAA2O,GAAA5Q,GAAAiN,UAAA,UAAA7N,IAAA,CAAAyR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA9O,GAAA0O,GAAA5Q,GAAAiN,UAAA,iBAAA3N,IAAA,CAAAuR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA7O,GAAAyO,GAAA5Q,GAAAiN,UAAA,yBAAA1N,IAAA,CAAAsR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA5O,GAAAwO,GAAA5Q,GAAAiN,UAAA,kBAAAzN,IAAA,CAAAqR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA3O,GAAAuO,GAAA5Q,GAAAiN,UAAA,cAAAxN,IAAA,CAAAoR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAA1O,GAAAsO,GAAA5Q,GAAAiN,UAAA,gBAAAvN,IAAA,CAAAmR,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,OAAAxO,GAAAoO,GAAA5Q,GAAAiN,UAAA,gCAAAnN,IAAA,CAAA+Q,aAAA,KAAAC,WAAA,KAAAC,SAAA,KAAAC,YAAA,kBAuEJ,KAAK,IAAAhR,MAAAD,IAAA+M,GAAA5P,GAAA,OAAA4P,EAAA","ignoreList":[]}