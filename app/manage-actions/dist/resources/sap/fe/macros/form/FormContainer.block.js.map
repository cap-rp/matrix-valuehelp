{"version":3,"file":"FormContainer.block.js","names":["FormContainerBlock","_dec","defineBuildingBlock","name","namespace","fragment","_dec2","blockAttribute","type","_dec3","required","isPublic","expectedTypes","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","blockAggregation","_dec17","blockEvent","_class","_class2","_BuildingBlockTemplat","props","externalConfiguration","settings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","entitySet","contextPath","formElements","Object","keys","length","oContextObjectPath","getInvolvedDataModelObjects","metaPath","mExtraSettings","oFacetDefinition","targetObject","$Type","Label","Target","$target","fullyQualifiedName","path","term","value","getContextRelativeTargetObjectPath","annotations","fields","oConverterContext","getConverterContext","undefined","oFormDefinition","createFormDefinition","dataFieldCollection","formContainers","_exports","_inheritsLoose","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"sources":["./FormContainer.block.ts"],"sourcesContent":["import type { ReferenceFacet } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport { UIAnnotationTypes } from \"@sap-ux/vocabularies-types/vocabularies/UI\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport type { TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type { BaseAction } from \"sap/fe/core/converters/controls/Common/Action\";\nimport type { FormElement } from \"sap/fe/core/converters/controls/Common/Form\";\nimport { createFormDefinition } from \"sap/fe/core/converters/controls/Common/Form\";\nimport type { ConfigurableObject } from \"sap/fe/core/converters/helpers/ConfigurableObject\";\nimport { getContextRelativeTargetObjectPath } from \"sap/fe/core/templating/DataModelPathHelper\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block for creating a FormContainer based on the provided OData V4 metadata.\n *\n *\n * Usage example:\n * <pre>\n * &lt;macros:FormContainer\n * id=\"SomeId\"\n * entitySet=\"{entitySet>}\"\n * dataFieldCollection =\"{dataFieldCollection>}\"\n * title=\"someTitle\"\n * navigationPath=\"{ToSupplier}\"\n * visible=true\n * onChange=\".handlers.onFieldValueChange\"\n * /&gt;\n * </pre>\n * @private\n * @experimental\n */\n@defineBuildingBlock({ name: \"FormContainer\", namespace: \"sap.fe.macros\", fragment: \"sap.fe.macros.form.FormContainer\" })\nexport default class FormContainerBlock extends BuildingBlockTemplatingBase {\n\t@blockAttribute({ type: \"string\" })\n\tid?: string;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\trequired: true,\n\t\tisPublic: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"EntityType\", \"Singleton\"]\n\t})\n\tcontextPath!: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\"\n\t})\n\tentitySet?: Context;\n\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Metadata path to the dataFieldCollection\n\t */\n\t@blockAttribute({\n\t\ttype: \"array\"\n\t})\n\tdataFieldCollection?: FormElement[];\n\n\t/**\n\t * Control whether the form is in displayMode or not\n\t */\n\t@blockAttribute({\n\t\ttype: \"boolean\"\n\t})\n\tdisplayMode = false;\n\n\t/**\n\t * Title of the form container\n\t */\n\t@blockAttribute({ type: \"string\" })\n\ttitle?: string;\n\n\t/**\n\t * Defines the \"aria-level\" of the form title, titles of internally used form containers are nested subsequently\n\t */\n\t@blockAttribute({ type: \"sap.ui.core.TitleLevel\", isPublic: true })\n\ttitleLevel = \"Auto\";\n\n\t/**\n\t * Binding the form container using a navigation path\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tnavigationPath?: string;\n\n\t/**\n\t * Binding the visibility of the form container using an expression binding or Boolean\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tvisible?: string;\n\n\t/**\n\t * Check if UI hidden annotation is present or not\n\t */\n\t@blockAttribute({ type: \"boolean\" })\n\thasUiHiddenAnnotation?: boolean;\n\n\t/**\n\t * Flex designtime settings to be applied\n\t */\n\t@blockAttribute({ type: \"string\" })\n\tdesigntimeSettings = \"sap/fe/macros/form/FormContainer.designtime\";\n\n\t@blockAttribute({ type: \"array\" })\n\tactions?: BaseAction[];\n\n\t@blockAttribute({ type: \"boolean\" })\n\tuseSingleTextAreaFieldAsNotes?: boolean;\n\n\t@blockAggregation({ type: \"sap.fe.macros.form.FormElement\" })\n\tformElements: Record<string, ConfigurableObject> = {};\n\n\t// Just proxied down to the Field may need to see if needed or not\n\t@blockEvent()\n\tonChange?: string;\n\n\tconstructor(props: PropertiesOf<FormContainerBlock>, externalConfiguration: unknown, settings: TemplateProcessorSettings) {\n\t\tsuper(props);\n\t\tthis.entitySet = this.contextPath!;\n\t\tif (this.formElements && Object.keys(this.formElements).length > 0) {\n\t\t\tconst oContextObjectPath = getInvolvedDataModelObjects<ReferenceFacet>(this.metaPath, this.contextPath);\n\t\t\tconst mExtraSettings: Record<string, unknown> = {};\n\t\t\tlet oFacetDefinition = oContextObjectPath.targetObject;\n\t\t\t// Wrap the facet in a fake Facet annotation\n\t\t\toFacetDefinition = {\n\t\t\t\t$Type: UIAnnotationTypes.ReferenceFacet,\n\t\t\t\tLabel: oFacetDefinition?.Label,\n\t\t\t\tTarget: {\n\t\t\t\t\t$target: oFacetDefinition,\n\t\t\t\t\tfullyQualifiedName: oFacetDefinition?.fullyQualifiedName,\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tterm: \"\",\n\t\t\t\t\ttype: \"AnnotationPath\",\n\t\t\t\t\tvalue: getContextRelativeTargetObjectPath(oContextObjectPath)\n\t\t\t\t},\n\t\t\t\tannotations: {},\n\t\t\t\tfullyQualifiedName: oFacetDefinition?.fullyQualifiedName\n\t\t\t} as unknown as ReferenceFacet;\n\t\t\tmExtraSettings[oFacetDefinition.Target.value] = { fields: this.formElements };\n\t\t\tconst oConverterContext = this.getConverterContext(\n\t\t\t\toContextObjectPath,\n\t\t\t\t/*this.contextPath*/ undefined,\n\t\t\t\tsettings,\n\t\t\t\tmExtraSettings\n\t\t\t);\n\t\t\tconst oFormDefinition = createFormDefinition(oFacetDefinition, \"true\", oConverterContext);\n\n\t\t\tthis.dataFieldCollection = oFormDefinition.formContainers[0].formElements;\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}