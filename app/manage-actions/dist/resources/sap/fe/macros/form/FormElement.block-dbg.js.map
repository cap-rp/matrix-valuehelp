{"version":3,"names":["FormElementBlock","_dec","defineBuildingBlock","name","publicNamespace","returnTypes","_dec2","blockAttribute","type","isPublic","required","_dec3","expectedTypes","_dec4","expectedAnnotationTypes","_dec5","_dec6","_dec7","_dec8","blockAggregation","slot","isDefault","_dec9","blockEvent","_class","_class2","_BuildingBlockTemplat","props","configuration","mSettings","_this","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","oContextObjectPath","getInvolvedDataModelObjects","metaPath","contextPath","targetObject","Log","error","getPath","label","undefined","annotations","Common","Label","toString","_exports","_inheritsLoose","_proto","prototype","getFields","fields","xml","change","createId","getTemplate","id","key","visible","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sourceRoot":".","sources":["FormElement.block.ts"],"sourcesContent":["import type { ServiceObject } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport { xml, type TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block used to create a form element based on the metadata provided by OData V4.\n * @public\n * @since 1.90.0\n */\n@defineBuildingBlock({\n\tname: \"FormElement\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.ui.layout.form.FormElement\"]\n})\nexport default class FormElementBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * The identifier of the FormElement building block.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\", \"EntityType\"]\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"Property\"],\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Label shown for the field. If not set, the label from the annotations will be shown.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tlabel?: string;\n\n\t/**\n\t * If set to false, the FormElement is not rendered.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tvisible?: boolean;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tkey?: string;\n\n\t/**\n\t * Optional aggregation of controls that should be displayed inside the FormElement.\n\t * If not set, a default Field building block will be rendered\n\t * @public\n\t */\n\t@blockAggregation({ type: \"sap.ui.core.Control\", slot: \"fields\", isPublic: true, isDefault: true })\n\tfields?: Control[];\n\n\t/**\n\t * The event is triggered when the field is changed.\n\t * @public\n\t */\n\t@blockEvent()\n\tchange?: string;\n\n\tconstructor(props: PropertiesOf<FormElementBlock>, configuration: unknown, mSettings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, mSettings);\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tif (!oContextObjectPath.targetObject) {\n\t\t\tLog.error(`No target object found for the given path ${this.metaPath.getPath()} on the FormElement`);\n\t\t}\n\t\tif (this.label === undefined) {\n\t\t\tthis.label = (oContextObjectPath.targetObject as ServiceObject | undefined)?.annotations.Common?.Label?.toString() ?? \"\";\n\t\t}\n\t}\n\n\tgetFields(): string {\n\t\tif (this.fields) {\n\t\t\treturn xml`<slot name=\"fields\" />`;\n\t\t} else {\n\t\t\treturn xml`<macros:Field\n\t\t\t\t\t\tmetaPath=\"${this.metaPath?.getPath()}\"\n\t\t\t\t\t\tcontextPath=\"${this.contextPath?.getPath()}\"\n\t\t\t\t\t\tvhIdPrefix=\"FieldValueHelp\"\n\t\t\t\t\t\tchange=\"${this.change}\"\n\t\t\t\t\t\tid=\"${this.createId(\"FormElementField\")}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate(): string {\n\t\treturn xml`<f:FormElement xmlns:f=\"sap.ui.layout.form\" id=\"${this.id}\"\n\t\t\tkey=\"${this.key}\"\n\t\t\tlabel=\"${this.label}\"\n\t\t\tvisible=\"${this.visible}\">\n\t\t\t<f:fields>\n\t\t\t\t${this.getFields()}\n\t\t\t</f:fields>\n\t\t</f:FormElement>`;\n\t}\n}\n"],"mappings":"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","ignoreList":[],"file":"FormElement.block-dbg.js"}