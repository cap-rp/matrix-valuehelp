{"version":3,"file":"FormElement.block.js","names":["FormElementBlock","_dec","defineBuildingBlock","name","publicNamespace","returnTypes","_dec2","blockAttribute","type","isPublic","required","_dec3","expectedTypes","_dec4","expectedAnnotationTypes","_dec5","_dec6","_dec7","_dec8","blockAggregation","slot","isDefault","_dec9","blockEvent","_class","_class2","_BuildingBlockTemplat","props","configuration","mSettings","_this","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","oContextObjectPath","getInvolvedDataModelObjects","metaPath","contextPath","targetObject","Log","error","getPath","label","undefined","annotations","Common","Label","toString","_exports","_inheritsLoose","_proto","prototype","getFields","fields","xml","change","createId","getTemplate","id","key","visible","BuildingBlockTemplatingBase","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./FormElement.block.ts"],"sourcesContent":["import type { ServiceObject } from \"@sap-ux/vocabularies-types\";\nimport Log from \"sap/base/Log\";\nimport type { PropertiesOf } from \"sap/fe/base/ClassSupport\";\nimport {\n\tblockAggregation,\n\tblockAttribute,\n\tblockEvent,\n\tdefineBuildingBlock\n} from \"sap/fe/core/buildingBlocks/templating/BuildingBlockSupport\";\nimport { xml, type TemplateProcessorSettings } from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplateProcessor\";\nimport BuildingBlockTemplatingBase from \"sap/fe/core/buildingBlocks/templating/BuildingBlockTemplatingBase\";\nimport { getInvolvedDataModelObjects } from \"sap/fe/core/converters/MetaModelConverter\";\nimport type Control from \"sap/ui/core/Control\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\n\n/**\n * Building block used to create a form element based on the metadata provided by OData V4.\n * @public\n * @since 1.90.0\n */\n@defineBuildingBlock({\n\tname: \"FormElement\",\n\tpublicNamespace: \"sap.fe.macros\",\n\treturnTypes: [\"sap.ui.layout.form.FormElement\"]\n})\nexport default class FormElementBlock extends BuildingBlockTemplatingBase {\n\t/**\n\t * The identifier of the FormElement building block.\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true, required: true })\n\tid!: string;\n\n\t/**\n\t * Defines the path of the context used in the current page or block.\n\t * This setting is defined by the framework.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"EntitySet\", \"NavigationProperty\", \"Singleton\", \"EntityType\"]\n\t})\n\tcontextPath!: Context;\n\n\t/**\n\t * Defines the relative path of the property in the metamodel, based on the current contextPath.\n\t * @public\n\t */\n\t@blockAttribute({\n\t\ttype: \"sap.ui.model.Context\",\n\t\tisPublic: true,\n\t\trequired: true,\n\t\texpectedTypes: [\"Property\"],\n\t\texpectedAnnotationTypes: [\n\t\t\t\"com.sap.vocabularies.UI.v1.DataField\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithUrl\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAnnotation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithAction\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath\",\n\t\t\t\"com.sap.vocabularies.UI.v1.DataPointType\"\n\t\t]\n\t})\n\tmetaPath!: Context;\n\n\t/**\n\t * Label shown for the field. If not set, the label from the annotations will be shown.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tlabel?: string;\n\n\t/**\n\t * If set to false, the FormElement is not rendered.\n\t * @public\n\t */\n\t@blockAttribute({ type: \"boolean\", isPublic: true })\n\tvisible?: boolean;\n\n\t@blockAttribute({ type: \"string\", isPublic: true })\n\tkey?: string;\n\n\t/**\n\t * Optional aggregation of controls that should be displayed inside the FormElement.\n\t * If not set, a default Field building block will be rendered\n\t * @public\n\t */\n\t@blockAggregation({ type: \"sap.ui.core.Control\", slot: \"fields\", isPublic: true, isDefault: true })\n\tfields?: Control[];\n\n\t/**\n\t * The event is triggered when the field is changed.\n\t * @public\n\t */\n\t@blockEvent()\n\tchange?: string;\n\n\tconstructor(props: PropertiesOf<FormElementBlock>, configuration: unknown, mSettings: TemplateProcessorSettings) {\n\t\tsuper(props, configuration, mSettings);\n\t\tconst oContextObjectPath = getInvolvedDataModelObjects(this.metaPath, this.contextPath);\n\t\tif (!oContextObjectPath.targetObject) {\n\t\t\tLog.error(`No target object found for the given path ${this.metaPath.getPath()} on the FormElement`);\n\t\t}\n\t\tif (this.label === undefined) {\n\t\t\tthis.label = (oContextObjectPath.targetObject as ServiceObject | undefined)?.annotations.Common?.Label?.toString() ?? \"\";\n\t\t}\n\t}\n\n\tgetFields(): string {\n\t\tif (this.fields) {\n\t\t\treturn xml`<slot name=\"fields\" />`;\n\t\t} else {\n\t\t\treturn xml`<macros:Field\n\t\t\t\t\t\tmetaPath=\"${this.metaPath?.getPath()}\"\n\t\t\t\t\t\tcontextPath=\"${this.contextPath?.getPath()}\"\n\t\t\t\t\t\tvhIdPrefix=\"FieldValueHelp\"\n\t\t\t\t\t\tchange=\"${this.change}\"\n\t\t\t\t\t\tid=\"${this.createId(\"FormElementField\")}\" />`;\n\t\t}\n\t}\n\n\tgetTemplate(): string {\n\t\treturn xml`<f:FormElement xmlns:f=\"sap.ui.layout.form\" id=\"${this.id}\"\n\t\t\tkey=\"${this.key}\"\n\t\t\tlabel=\"${this.label}\"\n\t\t\tvisible=\"${this.visible}\">\n\t\t\t<f:fields>\n\t\t\t\t${this.getFields()}\n\t\t\t</f:fields>\n\t\t</f:FormElement>`;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}