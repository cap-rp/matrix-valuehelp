/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/base/BindingToolkit","sap/fe/base/ClassSupport","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/controls/CommandExecution","sap/fe/macros/ai/EasyFillDialog","sap/m/Button","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/library","sap/fe/base/jsx-runtime/jsx","sap/fe/base/jsx-runtime/jsxs"],function(t,e,i,n,a,r,o,s,l,d,c,u){"use strict";var p,b,f,g,m,h,E;var y={};var v=d.ButtonType;var C=e.property;var x=e.defineUI5Class;var P=t.or;var _=t.not;var w=t.ifElse;var A=t.getExpressionFromAnnotation;var O=t.equal;var j=t.constant;var I=t.compileExpression;var z=t.and;function B(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function T(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,M(t,e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function D(t,e,i,n,a){var r={};return Object.keys(n).forEach(function(t){r[t]=n[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer?(Object.defineProperty(t,e,r),null):r}function F(t,e){throw Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}let S=(p=x("sap.fe.macros.EditButton"),b=C({type:"string"}),f=C({type:"boolean",bindToState:true}),p(g=(m=function(t){function e(){var e;for(var i=arguments.length,n=new Array(i),a=0;a<i;a++){n[a]=arguments[a]}e=t.call(this,...n)||this;B(e,"text",h,e);B(e,"enabled",E,e);return e}y=e;T(e,t);var i=e.prototype;i.onMetadataAvailable=function e(i){t.prototype.onMetadataAvailable.call(this,i);this.content=this.createContent()};i.buildEmphasizedButtonExpression=function t(e){const i=e?.getTarget()?.annotations?.UI?.Identification;const n=i?.filter(t=>t.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t.Criticality)||[];const a=n.length?n.map(t=>{const e=A(t.Criticality);return z(_(O(A(t.annotations?.UI?.Hidden),true)),P(O(e,"UI.CriticalityType/Negative"),O(e,"1"),O(e,1),O(e,"UI.CriticalityType/Positive"),O(e,"3"),O(e,3)))}):[j(false)];return I(w(P(...a),v.Ghost,v.Emphasized))};i._easyEditDocument=async function t(){if(this.getAppComponent()?.getEnvironmentCapabilities().getCapabilities().EasyEdit){const t=this.getPageController();const e=t.getView();if(!this.getPageController()?.getModel("ui").getProperty("/isEditable")){await t.editFlow.editDocument.apply(t.editFlow,[e?.getBindingContext()])}const i=this.getPageController().getOwnerComponent()?.runAsOwner(()=>new a({getEditableFields:this._getEditableFields.bind(this)}));i.open();e?.addDependent(i)}};i._getEditableFields=async function t(){const e=this.getPageController().getView()?.findAggregatedObjects(true,t=>t.isA("sap.fe.macros.Field"));const i={};e.forEach(t=>{const e=t.getMainPropertyRelativePath();if(e){i[e]={isEditable:t.getEditable()}}});return Promise.resolve(i)};i._createId=function t(e){return this.getPageController().getView().createId(e)};i.createContent=function t(){const e=this.getMetaPathObject(this.getOwnerContextPath());if(this.getAppComponent()?.getEnvironmentCapabilities().getCapabilities().EasyEdit){this.getPageController().getView()?.addDependent(c(n,{execute:this._easyEditDocument.bind(this),command:"EasyEdit"}));return c(s,{id:this._createId("fe::StandardAction::EditMenu"),enabled:this.bindState("enabled"),type:this.buildEmphasizedButtonExpression(e),"dt:designtime":"not-adaptable",text:this.text,"jsx:command":"cmd:Edit|defaultAction",buttonMode:"Split",useDefaultActionOnly:"true",children:u(o,{children:[c(l,{id:this._createId("fe::StandardAction::Edit"),icon:"sap-icon://edit",text:"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_EDIT}","jsx:command":"cmd:Edit|press"}),c(l,{id:this._createId("fe::StandardAction::EasyEdit"),icon:"sap-icon://ai","jsx:command":"cmd:EasyEdit|press",text:this.getTranslatedText("C_EASYEDIT_BUTTON")})]})})}else{return c(r,{id:this._createId("fe::StandardAction::Edit"),"dt:designtime":"not-adaptable",text:this.text,type:this.buildEmphasizedButtonExpression(e),"jsx:command":"cmd:Edit|press",enabled:this.bindState("enabled")})}};return e}(i),h=D(m.prototype,"text",[b],{configurable:true,enumerable:true,writable:true,initializer:null}),E=D(m.prototype,"enabled",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),m))||g);y=S;return y},false);
//# sourceMappingURL=EditButton.js.map