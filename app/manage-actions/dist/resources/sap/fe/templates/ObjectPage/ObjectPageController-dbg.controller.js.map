{"version":3,"names":["ProgrammingModel","FELibrary","ObjectPageController","_dec","defineUI5Class","_dec2","usingExtension","Placeholder","_dec3","Share","override","ShareOverrides","_dec4","InternalRouting","InternalRoutingOverride","_dec5","Paginator","PaginatorOverride","_dec6","MessageHandler","MessageHandlerOverride","_dec7","IntentBasedNavigation","IntentBasedNavigationOverride","_dec8","CollaborationManager","CollaborationManagerOverride","_dec9","InternalIntentBasedNavigation","getNavigationMode","bIsStickyEditMode","getView","getController","getStickyEditMode","undefined","_dec10","ViewState","ViewStateOverrides","_dec11","PageReady","isContextExpected","_dec12","publicExtension","_dec13","finalExtension","_dec14","_dec15","extensible","OverrideExecution","After","_class","_class2","_PageController","_this","_len","arguments","length","args","Array","_key","call","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","clearTitleHierarchyCacheSetUp","mergePatchDraft","handlers","onPrimaryAction","oController","oView","oContext","sActionName","mParameters","mConditions","iViewLevel","getViewData","viewLevel","positiveActionVisible","positiveActionEnabled","onCallAction","editActionVisible","editActionEnabled","_editDocument","CommonUtils","getIsEditable","_saveDocument","_applyDocument","onTableContextChange","event","tableAPI","getSource","table","content","currentActionPromise","editFlow","getCurrentActionPromise","tableContexts","_getTableBinding","getCurrentContexts","actionResponse","controlId","getId","actionData","oData","keys","newItem","findIndex","tableContext","tableData","getObject","every","key","dialog","InstanceManager","getOpenDialogs","find","data","attachEventOnce","focusRow","deleteCurrentActionPromise","e","Log","error","messageButton","fireModelContextChange","syncTask","invokeAction","feFrameworkCall","then","_showMessagePopover","bind","catch","onDataPointTitlePressed","oSource","oManifestOutbound","sControlConfig","sCollectionPath","JSON","parse","oTargetInfo","oDataPointOrChartBindingContext","getBindingContext","sMetaPath","getModel","getMetaModel","getMetaPath","getPath","aSemanticObjectMapping","getSemanticObjectMapping","aNavigationData","_getChartContextData","additionalNavigationParameters","map","oNavigationData","metaPath","parameters","oParams","_intentBasedNavigation","getOutboundParams","Object","customData","getCustomData","getKey","_getImplicitSemanticObjectMappingForDataPoints","getValue","semanticObject","action","navigate","navigationContexts","semanticObjectMapping","onChevronPressNavigateOutBound","sOutboundTarget","sCreatePath","onNavigateChange","oEvent","getExtensionAPI","updateAppState","bSectionNavigated","oInternalModelContext","sectionLayout","getProperty","oSubSection","getParameter","_updateFocusInEditMode","onVariantSelected","onVariantSaved","setTimeout","navigateToSubSection","vDetailConfig","oDetailConfig","oObjectPage","byId","oSection","sectionId","subSectionId","getSubSections","getParent","getVisible","sTitle","getResourceModel","getText","entitySet","MessageBox","setSelectedSection","fireNavigate","section","subSection","closeOPMessageStrip","view","bIsInEditMode","internalModel","messagestripInternalModelContext","bindContext","_getMessageStripBindingContextPath","getBoundContext","contextBoundMessages","Messaging","getMessageModel","getData","filter","message","getTargets","getPersistent","removeMessages","setProperty","hideMessage","_inheritsLoose","_proto","prototype","sId","mCustomSectionExtensionAPIs","ExtensionAPI","extensionAPI","onInit","_getObjectPageLayoutControl","page","visibility","items","_getBatchGroupsForView","getEnableLazyLoading","attachEvent","_handleSubSectionEnteredViewPort","messageBinding","bindList","attachChange","_fnShowOPMessage","onExit","destroy","oMessagePopover","isOpen","close","isKeepAlive","setKeepAlive","collaborativeDraft","isConnected","disconnect","detachChange","messages","_showMessages","oTable","getRowBinding","checkSectionsForNonResponsiveTable","subSections","changeClassForTables","lastVisibleSubSection","blocks","getBlocks","getMoreBlocks","searchTableInBlock","tableType","isA","getType","getTableDefinition","control","rowCountMode","addStyleClass","detachEvent","subSectionIndex","block","onBeforeRendering","PageController","apply","retrieveTextFromValueList","CommonHelper","setMetaModel","getAppComponent","onAfterRendering","getUseIconTabBar","sections","getSections","_getAllSubSections","_onBeforeBinding","aTables","_findTables","oInternalModel","aBatchGroups","oFastCreationRow","push","reason","NavigationReason","EditFlowAction","_closeSideContent","opContext","hasPendingChanges","some","getBinding","resetChanges","item","getCreationRow","setBindingContext","fnScrollToPresentSection","isFirstRendering","bPersistOPScroll","_initializePagination","listBinding","_disableBlocksBindings","placeholder","isPlaceholderEnabled","showPlaceholder","oNavContainer","oContainer","enableAnimation","getFirstEditableInput","domEditableElement","_getFirstEditableInput","UI5Element","closestTo","_getFirstClickableElement","oFirstClickableElement","aActions","getHeaderTitle","getActions","oAction","getEnabled","objectPage","aSections","bUseIconTabBar","iSkip","bEditableHeader","editableHeaderContent","iSection","aSubSections","iSubSection","isVisibilityDynamic","forEach","subBlock","actions","_getFirstEmptyMandatoryFieldFromSubSection","aBlocks","blockControl","aFormContainers","getFormContainers","getContent","formContainer","aFormElements","getFormElements","formElement","aFields","getFields","getRequired","debug","oMandatoryField","oFieldToFocus","getContentEdit","focusInfo","getFocusInfo","targetInfo","silent","focus","_onBackNavigationInDraft","messageHandler","removeTransitionMessages","navBack","currentURL","document","URL","history","back","_routing","navigateBackFromContext","getRouterProxy","checkIfBackHasSameContext","getShellServices","setBackNavigation","warning","draft","processDataLossOrDraftDiscardConfirmation","Function","NavigationType","BackNavigation","_onAfterBinding","inputBindingContext","_sideEffects","clearFieldGroupsValidity","bindingContext","aIBNActions","getIBNActions","oTableRowBinding","ModelHelper","isStickySessionSupported","removeCachesAndMessages","oActionOperationAvailableMap","tableDefinition","operationAvailableMap","ActionRuntime","setActionEnablement","clearSelection","oObjectPageTitle","aIBNHeaderActions","concat","updateDataFieldForIBNButtonsVisibility","oModel","oFinalUIState","Promise","resolve","handleTableModifications","oBinding","fnHandleTablePatchEvents","TableHelper","enableFastCreationRow","getContext","fnHandleChange","computeModelsForEditMode","isCollaborationDraftSupported","connect","oError","_updateRelatedApps","currentBinding","handlePatchSent","TableUtils","whenBound","_triggerVisibleSubSectionsEvents","updateEditButtonVisibilityAndEnablement","recommendations","clearRecommendations","_updateAvailableCards","displayCollaborationMessage","redirectedToNonDraft","_setOPMessageStripInternalContext","applyAppState","getAppStateHandler","pageReady","waitFor","cards","collaborationManager","collectAvailableCards","cardObject","updateCards","parentAppId","getCollaborationManagerService","addCardsToCollaborationManager","shareAvailableCards","internalModelContext","findElements","elem","messageStrip","entityName","resourceBundle","Library","getResourceBundleFor","collaborationMessage","Message","type","MessageType","Information","target","addMessages","onPageReady","setFocus","isInDisplayMode","oSelectedSection","getElementById","getSelectedSection","ctxt","oBindingContext","bIsStickyMode","oAppComponent","isEditable","fetchAndApplyRecommendations","context","forceFocus","_checkDataPointTitleForExternalNavigation","Device","support","touch","saveButton","autoQueueUnlock","autoQueueLock","isLocked","unlock","detachBrowserEvent","attachBrowserEvent","lock","_getPageTitleInformation","oObjectPageSubtitle","oCustomData","objectPageDescription","appComponent","rootViewController","getRootViewController","fnClearCacheTitle","clearTitleHierarchyCache","title","subtitle","intent","icon","description","_executeHeaderShortcut","sButtonId","oButton","oElement","fireButtonPress","_executeFooterShortcut","getFooter","getMetadata","getName","_executeTabShortCut","oExecution","iSectionIndexMax","sCommand","getCommand","newSection","iSelectedSectionIndex","indexOfSection","_getFooterVisibility","sViewId","isHiddenDraftEnabled","getEnvironmentCapabilities","getCapabilities","HiddenDraft","enabled","oMessage","isErrorMessage","validation","messageValidation","includes","err","oRet","isEditMode","currentPageView","isFclEnabled","getRightmostView","getRootContainer","getCurrentPage","oMessageButton","oItemBinding","getLength","setVisible","openBy","BusyLocker","editDocument","finally","propertyPath","LocalProperty","$PropertyPath","SemanticObjectProperty","_validateDocument","getActiveElement","byPassSideEffects","isTransient","created","holdMessagesForControl","ret","executeGlobalValidation","showMessages","sideEffectsService","getSideEffectsService","entityType","getEntityTypeFromContext","globalSideEffects","getGlobalODataEntitySideEffects","all","sideEffects","requestSideEffects","draftRootContext","createRootContext","Draft","executeDraftValidation","skipBindingToView","model","awaitCreateDocuments","executeSideEffectsOnError","isCollaborationEnabled","dialogAction","CollaborationDiscard","getUserAction","creationRow","tableBinding","contextKeys","startsWith","createDocument","creationMode","createAtEnd","skipSideEffects","bindings","saveDocument","bExecuteSideEffectsOnError","RecommendationDialogDecision","Continue","_cancelDocument","cancelButton","lastFocusedControlId","shouldSkipDiscardPopover","isDocumentModified","UiModelConstants","DocumentModified","afterCancel","promiseResult","cancelDocument","skipDiscardPopover","applyDocument","showRelatedApps","updateRelatedAppsDetails","_findControlInSubSection","aParentElement","aSubsection","aControls","bIsChart","item1","getAggregation","chartControl","getChartControl","oSubElement","getMainContent","_getAllBlocks","_findCharts","aCharts","oBlock","oContent","setShowSideContent","oChartContext","sChartPath","oContextData","oChartContextData","_scrollTablesToRow","sRowPath","TableScroller","scrollTableToRow","_mergeMultipleContexts","oPageContext","aLineContext","aAttributes","aPageAttributes","sMetaPathLine","sPathLine","sPagePath","oMetaModel","sMetaPathPage","replace","oSingleContext","oSubChartContextData","contextData","removeSensitiveData","oPageLevelSV","addPageContextToSelectionVariant","SelectionVariant","selectionVariant","attributes","oViewData","oConfigurations","controlConfiguration","aConfigurations","sKey","oConfiguration","requestGroupId","paginatorCurrentContext","bindingToUse","paginator","initialize","setBreadcrumbLinks","source","promises","newPath","pathParts","split","metaModel","path","shift","splice","pathPart","getRouter","getRouteInfoByHash","parameterPath","resultContext","getTitleInfoFromPath","titleHierarchyInfos","hierarchyPosition","link","titleHierarchyInfo","indexOf","getLinks","Link","setText","setHref","encodeURI","addLink","oDataPoints","getHeaderFacetItemConfigForExternalNavigation","getRoutingService","getOutbounds","oShellServices","requestObject","fnGetLinks","fnOnError","fnSetLinkEnablement","id","aSupportedLinks","sLinkId","supported","oSubDataPoints","oPageData","oDataPoint","oLink","oLinkContext","oLinkData","oMixedContext","merge","oMapping","sMainProperty","sMappedProperty","hasOwnProperty","oNewMapping","isNavigationSupported","params","aLinks","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","getOwnPropertyDescriptor"],"sourceRoot":".","sources":["ObjectPageController.controller.ts"],"sourcesContent":["import type { SemanticObjectMappingType } from \"@sap-ux/vocabularies-types/vocabularies/Common\";\nimport Log from \"sap/base/Log\";\nimport merge from \"sap/base/util/merge\";\nimport type { EnhanceWithUI5 } from \"sap/fe/base/ClassSupport\";\nimport { defineUI5Class, extensible, finalExtension, publicExtension, usingExtension } from \"sap/fe/base/ClassSupport\";\nimport ActionRuntime from \"sap/fe/core/ActionRuntime\";\nimport type { FEView } from \"sap/fe/core/BaseController\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport PageController from \"sap/fe/core/PageController\";\nimport BusyLocker from \"sap/fe/core/controllerextensions/BusyLocker\";\nimport IntentBasedNavigation from \"sap/fe/core/controllerextensions/IntentBasedNavigation\";\nimport InternalIntentBasedNavigation from \"sap/fe/core/controllerextensions/InternalIntentBasedNavigation\";\nimport InternalRouting from \"sap/fe/core/controllerextensions/InternalRouting\";\nimport MessageHandler from \"sap/fe/core/controllerextensions/MessageHandler\";\nimport PageReady from \"sap/fe/core/controllerextensions/PageReady\";\nimport Paginator from \"sap/fe/core/controllerextensions/Paginator\";\nimport Placeholder from \"sap/fe/core/controllerextensions/Placeholder\";\nimport Share from \"sap/fe/core/controllerextensions/Share\";\nimport ViewState from \"sap/fe/core/controllerextensions/ViewState\";\nimport CollaborationManager from \"sap/fe/core/controllerextensions/cards/CollaborationManager\";\nimport draft from \"sap/fe/core/controllerextensions/editFlow/draft\";\nimport UiModelConstants from \"sap/fe/core/controllerextensions/editFlow/editFlowConstants\";\nimport NavigationReason from \"sap/fe/core/controllerextensions/routing/NavigationReason\";\nimport type CommandExecution from \"sap/fe/core/controls/CommandExecution\";\nimport { RecommendationDialogDecision } from \"sap/fe/core/controls/Recommendations/ConfirmRecommendationDialog\";\nimport type { HiddenDraft, MicroChartManifestConfiguration } from \"sap/fe/core/converters/ManifestSettings\";\nimport type { InternalModelContext } from \"sap/fe/core/helpers/ModelHelper\";\nimport ModelHelper from \"sap/fe/core/helpers/ModelHelper\";\nimport { getResourceModel } from \"sap/fe/core/helpers/ResourceModelHelper\";\nimport FELibrary from \"sap/fe/core/library\";\nimport type { TitleInformation } from \"sap/fe/core/rootView/RootViewBaseController\";\nimport { type WrappedCard } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\nimport type ChartBlock from \"sap/fe/macros/Chart\";\nimport CommonHelper from \"sap/fe/macros/CommonHelper\";\nimport type MacroAPI from \"sap/fe/macros/MacroAPI\";\nimport type SummarizationButton from \"sap/fe/macros/ai/SummarizationButton\";\nimport type FormAPI from \"sap/fe/macros/form/FormAPI\";\nimport type MessageButton from \"sap/fe/macros/messages/MessageButton\";\nimport type ShareAPI from \"sap/fe/macros/share/ShareAPI\";\nimport type TableAPI from \"sap/fe/macros/table/TableAPI\";\nimport TableHelper from \"sap/fe/macros/table/TableHelper\";\nimport TableUtils from \"sap/fe/macros/table/Utils\";\nimport SelectionVariant from \"sap/fe/navigation/SelectionVariant\";\nimport type { default as ObjectPageExtensionAPI } from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport { default as ExtensionAPI } from \"sap/fe/templates/ObjectPage/ExtensionAPI\";\nimport CollaborationDiscard from \"sap/fe/templates/ObjectPage/components/CollaborationDiscardDialog\";\nimport type SubSectionBlock from \"sap/fe/templates/ObjectPage/controls/SubSectionBlock\";\nimport TableScroller from \"sap/fe/templates/TableScroller\";\nimport type Button from \"sap/m/Button\";\nimport type InputBase from \"sap/m/InputBase\";\nimport InstanceManager from \"sap/m/InstanceManager\";\nimport Link from \"sap/m/Link\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport type NavContainer from \"sap/m/NavContainer\";\nimport type OverflowToolbar from \"sap/m/OverflowToolbar\";\nimport type Popover from \"sap/m/Popover\";\nimport type ToolbarSpacer from \"sap/m/ToolbarSpacer\";\nimport Device from \"sap/ui/Device\";\nimport type UI5Event from \"sap/ui/base/Event\";\nimport type Control from \"sap/ui/core/Control\";\nimport UI5Element from \"sap/ui/core/Element\";\nimport type InvisibleText from \"sap/ui/core/InvisibleText\";\nimport Library from \"sap/ui/core/Lib\";\nimport type { ManifestOutboundEntry } from \"sap/ui/core/Manifest\";\nimport Messaging from \"sap/ui/core/Messaging\";\nimport Message from \"sap/ui/core/message/Message\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport OverrideExecution from \"sap/ui/core/mvc/OverrideExecution\";\nimport type DynamicSideContent from \"sap/ui/layout/DynamicSideContent\";\nimport type Form from \"sap/ui/layout/form/Form\";\nimport type Chart from \"sap/ui/mdc/Chart\";\nimport type Table from \"sap/ui/mdc/Table\";\nimport type TableTypeBase from \"sap/ui/mdc/table/TableTypeBase\";\nimport type Binding from \"sap/ui/model/Binding\";\nimport type Context from \"sap/ui/model/Context\";\nimport type ListBinding from \"sap/ui/model/ListBinding\";\nimport type JSONModel from \"sap/ui/model/json/JSONModel\";\nimport type ODataV4Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataContextBinding from \"sap/ui/model/odata/v4/ODataContextBinding\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\nimport type ODataModel from \"sap/ui/model/odata/v4/ODataModel\";\nimport type BreadCrumbs from \"sap/uxap/BreadCrumbs\";\nimport type ObjectPageDynamicHeaderTitle from \"sap/uxap/ObjectPageDynamicHeaderTitle\";\nimport type ObjectPageLayout from \"sap/uxap/ObjectPageLayout\";\nimport type ObjectPageSection from \"sap/uxap/ObjectPageSection\";\nimport type ObjectPageSubSection from \"sap/uxap/ObjectPageSubSection\";\nimport type { MetaModelType } from \"../../../../../../../types/metamodel_types\";\nimport CollaborationManagerOverride from \"./overrides/CollaborationManager\";\nimport IntentBasedNavigationOverride from \"./overrides/IntentBasedNavigation\";\nimport InternalRoutingOverride from \"./overrides/InternalRouting\";\nimport MessageHandlerOverride from \"./overrides/MessageHandler\";\nimport PaginatorOverride from \"./overrides/Paginator\";\nimport ShareOverrides from \"./overrides/Share\";\nimport ViewStateOverrides from \"./overrides/ViewState\";\n\nexport type BindingParams = {\n\tredirectedToNonDraft?: string | undefined;\n\treason?: NavigationReason;\n\tbPersistOPScroll?: boolean;\n\tlistBinding?: ODataListBinding;\n\tshowPlaceholder?: boolean;\n};\n\nconst ProgrammingModel = FELibrary.ProgrammingModel;\n@defineUI5Class(\"sap.fe.templates.ObjectPage.ObjectPageController\")\nclass ObjectPageController extends PageController {\n\toView!: FEView;\n\n\t@usingExtension(Placeholder)\n\tplaceholder!: Placeholder;\n\n\t@usingExtension(Share.override(ShareOverrides))\n\tshare!: Share;\n\n\t@usingExtension(InternalRouting.override(InternalRoutingOverride))\n\t_routing!: InternalRouting;\n\n\t@usingExtension(Paginator.override(PaginatorOverride))\n\tpaginator!: Paginator;\n\n\t@usingExtension(MessageHandler.override(MessageHandlerOverride))\n\tmessageHandler!: MessageHandler;\n\n\t@usingExtension(IntentBasedNavigation.override(IntentBasedNavigationOverride))\n\tintentBasedNavigation!: IntentBasedNavigation;\n\n\t@usingExtension(CollaborationManager.override(CollaborationManagerOverride))\n\tcollaborationManager!: CollaborationManager;\n\n\t@usingExtension(\n\t\tInternalIntentBasedNavigation.override({\n\t\t\tgetNavigationMode: function (this: InternalIntentBasedNavigation) {\n\t\t\t\tconst bIsStickyEditMode =\n\t\t\t\t\t(this.getView().getController() as ObjectPageController).getStickyEditMode &&\n\t\t\t\t\t(this.getView().getController() as ObjectPageController).getStickyEditMode();\n\t\t\t\treturn bIsStickyEditMode ? \"explace\" : undefined;\n\t\t\t}\n\t\t})\n\t)\n\t_intentBasedNavigation!: InternalIntentBasedNavigation;\n\n\t@usingExtension(ViewState.override(ViewStateOverrides))\n\tviewState!: ViewState;\n\n\t@usingExtension(\n\t\tPageReady.override({\n\t\t\tisContextExpected: function () {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})\n\t)\n\tpageReady!: PageReady;\n\n\tprivate mCustomSectionExtensionAPIs?: Record<string, ObjectPageExtensionAPI>;\n\n\tprotected extensionAPI?: ObjectPageExtensionAPI;\n\n\tprivate bSectionNavigated?: boolean;\n\n\tprivate clearTitleHierarchyCacheSetUp = false;\n\n\tprivate switchDraftAndActivePopOver?: Popover;\n\n\tprivate currentBinding?: Binding;\n\n\tprivate messageButton!: MessageButton;\n\n\tprivate collaborationMessage?: Message;\n\n\tprivate mergePatchDraft = false;\n\n\tprivate autoQueueLock: ReturnType<ODataModel[\"lock\"]> | undefined;\n\n\tprivate messageBinding?: Binding;\n\n\t@publicExtension()\n\t@finalExtension()\n\tgetExtensionAPI(sId?: string): ExtensionAPI {\n\t\tif (sId) {\n\t\t\t// to allow local ID usage for custom pages we'll create/return own instances for custom sections\n\t\t\tthis.mCustomSectionExtensionAPIs = this.mCustomSectionExtensionAPIs || {};\n\n\t\t\tif (!this.mCustomSectionExtensionAPIs[sId]) {\n\t\t\t\tthis.mCustomSectionExtensionAPIs[sId] = new ExtensionAPI(this, sId);\n\t\t\t}\n\t\t\treturn this.mCustomSectionExtensionAPIs[sId];\n\t\t} else {\n\t\t\tif (!this.extensionAPI) {\n\t\t\t\tthis.extensionAPI = new ExtensionAPI(this);\n\t\t\t}\n\t\t\treturn this.extensionAPI;\n\t\t}\n\t}\n\n\tonInit(): void {\n\t\tsuper.onInit();\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\n\t\t// Setting defaults of internal model context\n\t\tconst oInternalModelContext = this.getView().getBindingContext(\"internal\") as InternalModelContext;\n\t\toInternalModelContext?.setProperty(\"externalNavigationContext\", { page: true });\n\t\toInternalModelContext?.setProperty(\"relatedApps\", {\n\t\t\tvisibility: false,\n\t\t\titems: null\n\t\t});\n\t\toInternalModelContext?.setProperty(\"batchGroups\", this._getBatchGroupsForView());\n\t\toInternalModelContext?.setProperty(\"errorNavigationSectionFlag\", false);\n\t\tif (oObjectPage.getEnableLazyLoading()) {\n\t\t\t//Attaching the event to make the subsection context binding active when it is visible.\n\t\t\toObjectPage.attachEvent(\"subSectionEnteredViewPort\", this._handleSubSectionEnteredViewPort.bind(this));\n\t\t}\n\t\tthis.messageButton = this.getView().byId(\"fe::FooterBar::MessageButton\") as MessageButton;\n\t\tthis.messageBinding = Messaging.getMessageModel().bindList(\"/\");\n\t\tthis.messageBinding?.attachChange(this._fnShowOPMessage, this);\n\t\toInternalModelContext?.setProperty(\"rootEditEnabled\", true);\n\t\toInternalModelContext?.setProperty(\"rootEditVisible\", true);\n\t}\n\n\tonExit(): void {\n\t\tif (this.mCustomSectionExtensionAPIs) {\n\t\t\tfor (const sId of Object.keys(this.mCustomSectionExtensionAPIs)) {\n\t\t\t\tif (this.mCustomSectionExtensionAPIs[sId]) {\n\t\t\t\t\tthis.mCustomSectionExtensionAPIs[sId].destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete this.mCustomSectionExtensionAPIs;\n\t\t}\n\t\tif (this.extensionAPI) {\n\t\t\tthis.extensionAPI.destroy();\n\t\t}\n\t\tdelete this.extensionAPI;\n\n\t\tconst oMessagePopover = this.messageButton ? this.messageButton.oMessagePopover : null;\n\t\tif (oMessagePopover && oMessagePopover.isOpen()) {\n\t\t\toMessagePopover.close();\n\t\t}\n\t\t//when exiting we set keepAlive context to false\n\t\tconst oContext = this.getView().getBindingContext();\n\t\tif (oContext && oContext.isKeepAlive()) {\n\t\t\toContext.setKeepAlive(false);\n\t\t}\n\t\tif (this.collaborativeDraft.isConnected()) {\n\t\t\tthis.collaborativeDraft.disconnect(); // Cleanup collaboration connection when leaving the app\n\t\t}\n\t\tthis.messageBinding?.detachChange(this._fnShowOPMessage, this);\n\t}\n\n\t/**\n\t * Method to show the message strip on the object page.\n\t *\n\t */\n\t_fnShowOPMessage(): void {\n\t\tconst extensionAPI = this.getExtensionAPI();\n\t\tconst view = this.getView();\n\t\tconst messages = Messaging?.getMessageModel()\n\t\t\t.getData()\n\t\t\t.filter((message: Message) => {\n\t\t\t\treturn message.getTargets()[0] === view.getBindingContext()?.getPath();\n\t\t\t});\n\n\t\tif (extensionAPI) {\n\t\t\textensionAPI._showMessages(messages, \"Backend\");\n\t\t}\n\t}\n\n\t_getTableBinding(oTable: Table): ODataListBinding {\n\t\treturn oTable && oTable.getRowBinding();\n\t}\n\n\t/**\n\t * Find the last visible subsection and add the sapUxAPObjectPageSubSectionFitContainer CSS class if it contains only a GridTable or a TreeTable.\n\t * @param subSections The sub sections to look for\n\t */\n\tprivate checkSectionsForNonResponsiveTable(subSections: ObjectPageSubSection[]): void {\n\t\tconst changeClassForTables = (event: Event, lastVisibleSubSection: ObjectPageSubSection): void => {\n\t\t\tconst blocks = [...lastVisibleSubSection.getBlocks(), ...lastVisibleSubSection.getMoreBlocks()];\n\t\t\tif (blocks.length === 1) {\n\t\t\t\tconst table = this.searchTableInBlock(blocks[0] as SubSectionBlock);\n\t\t\t\tif (!table) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst tableType = table.isA<Table>(\"sap.ui.mdc.Table\") && (table.getType() as TableTypeBase);\n\t\t\t\tconst tableAPI = table.getParent()?.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\")\n\t\t\t\t\t? (table.getParent() as TableAPI)\n\t\t\t\t\t: undefined;\n\t\t\t\tif (\n\t\t\t\t\ttableType &&\n\t\t\t\t\t(tableType?.isA(\"sap.ui.mdc.table.GridTableType\") || tableType?.isA(\"sap.ui.mdc.table.TreeTableType\")) &&\n\t\t\t\t\ttableAPI?.getTableDefinition().control.rowCountMode === \"Auto\"\n\t\t\t\t) {\n\t\t\t\t\t//In case there is only a single table in a subSection we fit that to the whole page so that the scrollbar comes only on table and not on page\n\t\t\t\t\tlastVisibleSubSection.addStyleClass(\"sapUxAPObjectPageSubSectionFitContainer\");\n\t\t\t\t\tlastVisibleSubSection.detachEvent(\"modelContextChange\", changeClassForTables, this);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfor (let subSectionIndex = subSections.length - 1; subSectionIndex >= 0; subSectionIndex--) {\n\t\t\tif (subSections[subSectionIndex].getVisible()) {\n\t\t\t\tconst lastVisibleSubSection = subSections[subSectionIndex];\n\t\t\t\t// We need to attach this event in order to manage the Object Page Lazy Loading mechanism\n\t\t\t\tlastVisibleSubSection.attachEvent(\"modelContextChange\", lastVisibleSubSection, changeClassForTables, this);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Find a table in blocks of section.\n\t * @param block One sub section block\n\t * @returns Table if exists\n\t */\n\tprivate searchTableInBlock(block: SubSectionBlock): Table | undefined {\n\t\tconst control = block.content;\n\t\tlet tableAPI: TableAPI | undefined;\n\t\tif (block.isA(\"sap.fe.templates.ObjectPage.controls.SubSectionBlock\")) {\n\t\t\t// The table may currently be shown in a full screen dialog, we can then get the reference to the TableAPI\n\t\t\t// control from the custom data of the place holder panel\n\t\t\tif (control.isA(\"sap.m.Panel\") && control.data(\"FullScreenTablePlaceHolder\")) {\n\t\t\t\ttableAPI = control.data(\"tableAPIreference\");\n\t\t\t} else if (control.isA(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\ttableAPI = control as TableAPI;\n\t\t\t}\n\t\t\tif (tableAPI) {\n\t\t\t\treturn tableAPI.content;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tonBeforeRendering(): void {\n\t\tPageController.prototype.onBeforeRendering.apply(this);\n\t\t// In the retrieveTextFromValueList scenario we need to ensure in case of reload/refresh that the meta model in the methode retrieveTextFromValueList of the FieldRuntime is available\n\t\tif (this.oView.getViewData()?.retrieveTextFromValueList && CommonHelper.getMetaModel() === undefined) {\n\t\t\tCommonHelper.setMetaModel(this.getAppComponent().getMetaModel());\n\t\t}\n\t}\n\n\tonAfterRendering(): void {\n\t\tlet subSections: ObjectPageSubSection[];\n\t\tif (this._getObjectPageLayoutControl().getUseIconTabBar()) {\n\t\t\tconst sections = this._getObjectPageLayoutControl().getSections();\n\t\t\tfor (const section of sections) {\n\t\t\t\tsubSections = section.getSubSections();\n\t\t\t\tthis.checkSectionsForNonResponsiveTable(subSections);\n\t\t\t}\n\t\t} else {\n\t\t\tsubSections = this._getAllSubSections();\n\t\t\tthis.checkSectionsForNonResponsiveTable(subSections);\n\t\t}\n\t}\n\n\t_onBeforeBinding(oContext: ODataV4Context, mParameters: BindingParams = {}): void {\n\t\t// TODO: we should check how this comes together with the transaction helper, same to the change in the afterBinding\n\t\tconst aTables = this._findTables(),\n\t\t\toObjectPage = this._getObjectPageLayoutControl(),\n\t\t\toInternalModelContext = this.getView().getBindingContext(\"internal\") as InternalModelContext,\n\t\t\toInternalModel = this.getView().getModel(\"internal\"),\n\t\t\taBatchGroups = oInternalModelContext.getProperty(\"batchGroups\");\n\t\tlet oFastCreationRow;\n\t\taBatchGroups.push(\"$auto\");\n\t\tif (mParameters.reason !== NavigationReason.EditFlowAction) {\n\t\t\tthis._closeSideContent();\n\t\t}\n\t\tconst opContext = oObjectPage.getBindingContext() as ODataV4Context;\n\t\tif (\n\t\t\topContext &&\n\t\t\topContext.hasPendingChanges() &&\n\t\t\t!aBatchGroups.some(opContext.getModel().hasPendingChanges.bind(opContext.getModel()))\n\t\t) {\n\t\t\t/* \tIn case there are pending changes for the creation row and no others we need to reset the changes\n\t\t\t\t\t\t\t\tTODO: this is just a quick solution, this needs to be reworked\n\t\t\t\t\t\t\t\t*/\n\n\t\t\topContext.getBinding().resetChanges();\n\t\t}\n\n\t\t// For now we have to set the binding context to null for every fast creation row\n\t\t// TODO: Get rid of this coding or move it to another layer - to be discussed with MDC and model\n\t\tfor (const item of aTables) {\n\t\t\toFastCreationRow = item.getCreationRow();\n\t\t\tif (oFastCreationRow) {\n\t\t\t\toFastCreationRow.setBindingContext(null);\n\t\t\t}\n\t\t}\n\n\t\t// Scroll to present Section so that bindings are enabled during navigation through paginator buttons, as there is no view rerendering/rebind\n\t\tconst fnScrollToPresentSection = function (): void {\n\t\t\tif (!(oObjectPage as { isFirstRendering?: () => boolean }).isFirstRendering?.() && !mParameters.bPersistOPScroll) {\n\t\t\t\toObjectPage.setSelectedSection(null as unknown as string);\n\t\t\t}\n\t\t};\n\t\toObjectPage.attachEventOnce(\"modelContextChange\", fnScrollToPresentSection);\n\t\t//Set the Binding for Paginators using ListBinding ID\n\t\tthis._initializePagination(oContext, oInternalModel, mParameters?.listBinding);\n\n\t\tif (oObjectPage.getEnableLazyLoading()) {\n\t\t\tthis._disableBlocksBindings(oObjectPage);\n\t\t}\n\n\t\tif (this.placeholder.isPlaceholderEnabled() && mParameters.showPlaceholder) {\n\t\t\tconst oView = this.getView();\n\t\t\tconst oNavContainer = (oView.getParent() as unknown as { oContainer: Control }).oContainer.getParent();\n\t\t\tif (oNavContainer) {\n\t\t\t\tthis.placeholder.enableAnimation();\n\t\t\t\t(oNavContainer as unknown as { showPlaceholder: Function }).showPlaceholder({});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getFirstEditableInput(): UI5Element | undefined {\n\t\tconst domEditableElement = this._getObjectPageLayoutControl()._getFirstEditableInput();\n\t\treturn domEditableElement ? UI5Element.closestTo(domEditableElement) : undefined;\n\t}\n\n\t_getFirstClickableElement(oObjectPage: ObjectPageLayout): UI5Element | undefined {\n\t\tlet oFirstClickableElement;\n\t\tconst aActions = oObjectPage.getHeaderTitle() && (oObjectPage.getHeaderTitle() as ObjectPageDynamicHeaderTitle).getActions();\n\t\tif (aActions && aActions.length) {\n\t\t\toFirstClickableElement = aActions.find(function (oAction: Control) {\n\t\t\t\t// Due to the left alignment of the Draft switch and the collaborative draft avatar controls\n\t\t\t\t// there is a ToolbarSpacer in the actions aggregation which we need to exclude here!\n\t\t\t\t// Due to the ACC report, we also need not to check for the InvisibleText elements\n\t\t\t\tif (\n\t\t\t\t\toAction.isA<ShareAPI>(\"sap.fe.macros.share.ShareAPI\") ||\n\t\t\t\t\toAction.isA<SummarizationButton>(\"sap.fe.macros.ai.SummarizationButton\")\n\t\t\t\t) {\n\t\t\t\t\t// since ShareAPI and summarize does not have a disable property\n\t\t\t\t\t// hence there is no need to check if it is disbaled or not\n\t\t\t\t\treturn oAction.getVisible();\n\t\t\t\t} else if (!oAction.isA<InvisibleText>(\"sap.ui.core.InvisibleText\") && !oAction.isA<ToolbarSpacer>(\"sap.m.ToolbarSpacer\")) {\n\t\t\t\t\treturn oAction.getVisible() && (oAction as Button).getEnabled();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn oFirstClickableElement;\n\t}\n\n\t/**\n\t * Disable the bindings of blocks in Object Page Layout based on the its overall content.\n\t * @param objectPage Object Page Layout control\n\t */\n\t_disableBlocksBindings(this: ObjectPageController, objectPage: ObjectPageLayout): void {\n\t\tconst aSections = objectPage.getSections();\n\t\tconst bUseIconTabBar = objectPage.getUseIconTabBar();\n\t\tlet iSkip = 3; // 3 sections/subsections are loaded initially, the others are loaded lazily\n\t\tconst bIsInEditMode = CommonUtils.getIsEditable(this.getView());\n\t\tconst bEditableHeader = this.getView().getViewData().editableHeaderContent;\n\t\tfor (let iSection = 0; iSection < aSections.length; iSection++) {\n\t\t\tconst oSection = aSections[iSection];\n\t\t\tconst aSubSections = oSection.getSubSections();\n\t\t\tfor (let iSubSection = 0; iSubSection < aSubSections.length; iSubSection++, iSkip--) {\n\t\t\t\t// In IconTabBar mode keep the second section bound if there is an editable header and we are switching to display mode\n\t\t\t\tif (iSkip < 1 || (bUseIconTabBar && (iSection > 1 || (iSection === 1 && !bEditableHeader && !bIsInEditMode)))) {\n\t\t\t\t\tconst oSubSection = aSubSections[iSubSection];\n\t\t\t\t\tif (oSubSection.data().isVisibilityDynamic !== \"true\") {\n\t\t\t\t\t\t// SubSection's binding is enabled.\n\t\t\t\t\t\toSubSection.setBindingContext(undefined);\n\t\t\t\t\t\tconst blocks = oSubSection.getBlocks() as SubSectionBlock[];\n\t\t\t\t\t\t// SubSection's contents binding is disabled.\n\t\t\t\t\t\tblocks.forEach((block) => block.setBindingContext(null));\n\t\t\t\t\t\toSubSection.getMoreBlocks().forEach((subBlock) => subBlock.setBindingContext(null));\n\t\t\t\t\t\toSubSection.getActions().forEach((actions) => actions.setBindingContext(null));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_getFirstEmptyMandatoryFieldFromSubSection(aSubSections: ObjectPageSubSection[]): InputBase | undefined {\n\t\tif (aSubSections) {\n\t\t\tfor (const subSection of aSubSections) {\n\t\t\t\tconst aBlocks = subSection.getBlocks() as (Form | FormAPI)[];\n\n\t\t\t\tif (aBlocks) {\n\t\t\t\t\tfor (const blockControl of aBlocks) {\n\t\t\t\t\t\tlet aFormContainers;\n\n\t\t\t\t\t\tif (blockControl.isA<Form>(\"sap.ui.layout.form.Form\")) {\n\t\t\t\t\t\t\taFormContainers = blockControl.getFormContainers();\n\t\t\t\t\t\t} else if (blockControl.getContent && blockControl.getContent()?.isA<Form>(\"sap.ui.layout.form.Form\")) {\n\t\t\t\t\t\t\taFormContainers = (blockControl.getContent() as Form).getFormContainers();\n\t\t\t\t\t\t} else if (blockControl?.getContent?.()?.isA<FormAPI>(\"sap.fe.macros.form.FormAPI\")) {\n\t\t\t\t\t\t\taFormContainers = ((blockControl.getContent() as FormAPI).getContent() as Form).getFormContainers();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (aFormContainers) {\n\t\t\t\t\t\t\tfor (const formContainer of aFormContainers) {\n\t\t\t\t\t\t\t\tconst aFormElements = formContainer.getFormElements();\n\t\t\t\t\t\t\t\tif (aFormElements) {\n\t\t\t\t\t\t\t\t\tfor (const formElement of aFormElements) {\n\t\t\t\t\t\t\t\t\t\tconst aFields = formElement.getFields() as InputBase[];\n\n\t\t\t\t\t\t\t\t\t\t// The first field is not necessarily an InputBase (e.g. could be a Text)\n\t\t\t\t\t\t\t\t\t\t// So we need to check whether it has a getRequired method\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tif (aFields[0].getRequired && aFields[0].getRequired() && !aFields[0].getValue()) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn aFields[0];\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\t\tLog.debug(`Error when searching for mandaotry empty field: ${error}`);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Set the initial focus in edit mode.\n\t * @param aSubSections Object page sub sections\n\t */\n\t_updateFocusInEditMode(aSubSections: ObjectPageSubSection[]): void {\n\t\tsetTimeout(\n\t\t\tfunction (this: ObjectPageController): void {\n\t\t\t\t// We set the focus in a timeeout, otherwise the focus sometimes goes to the TabBar\n\t\t\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\t\t\tconst oMandatoryField = this._getFirstEmptyMandatoryFieldFromSubSection(aSubSections);\n\t\t\t\tlet oFieldToFocus;\n\t\t\t\tif (oMandatoryField) {\n\t\t\t\t\toFieldToFocus = (oMandatoryField as unknown as { content: { getContentEdit: Function } }).content.getContentEdit()[0];\n\t\t\t\t} else {\n\t\t\t\t\toFieldToFocus = this.getFirstEditableInput() ?? this._getFirstClickableElement(oObjectPage);\n\t\t\t\t}\n\t\t\t\tif (oFieldToFocus) {\n\t\t\t\t\tconst focusInfo = oFieldToFocus.getFocusInfo() as { targetInfo: object };\n\t\t\t\t\tfocusInfo.targetInfo = { silent: true };\n\t\t\t\t\tif (oFieldToFocus.isA(\"sap.ui.mdc.field.FieldInput\")) {\n\t\t\t\t\t\toFieldToFocus = oFieldToFocus.getParent();\n\t\t\t\t\t}\n\t\t\t\t\toFieldToFocus.focus(focusInfo);\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\t0\n\t\t);\n\t}\n\n\t_handleSubSectionEnteredViewPort(oEvent: UI5Event<{ subSection: ObjectPageSubSection }>): void {\n\t\tconst oSubSection = oEvent.getParameter(\"subSection\");\n\t\tconst blocks = oSubSection.getBlocks() as SubSectionBlock[];\n\t\tblocks.forEach((block) => block.setBindingContext(undefined));\n\t\toSubSection.getMoreBlocks().forEach((subBlock) => subBlock.setBindingContext(undefined));\n\t\toSubSection.getActions().forEach((actions) => actions.setBindingContext(undefined));\n\t}\n\n\t_onBackNavigationInDraft(oContext: ODataV4Context): void {\n\t\tthis.messageHandler.removeTransitionMessages();\n\n\t\t// Function to navigate back, or display the launchpad if we're on the first page of the history\n\t\tconst navBack = (): void => {\n\t\t\tconst currentURL = document.URL;\n\t\t\thistory.back();\n\t\t\t// In case there is no previous page in the history, history.back does nothing.\n\t\t\t// In this case, we need to use navigateBackFromContext, that will display the home page\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (document.URL === currentURL) {\n\t\t\t\t\tthis._routing.navigateBackFromContext(oContext);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t};\n\n\t\tif (this.getAppComponent().getRouterProxy().checkIfBackHasSameContext()) {\n\t\t\t// Back nav will keep the same context --> no need to display the dialog\n\t\t\thistory.back();\n\t\t} else if (!this.getView().getBindingContext()) {\n\t\t\t// This object page doesn't have a binding context, but still handles the shell back navigation --> pform the nav back and remove the navback handler as it makes no sense any longer\n\t\t\tthis.getAppComponent()\n\t\t\t\t.getShellServices()\n\t\t\t\t.setBackNavigation(undefined)\n\t\t\t\t.then(navBack)\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tLog.warning(\"Error while setting back navigation\", e);\n\t\t\t\t});\n\t\t} else {\n\t\t\tdraft.processDataLossOrDraftDiscardConfirmation(\n\t\t\t\tnavBack,\n\t\t\t\tFunction.prototype,\n\t\t\t\toContext,\n\t\t\t\tthis,\n\t\t\t\ttrue,\n\t\t\t\tdraft.NavigationType.BackNavigation\n\t\t\t);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_onAfterBinding(inputBindingContext: Context | undefined, mParameters: BindingParams | undefined): void {\n\t\tconst view = this.getView();\n\t\tconst viewLevel = view?.getViewData()?.viewLevel;\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\tconst aTables = this._findTables();\n\n\t\tthis._sideEffects.clearFieldGroupsValidity();\n\n\t\t// TODO: this is only a temp solution as long as the model fix the cache issue and we use this additional\n\t\t// binding with ownRequest\n\t\tconst bindingContext = oObjectPage.getBindingContext() as ODataV4Context;\n\n\t\tlet aIBNActions: UI5Element[] = [];\n\t\toObjectPage.getSections().forEach(function (oSection: ObjectPageSection) {\n\t\t\toSection.getSubSections().forEach(function (oSubSection: ObjectPageSubSection) {\n\t\t\t\taIBNActions = CommonUtils.getIBNActions(oSubSection, aIBNActions);\n\t\t\t});\n\t\t});\n\n\t\t// Assign internal binding contexts to oFormContainer:\n\t\t// 1. It is not possible to assign the internal binding context to the XML fragment\n\t\t// (FormContainer.fragment.xml) yet - it is used already for the data-structure.\n\t\t// 2. Another problem is, that FormContainers assigned to a 'MoreBlock' does not have an\n\t\t// internal model context at all.\n\n\t\taTables.forEach(function (oTable: Table) {\n\t\t\tconst oInternalModelContext = oTable.getBindingContext(\"internal\");\n\t\t\tif (oInternalModelContext) {\n\t\t\t\toInternalModelContext.setProperty(\"creationRowFieldValidity\", {});\n\t\t\t\toInternalModelContext.setProperty(\"creationRowCustomValidity\", {});\n\n\t\t\t\taIBNActions = CommonUtils.getIBNActions(oTable, aIBNActions);\n\n\t\t\t\t// temporary workaround for BCP: 2080218004\n\t\t\t\t// Need to fix with BLI: FIORITECHP1-15274\n\t\t\t\t// only for edit mode, we clear the table cache\n\t\t\t\t// Workaround starts here!!\n\t\t\t\tconst oTableRowBinding = oTable.getRowBinding();\n\t\t\t\tif (oTableRowBinding) {\n\t\t\t\t\tif (ModelHelper.isStickySessionSupported(oTableRowBinding.getModel().getMetaModel())) {\n\t\t\t\t\t\t// apply for both edit and display mode in sticky\n\t\t\t\t\t\t(oTableRowBinding as unknown as { removeCachesAndMessages: Function }).removeCachesAndMessages(\"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Workaround ends here!!\n\n\t\t\t\t// Clear the selection in the table and update action enablement accordingly\n\t\t\t\t// Will to be fixed with BLI: FIORITECHP1-24318\n\t\t\t\tconst tableAPI = oTable.getParent() as TableAPI;\n\t\t\t\tconst oActionOperationAvailableMap = tableAPI ? JSON.parse(tableAPI.tableDefinition.operationAvailableMap) : {};\n\n\t\t\t\tActionRuntime.setActionEnablement(oInternalModelContext, oActionOperationAvailableMap, [], \"table\");\n\n\t\t\t\toTable.clearSelection();\n\t\t\t}\n\t\t});\n\t\t//Retrieve Object Page header actions from Object Page title control\n\t\tconst oObjectPageTitle = oObjectPage.getHeaderTitle() as ObjectPageDynamicHeaderTitle;\n\t\tlet aIBNHeaderActions: UI5Element[] = [];\n\t\taIBNHeaderActions = CommonUtils.getIBNActions(oObjectPageTitle, aIBNHeaderActions);\n\t\taIBNActions = aIBNActions.concat(aIBNHeaderActions);\n\t\tCommonUtils.updateDataFieldForIBNButtonsVisibility(aIBNActions, this.getView());\n\n\t\tlet oModel: ODataModel,\n\t\t\toFinalUIState: Promise<unknown> = Promise.resolve();\n\n\t\t// this should not be needed at the all\n\t\t/**\n\t\t * @param oTable\n\t\t */\n\t\tconst handleTableModifications = (oTable: Table): void => {\n\t\t\tconst oBinding = this._getTableBinding(oTable),\n\t\t\t\tfnHandleTablePatchEvents = function (): void {\n\t\t\t\t\tTableHelper.enableFastCreationRow(\n\t\t\t\t\t\toTable.getCreationRow(),\n\t\t\t\t\t\toBinding.getPath(),\n\t\t\t\t\t\toBinding.getContext(),\n\t\t\t\t\t\toModel,\n\t\t\t\t\t\toFinalUIState\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\tif (!oBinding) {\n\t\t\t\tLog.error(`Expected binding missing for table: ${oTable.getId()}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (oBinding.getContext()) {\n\t\t\t\tfnHandleTablePatchEvents();\n\t\t\t} else {\n\t\t\t\tconst fnHandleChange = function (): void {\n\t\t\t\t\tif (oBinding.getContext()) {\n\t\t\t\t\t\tfnHandleTablePatchEvents();\n\t\t\t\t\t\toBinding.detachChange(fnHandleChange);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\toBinding.attachChange(fnHandleChange);\n\t\t\t}\n\t\t};\n\n\t\tif (bindingContext) {\n\t\t\toModel = bindingContext.getModel();\n\n\t\t\t// Compute Edit Mode\n\t\t\toFinalUIState = this.editFlow.computeModelsForEditMode(bindingContext);\n\n\t\t\tif (ModelHelper.isCollaborationDraftSupported(oModel.getMetaModel())) {\n\t\t\t\toFinalUIState\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (CommonUtils.getIsEditable(this.getView())) {\n\t\t\t\t\t\t\tthis.collaborativeDraft.connect();\n\t\t\t\t\t\t} else if (this.collaborativeDraft.isConnected()) {\n\t\t\t\t\t\t\tthis.collaborativeDraft.disconnect(); // Cleanup collaboration connection in case we switch to another element (e.g. in FCL)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function (oError: unknown) {\n\t\t\t\t\t\tLog.error(\"Error while waiting for the final UI State\", oError as string);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\t// update related apps\n\t\t\tthis._updateRelatedApps();\n\n\t\t\t//Attach the patch sent and patch completed event to the object page binding so that we can react\n\t\t\tconst oBinding = (bindingContext.getBinding && bindingContext.getBinding()) || bindingContext;\n\n\t\t\t// Attach the event handler only once to the same binding\n\t\t\tif (this.currentBinding !== oBinding) {\n\t\t\t\toBinding.attachEvent(\"patchSent\", {}, this.editFlow.handlePatchSent, this);\n\t\t\t\tthis.currentBinding = oBinding;\n\t\t\t}\n\n\t\t\taTables.forEach(function (oTable: Table): void {\n\t\t\t\t// access binding only after table is bound\n\t\t\t\tTableUtils.whenBound(oTable)\n\t\t\t\t\t.then(handleTableModifications)\n\t\t\t\t\t.catch(function (oError: unknown) {\n\t\t\t\t\t\tLog.error(\"Error while waiting for the table to be bound\", oError as string);\n\t\t\t\t\t});\n\t\t\t});\n\n\t\t\t// should be called only after binding is ready hence calling it in onAfterBinding\n\t\t\t(oObjectPage as unknown as { _triggerVisibleSubSectionsEvents: Function })._triggerVisibleSubSectionsEvents();\n\n\t\t\t//To Compute the Edit Binding of the subObject page using root object page, create a context for draft root and update the edit button in sub OP using the context\n\t\t\tActionRuntime.updateEditButtonVisibilityAndEnablement(this.getView());\n\t\t}\n\t\t// we are clearing any previous data from recommendations every time we come to new OP\n\t\t// so that cached recommendations are not shown to user\n\t\tif (viewLevel && viewLevel === 1) {\n\t\t\toFinalUIState?.then(() => {\n\t\t\t\tthis.recommendations.clearRecommendations();\n\n\t\t\t\treturn;\n\t\t\t});\n\t\t}\n\t\tthis._updateAvailableCards([]);\n\t\tthis.displayCollaborationMessage(mParameters?.redirectedToNonDraft);\n\t\tthis._setOPMessageStripInternalContext();\n\n\t\tconst applyAppState = this.getAppComponent().getAppStateHandler().applyAppState(view.getId(), view);\n\t\tthis.pageReady.waitFor(applyAppState);\n\t}\n\n\t/**\n\t * Update the cards when the binding is refreshed.\n\t * @param cards Array of cards to be updated\n\t */\n\tasync _updateAvailableCards(cards: WrappedCard[]): Promise<void> {\n\t\tawait this.collaborationManager.collectAvailableCards(cards);\n\t\tif (cards.length > 0) {\n\t\t\tconst cardObject = this.collaborationManager.updateCards(cards);\n\t\t\tconst parentAppId = this.getAppComponent().getId();\n\t\t\tthis.getAppComponent().getCollaborationManagerService().addCardsToCollaborationManager(cardObject, parentAppId);\n\t\t\tthis.getAppComponent().getCollaborationManagerService().shareAvailableCards();\n\t\t}\n\t}\n\n\t/**\n\t * Set the internal binding context of the Messagestrip OP.\n\t */\n\t_setOPMessageStripInternalContext(): void {\n\t\tconst view = this.getView();\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\tconst internalModelContext = view.getBindingContext(\"internal\");\n\t\tinternalModelContext?.setProperty(\"MessageStrip\", { ...internalModelContext?.getProperty(\"MessageStrip\") });\n\t\tif (internalModelContext) {\n\t\t\t(oObjectPage.getHeaderTitle() as unknown as Control)\n\t\t\t\t?.findElements(true, (elem: Control) => elem.isA(\"sap.m.MessageStrip\"))\n\t\t\t\t.forEach((messageStrip: UI5Element) => {\n\t\t\t\t\tmessageStrip.setBindingContext(\n\t\t\t\t\t\tinternalModelContext\n\t\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t\t.bindContext(this.getExtensionAPI()._getMessageStripBindingContextPath())\n\t\t\t\t\t\t\t.getBoundContext()!,\n\t\t\t\t\t\t\"internal\"\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t// If the view's binding context already had messages that were not cleared, we would need to re-evaluate to show the message strip.\n\t\t\tthis._fnShowOPMessage();\n\t\t}\n\t}\n\n\t/**\n\t * Show a message strip if a redirection to a non-draft element has been done.\n\t * Remove the message strip in case we navigate to another object page.\n\t * @param entityName Name of the Entity to be displayed in the message\n\t */\n\tdisplayCollaborationMessage(entityName: string | undefined): void {\n\t\tconst resourceBundle = Library.getResourceBundleFor(\"sap.fe.core\")!;\n\n\t\tif (this.collaborationMessage) {\n\t\t\tMessaging.removeMessages([this.collaborationMessage]);\n\t\t\tdelete this.collaborationMessage;\n\t\t}\n\n\t\tif (entityName) {\n\t\t\tthis.collaborationMessage = new Message({\n\t\t\t\tmessage: resourceBundle.getText(\"REROUTED_NAVIGATION_TO_SAVED_VERSION\", [entityName]),\n\t\t\t\ttype: MessageType.Information,\n\t\t\t\ttarget: this.getView()?.getBindingContext()?.getPath()\n\t\t\t});\n\t\t\tMessaging.addMessages([this.collaborationMessage]);\n\t\t}\n\t}\n\n\t@publicExtension()\n\t@extensible(OverrideExecution.After)\n\tasync onPageReady(mParameters: { forceFocus: boolean } | undefined): Promise<void> {\n\t\tconst setFocus = (): void => {\n\t\t\t// Set the focus to the first action button, or to the first editable input if in editable mode\n\t\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\t\tconst isInDisplayMode = !CommonUtils.getIsEditable(this.getView());\n\n\t\t\tif (isInDisplayMode) {\n\t\t\t\tconst oFirstClickableElement = this._getFirstClickableElement(oObjectPage);\n\t\t\t\tif (oFirstClickableElement) {\n\t\t\t\t\toFirstClickableElement.focus();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst oSelectedSection = UI5Element.getElementById(oObjectPage.getSelectedSection()) as ObjectPageSection | undefined;\n\t\t\t\tif (oSelectedSection) {\n\t\t\t\t\tthis._updateFocusInEditMode(oSelectedSection.getSubSections());\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst ctxt = this.getView().getBindingContext();\n\t\t// setting this model data to be used for recommendations binding\n\t\tthis.getView().getModel(\"internal\").setProperty(\"/currentCtxt\", ctxt);\n\n\t\t// Apply app state only after the page is ready with the first section selected\n\t\tconst oView = this.getView();\n\t\tconst oInternalModelContext = oView.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst oBindingContext = oView.getBindingContext();\n\t\t//Show popup while navigating back from object page in case of draft\n\t\tif (oBindingContext) {\n\t\t\tconst bIsStickyMode = ModelHelper.isStickySessionSupported(oBindingContext.getModel().getMetaModel());\n\t\t\tif (!bIsStickyMode) {\n\t\t\t\tconst oAppComponent = CommonUtils.getAppComponent(oView);\n\t\t\t\tawait oAppComponent.getShellServices().setBackNavigation(() => this._onBackNavigationInDraft(oBindingContext));\n\t\t\t}\n\t\t}\n\t\t// do not request recommendations action if we are in Display mode\n\t\tconst isEditable = CommonUtils.getIsEditable(this.getView());\n\t\tif (isEditable && oBindingContext) {\n\t\t\tawait this.recommendations.fetchAndApplyRecommendations([{ context: oBindingContext }]);\n\t\t}\n\n\t\tif (mParameters?.forceFocus) {\n\t\t\tsetFocus();\n\t\t}\n\t\toInternalModelContext.setProperty(\"errorNavigationSectionFlag\", false);\n\t\tthis._checkDataPointTitleForExternalNavigation();\n\n\t\t//The following coding is done to merge an open PATCH and the draftprepare/draftactivate\n\t\t//request into one $batch request\n\t\t//To achieve this the $auto queue is locked at the mousedown event (before focusout) in\n\t\t//order to wait for the draft request issued in the save buttons press event handler.\n\t\t//The queue is released again during mouseup (before press).\n\t\t//This is only possible on non touch devices because on touch devices the focusout and press\n\t\t//events are both initiated at touchend by sap.m.Button.\n\t\t//mouseHandlerSet is used to ensures that the event handlers are attached only one time.\n\t\t//There can be multiple onPageReady e.g. when switching between edit/display mode\n\t\tif (!this.mergePatchDraft && !Device.support.touch) {\n\t\t\tconst saveButton = oView.byId(\"fe::FooterBar::StandardAction::Save\") as Button;\n\t\t\tconst autoQueueUnlock = (): void => {\n\t\t\t\tif (this.autoQueueLock?.isLocked()) {\n\t\t\t\t\tthis.autoQueueLock.unlock();\n\t\t\t\t}\n\t\t\t\tsaveButton.detachBrowserEvent(\"mouseup\", autoQueueUnlock);\n\t\t\t\tsaveButton.detachBrowserEvent(\"blur\", autoQueueUnlock);\n\t\t\t};\n\n\t\t\tsaveButton?.attachBrowserEvent(\"mousedown\", (): void => {\n\t\t\t\tif (!this.autoQueueLock?.isLocked()) {\n\t\t\t\t\tthis.autoQueueLock = this.getView().getModel().lock(\"$auto\");\n\t\t\t\t\t//when the mouse is dragged away from the save button while pressed then there will be no\n\t\t\t\t\t//mouseup event on the save button. Therefore, the unlocking is done on \"mouseup\" and \"blur\"\n\t\t\t\t\tsaveButton.attachBrowserEvent(\"mouseup\", autoQueueUnlock);\n\t\t\t\t\tsaveButton.attachBrowserEvent(\"blur\", autoQueueUnlock);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.mergePatchDraft = true;\n\t\t}\n\t}\n\n\t/**\n\t * Get the status of edit mode for sticky session.\n\t * @returns The status of edit mode for sticky session\n\t */\n\tgetStickyEditMode(): boolean {\n\t\tconst oBindingContext = this.getView().getBindingContext && this.getView().getBindingContext();\n\t\tlet bIsStickyEditMode = false;\n\t\tif (oBindingContext) {\n\t\t\tconst bIsStickyMode = ModelHelper.isStickySessionSupported(oBindingContext.getModel().getMetaModel());\n\t\t\tif (bIsStickyMode) {\n\t\t\t\tbIsStickyEditMode = CommonUtils.getIsEditable(this.getView());\n\t\t\t}\n\t\t}\n\t\treturn bIsStickyEditMode;\n\t}\n\n\t_getObjectPageLayoutControl(): ObjectPageLayout {\n\t\treturn this.byId(\"fe::ObjectPage\") as ObjectPageLayout;\n\t}\n\n\t_getPageTitleInformation(): { title: string; subtitle: string; intent: string; icon: string; description: string } {\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\tconst oObjectPageSubtitle = oObjectPage.getCustomData().find(function (oCustomData) {\n\t\t\treturn oCustomData.getKey() === \"ObjectPageSubtitle\";\n\t\t});\n\t\tconst objectPageDescription = oObjectPage.data(\"ObjectPageDescription\");\n\t\tconst appComponent = this.getAppComponent();\n\t\tconst rootViewController = appComponent.getRootViewController();\n\t\tconst fnClearCacheTitle = (): void => {\n\t\t\trootViewController.clearTitleHierarchyCache(oObjectPage.getBindingContext()?.getPath() as string);\n\t\t};\n\t\tif (oObjectPageSubtitle && !this.clearTitleHierarchyCacheSetUp) {\n\t\t\toObjectPageSubtitle.getBinding(\"value\")?.attachChange(fnClearCacheTitle, this);\n\t\t\tthis.clearTitleHierarchyCacheSetUp = true;\n\t\t}\n\t\treturn {\n\t\t\ttitle: oObjectPage.data(\"ObjectPageTitle\") || \"\",\n\t\t\tsubtitle: oObjectPageSubtitle && oObjectPageSubtitle.getValue(),\n\t\t\tintent: \"\",\n\t\t\ticon: \"\",\n\t\t\tdescription: objectPageDescription\n\t\t};\n\t}\n\n\t_executeHeaderShortcut(sId: string): void {\n\t\tconst sButtonId = `${this.getView().getId()}--${sId}`,\n\t\t\toButton = (this._getObjectPageLayoutControl().getHeaderTitle() as ObjectPageDynamicHeaderTitle)\n\t\t\t\t.getActions()\n\t\t\t\t.find((oElement) => oElement.getId() === sButtonId);\n\t\tif (oButton) {\n\t\t\tCommonUtils.fireButtonPress(oButton);\n\t\t}\n\t}\n\n\t_executeFooterShortcut(sId: string): void {\n\t\tconst sButtonId = `${this.getView().getId()}--${sId}`,\n\t\t\toButton = (this._getObjectPageLayoutControl().getFooter() as OverflowToolbar).getContent().find(function (\n\t\t\t\toElement: UI5Element\n\t\t\t) {\n\t\t\t\treturn oElement.getMetadata().getName() === \"sap.m.Button\" && oElement.getId() === sButtonId;\n\t\t\t});\n\t\tCommonUtils.fireButtonPress(oButton);\n\t}\n\n\t_executeTabShortCut(oExecution: UI5Event): void {\n\t\tconst oObjectPage = this._getObjectPageLayoutControl(),\n\t\t\taSections = oObjectPage.getSections(),\n\t\t\tiSectionIndexMax = aSections.length - 1,\n\t\t\tsCommand = (oExecution.getSource() as unknown as CommandExecution).getCommand();\n\t\tlet newSection,\n\t\t\tiSelectedSectionIndex = oObjectPage.indexOfSection(this.byId(oObjectPage.getSelectedSection()!) as ObjectPageSection);\n\t\tif (iSelectedSectionIndex !== -1 && iSectionIndexMax > 0) {\n\t\t\tif (sCommand === \"NextTab\") {\n\t\t\t\tif (iSelectedSectionIndex <= iSectionIndexMax - 1) {\n\t\t\t\t\tnewSection = aSections[++iSelectedSectionIndex];\n\t\t\t\t}\n\t\t\t} else if (iSelectedSectionIndex !== 0) {\n\t\t\t\t// PreviousTab\n\t\t\t\tnewSection = aSections[--iSelectedSectionIndex];\n\t\t\t}\n\n\t\t\tif (newSection) {\n\t\t\t\toObjectPage.setSelectedSection(newSection);\n\t\t\t\tnewSection.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\t_getFooterVisibility(): void {\n\t\tconst oInternalModelContext = this.getView().getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst sViewId = this.getView().getId();\n\t\toInternalModelContext.setProperty(\"messageFooterContainsErrors\", false);\n\t\tconst isHiddenDraftEnabled = (this.getAppComponent().getEnvironmentCapabilities().getCapabilities().HiddenDraft as HiddenDraft)\n\t\t\t?.enabled;\n\t\tMessaging.getMessageModel()\n\t\t\t.getData()\n\t\t\t.forEach(function (oMessage: Message): void {\n\t\t\t\tconst isErrorMessage = oMessage.validation && oMessage.getType() === \"Error\";\n\t\t\t\tconst messageValidation = isHiddenDraftEnabled\n\t\t\t\t\t? isErrorMessage\n\t\t\t\t\t: isErrorMessage && oMessage.getTargets().some((target) => target.includes(sViewId));\n\t\t\t\tif (messageValidation) {\n\t\t\t\t\toInternalModelContext.setProperty(\"messageFooterContainsErrors\", true);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t_showMessagePopover(err?: string, oRet?: unknown): unknown {\n\t\tif (err) {\n\t\t\tLog.error(err);\n\t\t}\n\t\tconst isEditMode = CommonUtils.getIsEditable(this.getView());\n\t\tconst rootViewController = this.getAppComponent().getRootViewController();\n\t\tconst currentPageView = rootViewController.isFclEnabled()\n\t\t\t? rootViewController.getRightmostView()\n\t\t\t: (this.getAppComponent().getRootContainer() as NavContainer).getCurrentPage();\n\t\tif (isEditMode && !currentPageView.isA(\"sap.m.MessagePage\")) {\n\t\t\tconst oMessageButton = this.messageButton,\n\t\t\t\toMessagePopover = oMessageButton.oMessagePopover,\n\t\t\t\toItemBinding = oMessagePopover.getBinding(\"items\") as ListBinding;\n\n\t\t\tif (oItemBinding.getLength() > 0 && !oMessagePopover.isOpen()) {\n\t\t\t\toMessageButton.setVisible(true);\n\t\t\t\t// workaround to ensure that oMessageButton is rendered when openBy is called\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\toMessagePopover.openBy(oMessageButton);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t\treturn oRet;\n\t}\n\n\tasync _editDocument(): Promise<void | Context> {\n\t\tconst oContext = this.getView().getBindingContext();\n\t\tconst oModel = this.getView().getModel(\"ui\");\n\t\tBusyLocker.lock(oModel);\n\t\treturn this.editFlow.editDocument.apply(this.editFlow, [oContext]).finally(function () {\n\t\t\tBusyLocker.unlock(oModel);\n\t\t});\n\t}\n\n\t/**\n\t * Returns the default semantic object mapping object.\n\t * @private\n\t * @param propertyPath The value of the data point property path\n\t * @param semanticObject The semantic object\n\t * @returns The array of the default semantic object mapping object\n\t */\n\t_getImplicitSemanticObjectMappingForDataPoints(\n\t\tpropertyPath: string,\n\t\tsemanticObject: string\n\t): MetaModelType<SemanticObjectMappingType>[] {\n\t\treturn [\n\t\t\t{\n\t\t\t\tLocalProperty: {\n\t\t\t\t\t$PropertyPath: propertyPath\n\t\t\t\t},\n\t\t\t\tSemanticObjectProperty: semanticObject\n\t\t\t}\n\t\t];\n\t}\n\n\t/**\n\t * Executes the validation of the document\n\t * One of the following actions is triggered on the draft version of the document:\n\t * - on a transient context:\n\t * - if the context gets data, wait for the creation of the context and execute the global validation\n\t * - if no data is found on this context, only the prepareAction is requested\n\t * - on a regular context, the global validation is requested.\n\t * @returns Promise of the global validation or undefined if not executed\n\t */\n\tasync _validateDocument(): Promise<void | unknown[] | ODataContextBinding> {\n\t\tconst control = UI5Element.getActiveElement() as Control;\n\t\tconst context = control?.getBindingContext() as ODataV4Context | undefined;\n\n\t\tif (!control || !context) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet byPassSideEffects = false;\n\t\tif (context.isTransient()) {\n\t\t\tif (context.hasPendingChanges()) {\n\t\t\t\tawait context.created();\n\t\t\t} else {\n\t\t\t\tbyPassSideEffects = true;\n\t\t\t}\n\t\t}\n\t\tthis.messageHandler.holdMessagesForControl(control);\n\t\tconst ret = await this.executeGlobalValidation(context, byPassSideEffects);\n\t\tthis.messageHandler.showMessages({ control });\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Executes the global validation of the draft\n\t * One of the following actions is triggered on the draft version of the document:\n\t * - the global side effects are executed if these side effects are defined in the context\n\t * - the draft Validation on the DraftRoot context.\n\t * @param context The Context\n\t * @param byPassSideEffects Only the draft Validation step is executed\n\t * @returns Promise of the global validation\n\t */\n\tasync executeGlobalValidation(context: ODataV4Context, byPassSideEffects = false): Promise<void | unknown[] | ODataContextBinding> {\n\t\tconst appComponent = this.getAppComponent();\n\t\t// the draft validation is treated as a user interaction, and the service must return transition messages again if still valid\n\t\tthis.messageHandler.removeTransitionMessages();\n\t\tif (!byPassSideEffects) {\n\t\t\tconst sideEffectsService = appComponent.getSideEffectsService();\n\t\t\tconst entityType = sideEffectsService.getEntityTypeFromContext(context);\n\t\t\tconst globalSideEffects = entityType ? sideEffectsService.getGlobalODataEntitySideEffects(entityType) : [];\n\t\t\t// If there is at least one global SideEffects for the related entity, execute it/them\n\t\t\tif (globalSideEffects.length) {\n\t\t\t\tawait this.editFlow.syncTask();\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tglobalSideEffects.map(async (sideEffects) => this._sideEffects.requestSideEffects(sideEffects, context))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst draftRootContext = (await CommonUtils.createRootContext(\n\t\t\tProgrammingModel.Draft,\n\t\t\tthis.getView(),\n\t\t\tappComponent\n\t\t)) as ODataV4Context;\n\t\t//Execute the draftValidation if there is no globalSideEffects (ignore ETags in collaboration draft)\n\t\tif (draftRootContext) {\n\t\t\tawait this.editFlow.syncTask();\n\t\t\treturn draft.executeDraftValidation(draftRootContext, appComponent, this.collaborativeDraft.isConnected());\n\t\t}\n\t}\n\n\t/**\n\t * Saves the draft version of the document\n\t * If data has been provided on the creation rows, the related documents are created\n\t * before saving the draft version.\n\t * @param skipBindingToView Indicates if the binding to the view should be skipped\n\t * @returns Promise\n\t */\n\tasync _saveDocument(skipBindingToView?: boolean): Promise<void> {\n\t\tconst context = this.getView().getBindingContext();\n\t\tconst model = this.getView().getModel(\"ui\"),\n\t\t\tawaitCreateDocuments: Promise<void | ODataListBinding>[] = [];\n\t\t// indicates if we are creating a new row in the OP\n\t\tlet executeSideEffectsOnError = false;\n\t\tBusyLocker.lock(model);\n\t\ttry {\n\t\t\tif (this.collaborativeDraft.isCollaborationEnabled()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst dialogAction = await new CollaborationDiscard(this.getView(), true).getUserAction();\n\t\t\t\t\t// We cancel the action\n\t\t\t\t\tif (dialogAction === \"cancel\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// We keep the draft and leave for LR\n\t\t\t\t\tif (dialogAction === \"keepDraft\") {\n\t\t\t\t\t\tthis.collaborativeDraft.disconnect();\n\t\t\t\t\t\tawait this._routing.navigateBackFromContext(context);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tLog.error(`Something went wrong with collaboration discard: ${err}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.editFlow.syncTask();\n\t\t\tthis._findTables().forEach((table: Table) => {\n\t\t\t\tconst creationRow = table.getCreationRow();\n\t\t\t\tconst tableBinding = this._getTableBinding(table);\n\t\t\t\tconst contextKeys = Object.keys((creationRow?.getBindingContext() as ODataV4Context | undefined)?.getObject() || {});\n\t\t\t\tif (contextKeys.filter((key) => !key.startsWith(\"@$ui5.\")).length) {\n\t\t\t\t\texecuteSideEffectsOnError = true;\n\t\t\t\t\tawaitCreateDocuments.push(\n\t\t\t\t\t\tthis.editFlow\n\t\t\t\t\t\t\t.createDocument(tableBinding, {\n\t\t\t\t\t\t\t\tcreationMode: table.data(\"creationMode\"),\n\t\t\t\t\t\t\t\tcreationRow: creationRow,\n\t\t\t\t\t\t\t\tcreateAtEnd: table.data(\"createAtEnd\") === \"true\",\n\t\t\t\t\t\t\t\tskipSideEffects: true // the skipSideEffects is a parameter created when we click the save key. If we press this key, we don't execute the handleSideEffects funciton to avoid batch redundancy\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => tableBinding)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst bindings = await Promise.all(awaitCreateDocuments);\n\t\t\t// We need to either reject or resolve a promise here and return it since this save\n\t\t\t// function is not only called when pressing the save button in the footer, but also\n\t\t\t// when the user selects create or save in a dataloss popup.\n\t\t\t// The logic of the dataloss popup needs to detect if the save had errors or not in order\n\t\t\t// to decide if the subsequent action - like a back navigation - has to be executed or not.\n\t\t\ttry {\n\t\t\t\tawait this.editFlow.saveDocument(context, {\n\t\t\t\t\tbExecuteSideEffectsOnError: executeSideEffectsOnError,\n\t\t\t\t\tbindings: bindings as unknown as ODataListBinding[],\n\t\t\t\t\tmergePatchDraft: this.mergePatchDraft,\n\t\t\t\t\tskipBindingToView\n\t\t\t\t});\n\t\t\t} catch (error: unknown) {\n\t\t\t\t// If the saveDocument in editFlow returns errors we need\n\t\t\t\t// to show the message popover here and ensure that the\n\t\t\t\t// dataloss logic does not perform the follow up function\n\t\t\t\t// like e.g. a back navigation hence we return a promise and reject it\n\t\t\t\tif (error !== RecommendationDialogDecision.Continue) {\n\t\t\t\t\tthis._showMessagePopover(error as string);\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t} finally {\n\t\t\tif (BusyLocker.isLocked(model)) {\n\t\t\t\tBusyLocker.unlock(model);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _cancelDocument(mParameters: { cancelButton: string }): Promise<Context | void> {\n\t\tconst context = this.getView()?.getBindingContext();\n\t\tconst cancelButton = this.getView().byId(mParameters.cancelButton) as Button | undefined; //to get the reference of the cancel button from command execution\n\t\tconst lastFocusedControlId = UI5Element.getActiveElement()?.getId();\n\t\tlet shouldSkipDiscardPopover = false;\n\t\tif (this.collaborativeDraft.isCollaborationEnabled()) {\n\t\t\ttry {\n\t\t\t\tconst dialogAction = await new CollaborationDiscard(this.getView(), false).getUserAction();\n\t\t\t\t// We cancel the action\n\t\t\t\tif (dialogAction === \"cancel\") {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// We keep the draft and leave for LR\n\t\t\t\tif (dialogAction === \"keepDraft\") {\n\t\t\t\t\tthis.collaborativeDraft.disconnect();\n\t\t\t\t\tawait this._routing.navigateBackFromContext(context);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// We have displayed the dialog and the user confirmed the discard -> We skip the discard confirmation\n\t\t\t\tif (dialogAction === \"discardConfirmed\") {\n\t\t\t\t\tshouldSkipDiscardPopover = true;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tLog.error(\"Cannot get collaborative users\");\n\t\t\t}\n\t\t}\n\t\tconst isDocumentModified =\n\t\t\t!!this.getView().getModel(\"ui\").getProperty(UiModelConstants.DocumentModified) || !context.getProperty(\"HasActiveEntity\");\n\t\tconst afterCancel: Function = (promiseResult: ODataV4Context) => {\n\t\t\t// focus is retained on the last focused element\n\t\t\tif (lastFocusedControlId !== undefined) {\n\t\t\t\tUI5Element.getElementById(lastFocusedControlId)?.focus();\n\t\t\t}\n\t\t\treturn promiseResult;\n\t\t};\n\t\tif (\n\t\t\t(this.getAppComponent()?.getEnvironmentCapabilities()?.getCapabilities()?.HiddenDraft as HiddenDraft)?.enabled &&\n\t\t\tisDocumentModified\n\t\t) {\n\t\t\treturn draft.processDataLossOrDraftDiscardConfirmation(\n\t\t\t\tafterCancel,\n\t\t\t\tFunction.prototype,\n\t\t\t\tcontext,\n\t\t\t\tthis,\n\t\t\t\tfalse,\n\t\t\t\tdraft.NavigationType.BackNavigation,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t\treturn this.editFlow\n\t\t\t.cancelDocument(context, { control: cancelButton, skipDiscardPopover: shouldSkipDiscardPopover })\n\t\t\t.then((promiseResult) => {\n\t\t\t\treturn afterCancel(promiseResult);\n\t\t\t});\n\t}\n\n\tasync _applyDocument(oContext: ODataV4Context): Promise<void> {\n\t\treturn this.editFlow.applyDocument(oContext).catch(() => {\n\t\t\tthis._showMessagePopover();\n\t\t\treturn;\n\t\t});\n\t}\n\n\t_updateRelatedApps(): void {\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\tconst showRelatedApps = oObjectPage.data(\"showRelatedApps\");\n\t\tif (showRelatedApps === \"true\" || showRelatedApps === true) {\n\t\t\tconst appComponent = CommonUtils.getAppComponent(this.getView());\n\t\t\tCommonUtils.updateRelatedAppsDetails(oObjectPage, appComponent);\n\t\t}\n\t}\n\n\t_findControlInSubSection(aParentElement: Control[], aSubsection: ObjectPageSubSection, aControls: Control[], bIsChart?: boolean): void {\n\t\tfor (const item1 of aParentElement) {\n\t\t\tlet oElement = (item1 as MacroAPI).getContent instanceof Function ? (item1 as MacroAPI).getContent() : undefined;\n\t\t\tif (bIsChart) {\n\t\t\t\tif (oElement?.getAggregation(\"items\")) {\n\t\t\t\t\tconst items = oElement.getAggregation(\"items\") as Control[];\n\t\t\t\t\titems.forEach(function (item: Control) {\n\t\t\t\t\t\tif (item.isA<ChartBlock>(\"sap.fe.macros.Chart\")) {\n\t\t\t\t\t\t\tconst chartControl = item.getChartControl();\n\t\t\t\t\t\t\taControls.push(chartControl);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (oElement && oElement.isA && oElement.isA<DynamicSideContent>(\"sap.ui.layout.DynamicSideContent\")) {\n\t\t\t\t\tconst oSubElement = oElement.getMainContent instanceof Function ? oElement.getMainContent() : undefined;\n\t\t\t\t\tif (oSubElement && oSubElement.length > 0) {\n\t\t\t\t\t\toElement = oSubElement[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// The table may currently be shown in a full screen dialog, we can then get the reference to the TableAPI\n\t\t\t\t// control from the custom data of the place holder panel\n\t\t\t\tif (oElement && oElement.isA && oElement.isA(\"sap.m.Panel\") && oElement.data(\"FullScreenTablePlaceHolder\")) {\n\t\t\t\t\toElement = oElement.data(\"tableAPIreference\");\n\t\t\t\t}\n\t\t\t\tif (oElement && oElement.isA && oElement.isA<TableAPI>(\"sap.fe.macros.table.TableAPI\")) {\n\t\t\t\t\tconst oSubElement = oElement.getContent instanceof Function ? oElement.getContent() : undefined;\n\t\t\t\t\tif (oSubElement && oSubElement.isA && oSubElement.isA<Table>(\"sap.ui.mdc.Table\")) {\n\t\t\t\t\t\taControls.push(oSubElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_getAllSubSections(): ObjectPageSubSection[] {\n\t\tconst oObjectPage = this._getObjectPageLayoutControl();\n\t\tlet aSubSections: ObjectPageSubSection[] = [];\n\t\toObjectPage.getSections().forEach(function (oSection: ObjectPageSection) {\n\t\t\taSubSections = aSubSections.concat(oSection.getSubSections());\n\t\t});\n\t\treturn aSubSections;\n\t}\n\n\t_getAllBlocks(): EnhanceWithUI5<SubSectionBlock>[] {\n\t\tlet aBlocks: EnhanceWithUI5<SubSectionBlock>[] = [];\n\t\tthis._getAllSubSections().forEach(function (oSubSection: ObjectPageSubSection) {\n\t\t\taBlocks = aBlocks.concat(oSubSection.getBlocks() as EnhanceWithUI5<SubSectionBlock>[]);\n\t\t});\n\t\treturn aBlocks;\n\t}\n\n\t_findTables(): Table[] {\n\t\tconst aSubSections = this._getAllSubSections();\n\t\tconst aTables: Table[] = [];\n\t\tfor (let subSection = 0; subSection < aSubSections.length; subSection++) {\n\t\t\tthis._findControlInSubSection(aSubSections[subSection].getBlocks(), aSubSections[subSection], aTables);\n\t\t\tthis._findControlInSubSection(aSubSections[subSection].getMoreBlocks(), aSubSections[subSection], aTables);\n\t\t}\n\t\treturn aTables;\n\t}\n\n\t_findCharts(): Chart[] {\n\t\tconst aSubSections = this._getAllSubSections();\n\t\tconst aCharts: Chart[] = [];\n\t\tfor (let subSection = 0; subSection < aSubSections.length; subSection++) {\n\t\t\tthis._findControlInSubSection(aSubSections[subSection].getBlocks(), aSubSections[subSection], aCharts, true);\n\t\t\tthis._findControlInSubSection(aSubSections[subSection].getMoreBlocks(), aSubSections[subSection], aCharts, true);\n\t\t}\n\t\treturn aCharts;\n\t}\n\n\t_closeSideContent(): void {\n\t\tthis._getAllBlocks().forEach(function (oBlock: EnhanceWithUI5<SubSectionBlock>): void {\n\t\t\tconst oContent = oBlock.getContent instanceof Function && oBlock.getContent();\n\t\t\tif (oContent && oContent.isA && oContent.isA<DynamicSideContent>(\"sap.ui.layout.DynamicSideContent\")) {\n\t\t\t\tif (oContent.setShowSideContent instanceof Function) {\n\t\t\t\t\toContent.setShowSideContent(false, false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Chart Context is resolved for 1:n microcharts.\n\t * @param oChartContext The Context of the MicroChart\n\t * @param sChartPath The collectionPath of the the chart\n\t * @returns Array of Attributes of the chart Context\n\t */\n\t_getChartContextData(oChartContext: Context, sChartPath: string): unknown[] {\n\t\tconst oContextData = oChartContext.getObject();\n\t\tlet oChartContextData = [oContextData];\n\t\tif (oChartContext && sChartPath) {\n\t\t\tif (oContextData[sChartPath]) {\n\t\t\t\toChartContextData = oContextData[sChartPath];\n\t\t\t\tdelete oContextData[sChartPath];\n\t\t\t\toChartContextData.push(oContextData);\n\t\t\t}\n\t\t}\n\t\treturn oChartContextData;\n\t}\n\n\t/**\n\t * Scroll the tables to the row with the sPath\n\t * @param {string} sRowPath 'sPath of the table row'\n\t */\n\n\t_scrollTablesToRow(sRowPath: string): void {\n\t\tif (this._findTables && this._findTables().length > 0) {\n\t\t\tconst aTables = this._findTables();\n\t\t\tfor (const item of aTables) {\n\t\t\t\tTableScroller.scrollTableToRow(item, sRowPath);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Method to merge selected contexts and filters.\n\t * @param oPageContext Page context\n\t * @param aLineContext Selected Contexts\n\t * @param sChartPath Collection name of the chart\n\t * @returns Selection Variant Object\n\t */\n\t_mergeMultipleContexts(\n\t\toPageContext: Context,\n\t\taLineContext: ODataV4Context[],\n\t\tsChartPath: string\n\t): { selectionVariant: SelectionVariant; attributes: unknown[] } {\n\t\tlet aAttributes: unknown[] = [],\n\t\t\taPageAttributes = [],\n\t\t\toContext,\n\t\t\tsMetaPathLine: string,\n\t\t\tsPathLine;\n\n\t\tconst sPagePath = oPageContext.getPath();\n\t\tconst oMetaModel = oPageContext && oPageContext.getModel() && oPageContext.getModel().getMetaModel();\n\t\tconst sMetaPathPage = oMetaModel && oMetaModel.getMetaPath(sPagePath).replace(/^\\/*/, \"\");\n\n\t\t// Get single line context if necessary\n\t\tif (aLineContext && aLineContext.length) {\n\t\t\toContext = aLineContext[0];\n\t\t\tsPathLine = oContext.getPath();\n\t\t\tsMetaPathLine = oMetaModel && oMetaModel.getMetaPath(sPathLine).replace(/^\\/*/, \"\");\n\n\t\t\taLineContext.forEach((oSingleContext: ODataV4Context): void => {\n\t\t\t\tif (sChartPath) {\n\t\t\t\t\tconst oChartContextData = this._getChartContextData(oSingleContext, sChartPath);\n\t\t\t\t\tif (oChartContextData) {\n\t\t\t\t\t\taAttributes = oChartContextData.map(function (oSubChartContextData: unknown) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tcontextData: oSubChartContextData,\n\t\t\t\t\t\t\t\tentitySet: `${sMetaPathPage}/${sChartPath}`\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\taAttributes.push({\n\t\t\t\t\t\tcontextData: oSingleContext.getObject(),\n\t\t\t\t\t\tentitySet: sMetaPathLine\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\taPageAttributes.push({\n\t\t\tcontextData: oPageContext.getObject(),\n\t\t\tentitySet: sMetaPathPage\n\t\t});\n\t\t// Adding Page Context to selection variant\n\t\taPageAttributes = this._intentBasedNavigation.removeSensitiveData(aPageAttributes, sMetaPathPage);\n\t\tconst oPageLevelSV = CommonUtils.addPageContextToSelectionVariant(new SelectionVariant(), aPageAttributes, this.getView());\n\t\taAttributes = this._intentBasedNavigation.removeSensitiveData(aAttributes, sMetaPathPage);\n\t\treturn {\n\t\t\tselectionVariant: oPageLevelSV,\n\t\t\tattributes: aAttributes\n\t\t};\n\t}\n\n\t_getBatchGroupsForView(): string[] {\n\t\tconst oViewData = this.getView().getViewData(),\n\t\t\toConfigurations = oViewData.controlConfiguration,\n\t\t\taConfigurations = oConfigurations && Object.keys(oConfigurations),\n\t\t\taBatchGroups = [\"$auto.Heroes\", \"$auto.Decoration\", \"$auto.Workers\"];\n\n\t\tif (aConfigurations && aConfigurations.length > 0) {\n\t\t\taConfigurations.forEach(function (sKey) {\n\t\t\t\tconst oConfiguration = oConfigurations[sKey] as MicroChartManifestConfiguration;\n\t\t\t\tif (oConfiguration.requestGroupId === \"LongRunners\") {\n\t\t\t\t\taBatchGroups.push(\"$auto.LongRunners\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn aBatchGroups;\n\t}\n\n\t/**\n\t * Method to initialize pagination.\n\t * @param context Context of object page\n\t * @param internalModel Internal model\n\t * @param listBinding Parent list binding to use\n\t */\n\t_initializePagination(context: ODataV4Context, internalModel: JSONModel, listBinding?: ODataListBinding): void {\n\t\tconst viewLevel = this.getView().getViewData().viewLevel;\n\t\tif (viewLevel > 1) {\n\t\t\tconst paginatorCurrentContext = internalModel.getProperty(\"/paginatorCurrentContext\");\n\t\t\tif (paginatorCurrentContext) {\n\t\t\t\tconst bindingToUse = paginatorCurrentContext.getBinding();\n\t\t\t\tthis.paginator.initialize(bindingToUse, paginatorCurrentContext);\n\t\t\t\tinternalModel.setProperty(\"/paginatorCurrentContext\", null);\n\t\t\t} else if (listBinding) {\n\t\t\t\tthis.paginator.initialize(listBinding, context);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Method to update the Breadcrumbs' links and the corresponding href when the context changes.\n\t * @param source Breadcrumbs control\n\t * @returns A Promise that is resolved when the Breadcrumbs content is filled properly\n\t * @private\n\t */\n\tasync setBreadcrumbLinks(source: BreadCrumbs): Promise<void> {\n\t\tconst context = source.getBindingContext(),\n\t\t\tappComponent = this.getAppComponent(),\n\t\t\tpromises: Promise<TitleInformation>[] = [],\n\t\t\tnewPath = context?.getPath(),\n\t\t\tpathParts = newPath?.split(\"/\") ?? [],\n\t\t\tmetaModel = appComponent && appComponent.getMetaModel();\n\t\tlet path = \"\";\n\t\ttry {\n\t\t\tpathParts.shift();\n\t\t\tpathParts.splice(-1, 1);\n\t\t\tpathParts.forEach(function (pathPart: string) {\n\t\t\t\tpath += `/${pathPart}`;\n\t\t\t\tif (!appComponent.getRouter().getRouteInfoByHash(path)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst rootViewController = appComponent.getRootViewController();\n\t\t\t\tconst parameterPath = metaModel.getMetaPath(path);\n\t\t\t\tconst resultContext = metaModel.getObject(`${parameterPath}/@com.sap.vocabularies.Common.v1.ResultContext`);\n\t\t\t\tif (resultContext) {\n\t\t\t\t\t// We dont need to create a breadcrumb for Parameter path\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tpromises.push(rootViewController.getTitleInfoFromPath(path));\n\t\t\t});\n\t\t\tconst titleHierarchyInfos: TitleInformation[] = await Promise.all(promises);\n\t\t\tlet hierarchyPosition, link;\n\t\t\tfor (const titleHierarchyInfo of titleHierarchyInfos) {\n\t\t\t\thierarchyPosition = titleHierarchyInfos.indexOf(titleHierarchyInfo);\n\t\t\t\tlink = source.getLinks()[hierarchyPosition] ? source.getLinks()[hierarchyPosition] : new Link();\n\t\t\t\t//sCurrentEntity is a fallback value in case of empty title\n\t\t\t\tlink.setText(titleHierarchyInfo.subtitle || titleHierarchyInfo.title);\n\t\t\t\t//We apply an additional encodeURI in case of special characters (ie \"/\") used in the url through the semantic keys\n\t\t\t\tlink.setHref(encodeURI(titleHierarchyInfo.intent!));\n\t\t\t\tif (!source.getLinks()[hierarchyPosition]) {\n\t\t\t\t\tsource.addLink(link);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tLog.error(\"Error while setting the breadcrumb links:\" + error);\n\t\t}\n\t}\n\n\t_checkDataPointTitleForExternalNavigation(): void {\n\t\tconst oView = this.getView();\n\t\tconst oInternalModelContext = oView.getBindingContext(\"internal\") as InternalModelContext;\n\t\tconst oDataPoints = CommonUtils.getHeaderFacetItemConfigForExternalNavigation(\n\t\t\toView.getViewData() as Record<string, unknown>,\n\t\t\tthis.getAppComponent().getRoutingService().getOutbounds()\n\t\t);\n\t\tconst oShellServices = this.getAppComponent().getShellServices();\n\t\tconst oPageContext = oView && oView.getBindingContext();\n\t\toInternalModelContext.setProperty(\"isHeaderDPLinkVisible\", {});\n\t\tif (oPageContext) {\n\t\t\toPageContext\n\t\t\t\t.requestObject()\n\t\t\t\t.then(function (oData: object) {\n\t\t\t\t\treturn fnGetLinks(oDataPoints, oData);\n\t\t\t\t})\n\t\t\t\t.catch(function (oError: unknown) {\n\t\t\t\t\tLog.error(\"Cannot retrieve the links from the shell service\", oError as string);\n\t\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @param oError\n\t\t */\n\t\tfunction fnOnError(oError: string): void {\n\t\t\tLog.error(oError);\n\t\t}\n\n\t\tfunction fnSetLinkEnablement(id: string, aSupportedLinks: { supported?: boolean }[]): void {\n\t\t\tconst sLinkId = id;\n\t\t\t// process viable links from getLinks for all datapoints having outbound\n\t\t\tif (aSupportedLinks && aSupportedLinks.length === 1 && aSupportedLinks[0].supported) {\n\t\t\t\toInternalModelContext.setProperty(`isHeaderDPLinkVisible/${sLinkId}`, true);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @param oSubDataPoints\n\t\t * @param oPageData\n\t\t */\n\t\tfunction fnGetLinks(\n\t\t\toSubDataPoints: Record<\n\t\t\t\tstring,\n\t\t\t\t{\n\t\t\t\t\tsemanticObject: string;\n\t\t\t\t\taction: string;\n\t\t\t\t\tsemanticObjectMapping: MetaModelType<SemanticObjectMappingType>[];\n\t\t\t\t}\n\t\t\t>,\n\t\t\toPageData: object\n\t\t): void {\n\t\t\tfor (const sId in oSubDataPoints) {\n\t\t\t\tconst oDataPoint = oSubDataPoints[sId];\n\t\t\t\tconst oParams: Record<string, unknown> = {};\n\t\t\t\tconst oLink = oView.byId(sId);\n\t\t\t\tif (!oLink) {\n\t\t\t\t\t// for data points configured in app descriptor but not annotated in the header\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst oLinkContext = oLink.getBindingContext();\n\t\t\t\tconst oLinkData: object = oLinkContext && oLinkContext.getObject();\n\t\t\t\tlet oMixedContext: Record<string, unknown> = merge({}, oPageData, oLinkData) as Record<string, unknown>;\n\t\t\t\t// process semantic object mappings\n\t\t\t\tif (oDataPoint.semanticObjectMapping) {\n\t\t\t\t\tconst aSemanticObjectMapping = oDataPoint.semanticObjectMapping;\n\t\t\t\t\tfor (const item in aSemanticObjectMapping) {\n\t\t\t\t\t\tconst oMapping = aSemanticObjectMapping[item];\n\t\t\t\t\t\tconst sMainProperty = oMapping[\"LocalProperty\"]![\"$PropertyPath\"];\n\t\t\t\t\t\tconst sMappedProperty = oMapping[\"SemanticObjectProperty\"]!;\n\t\t\t\t\t\tif (sMainProperty !== sMappedProperty) {\n\t\t\t\t\t\t\tif (oMixedContext.hasOwnProperty(sMainProperty)) {\n\t\t\t\t\t\t\t\tconst oNewMapping: Record<string, unknown> = {};\n\t\t\t\t\t\t\t\toNewMapping[sMappedProperty] = oMixedContext[sMainProperty];\n\t\t\t\t\t\t\t\toMixedContext = merge({}, oMixedContext, oNewMapping) as Record<string, unknown>;\n\t\t\t\t\t\t\t\tdelete oMixedContext[sMainProperty];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (oMixedContext) {\n\t\t\t\t\tfor (const sKey in oMixedContext) {\n\t\t\t\t\t\tif (!sKey.startsWith(\"_\") && !sKey.includes(\"odata.context\")) {\n\t\t\t\t\t\t\toParams[sKey] = oMixedContext[sKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// validate if a link must be rendered\n\t\t\t\toShellServices\n\t\t\t\t\t.isNavigationSupported([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\t\tsemanticObject: oDataPoint.semanticObject,\n\t\t\t\t\t\t\t\taction: oDataPoint.action\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tparams: oParams\n\t\t\t\t\t\t}\n\t\t\t\t\t])\n\t\t\t\t\t.then((aLinks) => {\n\t\t\t\t\t\treturn fnSetLinkEnablement(sId, aLinks);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(fnOnError);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlers = {\n\t\tonPrimaryAction(\n\t\t\toController: ObjectPageController,\n\t\t\toView: FEView,\n\t\t\toContext: ODataV4Context,\n\t\t\tsActionName: string,\n\t\t\tmParameters: {\n\t\t\t\tparameterValues?: { name: string; value: unknown }[];\n\t\t\t\tskipParameterDialog?: boolean;\n\t\t\t\tcontexts?: ODataV4Context | ODataV4Context[];\n\t\t\t\tmodel?: ODataModel;\n\t\t\t\trequiresNavigation?: boolean;\n\t\t\t\tlabel?: string;\n\t\t\t\tisNavigable?: boolean;\n\t\t\t\tentitySetName?: string;\n\t\t\t\tinvocationGrouping?: string;\n\t\t\t\toperationAvailableMap?: string;\n\t\t\t\tcontrolId?: string;\n\t\t\t\tbStaticAction?: boolean;\n\t\t\t\tapplicableContexts?: ODataV4Context[];\n\t\t\t\tnotApplicableContexts?: ODataV4Context[];\n\t\t\t\tenableAutoScroll?: boolean;\n\t\t\t\tdefaultValuesExtensionFunction?: string;\n\t\t\t},\n\t\t\tmConditions: {\n\t\t\t\tpositiveActionVisible: boolean;\n\t\t\t\tpositiveActionEnabled: boolean;\n\t\t\t\teditActionVisible: boolean;\n\t\t\t\teditActionEnabled: boolean;\n\t\t\t}\n\t\t): void {\n\t\t\t/**\n\t\t\t * Invokes the page primary action on press of Ctrl+Enter.\n\t\t\t */\n\t\t\tconst iViewLevel = oController.getView().getViewData().viewLevel;\n\t\t\tif (mConditions.positiveActionVisible) {\n\t\t\t\tif (mConditions.positiveActionEnabled) {\n\t\t\t\t\toController.handlers.onCallAction(oView, sActionName, mParameters);\n\t\t\t\t}\n\t\t\t} else if (mConditions.editActionVisible) {\n\t\t\t\tif (mConditions.editActionEnabled) {\n\t\t\t\t\toController._editDocument();\n\t\t\t\t}\n\t\t\t} else if (iViewLevel === 1 && CommonUtils.getIsEditable(oView)) {\n\t\t\t\toController._saveDocument();\n\t\t\t} else if (CommonUtils.getIsEditable(oView)) {\n\t\t\t\toController._applyDocument(oContext);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Manages the context change event on the tables.\n\t\t * The focus is set if this change is related to an editFlow action and\n\t\t * an event is fired on the objectPage messageButton.\n\t\t * @param this The objectPage controller\n\t\t * @param event The UI5 event\n\t\t */\n\t\tasync onTableContextChange(this: ObjectPageController, event: UI5Event<{}, TableAPI>): Promise<void> {\n\t\t\tconst tableAPI = event.getSource();\n\t\t\tconst table = tableAPI.content;\n\t\t\tconst currentActionPromise = this.editFlow.getCurrentActionPromise();\n\t\t\tconst tableContexts = this._getTableBinding(table)?.getCurrentContexts();\n\n\t\t\tif (currentActionPromise && tableContexts?.length) {\n\t\t\t\ttry {\n\t\t\t\t\tconst actionResponse = await currentActionPromise;\n\t\t\t\t\tif (actionResponse?.controlId === table.getId()) {\n\t\t\t\t\t\tconst actionData = actionResponse.oData;\n\t\t\t\t\t\tconst keys = actionResponse.keys;\n\t\t\t\t\t\tconst newItem = tableContexts.findIndex((tableContext: Context) => {\n\t\t\t\t\t\t\tconst tableData = tableContext.getObject();\n\t\t\t\t\t\t\treturn keys.every((key: string) => tableData[key] === actionData[key]);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (newItem !== -1) {\n\t\t\t\t\t\t\tconst dialog = InstanceManager.getOpenDialogs().find((dialog) => dialog.data(\"FullScreenDialog\") !== true);\n\t\t\t\t\t\t\tif (dialog) {\n\t\t\t\t\t\t\t\t// by design, a sap.m.dialog set the focus to the previous focused element when closing.\n\t\t\t\t\t\t\t\t// we should wait for the dialog to be closed before set the focus to another element\n\t\t\t\t\t\t\t\tdialog.attachEventOnce(\"afterClose\", () => {\n\t\t\t\t\t\t\t\t\ttable.focusRow(newItem, true);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttable.focusRow(newItem, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editFlow.deleteCurrentActionPromise();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tLog.error(`An error occurs while scrolling to the newly created Item: ${e}`);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// fire ModelContextChange on the message button whenever the table context changes\n\t\t\tthis.messageButton.fireModelContextChange();\n\t\t},\n\n\t\tasync onCallAction(\n\t\t\toView: FEView,\n\t\t\tsActionName: string,\n\t\t\tmParameters: {\n\t\t\t\tparameterValues?: { name: string; value: unknown }[];\n\t\t\t\tskipParameterDialog?: boolean;\n\t\t\t\tcontexts?: ODataV4Context | ODataV4Context[];\n\t\t\t\tmodel?: ODataModel;\n\t\t\t\trequiresNavigation?: boolean;\n\t\t\t\tlabel?: string;\n\t\t\t\tisNavigable?: boolean;\n\t\t\t\tentitySetName?: string;\n\t\t\t\tinvocationGrouping?: string;\n\t\t\t\toperationAvailableMap?: string;\n\t\t\t\tcontrolId?: string;\n\t\t\t\tbStaticAction?: boolean;\n\t\t\t\tapplicableContexts?: ODataV4Context[];\n\t\t\t\tnotApplicableContexts?: ODataV4Context[];\n\t\t\t\tenableAutoScroll?: boolean;\n\t\t\t\tdefaultValuesExtensionFunction?: string;\n\t\t\t}\n\t\t): Promise<unknown> {\n\t\t\tconst oController = oView.getController() as ObjectPageController;\n\n\t\t\t// Wait for VH values to be resolved before calling the action\n\t\t\tawait oController.editFlow.syncTask();\n\n\t\t\treturn oController.editFlow\n\t\t\t\t.invokeAction(sActionName, { ...mParameters, ...{ feFrameworkCall: true } })\n\t\t\t\t.then(oController._showMessagePopover.bind(oController, undefined))\n\t\t\t\t.catch(oController._showMessagePopover.bind(oController));\n\t\t},\n\t\tonDataPointTitlePressed(\n\t\t\toController: ObjectPageController,\n\t\t\toSource: Control,\n\t\t\toManifestOutbound: Record<string, ManifestOutboundEntry>,\n\t\t\tsControlConfig: string,\n\t\t\tsCollectionPath: string\n\t\t): void {\n\t\t\toManifestOutbound = typeof oManifestOutbound === \"string\" ? JSON.parse(oManifestOutbound) : oManifestOutbound;\n\t\t\tconst oTargetInfo = oManifestOutbound[sControlConfig],\n\t\t\t\toDataPointOrChartBindingContext = oSource.getBindingContext()!,\n\t\t\t\tsMetaPath = oDataPointOrChartBindingContext\n\t\t\t\t\t.getModel()\n\t\t\t\t\t.getMetaModel()\n\t\t\t\t\t.getMetaPath(oDataPointOrChartBindingContext.getPath());\n\t\t\tlet aSemanticObjectMapping = CommonUtils.getSemanticObjectMapping(oTargetInfo),\n\t\t\t\taNavigationData = oController._getChartContextData(oDataPointOrChartBindingContext, sCollectionPath),\n\t\t\t\tadditionalNavigationParameters;\n\n\t\t\taNavigationData = aNavigationData.map(function (oNavigationData: unknown) {\n\t\t\t\treturn {\n\t\t\t\t\tdata: oNavigationData,\n\t\t\t\t\tmetaPath: sMetaPath + (sCollectionPath ? `/${sCollectionPath}` : \"\")\n\t\t\t\t};\n\t\t\t});\n\t\t\tif (oTargetInfo && oTargetInfo.parameters) {\n\t\t\t\tconst oParams = oTargetInfo.parameters && oController._intentBasedNavigation.getOutboundParams(oTargetInfo.parameters);\n\t\t\t\tif (Object.keys(oParams).length > 0) {\n\t\t\t\t\tadditionalNavigationParameters = oParams;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Check if implicit semantic object mapping is needed\n\t\t\tif (aSemanticObjectMapping.length === 0) {\n\t\t\t\tconst customData = oSource.getCustomData().find((data) => data.getKey() === \"ValuePropertyPath\");\n\t\t\t\tif (customData) {\n\t\t\t\t\taSemanticObjectMapping = oController._getImplicitSemanticObjectMappingForDataPoints(\n\t\t\t\t\t\tcustomData.getValue(),\n\t\t\t\t\t\toTargetInfo.semanticObject\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (oTargetInfo && oTargetInfo.semanticObject && oTargetInfo.action) {\n\t\t\t\toController._intentBasedNavigation.navigate(oTargetInfo.semanticObject, oTargetInfo.action, {\n\t\t\t\t\tnavigationContexts: aNavigationData,\n\t\t\t\t\tsemanticObjectMapping: aSemanticObjectMapping,\n\t\t\t\t\tadditionalNavigationParameters: additionalNavigationParameters\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Triggers an outbound navigation when a user chooses the chevron.\n\t\t * @param oController\n\t\t * @param sOutboundTarget Name of the outbound target (needs to be defined in the manifest)\n\t\t * @param oContext The context that contains the data for the target app\n\t\t * @param sCreatePath Create path when the chevron is created.\n\t\t * @returns Promise which is resolved once the navigation is triggered (??? maybe only once finished?)\n\t\t * @final\n\t\t */\n\t\tasync onChevronPressNavigateOutBound(\n\t\t\toController: ObjectPageController,\n\t\t\tsOutboundTarget: string,\n\t\t\toContext: ODataV4Context,\n\t\t\tsCreatePath: string\n\t\t): Promise<void> {\n\t\t\treturn oController._intentBasedNavigation.onChevronPressNavigateOutBound(oController, sOutboundTarget, oContext, sCreatePath);\n\t\t},\n\n\t\tonNavigateChange(this: ObjectPageController, oEvent: UI5Event<{ subSection: ObjectPageSubSection }>): void {\n\t\t\t//will be called always when we click on a section tab\n\t\t\tthis.getExtensionAPI().updateAppState();\n\t\t\tthis.bSectionNavigated = true;\n\n\t\t\tconst oInternalModelContext = this.getView().getBindingContext(\"internal\") as InternalModelContext;\n\t\t\tif (\n\t\t\t\tCommonUtils.getIsEditable(this.getView()) &&\n\t\t\t\tthis.getView().getViewData().sectionLayout === \"Tabs\" &&\n\t\t\t\toInternalModelContext.getProperty(\"errorNavigationSectionFlag\") === false\n\t\t\t) {\n\t\t\t\tconst oSubSection = oEvent.getParameter(\"subSection\");\n\t\t\t\tthis._updateFocusInEditMode([oSubSection]);\n\t\t\t}\n\t\t},\n\t\tonVariantSelected: function (this: ObjectPageController): void {\n\t\t\tthis.getExtensionAPI().updateAppState();\n\t\t},\n\t\tonVariantSaved: function (this: ObjectPageController): void {\n\t\t\t//TODO: Should remove this setTimeOut once Variant Management provides an api to fetch the current variant key on save\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.getExtensionAPI().updateAppState();\n\t\t\t}, 2000);\n\t\t},\n\t\tnavigateToSubSection: function (oController: ObjectPageController, vDetailConfig: string | object): void {\n\t\t\tconst oDetailConfig = typeof vDetailConfig === \"string\" ? JSON.parse(vDetailConfig) : vDetailConfig;\n\t\t\tconst oObjectPage = oController.getView().byId(\"fe::ObjectPage\") as ObjectPageLayout;\n\t\t\tlet oSection;\n\t\t\tlet oSubSection;\n\t\t\tif (oDetailConfig.sectionId) {\n\t\t\t\toSection = oController.getView().byId(oDetailConfig.sectionId) as ObjectPageSection;\n\t\t\t\toSubSection = (\n\t\t\t\t\toDetailConfig.subSectionId\n\t\t\t\t\t\t? oController.getView().byId(oDetailConfig.subSectionId)\n\t\t\t\t\t\t: oSection && oSection.getSubSections() && oSection.getSubSections()[0]\n\t\t\t\t) as ObjectPageSubSection;\n\t\t\t} else if (oDetailConfig.subSectionId) {\n\t\t\t\toSubSection = oController.getView().byId(oDetailConfig.subSectionId) as ObjectPageSubSection;\n\t\t\t\toSection = oSubSection && (oSubSection.getParent() as ObjectPageSection);\n\t\t\t}\n\t\t\tif (!oSection || !oSubSection || !oSection.getVisible() || !oSubSection.getVisible()) {\n\t\t\t\tconst sTitle = getResourceModel(oController).getText(\n\t\t\t\t\t\"C_ROUTING_NAVIGATION_DISABLED_TITLE\",\n\t\t\t\t\tundefined,\n\t\t\t\t\toController.getView().getViewData().entitySet\n\t\t\t\t);\n\t\t\t\tLog.error(sTitle);\n\t\t\t\tMessageBox.error(sTitle);\n\t\t\t} else {\n\t\t\t\toObjectPage.setSelectedSection(oSubSection.getId());\n\t\t\t\t// trigger iapp state change\n\t\t\t\toObjectPage.fireNavigate({\n\t\t\t\t\tsection: oSection,\n\t\t\t\t\tsubSection: oSubSection\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tcloseOPMessageStrip: function (this: ObjectPageController): void {\n\t\t\tconst view = this.getView();\n\t\t\tconst bIsInEditMode = CommonUtils.getIsEditable(view);\n\t\t\tconst internalModel = view.getModel(\"internal\");\n\t\t\tconst messagestripInternalModelContext = internalModel\n\t\t\t\t.bindContext(this.getExtensionAPI()._getMessageStripBindingContextPath())\n\t\t\t\t.getBoundContext()!;\n\t\t\t// Remove context bound messages and set the property to false for the backend transition messages in edit mode.\n\t\t\tif (!bIsInEditMode && messagestripInternalModelContext.getProperty(\"OPBackendMessageVisible\") === true) {\n\t\t\t\tconst contextBoundMessages = Messaging.getMessageModel()\n\t\t\t\t\t.getData()\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(message: Message) =>\n\t\t\t\t\t\t\tmessage.getTargets()[0] === this.getView().getBindingContext()?.getPath() && message.getPersistent() === true\n\t\t\t\t\t);\n\t\t\t\tif (contextBoundMessages.length === 1) {\n\t\t\t\t\tMessaging.removeMessages(contextBoundMessages);\n\t\t\t\t}\n\t\t\t}\n\t\t\tmessagestripInternalModelContext.setProperty(\"OPBackendMessageVisible\", false);\n\t\t\tthis.getExtensionAPI().hideMessage();\n\t\t}\n\t};\n}\n\nexport default ObjectPageController;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;EAuGA,MAAMA,gBAAgB,GAAGC,SAAS,CAACD,gBAAgB;EAAC,IAE9CE,oBAAoB,IAAAC,IAAA,GADzBC,cAAc,CAAC,kDAAkD,CAAC,EAAAC,KAAA,GAIjEC,cAAc,CAACC,WAAW,CAAC,EAAAC,KAAA,GAG3BF,cAAc,CAACG,KAAK,CAACC,QAAQ,CAACC,cAAc,CAAC,CAAC,EAAAC,KAAA,GAG9CN,cAAc,CAACO,eAAe,CAACH,QAAQ,CAACI,uBAAuB,CAAC,CAAC,EAAAC,KAAA,GAGjET,cAAc,CAACU,SAAS,CAACN,QAAQ,CAACO,iBAAiB,CAAC,CAAC,EAAAC,KAAA,GAGrDZ,cAAc,CAACa,cAAc,CAACT,QAAQ,CAACU,sBAAsB,CAAC,CAAC,EAAAC,KAAA,GAG/Df,cAAc,CAACgB,qBAAqB,CAACZ,QAAQ,CAACa,6BAA6B,CAAC,CAAC,EAAAC,KAAA,GAG7ElB,cAAc,CAACmB,oBAAoB,CAACf,QAAQ,CAACgB,4BAA4B,CAAC,CAAC,EAAAC,KAAA,GAG3ErB,cAAc,CACdsB,6BAA6B,CAAClB,QAAQ,CAAC;IACtCmB,iBAAiB,EAAE,SAAAA,CAAA,EAA+C;MACjE,MAAMC,iBAAiB,GACrB,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,aAAa,CAAC,CAAC,CAA0BC,iBAAiB,IACzE,IAAI,CAACF,OAAO,CAAC,CAAC,CAACC,aAAa,CAAC,CAAC,CAA0BC,iBAAiB,CAAC,CAAC;MAC7E,OAAOH,iBAAiB,GAAG,SAAS,GAAGI,SAAS;IACjD;EACD,CAAC,CACF,CAAC,EAAAC,MAAA,GAGA7B,cAAc,CAAC8B,SAAS,CAAC1B,QAAQ,CAAC2B,kBAAkB,CAAC,CAAC,EAAAC,MAAA,GAGtDhC,cAAc,CACdiC,SAAS,CAAC7B,QAAQ,CAAC;IAClB8B,iBAAiB,EAAE,SAAAA,CAAA,EAAY;MAC9B,OAAO,IAAI;IACZ;EACD,CAAC,CACF,CAAC,EAAAC,MAAA,GAyBAC,eAAe,CAAC,CAAC,EAAAC,MAAA,GACjBC,cAAc,CAAC,CAAC,EAAAC,MAAA,GA+nBhBH,eAAe,CAAC,CAAC,EAAAI,MAAA,GACjBC,UAAU,CAACC,iBAAiB,CAACC,KAAK,CAAC,EAAA9C,IAAA,CAAA+C,MAAA,IAAAC,OAAA,0BAAAC,eAAA;IAAA,SAAAlD,qBAAA;MAAA,IAAAmD,KAAA;MAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;QAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;MAAA;MAAAN,KAAA,GAAAD,eAAA,CAAAQ,IAAA,UAAAH,IAAA;MAAAI,0BAAA,CAAAR,KAAA,iBAAAS,WAAA,EAAAT,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,WAAAU,YAAA,EAAAV,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,cAAAW,YAAA,EAAAX,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,eAAAY,YAAA,EAAAZ,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,oBAAAa,YAAA,EAAAb,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,2BAAAc,YAAA,EAAAd,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,0BAAAe,YAAA,EAAAf,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,4BAAAgB,YAAA,EAAAhB,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,eAAAiB,YAAA,EAAAjB,KAAA;MAAAQ,0BAAA,CAAAR,KAAA,eAAAkB,aAAA,EAAAlB,KAAA;MAAAA,KAAA,CAjpB5BmB,6BAA6B,GAAG,KAAK;MAAAnB,KAAA,CAUrCoB,eAAe,GAAG,KAAK;MAAApB,KAAA,CAy8C/BqB,QAAQ,GAAG;QACVC,eAAeA,CACdC,WAAiC,EACjCC,KAAa,EACbC,QAAwB,EACxBC,WAAmB,EACnBC,WAiBC,EACDC,WAKC,EACM;UACP;AACH;AACA;UACG,MAAMC,UAAU,GAAGN,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC,CAACC,SAAS;UAChE,IAAIH,WAAW,CAACI,qBAAqB,EAAE;YACtC,IAAIJ,WAAW,CAACK,qBAAqB,EAAE;cACtCV,WAAW,CAACF,QAAQ,CAACa,YAAY,CAACV,KAAK,EAAEE,WAAW,EAAEC,WAAW,CAAC;YACnE;UACD,CAAC,MAAM,IAAIC,WAAW,CAACO,iBAAiB,EAAE;YACzC,IAAIP,WAAW,CAACQ,iBAAiB,EAAE;cAClCb,WAAW,CAACc,aAAa,CAAC,CAAC;YAC5B;UACD,CAAC,MAAM,IAAIR,UAAU,KAAK,CAAC,IAAIS,WAAW,CAACC,aAAa,CAACf,KAAK,CAAC,EAAE;YAChED,WAAW,CAACiB,aAAa,CAAC,CAAC;UAC5B,CAAC,MAAM,IAAIF,WAAW,CAACC,aAAa,CAACf,KAAK,CAAC,EAAE;YAC5CD,WAAW,CAACkB,cAAc,CAAChB,QAAQ,CAAC;UACrC;QACD,CAAC;QAED;AACF;AACA;AACA;AACA;AACA;AACA;QACE,MAAMiB,oBAAoBA,CAA6BC,KAA6B,EAAiB;UACpG,MAAMC,QAAQ,GAAGD,KAAK,CAACE,SAAS,CAAC,CAAC;UAClC,MAAMC,KAAK,GAAGF,QAAQ,CAACG,OAAO;UAC9B,MAAMC,oBAAoB,GAAG,IAAI,CAACC,QAAQ,CAACC,uBAAuB,CAAC,CAAC;UACpE,MAAMC,aAAa,GAAG,IAAI,CAACC,gBAAgB,CAACN,KAAK,CAAC,EAAEO,kBAAkB,CAAC,CAAC;UAExE,IAAIL,oBAAoB,IAAIG,aAAa,EAAEhD,MAAM,EAAE;YAClD,IAAI;cACH,MAAMmD,cAAc,GAAG,MAAMN,oBAAoB;cACjD,IAAIM,cAAc,EAAEC,SAAS,KAAKT,KAAK,CAACU,KAAK,CAAC,CAAC,EAAE;gBAChD,MAAMC,UAAU,GAAGH,cAAc,CAACI,KAAK;gBACvC,MAAMC,IAAI,GAAGL,cAAc,CAACK,IAAI;gBAChC,MAAMC,OAAO,GAAGT,aAAa,CAACU,SAAS,CAAEC,YAAqB,IAAK;kBAClE,MAAMC,SAAS,GAAGD,YAAY,CAACE,SAAS,CAAC,CAAC;kBAC1C,OAAOL,IAAI,CAACM,KAAK,CAAEC,GAAW,IAAKH,SAAS,CAACG,GAAG,CAAC,KAAKT,UAAU,CAACS,GAAG,CAAC,CAAC;gBACvE,CAAC,CAAC;gBACF,IAAIN,OAAO,KAAK,CAAC,CAAC,EAAE;kBACnB,MAAMO,MAAM,GAAGC,eAAe,CAACC,cAAc,CAAC,CAAC,CAACC,IAAI,CAAEH,MAAM,IAAKA,MAAM,CAACI,IAAI,CAAC,kBAAkB,CAAC,KAAK,IAAI,CAAC;kBAC1G,IAAIJ,MAAM,EAAE;oBACX;oBACA;oBACAA,MAAM,CAACK,eAAe,CAAC,YAAY,EAAE,MAAM;sBAC1C1B,KAAK,CAAC2B,QAAQ,CAACb,OAAO,EAAE,IAAI,CAAC;oBAC9B,CAAC,CAAC;kBACH,CAAC,MAAM;oBACNd,KAAK,CAAC2B,QAAQ,CAACb,OAAO,EAAE,IAAI,CAAC;kBAC9B;kBACA,IAAI,CAACX,QAAQ,CAACyB,0BAA0B,CAAC,CAAC;gBAC3C;cACD;YACD,CAAC,CAAC,OAAOC,CAAC,EAAE;cACXC,GAAG,CAACC,KAAK,CAAC,8DAA8DF,CAAC,EAAE,CAAC;YAC7E;UACD;UACA;UACA,IAAI,CAACG,aAAa,CAACC,sBAAsB,CAAC,CAAC;QAC5C,CAAC;QAED,MAAM7C,YAAYA,CACjBV,KAAa,EACbE,WAAmB,EACnBC,WAiBC,EACkB;UACnB,MAAMJ,WAAW,GAAGC,KAAK,CAAC7C,aAAa,CAAC,CAAyB;;UAEjE;UACA,MAAM4C,WAAW,CAAC0B,QAAQ,CAAC+B,QAAQ,CAAC,CAAC;UAErC,OAAOzD,WAAW,CAAC0B,QAAQ,CACzBgC,YAAY,CAACvD,WAAW,EAAE;YAAE,GAAGC,WAAW;YAAE,GAAG;cAAEuD,eAAe,EAAE;YAAK;UAAE,CAAC,CAAC,CAC3EC,IAAI,CAAC5D,WAAW,CAAC6D,mBAAmB,CAACC,IAAI,CAAC9D,WAAW,EAAE1C,SAAS,CAAC,CAAC,CAClEyG,KAAK,CAAC/D,WAAW,CAAC6D,mBAAmB,CAACC,IAAI,CAAC9D,WAAW,CAAC,CAAC;QAC3D,CAAC;QACDgE,uBAAuBA,CACtBhE,WAAiC,EACjCiE,OAAgB,EAChBC,iBAAwD,EACxDC,cAAsB,EACtBC,eAAuB,EAChB;UACPF,iBAAiB,GAAG,OAAOA,iBAAiB,KAAK,QAAQ,GAAGG,IAAI,CAACC,KAAK,CAACJ,iBAAiB,CAAC,GAAGA,iBAAiB;UAC7G,MAAMK,WAAW,GAAGL,iBAAiB,CAACC,cAAc,CAAC;YACpDK,+BAA+B,GAAGP,OAAO,CAACQ,iBAAiB,CAAC,CAAE;YAC9DC,SAAS,GAAGF,+BAA+B,CACzCG,QAAQ,CAAC,CAAC,CACVC,YAAY,CAAC,CAAC,CACdC,WAAW,CAACL,+BAA+B,CAACM,OAAO,CAAC,CAAC,CAAC;UACzD,IAAIC,sBAAsB,GAAGhE,WAAW,CAACiE,wBAAwB,CAACT,WAAW,CAAC;YAC7EU,eAAe,GAAGjF,WAAW,CAACkF,oBAAoB,CAACV,+BAA+B,EAAEJ,eAAe,CAAC;YACpGe,8BAA8B;UAE/BF,eAAe,GAAGA,eAAe,CAACG,GAAG,CAAC,UAAUC,eAAwB,EAAE;YACzE,OAAO;cACNrC,IAAI,EAAEqC,eAAe;cACrBC,QAAQ,EAAEZ,SAAS,IAAIN,eAAe,GAAG,IAAIA,eAAe,EAAE,GAAG,EAAE;YACpE,CAAC;UACF,CAAC,CAAC;UACF,IAAIG,WAAW,IAAIA,WAAW,CAACgB,UAAU,EAAE;YAC1C,MAAMC,OAAO,GAAGjB,WAAW,CAACgB,UAAU,IAAIvF,WAAW,CAACyF,sBAAsB,CAACC,iBAAiB,CAACnB,WAAW,CAACgB,UAAU,CAAC;YACtH,IAAII,MAAM,CAACvD,IAAI,CAACoD,OAAO,CAAC,CAAC5G,MAAM,GAAG,CAAC,EAAE;cACpCuG,8BAA8B,GAAGK,OAAO;YACzC;UACD;UACA;UACA,IAAIT,sBAAsB,CAACnG,MAAM,KAAK,CAAC,EAAE;YACxC,MAAMgH,UAAU,GAAG3B,OAAO,CAAC4B,aAAa,CAAC,CAAC,CAAC9C,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAAC8C,MAAM,CAAC,CAAC,KAAK,mBAAmB,CAAC;YAChG,IAAIF,UAAU,EAAE;cACfb,sBAAsB,GAAG/E,WAAW,CAAC+F,8CAA8C,CAClFH,UAAU,CAACI,QAAQ,CAAC,CAAC,EACrBzB,WAAW,CAAC0B,cACb,CAAC;YACF;UACD;UAEA,IAAI1B,WAAW,IAAIA,WAAW,CAAC0B,cAAc,IAAI1B,WAAW,CAAC2B,MAAM,EAAE;YACpElG,WAAW,CAACyF,sBAAsB,CAACU,QAAQ,CAAC5B,WAAW,CAAC0B,cAAc,EAAE1B,WAAW,CAAC2B,MAAM,EAAE;cAC3FE,kBAAkB,EAAEnB,eAAe;cACnCoB,qBAAqB,EAAEtB,sBAAsB;cAC7CI,8BAA8B,EAAEA;YACjC,CAAC,CAAC;UACH;QACD,CAAC;QAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACE,MAAMmB,8BAA8BA,CACnCtG,WAAiC,EACjCuG,eAAuB,EACvBrG,QAAwB,EACxBsG,WAAmB,EACH;UAChB,OAAOxG,WAAW,CAACyF,sBAAsB,CAACa,8BAA8B,CAACtG,WAAW,EAAEuG,eAAe,EAAErG,QAAQ,EAAEsG,WAAW,CAAC;QAC9H,CAAC;QAEDC,gBAAgBA,CAA6BC,MAAsD,EAAQ;UAC1G;UACA,IAAI,CAACC,eAAe,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC;UACvC,IAAI,CAACC,iBAAiB,GAAG,IAAI;UAE7B,MAAMC,qBAAqB,GAAG,IAAI,CAAC3J,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,UAAU,CAAyB;UAClG,IACC1D,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC,IACzC,IAAI,CAACA,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC,CAACwG,aAAa,KAAK,MAAM,IACrDD,qBAAqB,CAACE,WAAW,CAAC,4BAA4B,CAAC,KAAK,KAAK,EACxE;YACD,MAAMC,WAAW,GAAGP,MAAM,CAACQ,YAAY,CAAC,YAAY,CAAC;YACrD,IAAI,CAACC,sBAAsB,CAAC,CAACF,WAAW,CAAC,CAAC;UAC3C;QACD,CAAC;QACDG,iBAAiB,EAAE,SAAAA,CAAA,EAA4C;UAC9D,IAAI,CAACT,eAAe,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC;QACxC,CAAC;QACDS,cAAc,EAAE,SAAAA,CAAA,EAA4C;UAC3D;UACAC,UAAU,CAAC,MAAM;YAChB,IAAI,CAACX,eAAe,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC;UACxC,CAAC,EAAE,IAAI,CAAC;QACT,CAAC;QACDW,oBAAoB,EAAE,SAAAA,CAAUvH,WAAiC,EAAEwH,aAA8B,EAAQ;UACxG,MAAMC,aAAa,GAAG,OAAOD,aAAa,KAAK,QAAQ,GAAGnD,IAAI,CAACC,KAAK,CAACkD,aAAa,CAAC,GAAGA,aAAa;UACnG,MAAME,WAAW,GAAG1H,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACwK,IAAI,CAAC,gBAAgB,CAAqB;UACpF,IAAIC,QAAQ;UACZ,IAAIX,WAAW;UACf,IAAIQ,aAAa,CAACI,SAAS,EAAE;YAC5BD,QAAQ,GAAG5H,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACwK,IAAI,CAACF,aAAa,CAACI,SAAS,CAAsB;YACnFZ,WAAW,GACVQ,aAAa,CAACK,YAAY,GACvB9H,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACwK,IAAI,CAACF,aAAa,CAACK,YAAY,CAAC,GACtDF,QAAQ,IAAIA,QAAQ,CAACG,cAAc,CAAC,CAAC,IAAIH,QAAQ,CAACG,cAAc,CAAC,CAAC,CAAC,CAAC,CAC/C;UAC1B,CAAC,MAAM,IAAIN,aAAa,CAACK,YAAY,EAAE;YACtCb,WAAW,GAAGjH,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACwK,IAAI,CAACF,aAAa,CAACK,YAAY,CAAyB;YAC5FF,QAAQ,GAAGX,WAAW,IAAKA,WAAW,CAACe,SAAS,CAAC,CAAuB;UACzE;UACA,IAAI,CAACJ,QAAQ,IAAI,CAACX,WAAW,IAAI,CAACW,QAAQ,CAACK,UAAU,CAAC,CAAC,IAAI,CAAChB,WAAW,CAACgB,UAAU,CAAC,CAAC,EAAE;YACrF,MAAMC,MAAM,GAAGC,gBAAgB,CAACnI,WAAW,CAAC,CAACoI,OAAO,CACnD,qCAAqC,EACrC9K,SAAS,EACT0C,WAAW,CAAC7C,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC,CAAC8H,SACrC,CAAC;YACDhF,GAAG,CAACC,KAAK,CAAC4E,MAAM,CAAC;YACjBI,UAAU,CAAChF,KAAK,CAAC4E,MAAM,CAAC;UACzB,CAAC,MAAM;YACNR,WAAW,CAACa,kBAAkB,CAACtB,WAAW,CAAChF,KAAK,CAAC,CAAC,CAAC;YACnD;YACAyF,WAAW,CAACc,YAAY,CAAC;cACxBC,OAAO,EAAEb,QAAQ;cACjBc,UAAU,EAAEzB;YACb,CAAC,CAAC;UACH;QACD,CAAC;QAED0B,mBAAmB,EAAE,SAAAA,CAAA,EAA4C;UAChE,MAAMC,IAAI,GAAG,IAAI,CAACzL,OAAO,CAAC,CAAC;UAC3B,MAAM0L,aAAa,GAAG9H,WAAW,CAACC,aAAa,CAAC4H,IAAI,CAAC;UACrD,MAAME,aAAa,GAAGF,IAAI,CAACjE,QAAQ,CAAC,UAAU,CAAC;UAC/C,MAAMoE,gCAAgC,GAAGD,aAAa,CACpDE,WAAW,CAAC,IAAI,CAACrC,eAAe,CAAC,CAAC,CAACsC,kCAAkC,CAAC,CAAC,CAAC,CACxEC,eAAe,CAAC,CAAE;UACpB;UACA,IAAI,CAACL,aAAa,IAAIE,gCAAgC,CAAC/B,WAAW,CAAC,yBAAyB,CAAC,KAAK,IAAI,EAAE;YACvG,MAAMmC,oBAAoB,GAAGC,SAAS,CAACC,eAAe,CAAC,CAAC,CACtDC,OAAO,CAAC,CAAC,CACTC,MAAM,CACLC,OAAgB,IAChBA,OAAO,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAACtM,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC,EAAEK,OAAO,CAAC,CAAC,IAAI0E,OAAO,CAACE,aAAa,CAAC,CAAC,KAAK,IAC3G,CAAC;YACF,IAAIP,oBAAoB,CAACvK,MAAM,KAAK,CAAC,EAAE;cACtCwK,SAAS,CAACO,cAAc,CAACR,oBAAoB,CAAC;YAC/C;UACD;UACAJ,gCAAgC,CAACa,WAAW,CAAC,yBAAyB,EAAE,KAAK,CAAC;UAC9E,IAAI,CAACjD,eAAe,CAAC,CAAC,CAACkD,WAAW,CAAC,CAAC;QACrC;MACD,CAAC;MAAA,OAAApL,KAAA;IAAA;IAAAqL,cAAA,CAAAxO,oBAAA,EAAAkD,eAAA;IAAA,IAAAuL,MAAA,GAAAzO,oBAAA,CAAA0O,SAAA;IAAAD,MAAA,CAptDDpD,eAAe,GAFf,SAEAA,eAAeA,CAACsD,GAAY,EAAgB;MAC3C,IAAIA,GAAG,EAAE;QACR;QACA,IAAI,CAACC,2BAA2B,GAAG,IAAI,CAACA,2BAA2B,IAAI,CAAC,CAAC;QAEzE,IAAI,CAAC,IAAI,CAACA,2BAA2B,CAACD,GAAG,CAAC,EAAE;UAC3C,IAAI,CAACC,2BAA2B,CAACD,GAAG,CAAC,GAAG,IAAIE,YAAY,CAAC,IAAI,EAAEF,GAAG,CAAC;QACpE;QACA,OAAO,IAAI,CAACC,2BAA2B,CAACD,GAAG,CAAC;MAC7C,CAAC,MAAM;QACN,IAAI,CAAC,IAAI,CAACG,YAAY,EAAE;UACvB,IAAI,CAACA,YAAY,GAAG,IAAID,YAAY,CAAC,IAAI,CAAC;QAC3C;QACA,OAAO,IAAI,CAACC,YAAY;MACzB;IACD,CAAC;IAAAL,MAAA,CAEDM,MAAM,GAAN,SAAAA,MAAMA,CAAA,EAAS;MACd7L,eAAA,CAAAwL,SAAA,CAAMK,MAAM,CAAArL,IAAA;MACZ,MAAM0I,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;;MAEtD;MACA,MAAMxD,qBAAqB,GAAG,IAAI,CAAC3J,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,UAAU,CAAyB;MAClGqC,qBAAqB,EAAE8C,WAAW,CAAC,2BAA2B,EAAE;QAAEW,IAAI,EAAE;MAAK,CAAC,CAAC;MAC/EzD,qBAAqB,EAAE8C,WAAW,CAAC,aAAa,EAAE;QACjDY,UAAU,EAAE,KAAK;QACjBC,KAAK,EAAE;MACR,CAAC,CAAC;MACF3D,qBAAqB,EAAE8C,WAAW,CAAC,aAAa,EAAE,IAAI,CAACc,sBAAsB,CAAC,CAAC,CAAC;MAChF5D,qBAAqB,EAAE8C,WAAW,CAAC,4BAA4B,EAAE,KAAK,CAAC;MACvE,IAAIlC,WAAW,CAACiD,oBAAoB,CAAC,CAAC,EAAE;QACvC;QACAjD,WAAW,CAACkD,WAAW,CAAC,2BAA2B,EAAE,IAAI,CAACC,gCAAgC,CAAC/G,IAAI,CAAC,IAAI,CAAC,CAAC;MACvG;MACA,IAAI,CAACP,aAAa,GAAG,IAAI,CAACpG,OAAO,CAAC,CAAC,CAACwK,IAAI,CAAC,8BAA8B,CAAkB;MACzF,IAAI,CAACmD,cAAc,GAAG1B,SAAS,CAACC,eAAe,CAAC,CAAC,CAAC0B,QAAQ,CAAC,GAAG,CAAC;MAC/D,IAAI,CAACD,cAAc,EAAEE,YAAY,CAAC,IAAI,CAACC,gBAAgB,EAAE,IAAI,CAAC;MAC9DnE,qBAAqB,EAAE8C,WAAW,CAAC,iBAAiB,EAAE,IAAI,CAAC;MAC3D9C,qBAAqB,EAAE8C,WAAW,CAAC,iBAAiB,EAAE,IAAI,CAAC;IAC5D,CAAC;IAAAG,MAAA,CAEDmB,MAAM,GAAN,SAAAA,MAAMA,CAAA,EAAS;MACd,IAAI,IAAI,CAAChB,2BAA2B,EAAE;QACrC,KAAK,MAAMD,GAAG,IAAItE,MAAM,CAACvD,IAAI,CAAC,IAAI,CAAC8H,2BAA2B,CAAC,EAAE;UAChE,IAAI,IAAI,CAACA,2BAA2B,CAACD,GAAG,CAAC,EAAE;YAC1C,IAAI,CAACC,2BAA2B,CAACD,GAAG,CAAC,CAACkB,OAAO,CAAC,CAAC;UAChD;QACD;QACA,OAAO,IAAI,CAACjB,2BAA2B;MACxC;MACA,IAAI,IAAI,CAACE,YAAY,EAAE;QACtB,IAAI,CAACA,YAAY,CAACe,OAAO,CAAC,CAAC;MAC5B;MACA,OAAO,IAAI,CAACf,YAAY;MAExB,MAAMgB,eAAe,GAAG,IAAI,CAAC7H,aAAa,GAAG,IAAI,CAACA,aAAa,CAAC6H,eAAe,GAAG,IAAI;MACtF,IAAIA,eAAe,IAAIA,eAAe,CAACC,MAAM,CAAC,CAAC,EAAE;QAChDD,eAAe,CAACE,KAAK,CAAC,CAAC;MACxB;MACA;MACA,MAAMpL,QAAQ,GAAG,IAAI,CAAC/C,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC;MACnD,IAAIvE,QAAQ,IAAIA,QAAQ,CAACqL,WAAW,CAAC,CAAC,EAAE;QACvCrL,QAAQ,CAACsL,YAAY,CAAC,KAAK,CAAC;MAC7B;MACA,IAAI,IAAI,CAACC,kBAAkB,CAACC,WAAW,CAAC,CAAC,EAAE;QAC1C,IAAI,CAACD,kBAAkB,CAACE,UAAU,CAAC,CAAC,CAAC,CAAC;MACvC;MACA,IAAI,CAACb,cAAc,EAAEc,YAAY,CAAC,IAAI,CAACX,gBAAgB,EAAE,IAAI,CAAC;IAC/D;;IAEA;AACD;AACA;AACA,OAHC;IAAAlB,MAAA,CAIAkB,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAA,EAAS;MACxB,MAAMb,YAAY,GAAG,IAAI,CAACzD,eAAe,CAAC,CAAC;MAC3C,MAAMiC,IAAI,GAAG,IAAI,CAACzL,OAAO,CAAC,CAAC;MAC3B,MAAM0O,QAAQ,GAAGzC,SAAS,EAAEC,eAAe,CAAC,CAAC,CAC3CC,OAAO,CAAC,CAAC,CACTC,MAAM,CAAEC,OAAgB,IAAK;QAC7B,OAAOA,OAAO,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,KAAKb,IAAI,CAACnE,iBAAiB,CAAC,CAAC,EAAEK,OAAO,CAAC,CAAC;MACvE,CAAC,CAAC;MAEH,IAAIsF,YAAY,EAAE;QACjBA,YAAY,CAAC0B,aAAa,CAACD,QAAQ,EAAE,SAAS,CAAC;MAChD;IACD,CAAC;IAAA9B,MAAA,CAEDlI,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAACkK,MAAa,EAAoB;MACjD,OAAOA,MAAM,IAAIA,MAAM,CAACC,aAAa,CAAC,CAAC;IACxC;;IAEA;AACD;AACA;AACA,OAHC;IAAAjC,MAAA,CAIQkC,kCAAkC,GAA1C,SAAQA,kCAAkCA,CAACC,WAAmC,EAAQ;MACrF,MAAMC,oBAAoB,GAAGA,CAAC/K,KAAY,EAAEgL,qBAA2C,KAAW;QACjG,MAAMC,MAAM,GAAG,CAAC,GAAGD,qBAAqB,CAACE,SAAS,CAAC,CAAC,EAAE,GAAGF,qBAAqB,CAACG,aAAa,CAAC,CAAC,CAAC;QAC/F,IAAIF,MAAM,CAACzN,MAAM,KAAK,CAAC,EAAE;UACxB,MAAM2C,KAAK,GAAG,IAAI,CAACiL,kBAAkB,CAACH,MAAM,CAAC,CAAC,CAAoB,CAAC;UACnE,IAAI,CAAC9K,KAAK,EAAE;YACX;UACD;UACA,MAAMkL,SAAS,GAAGlL,KAAK,CAACmL,GAAG,CAAQ,kBAAkB,CAAC,IAAKnL,KAAK,CAACoL,OAAO,CAAC,CAAmB;UAC5F,MAAMtL,QAAQ,GAAGE,KAAK,CAACyG,SAAS,CAAC,CAAC,EAAE0E,GAAG,CAAW,8BAA8B,CAAC,GAC7EnL,KAAK,CAACyG,SAAS,CAAC,CAAC,GAClB1K,SAAS;UACZ,IACCmP,SAAS,KACRA,SAAS,EAAEC,GAAG,CAAC,gCAAgC,CAAC,IAAID,SAAS,EAAEC,GAAG,CAAC,gCAAgC,CAAC,CAAC,IACtGrL,QAAQ,EAAEuL,kBAAkB,CAAC,CAAC,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,EAC7D;YACD;YACAV,qBAAqB,CAACW,aAAa,CAAC,yCAAyC,CAAC;YAC9EX,qBAAqB,CAACY,WAAW,CAAC,oBAAoB,EAAEb,oBAAoB,EAAE,IAAI,CAAC;UACpF;QACD;MACD,CAAC;MACD,KAAK,IAAIc,eAAe,GAAGf,WAAW,CAACtN,MAAM,GAAG,CAAC,EAAEqO,eAAe,IAAI,CAAC,EAAEA,eAAe,EAAE,EAAE;QAC3F,IAAIf,WAAW,CAACe,eAAe,CAAC,CAAChF,UAAU,CAAC,CAAC,EAAE;UAC9C,MAAMmE,qBAAqB,GAAGF,WAAW,CAACe,eAAe,CAAC;UAC1D;UACAb,qBAAqB,CAACxB,WAAW,CAAC,oBAAoB,EAAEwB,qBAAqB,EAAED,oBAAoB,EAAE,IAAI,CAAC;UAC1G;QACD;MACD;IACD;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAApC,MAAA,CAKQyC,kBAAkB,GAA1B,SAAQA,kBAAkBA,CAACU,KAAsB,EAAqB;MACrE,MAAML,OAAO,GAAGK,KAAK,CAAC1L,OAAO;MAC7B,IAAIH,QAA8B;MAClC,IAAI6L,KAAK,CAACR,GAAG,CAAC,sDAAsD,CAAC,EAAE;QACtE;QACA;QACA,IAAIG,OAAO,CAACH,GAAG,CAAC,aAAa,CAAC,IAAIG,OAAO,CAAC7J,IAAI,CAAC,4BAA4B,CAAC,EAAE;UAC7E3B,QAAQ,GAAGwL,OAAO,CAAC7J,IAAI,CAAC,mBAAmB,CAAC;QAC7C,CAAC,MAAM,IAAI6J,OAAO,CAACH,GAAG,CAAC,8BAA8B,CAAC,EAAE;UACvDrL,QAAQ,GAAGwL,OAAmB;QAC/B;QACA,IAAIxL,QAAQ,EAAE;UACb,OAAOA,QAAQ,CAACG,OAAO;QACxB;MACD;MACA,OAAOlE,SAAS;IACjB,CAAC;IAAAyM,MAAA,CAEDoD,iBAAiB,GAAjB,SAAAA,iBAAiBA,CAAA,EAAS;MACzBC,cAAc,CAACpD,SAAS,CAACmD,iBAAiB,CAACE,KAAK,CAAC,IAAI,CAAC;MACtD;MACA,IAAI,IAAI,CAACpN,KAAK,CAACM,WAAW,CAAC,CAAC,EAAE+M,yBAAyB,IAAIC,YAAY,CAAC3I,YAAY,CAAC,CAAC,KAAKtH,SAAS,EAAE;QACrGiQ,YAAY,CAACC,YAAY,CAAC,IAAI,CAACC,eAAe,CAAC,CAAC,CAAC7I,YAAY,CAAC,CAAC,CAAC;MACjE;IACD,CAAC;IAAAmF,MAAA,CAED2D,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAA,EAAS;MACxB,IAAIxB,WAAmC;MACvC,IAAI,IAAI,CAAC5B,2BAA2B,CAAC,CAAC,CAACqD,gBAAgB,CAAC,CAAC,EAAE;QAC1D,MAAMC,QAAQ,GAAG,IAAI,CAACtD,2BAA2B,CAAC,CAAC,CAACuD,WAAW,CAAC,CAAC;QACjE,KAAK,MAAMpF,OAAO,IAAImF,QAAQ,EAAE;UAC/B1B,WAAW,GAAGzD,OAAO,CAACV,cAAc,CAAC,CAAC;UACtC,IAAI,CAACkE,kCAAkC,CAACC,WAAW,CAAC;QACrD;MACD,CAAC,MAAM;QACNA,WAAW,GAAG,IAAI,CAAC4B,kBAAkB,CAAC,CAAC;QACvC,IAAI,CAAC7B,kCAAkC,CAACC,WAAW,CAAC;MACrD;IACD,CAAC;IAAAnC,MAAA,CAEDgE,gBAAgB,GAAhB,SAAAA,gBAAgBA,CAAC7N,QAAwB,EAAyC;MAAA,IAAvCE,WAA0B,GAAAzB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAArB,SAAA,GAAAqB,SAAA,MAAG,CAAC,CAAC;MACzE;MACA,MAAMqP,OAAO,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC;QACjCvG,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;QAChDxD,qBAAqB,GAAG,IAAI,CAAC3J,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,UAAU,CAAyB;QAC5FyJ,cAAc,GAAG,IAAI,CAAC/Q,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,UAAU,CAAC;QACpDwJ,YAAY,GAAGrH,qBAAqB,CAACE,WAAW,CAAC,aAAa,CAAC;MAChE,IAAIoH,gBAAgB;MACpBD,YAAY,CAACE,IAAI,CAAC,OAAO,CAAC;MAC1B,IAAIjO,WAAW,CAACkO,MAAM,KAAKC,gBAAgB,CAACC,cAAc,EAAE;QAC3D,IAAI,CAACC,iBAAiB,CAAC,CAAC;MACzB;MACA,MAAMC,SAAS,GAAGhH,WAAW,CAACjD,iBAAiB,CAAC,CAAmB;MACnE,IACCiK,SAAS,IACTA,SAAS,CAACC,iBAAiB,CAAC,CAAC,IAC7B,CAACR,YAAY,CAACS,IAAI,CAACF,SAAS,CAAC/J,QAAQ,CAAC,CAAC,CAACgK,iBAAiB,CAAC7K,IAAI,CAAC4K,SAAS,CAAC/J,QAAQ,CAAC,CAAC,CAAC,CAAC,EACpF;QACD;AACH;AACA;;QAEG+J,SAAS,CAACG,UAAU,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC;MACtC;;MAEA;MACA;MACA,KAAK,MAAMC,IAAI,IAAIf,OAAO,EAAE;QAC3BI,gBAAgB,GAAGW,IAAI,CAACC,cAAc,CAAC,CAAC;QACxC,IAAIZ,gBAAgB,EAAE;UACrBA,gBAAgB,CAACa,iBAAiB,CAAC,IAAI,CAAC;QACzC;MACD;;MAEA;MACA,MAAMC,wBAAwB,GAAG,SAAAA,CAAA,EAAkB;QAClD,IAAI,CAAExH,WAAW,CAA0CyH,gBAAgB,GAAG,CAAC,IAAI,CAAC/O,WAAW,CAACgP,gBAAgB,EAAE;UACjH1H,WAAW,CAACa,kBAAkB,CAAC,IAAyB,CAAC;QAC1D;MACD,CAAC;MACDb,WAAW,CAACzE,eAAe,CAAC,oBAAoB,EAAEiM,wBAAwB,CAAC;MAC3E;MACA,IAAI,CAACG,qBAAqB,CAACnP,QAAQ,EAAEgO,cAAc,EAAE9N,WAAW,EAAEkP,WAAW,CAAC;MAE9E,IAAI5H,WAAW,CAACiD,oBAAoB,CAAC,CAAC,EAAE;QACvC,IAAI,CAAC4E,sBAAsB,CAAC7H,WAAW,CAAC;MACzC;MAEA,IAAI,IAAI,CAAC8H,WAAW,CAACC,oBAAoB,CAAC,CAAC,IAAIrP,WAAW,CAACsP,eAAe,EAAE;QAC3E,MAAMzP,KAAK,GAAG,IAAI,CAAC9C,OAAO,CAAC,CAAC;QAC5B,MAAMwS,aAAa,GAAI1P,KAAK,CAAC+H,SAAS,CAAC,CAAC,CAAwC4H,UAAU,CAAC5H,SAAS,CAAC,CAAC;QACtG,IAAI2H,aAAa,EAAE;UAClB,IAAI,CAACH,WAAW,CAACK,eAAe,CAAC,CAAC;UACjCF,aAAa,CAA8CD,eAAe,CAAC,CAAC,CAAC,CAAC;QAChF;MACD;IACD,CAAC;IAAA3F,MAAA,CAEO+F,qBAAqB,GAA7B,SAAQA,qBAAqBA,CAAA,EAA2B;MACvD,MAAMC,kBAAkB,GAAG,IAAI,CAACzF,2BAA2B,CAAC,CAAC,CAAC0F,sBAAsB,CAAC,CAAC;MACtF,OAAOD,kBAAkB,GAAGE,UAAU,CAACC,SAAS,CAACH,kBAAkB,CAAC,GAAGzS,SAAS;IACjF,CAAC;IAAAyM,MAAA,CAEDoG,yBAAyB,GAAzB,SAAAA,yBAAyBA,CAACzI,WAA6B,EAA0B;MAChF,IAAI0I,sBAAsB;MAC1B,MAAMC,QAAQ,GAAG3I,WAAW,CAAC4I,cAAc,CAAC,CAAC,IAAK5I,WAAW,CAAC4I,cAAc,CAAC,CAAC,CAAkCC,UAAU,CAAC,CAAC;MAC5H,IAAIF,QAAQ,IAAIA,QAAQ,CAACzR,MAAM,EAAE;QAChCwR,sBAAsB,GAAGC,QAAQ,CAACtN,IAAI,CAAC,UAAUyN,OAAgB,EAAE;UAClE;UACA;UACA;UACA,IACCA,OAAO,CAAC9D,GAAG,CAAW,8BAA8B,CAAC,IACrD8D,OAAO,CAAC9D,GAAG,CAAsB,sCAAsC,CAAC,EACvE;YACD;YACA;YACA,OAAO8D,OAAO,CAACvI,UAAU,CAAC,CAAC;UAC5B,CAAC,MAAM,IAAI,CAACuI,OAAO,CAAC9D,GAAG,CAAgB,2BAA2B,CAAC,IAAI,CAAC8D,OAAO,CAAC9D,GAAG,CAAgB,qBAAqB,CAAC,EAAE;YAC1H,OAAO8D,OAAO,CAACvI,UAAU,CAAC,CAAC,IAAKuI,OAAO,CAAYC,UAAU,CAAC,CAAC;UAChE;QACD,CAAC,CAAC;MACH;MACA,OAAOL,sBAAsB;IAC9B;;IAEA;AACD;AACA;AACA,OAHC;IAAArG,MAAA,CAIAwF,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAA6BmB,UAA4B,EAAQ;MACtF,MAAMC,SAAS,GAAGD,UAAU,CAAC7C,WAAW,CAAC,CAAC;MAC1C,MAAM+C,cAAc,GAAGF,UAAU,CAAC/C,gBAAgB,CAAC,CAAC;MACpD,IAAIkD,KAAK,GAAG,CAAC,CAAC,CAAC;MACf,MAAMhI,aAAa,GAAG9H,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC;MAC/D,MAAM2T,eAAe,GAAG,IAAI,CAAC3T,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC,CAACwQ,qBAAqB;MAC1E,KAAK,IAAIC,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAGL,SAAS,CAAC/R,MAAM,EAAEoS,QAAQ,EAAE,EAAE;QAC/D,MAAMpJ,QAAQ,GAAG+I,SAAS,CAACK,QAAQ,CAAC;QACpC,MAAMC,YAAY,GAAGrJ,QAAQ,CAACG,cAAc,CAAC,CAAC;QAC9C,KAAK,IAAImJ,WAAW,GAAG,CAAC,EAAEA,WAAW,GAAGD,YAAY,CAACrS,MAAM,EAAEsS,WAAW,EAAE,EAAEL,KAAK,EAAE,EAAE;UACpF;UACA,IAAIA,KAAK,GAAG,CAAC,IAAKD,cAAc,KAAKI,QAAQ,GAAG,CAAC,IAAKA,QAAQ,KAAK,CAAC,IAAI,CAACF,eAAe,IAAI,CAACjI,aAAc,CAAE,EAAE;YAC9G,MAAM5B,WAAW,GAAGgK,YAAY,CAACC,WAAW,CAAC;YAC7C,IAAIjK,WAAW,CAACjE,IAAI,CAAC,CAAC,CAACmO,mBAAmB,KAAK,MAAM,EAAE;cACtD;cACAlK,WAAW,CAACgI,iBAAiB,CAAC3R,SAAS,CAAC;cACxC,MAAM+O,MAAM,GAAGpF,WAAW,CAACqF,SAAS,CAAC,CAAsB;cAC3D;cACAD,MAAM,CAAC+E,OAAO,CAAElE,KAAK,IAAKA,KAAK,CAAC+B,iBAAiB,CAAC,IAAI,CAAC,CAAC;cACxDhI,WAAW,CAACsF,aAAa,CAAC,CAAC,CAAC6E,OAAO,CAAEC,QAAQ,IAAKA,QAAQ,CAACpC,iBAAiB,CAAC,IAAI,CAAC,CAAC;cACnFhI,WAAW,CAACsJ,UAAU,CAAC,CAAC,CAACa,OAAO,CAAEE,OAAO,IAAKA,OAAO,CAACrC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC/E;UACD;QACD;MACD;IACD,CAAC;IAAAlF,MAAA,CAEDwH,0CAA0C,GAA1C,SAAAA,0CAA0CA,CAACN,YAAoC,EAAyB;MACvG,IAAIA,YAAY,EAAE;QACjB,KAAK,MAAMvI,UAAU,IAAIuI,YAAY,EAAE;UACtC,MAAMO,OAAO,GAAG9I,UAAU,CAAC4D,SAAS,CAAC,CAAuB;UAE5D,IAAIkF,OAAO,EAAE;YACZ,KAAK,MAAMC,YAAY,IAAID,OAAO,EAAE;cACnC,IAAIE,eAAe;cAEnB,IAAID,YAAY,CAAC/E,GAAG,CAAO,yBAAyB,CAAC,EAAE;gBACtDgF,eAAe,GAAGD,YAAY,CAACE,iBAAiB,CAAC,CAAC;cACnD,CAAC,MAAM,IAAIF,YAAY,CAACG,UAAU,IAAIH,YAAY,CAACG,UAAU,CAAC,CAAC,EAAElF,GAAG,CAAO,yBAAyB,CAAC,EAAE;gBACtGgF,eAAe,GAAID,YAAY,CAACG,UAAU,CAAC,CAAC,CAAUD,iBAAiB,CAAC,CAAC;cAC1E,CAAC,MAAM,IAAIF,YAAY,EAAEG,UAAU,GAAG,CAAC,EAAElF,GAAG,CAAU,4BAA4B,CAAC,EAAE;gBACpFgF,eAAe,GAAKD,YAAY,CAACG,UAAU,CAAC,CAAC,CAAaA,UAAU,CAAC,CAAC,CAAUD,iBAAiB,CAAC,CAAC;cACpG;cACA,IAAID,eAAe,EAAE;gBACpB,KAAK,MAAMG,aAAa,IAAIH,eAAe,EAAE;kBAC5C,MAAMI,aAAa,GAAGD,aAAa,CAACE,eAAe,CAAC,CAAC;kBACrD,IAAID,aAAa,EAAE;oBAClB,KAAK,MAAME,WAAW,IAAIF,aAAa,EAAE;sBACxC,MAAMG,OAAO,GAAGD,WAAW,CAACE,SAAS,CAAC,CAAgB;;sBAEtD;sBACA;sBACA,IAAI;wBACH,IAAID,OAAO,CAAC,CAAC,CAAC,CAACE,WAAW,IAAIF,OAAO,CAAC,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,IAAI,CAACF,OAAO,CAAC,CAAC,CAAC,CAACjM,QAAQ,CAAC,CAAC,EAAE;0BACjF,OAAOiM,OAAO,CAAC,CAAC,CAAC;wBAClB;sBACD,CAAC,CAAC,OAAO3O,KAAK,EAAE;wBACfD,GAAG,CAAC+O,KAAK,CAAC,mDAAmD9O,KAAK,EAAE,CAAC;sBACtE;oBACD;kBACD;gBACD;cACD;YACD;UACD;QACD;MACD;MACA,OAAOhG,SAAS;IACjB;;IAEA;AACD;AACA;AACA,OAHC;IAAAyM,MAAA,CAIA5C,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAAC8J,YAAoC,EAAQ;MAClE3J,UAAU,CACT,YAA4C;QAC3C;QACA,MAAMI,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;QACtD,MAAM+H,eAAe,GAAG,IAAI,CAACd,0CAA0C,CAACN,YAAY,CAAC;QACrF,IAAIqB,aAAa;QACjB,IAAID,eAAe,EAAE;UACpBC,aAAa,GAAID,eAAe,CAA0D7Q,OAAO,CAAC+Q,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;QACtH,CAAC,MAAM;UACND,aAAa,GAAG,IAAI,CAACxC,qBAAqB,CAAC,CAAC,IAAI,IAAI,CAACK,yBAAyB,CAACzI,WAAW,CAAC;QAC5F;QACA,IAAI4K,aAAa,EAAE;UAClB,MAAME,SAAS,GAAGF,aAAa,CAACG,YAAY,CAAC,CAA2B;UACxED,SAAS,CAACE,UAAU,GAAG;YAAEC,MAAM,EAAE;UAAK,CAAC;UACvC,IAAIL,aAAa,CAAC5F,GAAG,CAAC,6BAA6B,CAAC,EAAE;YACrD4F,aAAa,GAAGA,aAAa,CAACtK,SAAS,CAAC,CAAC;UAC1C;UACAsK,aAAa,CAACM,KAAK,CAACJ,SAAS,CAAC;QAC/B;MACD,CAAC,CAAC1O,IAAI,CAAC,IAAI,CAAC,EACZ,CACD,CAAC;IACF,CAAC;IAAAiG,MAAA,CAEDc,gCAAgC,GAAhC,SAAAA,gCAAgCA,CAACnE,MAAsD,EAAQ;MAC9F,MAAMO,WAAW,GAAGP,MAAM,CAACQ,YAAY,CAAC,YAAY,CAAC;MACrD,MAAMmF,MAAM,GAAGpF,WAAW,CAACqF,SAAS,CAAC,CAAsB;MAC3DD,MAAM,CAAC+E,OAAO,CAAElE,KAAK,IAAKA,KAAK,CAAC+B,iBAAiB,CAAC3R,SAAS,CAAC,CAAC;MAC7D2J,WAAW,CAACsF,aAAa,CAAC,CAAC,CAAC6E,OAAO,CAAEC,QAAQ,IAAKA,QAAQ,CAACpC,iBAAiB,CAAC3R,SAAS,CAAC,CAAC;MACxF2J,WAAW,CAACsJ,UAAU,CAAC,CAAC,CAACa,OAAO,CAAEE,OAAO,IAAKA,OAAO,CAACrC,iBAAiB,CAAC3R,SAAS,CAAC,CAAC;IACpF,CAAC;IAAAyM,MAAA,CAED8I,wBAAwB,GAAxB,SAAAA,wBAAwBA,CAAC3S,QAAwB,EAAQ;MACxD,IAAI,CAAC4S,cAAc,CAACC,wBAAwB,CAAC,CAAC;;MAE9C;MACA,MAAMC,OAAO,GAAGA,CAAA,KAAY;QAC3B,MAAMC,UAAU,GAAGC,QAAQ,CAACC,GAAG;QAC/BC,OAAO,CAACC,IAAI,CAAC,CAAC;QACd;QACA;QACA/L,UAAU,CAAC,MAAM;UAChB,IAAI4L,QAAQ,CAACC,GAAG,KAAKF,UAAU,EAAE;YAChC,IAAI,CAACK,QAAQ,CAACC,uBAAuB,CAACrT,QAAQ,CAAC;UAChD;QACD,CAAC,EAAE,GAAG,CAAC;MACR,CAAC;MAED,IAAI,IAAI,CAACuN,eAAe,CAAC,CAAC,CAAC+F,cAAc,CAAC,CAAC,CAACC,yBAAyB,CAAC,CAAC,EAAE;QACxE;QACAL,OAAO,CAACC,IAAI,CAAC,CAAC;MACf,CAAC,MAAM,IAAI,CAAC,IAAI,CAAClW,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC,EAAE;QAC/C;QACA,IAAI,CAACgJ,eAAe,CAAC,CAAC,CACpBiG,gBAAgB,CAAC,CAAC,CAClBC,iBAAiB,CAACrW,SAAS,CAAC,CAC5BsG,IAAI,CAACoP,OAAO,CAAC,CACbjP,KAAK,CAAEX,CAAC,IAAK;UACbC,GAAG,CAACuQ,OAAO,CAAC,qCAAqC,EAAExQ,CAAC,CAAC;QACtD,CAAC,CAAC;MACJ,CAAC,MAAM;QACNyQ,KAAK,CAACC,yCAAyC,CAC9Cd,OAAO,EACPe,QAAQ,CAAC/J,SAAS,EAClB9J,QAAQ,EACR,IAAI,EACJ,IAAI,EACJ2T,KAAK,CAACG,cAAc,CAACC,cACtB,CAAC;MACF;IACD;;IAEA;IAAA;IAAAlK,MAAA,CACAmK,eAAe,GAAf,SAAAA,eAAeA,CAACC,mBAAwC,EAAE/T,WAAsC,EAAQ;MACvG,MAAMwI,IAAI,GAAG,IAAI,CAACzL,OAAO,CAAC,CAAC;MAC3B,MAAMqD,SAAS,GAAGoI,IAAI,EAAErI,WAAW,CAAC,CAAC,EAAEC,SAAS;MAChD,MAAMkH,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;MACtD,MAAM0D,OAAO,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC;MAElC,IAAI,CAACmG,YAAY,CAACC,wBAAwB,CAAC,CAAC;;MAE5C;MACA;MACA,MAAMC,cAAc,GAAG5M,WAAW,CAACjD,iBAAiB,CAAC,CAAmB;MAExE,IAAI8P,WAAyB,GAAG,EAAE;MAClC7M,WAAW,CAACmG,WAAW,CAAC,CAAC,CAACuD,OAAO,CAAC,UAAUxJ,QAA2B,EAAE;QACxEA,QAAQ,CAACG,cAAc,CAAC,CAAC,CAACqJ,OAAO,CAAC,UAAUnK,WAAiC,EAAE;UAC9EsN,WAAW,GAAGxT,WAAW,CAACyT,aAAa,CAACvN,WAAW,EAAEsN,WAAW,CAAC;QAClE,CAAC,CAAC;MACH,CAAC,CAAC;;MAEF;MACA;MACA;MACA;MACA;;MAEAvG,OAAO,CAACoD,OAAO,CAAC,UAAUrF,MAAa,EAAE;QACxC,MAAMjF,qBAAqB,GAAGiF,MAAM,CAACtH,iBAAiB,CAAC,UAAU,CAAC;QAClE,IAAIqC,qBAAqB,EAAE;UAC1BA,qBAAqB,CAAC8C,WAAW,CAAC,0BAA0B,EAAE,CAAC,CAAC,CAAC;UACjE9C,qBAAqB,CAAC8C,WAAW,CAAC,2BAA2B,EAAE,CAAC,CAAC,CAAC;UAElE2K,WAAW,GAAGxT,WAAW,CAACyT,aAAa,CAACzI,MAAM,EAAEwI,WAAW,CAAC;;UAE5D;UACA;UACA;UACA;UACA,MAAME,gBAAgB,GAAG1I,MAAM,CAACC,aAAa,CAAC,CAAC;UAC/C,IAAIyI,gBAAgB,EAAE;YACrB,IAAIC,WAAW,CAACC,wBAAwB,CAACF,gBAAgB,CAAC9P,QAAQ,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC,EAAE;cACrF;cACC6P,gBAAgB,CAAsDG,uBAAuB,CAAC,EAAE,CAAC;YACnG;UACD;UACA;;UAEA;UACA;UACA,MAAMvT,QAAQ,GAAG0K,MAAM,CAAC/D,SAAS,CAAC,CAAa;UAC/C,MAAM6M,4BAA4B,GAAGxT,QAAQ,GAAGgD,IAAI,CAACC,KAAK,CAACjD,QAAQ,CAACyT,eAAe,CAACC,qBAAqB,CAAC,GAAG,CAAC,CAAC;UAE/GC,aAAa,CAACC,mBAAmB,CAACnO,qBAAqB,EAAE+N,4BAA4B,EAAE,EAAE,EAAE,OAAO,CAAC;UAEnG9I,MAAM,CAACmJ,cAAc,CAAC,CAAC;QACxB;MACD,CAAC,CAAC;MACF;MACA,MAAMC,gBAAgB,GAAGzN,WAAW,CAAC4I,cAAc,CAAC,CAAiC;MACrF,IAAI8E,iBAA+B,GAAG,EAAE;MACxCA,iBAAiB,GAAGrU,WAAW,CAACyT,aAAa,CAACW,gBAAgB,EAAEC,iBAAiB,CAAC;MAClFb,WAAW,GAAGA,WAAW,CAACc,MAAM,CAACD,iBAAiB,CAAC;MACnDrU,WAAW,CAACuU,sCAAsC,CAACf,WAAW,EAAE,IAAI,CAACpX,OAAO,CAAC,CAAC,CAAC;MAE/E,IAAIoY,MAAkB;QACrBC,aAA+B,GAAGC,OAAO,CAACC,OAAO,CAAC,CAAC;;MAEpD;MACA;AACF;AACA;MACE,MAAMC,wBAAwB,GAAI5J,MAAa,IAAW;QACzD,MAAM6J,QAAQ,GAAG,IAAI,CAAC/T,gBAAgB,CAACkK,MAAM,CAAC;UAC7C8J,wBAAwB,GAAG,SAAAA,CAAA,EAAkB;YAC5CC,WAAW,CAACC,qBAAqB,CAChChK,MAAM,CAACiD,cAAc,CAAC,CAAC,EACvB4G,QAAQ,CAAC9Q,OAAO,CAAC,CAAC,EAClB8Q,QAAQ,CAACI,UAAU,CAAC,CAAC,EACrBT,MAAM,EACNC,aACD,CAAC;UACF,CAAC;QAEF,IAAI,CAACI,QAAQ,EAAE;UACdvS,GAAG,CAACC,KAAK,CAAC,uCAAuCyI,MAAM,CAAC9J,KAAK,CAAC,CAAC,EAAE,CAAC;UAClE;QACD;QAEA,IAAI2T,QAAQ,CAACI,UAAU,CAAC,CAAC,EAAE;UAC1BH,wBAAwB,CAAC,CAAC;QAC3B,CAAC,MAAM;UACN,MAAMI,cAAc,GAAG,SAAAA,CAAA,EAAkB;YACxC,IAAIL,QAAQ,CAACI,UAAU,CAAC,CAAC,EAAE;cAC1BH,wBAAwB,CAAC,CAAC;cAC1BD,QAAQ,CAAChK,YAAY,CAACqK,cAAc,CAAC;YACtC;UACD,CAAC;UACDL,QAAQ,CAAC5K,YAAY,CAACiL,cAAc,CAAC;QACtC;MACD,CAAC;MAED,IAAI3B,cAAc,EAAE;QACnBiB,MAAM,GAAGjB,cAAc,CAAC3P,QAAQ,CAAC,CAAC;;QAElC;QACA6Q,aAAa,GAAG,IAAI,CAAC9T,QAAQ,CAACwU,wBAAwB,CAAC5B,cAAc,CAAC;QAEtE,IAAII,WAAW,CAACyB,6BAA6B,CAACZ,MAAM,CAAC3Q,YAAY,CAAC,CAAC,CAAC,EAAE;UACrE4Q,aAAa,CACX5R,IAAI,CAAC,MAAM;YACX,IAAI7C,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC,EAAE;cAC9C,IAAI,CAACsO,kBAAkB,CAAC2K,OAAO,CAAC,CAAC;YAClC,CAAC,MAAM,IAAI,IAAI,CAAC3K,kBAAkB,CAACC,WAAW,CAAC,CAAC,EAAE;cACjD,IAAI,CAACD,kBAAkB,CAACE,UAAU,CAAC,CAAC,CAAC,CAAC;YACvC;YACA;UACD,CAAC,CAAC,CACD5H,KAAK,CAAC,UAAUsS,MAAe,EAAE;YACjChT,GAAG,CAACC,KAAK,CAAC,4CAA4C,EAAE+S,MAAgB,CAAC;UAC1E,CAAC,CAAC;QACJ;QACA;QACA,IAAI,CAACC,kBAAkB,CAAC,CAAC;;QAEzB;QACA,MAAMV,QAAQ,GAAItB,cAAc,CAACzF,UAAU,IAAIyF,cAAc,CAACzF,UAAU,CAAC,CAAC,IAAKyF,cAAc;;QAE7F;QACA,IAAI,IAAI,CAACiC,cAAc,KAAKX,QAAQ,EAAE;UACrCA,QAAQ,CAAChL,WAAW,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,IAAI,CAAClJ,QAAQ,CAAC8U,eAAe,EAAE,IAAI,CAAC;UAC1E,IAAI,CAACD,cAAc,GAAGX,QAAQ;QAC/B;QAEA5H,OAAO,CAACoD,OAAO,CAAC,UAAUrF,MAAa,EAAQ;UAC9C;UACA0K,UAAU,CAACC,SAAS,CAAC3K,MAAM,CAAC,CAC1BnI,IAAI,CAAC+R,wBAAwB,CAAC,CAC9B5R,KAAK,CAAC,UAAUsS,MAAe,EAAE;YACjChT,GAAG,CAACC,KAAK,CAAC,+CAA+C,EAAE+S,MAAgB,CAAC;UAC7E,CAAC,CAAC;QACJ,CAAC,CAAC;;QAEF;QACC3O,WAAW,CAA+DiP,gCAAgC,CAAC,CAAC;;QAE7G;QACA3B,aAAa,CAAC4B,uCAAuC,CAAC,IAAI,CAACzZ,OAAO,CAAC,CAAC,CAAC;MACtE;MACA;MACA;MACA,IAAIqD,SAAS,IAAIA,SAAS,KAAK,CAAC,EAAE;QACjCgV,aAAa,EAAE5R,IAAI,CAAC,MAAM;UACzB,IAAI,CAACiT,eAAe,CAACC,oBAAoB,CAAC,CAAC;UAE3C;QACD,CAAC,CAAC;MACH;MACA,IAAI,CAACC,qBAAqB,CAAC,EAAE,CAAC;MAC9B,IAAI,CAACC,2BAA2B,CAAC5W,WAAW,EAAE6W,oBAAoB,CAAC;MACnE,IAAI,CAACC,iCAAiC,CAAC,CAAC;MAExC,MAAMC,aAAa,GAAG,IAAI,CAAC1J,eAAe,CAAC,CAAC,CAAC2J,kBAAkB,CAAC,CAAC,CAACD,aAAa,CAACvO,IAAI,CAAC3G,KAAK,CAAC,CAAC,EAAE2G,IAAI,CAAC;MACnG,IAAI,CAACyO,SAAS,CAACC,OAAO,CAACH,aAAa,CAAC;IACtC;;IAEA;AACD;AACA;AACA,OAHC;IAAApN,MAAA,CAIMgN,qBAAqB,GAA3B,eAAMA,qBAAqBA,CAACQ,KAAoB,EAAiB;MAChE,MAAM,IAAI,CAACC,oBAAoB,CAACC,qBAAqB,CAACF,KAAK,CAAC;MAC5D,IAAIA,KAAK,CAAC3Y,MAAM,GAAG,CAAC,EAAE;QACrB,MAAM8Y,UAAU,GAAG,IAAI,CAACF,oBAAoB,CAACG,WAAW,CAACJ,KAAK,CAAC;QAC/D,MAAMK,WAAW,GAAG,IAAI,CAACnK,eAAe,CAAC,CAAC,CAACxL,KAAK,CAAC,CAAC;QAClD,IAAI,CAACwL,eAAe,CAAC,CAAC,CAACoK,8BAA8B,CAAC,CAAC,CAACC,8BAA8B,CAACJ,UAAU,EAAEE,WAAW,CAAC;QAC/G,IAAI,CAACnK,eAAe,CAAC,CAAC,CAACoK,8BAA8B,CAAC,CAAC,CAACE,mBAAmB,CAAC,CAAC;MAC9E;IACD;;IAEA;AACD;AACA,OAFC;IAAAhO,MAAA,CAGAmN,iCAAiC,GAAjC,SAAAA,iCAAiCA,CAAA,EAAS;MACzC,MAAMtO,IAAI,GAAG,IAAI,CAACzL,OAAO,CAAC,CAAC;MAC3B,MAAMuK,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;MACtD,MAAM0N,oBAAoB,GAAGpP,IAAI,CAACnE,iBAAiB,CAAC,UAAU,CAAC;MAC/DuT,oBAAoB,EAAEpO,WAAW,CAAC,cAAc,EAAE;QAAE,GAAGoO,oBAAoB,EAAEhR,WAAW,CAAC,cAAc;MAAE,CAAC,CAAC;MAC3G,IAAIgR,oBAAoB,EAAE;QACxBtQ,WAAW,CAAC4I,cAAc,CAAC,CAAC,EAC1B2H,YAAY,CAAC,IAAI,EAAGC,IAAa,IAAKA,IAAI,CAACxL,GAAG,CAAC,oBAAoB,CAAC,CAAC,CACtE0E,OAAO,CAAE+G,YAAwB,IAAK;UACtCA,YAAY,CAAClJ,iBAAiB,CAC7B+I,oBAAoB,CAClBrT,QAAQ,CAAC,CAAC,CACVqE,WAAW,CAAC,IAAI,CAACrC,eAAe,CAAC,CAAC,CAACsC,kCAAkC,CAAC,CAAC,CAAC,CACxEC,eAAe,CAAC,CAAC,EACnB,UACD,CAAC;QACF,CAAC,CAAC;QACH;QACA,IAAI,CAAC+B,gBAAgB,CAAC,CAAC;MACxB;IACD;;IAEA;AACD;AACA;AACA;AACA,OAJC;IAAAlB,MAAA,CAKAiN,2BAA2B,GAA3B,SAAAA,2BAA2BA,CAACoB,UAA8B,EAAQ;MACjE,MAAMC,cAAc,GAAGC,OAAO,CAACC,oBAAoB,CAAC,aAAa,CAAE;MAEnE,IAAI,IAAI,CAACC,oBAAoB,EAAE;QAC9BpP,SAAS,CAACO,cAAc,CAAC,CAAC,IAAI,CAAC6O,oBAAoB,CAAC,CAAC;QACrD,OAAO,IAAI,CAACA,oBAAoB;MACjC;MAEA,IAAIJ,UAAU,EAAE;QACf,IAAI,CAACI,oBAAoB,GAAG,IAAIC,OAAO,CAAC;UACvCjP,OAAO,EAAE6O,cAAc,CAACjQ,OAAO,CAAC,sCAAsC,EAAE,CAACgQ,UAAU,CAAC,CAAC;UACrFM,IAAI,EAAEC,WAAW,CAACC,WAAW;UAC7BC,MAAM,EAAE,IAAI,CAAC1b,OAAO,CAAC,CAAC,EAAEsH,iBAAiB,CAAC,CAAC,EAAEK,OAAO,CAAC;QACtD,CAAC,CAAC;QACFsE,SAAS,CAAC0P,WAAW,CAAC,CAAC,IAAI,CAACN,oBAAoB,CAAC,CAAC;MACnD;IACD,CAAC;IAAAzO,MAAA,CAIKgP,WAAW,GAFjB,eAEMA,WAAWA,CAAC3Y,WAAgD,EAAiB;MAClF,MAAM4Y,QAAQ,GAAGA,CAAA,KAAY;QAC5B;QACA,MAAMtR,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;QACtD,MAAM2O,eAAe,GAAG,CAAClY,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC;QAElE,IAAI8b,eAAe,EAAE;UACpB,MAAM7I,sBAAsB,GAAG,IAAI,CAACD,yBAAyB,CAACzI,WAAW,CAAC;UAC1E,IAAI0I,sBAAsB,EAAE;YAC3BA,sBAAsB,CAACwC,KAAK,CAAC,CAAC;UAC/B;QACD,CAAC,MAAM;UACN,MAAMsG,gBAAgB,GAAGjJ,UAAU,CAACkJ,cAAc,CAACzR,WAAW,CAAC0R,kBAAkB,CAAC,CAAC,CAAkC;UACrH,IAAIF,gBAAgB,EAAE;YACrB,IAAI,CAAC/R,sBAAsB,CAAC+R,gBAAgB,CAACnR,cAAc,CAAC,CAAC,CAAC;UAC/D;QACD;MACD,CAAC;MACD,MAAMsR,IAAI,GAAG,IAAI,CAAClc,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC;MAC/C;MACA,IAAI,CAACtH,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,UAAU,CAAC,CAACiF,WAAW,CAAC,cAAc,EAAEyP,IAAI,CAAC;;MAErE;MACA,MAAMpZ,KAAK,GAAG,IAAI,CAAC9C,OAAO,CAAC,CAAC;MAC5B,MAAM2J,qBAAqB,GAAG7G,KAAK,CAACwE,iBAAiB,CAAC,UAAU,CAAyB;MACzF,MAAM6U,eAAe,GAAGrZ,KAAK,CAACwE,iBAAiB,CAAC,CAAC;MACjD;MACA,IAAI6U,eAAe,EAAE;QACpB,MAAMC,aAAa,GAAG7E,WAAW,CAACC,wBAAwB,CAAC2E,eAAe,CAAC3U,QAAQ,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC;QACrG,IAAI,CAAC2U,aAAa,EAAE;UACnB,MAAMC,aAAa,GAAGzY,WAAW,CAAC0M,eAAe,CAACxN,KAAK,CAAC;UACxD,MAAMuZ,aAAa,CAAC9F,gBAAgB,CAAC,CAAC,CAACC,iBAAiB,CAAC,MAAM,IAAI,CAACd,wBAAwB,CAACyG,eAAe,CAAC,CAAC;QAC/G;MACD;MACA;MACA,MAAMG,UAAU,GAAG1Y,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC;MAC5D,IAAIsc,UAAU,IAAIH,eAAe,EAAE;QAClC,MAAM,IAAI,CAACzC,eAAe,CAAC6C,4BAA4B,CAAC,CAAC;UAAEC,OAAO,EAAEL;QAAgB,CAAC,CAAC,CAAC;MACxF;MAEA,IAAIlZ,WAAW,EAAEwZ,UAAU,EAAE;QAC5BZ,QAAQ,CAAC,CAAC;MACX;MACAlS,qBAAqB,CAAC8C,WAAW,CAAC,4BAA4B,EAAE,KAAK,CAAC;MACtE,IAAI,CAACiQ,yCAAyC,CAAC,CAAC;;MAEhD;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,CAAC,IAAI,CAACha,eAAe,IAAI,CAACia,MAAM,CAACC,OAAO,CAACC,KAAK,EAAE;QACnD,MAAMC,UAAU,GAAGha,KAAK,CAAC0H,IAAI,CAAC,qCAAqC,CAAW;QAC9E,MAAMuS,eAAe,GAAGA,CAAA,KAAY;UACnC,IAAI,IAAI,CAACC,aAAa,EAAEC,QAAQ,CAAC,CAAC,EAAE;YACnC,IAAI,CAACD,aAAa,CAACE,MAAM,CAAC,CAAC;UAC5B;UACAJ,UAAU,CAACK,kBAAkB,CAAC,SAAS,EAAEJ,eAAe,CAAC;UACzDD,UAAU,CAACK,kBAAkB,CAAC,MAAM,EAAEJ,eAAe,CAAC;QACvD,CAAC;QAEDD,UAAU,EAAEM,kBAAkB,CAAC,WAAW,EAAE,MAAY;UACvD,IAAI,CAAC,IAAI,CAACJ,aAAa,EAAEC,QAAQ,CAAC,CAAC,EAAE;YACpC,IAAI,CAACD,aAAa,GAAG,IAAI,CAAChd,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,CAAC,CAAC6V,IAAI,CAAC,OAAO,CAAC;YAC5D;YACA;YACAP,UAAU,CAACM,kBAAkB,CAAC,SAAS,EAAEL,eAAe,CAAC;YACzDD,UAAU,CAACM,kBAAkB,CAAC,MAAM,EAAEL,eAAe,CAAC;UACvD;QACD,CAAC,CAAC;QAEF,IAAI,CAACra,eAAe,GAAG,IAAI;MAC5B;IACD;;IAEA;AACD;AACA;AACA,OAHC;IAAAkK,MAAA,CAIA1M,iBAAiB,GAAjB,SAAAA,iBAAiBA,CAAA,EAAY;MAC5B,MAAMic,eAAe,GAAG,IAAI,CAACnc,OAAO,CAAC,CAAC,CAACsH,iBAAiB,IAAI,IAAI,CAACtH,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC;MAC9F,IAAIvH,iBAAiB,GAAG,KAAK;MAC7B,IAAIoc,eAAe,EAAE;QACpB,MAAMC,aAAa,GAAG7E,WAAW,CAACC,wBAAwB,CAAC2E,eAAe,CAAC3U,QAAQ,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC;QACrG,IAAI2U,aAAa,EAAE;UAClBrc,iBAAiB,GAAG6D,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC;QAC9D;MACD;MACA,OAAOD,iBAAiB;IACzB,CAAC;IAAA6M,MAAA,CAEDO,2BAA2B,GAA3B,SAAAA,2BAA2BA,CAAA,EAAqB;MAC/C,OAAO,IAAI,CAAC3C,IAAI,CAAC,gBAAgB,CAAC;IACnC,CAAC;IAAAoC,MAAA,CAED0Q,wBAAwB,GAAxB,SAAAA,wBAAwBA,CAAA,EAA2F;MAClH,MAAM/S,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;MACtD,MAAMoQ,mBAAmB,GAAGhT,WAAW,CAAC7B,aAAa,CAAC,CAAC,CAAC9C,IAAI,CAAC,UAAU4X,WAAW,EAAE;QACnF,OAAOA,WAAW,CAAC7U,MAAM,CAAC,CAAC,KAAK,oBAAoB;MACrD,CAAC,CAAC;MACF,MAAM8U,qBAAqB,GAAGlT,WAAW,CAAC1E,IAAI,CAAC,uBAAuB,CAAC;MACvE,MAAM6X,YAAY,GAAG,IAAI,CAACpN,eAAe,CAAC,CAAC;MAC3C,MAAMqN,kBAAkB,GAAGD,YAAY,CAACE,qBAAqB,CAAC,CAAC;MAC/D,MAAMC,iBAAiB,GAAGA,CAAA,KAAY;QACrCF,kBAAkB,CAACG,wBAAwB,CAACvT,WAAW,CAACjD,iBAAiB,CAAC,CAAC,EAAEK,OAAO,CAAC,CAAW,CAAC;MAClG,CAAC;MACD,IAAI4V,mBAAmB,IAAI,CAAC,IAAI,CAAC9a,6BAA6B,EAAE;QAC/D8a,mBAAmB,CAAC7L,UAAU,CAAC,OAAO,CAAC,EAAE7D,YAAY,CAACgQ,iBAAiB,EAAE,IAAI,CAAC;QAC9E,IAAI,CAACpb,6BAA6B,GAAG,IAAI;MAC1C;MACA,OAAO;QACNsb,KAAK,EAAExT,WAAW,CAAC1E,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE;QAChDmY,QAAQ,EAAET,mBAAmB,IAAIA,mBAAmB,CAAC1U,QAAQ,CAAC,CAAC;QAC/DoV,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,EAAE;QACRC,WAAW,EAAEV;MACd,CAAC;IACF,CAAC;IAAA7Q,MAAA,CAEDwR,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAACtR,GAAW,EAAQ;MACzC,MAAMuR,SAAS,GAAG,GAAG,IAAI,CAACre,OAAO,CAAC,CAAC,CAAC8E,KAAK,CAAC,CAAC,KAAKgI,GAAG,EAAE;QACpDwR,OAAO,GAAI,IAAI,CAACnR,2BAA2B,CAAC,CAAC,CAACgG,cAAc,CAAC,CAAC,CAC5DC,UAAU,CAAC,CAAC,CACZxN,IAAI,CAAE2Y,QAAQ,IAAKA,QAAQ,CAACzZ,KAAK,CAAC,CAAC,KAAKuZ,SAAS,CAAC;MACrD,IAAIC,OAAO,EAAE;QACZ1a,WAAW,CAAC4a,eAAe,CAACF,OAAO,CAAC;MACrC;IACD,CAAC;IAAA1R,MAAA,CAED6R,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAAC3R,GAAW,EAAQ;MACzC,MAAMuR,SAAS,GAAG,GAAG,IAAI,CAACre,OAAO,CAAC,CAAC,CAAC8E,KAAK,CAAC,CAAC,KAAKgI,GAAG,EAAE;QACpDwR,OAAO,GAAI,IAAI,CAACnR,2BAA2B,CAAC,CAAC,CAACuR,SAAS,CAAC,CAAC,CAAqBjK,UAAU,CAAC,CAAC,CAAC7O,IAAI,CAAC,UAC/F2Y,QAAoB,EACnB;UACD,OAAOA,QAAQ,CAACI,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,KAAK,cAAc,IAAIL,QAAQ,CAACzZ,KAAK,CAAC,CAAC,KAAKuZ,SAAS;QAC7F,CAAC,CAAC;MACHza,WAAW,CAAC4a,eAAe,CAACF,OAAO,CAAC;IACrC,CAAC;IAAA1R,MAAA,CAEDiS,mBAAmB,GAAnB,SAAAA,mBAAmBA,CAACC,UAAoB,EAAQ;MAC/C,MAAMvU,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;QACrDqG,SAAS,GAAGjJ,WAAW,CAACmG,WAAW,CAAC,CAAC;QACrCqO,gBAAgB,GAAGvL,SAAS,CAAC/R,MAAM,GAAG,CAAC;QACvCud,QAAQ,GAAIF,UAAU,CAAC3a,SAAS,CAAC,CAAC,CAAiC8a,UAAU,CAAC,CAAC;MAChF,IAAIC,UAAU;QACbC,qBAAqB,GAAG5U,WAAW,CAAC6U,cAAc,CAAC,IAAI,CAAC5U,IAAI,CAACD,WAAW,CAAC0R,kBAAkB,CAAC,CAAE,CAAsB,CAAC;MACtH,IAAIkD,qBAAqB,KAAK,CAAC,CAAC,IAAIJ,gBAAgB,GAAG,CAAC,EAAE;QACzD,IAAIC,QAAQ,KAAK,SAAS,EAAE;UAC3B,IAAIG,qBAAqB,IAAIJ,gBAAgB,GAAG,CAAC,EAAE;YAClDG,UAAU,GAAG1L,SAAS,CAAC,EAAE2L,qBAAqB,CAAC;UAChD;QACD,CAAC,MAAM,IAAIA,qBAAqB,KAAK,CAAC,EAAE;UACvC;UACAD,UAAU,GAAG1L,SAAS,CAAC,EAAE2L,qBAAqB,CAAC;QAChD;QAEA,IAAID,UAAU,EAAE;UACf3U,WAAW,CAACa,kBAAkB,CAAC8T,UAAU,CAAC;UAC1CA,UAAU,CAACzJ,KAAK,CAAC,CAAC;QACnB;MACD;IACD,CAAC;IAAA7I,MAAA,CAEDyS,oBAAoB,GAApB,SAAAA,oBAAoBA,CAAA,EAAS;MAC5B,MAAM1V,qBAAqB,GAAG,IAAI,CAAC3J,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,UAAU,CAAyB;MAClG,MAAMgY,OAAO,GAAG,IAAI,CAACtf,OAAO,CAAC,CAAC,CAAC8E,KAAK,CAAC,CAAC;MACtC6E,qBAAqB,CAAC8C,WAAW,CAAC,6BAA6B,EAAE,KAAK,CAAC;MACvE,MAAM8S,oBAAoB,GAAI,IAAI,CAACjP,eAAe,CAAC,CAAC,CAACkP,0BAA0B,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC,CAACC,WAAW,EAC5GC,OAAO;MACV1T,SAAS,CAACC,eAAe,CAAC,CAAC,CACzBC,OAAO,CAAC,CAAC,CACT8H,OAAO,CAAC,UAAU2L,QAAiB,EAAQ;QAC3C,MAAMC,cAAc,GAAGD,QAAQ,CAACE,UAAU,IAAIF,QAAQ,CAACpQ,OAAO,CAAC,CAAC,KAAK,OAAO;QAC5E,MAAMuQ,iBAAiB,GAAGR,oBAAoB,GAC3CM,cAAc,GACdA,cAAc,IAAID,QAAQ,CAACtT,UAAU,CAAC,CAAC,CAACmF,IAAI,CAAEiK,MAAM,IAAKA,MAAM,CAACsE,QAAQ,CAACV,OAAO,CAAC,CAAC;QACrF,IAAIS,iBAAiB,EAAE;UACtBpW,qBAAqB,CAAC8C,WAAW,CAAC,6BAA6B,EAAE,IAAI,CAAC;QACvE;MACD,CAAC,CAAC;IACJ,CAAC;IAAAG,MAAA,CAEDlG,mBAAmB,GAAnB,SAAAA,mBAAmBA,CAACuZ,GAAY,EAAEC,IAAc,EAAW;MAC1D,IAAID,GAAG,EAAE;QACR/Z,GAAG,CAACC,KAAK,CAAC8Z,GAAG,CAAC;MACf;MACA,MAAME,UAAU,GAAGvc,WAAW,CAACC,aAAa,CAAC,IAAI,CAAC7D,OAAO,CAAC,CAAC,CAAC;MAC5D,MAAM2d,kBAAkB,GAAG,IAAI,CAACrN,eAAe,CAAC,CAAC,CAACsN,qBAAqB,CAAC,CAAC;MACzE,MAAMwC,eAAe,GAAGzC,kBAAkB,CAAC0C,YAAY,CAAC,CAAC,GACtD1C,kBAAkB,CAAC2C,gBAAgB,CAAC,CAAC,GACpC,IAAI,CAAChQ,eAAe,CAAC,CAAC,CAACiQ,gBAAgB,CAAC,CAAC,CAAkBC,cAAc,CAAC,CAAC;MAC/E,IAAIL,UAAU,IAAI,CAACC,eAAe,CAAC7Q,GAAG,CAAC,mBAAmB,CAAC,EAAE;QAC5D,MAAMkR,cAAc,GAAG,IAAI,CAACra,aAAa;UACxC6H,eAAe,GAAGwS,cAAc,CAACxS,eAAe;UAChDyS,YAAY,GAAGzS,eAAe,CAACyD,UAAU,CAAC,OAAO,CAAgB;QAElE,IAAIgP,YAAY,CAACC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC1S,eAAe,CAACC,MAAM,CAAC,CAAC,EAAE;UAC9DuS,cAAc,CAACG,UAAU,CAAC,IAAI,CAAC;UAC/B;UACAzW,UAAU,CAAC,YAAY;YACtB8D,eAAe,CAAC4S,MAAM,CAACJ,cAAc,CAAC;UACvC,CAAC,EAAE,CAAC,CAAC;QACN;MACD;MACA,OAAOP,IAAI;IACZ,CAAC;IAAAtT,MAAA,CAEKjJ,aAAa,GAAnB,eAAMA,aAAaA,CAAA,EAA4B;MAC9C,MAAMZ,QAAQ,GAAG,IAAI,CAAC/C,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC;MACnD,MAAM8Q,MAAM,GAAG,IAAI,CAACpY,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,IAAI,CAAC;MAC5CsZ,UAAU,CAACzD,IAAI,CAACjF,MAAM,CAAC;MACvB,OAAO,IAAI,CAAC7T,QAAQ,CAACwc,YAAY,CAAC7Q,KAAK,CAAC,IAAI,CAAC3L,QAAQ,EAAE,CAACxB,QAAQ,CAAC,CAAC,CAACie,OAAO,CAAC,YAAY;QACtFF,UAAU,CAAC5D,MAAM,CAAC9E,MAAM,CAAC;MAC1B,CAAC,CAAC;IACH;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAAxL,MAAA,CAOAhE,8CAA8C,GAA9C,SAAAA,8CAA8CA,CAC7CqY,YAAoB,EACpBnY,cAAsB,EACuB;MAC7C,OAAO,CACN;QACCoY,aAAa,EAAE;UACdC,aAAa,EAAEF;QAChB,CAAC;QACDG,sBAAsB,EAAEtY;MACzB,CAAC,CACD;IACF;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARC;IAAA8D,MAAA,CASMyU,iBAAiB,GAAvB,eAAMA,iBAAiBA,CAAA,EAAoD;MAC1E,MAAM3R,OAAO,GAAGoD,UAAU,CAACwO,gBAAgB,CAAC,CAAY;MACxD,MAAM9E,OAAO,GAAG9M,OAAO,EAAEpI,iBAAiB,CAAC,CAA+B;MAE1E,IAAI,CAACoI,OAAO,IAAI,CAAC8M,OAAO,EAAE;QACzB,OAAOrc,SAAS;MACjB;MACA,IAAIohB,iBAAiB,GAAG,KAAK;MAC7B,IAAI/E,OAAO,CAACgF,WAAW,CAAC,CAAC,EAAE;QAC1B,IAAIhF,OAAO,CAAChL,iBAAiB,CAAC,CAAC,EAAE;UAChC,MAAMgL,OAAO,CAACiF,OAAO,CAAC,CAAC;QACxB,CAAC,MAAM;UACNF,iBAAiB,GAAG,IAAI;QACzB;MACD;MACA,IAAI,CAAC5L,cAAc,CAAC+L,sBAAsB,CAAChS,OAAO,CAAC;MACnD,MAAMiS,GAAG,GAAG,MAAM,IAAI,CAACC,uBAAuB,CAACpF,OAAO,EAAE+E,iBAAiB,CAAC;MAC1E,IAAI,CAAC5L,cAAc,CAACkM,YAAY,CAAC;QAAEnS;MAAQ,CAAC,CAAC;MAC7C,OAAOiS,GAAG;IACX;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARC;IAAA/U,MAAA,CASMgV,uBAAuB,GAA7B,eAAMA,uBAAuBA,CAACpF,OAAuB,EAA8E;MAAA,IAA5E+E,iBAAiB,GAAA/f,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAArB,SAAA,GAAAqB,SAAA,MAAG,KAAK;MAC/E,MAAMkc,YAAY,GAAG,IAAI,CAACpN,eAAe,CAAC,CAAC;MAC3C;MACA,IAAI,CAACqF,cAAc,CAACC,wBAAwB,CAAC,CAAC;MAC9C,IAAI,CAAC2L,iBAAiB,EAAE;QACvB,MAAMO,kBAAkB,GAAGpE,YAAY,CAACqE,qBAAqB,CAAC,CAAC;QAC/D,MAAMC,UAAU,GAAGF,kBAAkB,CAACG,wBAAwB,CAACzF,OAAO,CAAC;QACvE,MAAM0F,iBAAiB,GAAGF,UAAU,GAAGF,kBAAkB,CAACK,+BAA+B,CAACH,UAAU,CAAC,GAAG,EAAE;QAC1G;QACA,IAAIE,iBAAiB,CAACzgB,MAAM,EAAE;UAC7B,MAAM,IAAI,CAAC8C,QAAQ,CAAC+B,QAAQ,CAAC,CAAC;UAC9B,OAAOgS,OAAO,CAAC8J,GAAG,CACjBF,iBAAiB,CAACja,GAAG,CAAC,MAAOoa,WAAW,IAAK,IAAI,CAACpL,YAAY,CAACqL,kBAAkB,CAACD,WAAW,EAAE7F,OAAO,CAAC,CACxG,CAAC;QACF;MACD;MAEA,MAAM+F,gBAAgB,GAAI,MAAM3e,WAAW,CAAC4e,iBAAiB,CAC5DvkB,gBAAgB,CAACwkB,KAAK,EACtB,IAAI,CAACziB,OAAO,CAAC,CAAC,EACd0d,YACD,CAAoB;MACpB;MACA,IAAI6E,gBAAgB,EAAE;QACrB,MAAM,IAAI,CAAChe,QAAQ,CAAC+B,QAAQ,CAAC,CAAC;QAC9B,OAAOoQ,KAAK,CAACgM,sBAAsB,CAACH,gBAAgB,EAAE7E,YAAY,EAAE,IAAI,CAACpP,kBAAkB,CAACC,WAAW,CAAC,CAAC,CAAC;MAC3G;IACD;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAA3B,MAAA,CAOM9I,aAAa,GAAnB,eAAMA,aAAaA,CAAC6e,iBAA2B,EAAiB;MAC/D,MAAMnG,OAAO,GAAG,IAAI,CAACxc,OAAO,CAAC,CAAC,CAACsH,iBAAiB,CAAC,CAAC;MAClD,MAAMsb,KAAK,GAAG,IAAI,CAAC5iB,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,IAAI,CAAC;QAC1Cqb,oBAAwD,GAAG,EAAE;MAC9D;MACA,IAAIC,yBAAyB,GAAG,KAAK;MACrChC,UAAU,CAACzD,IAAI,CAACuF,KAAK,CAAC;MACtB,IAAI;QACH,IAAI,IAAI,CAACtU,kBAAkB,CAACyU,sBAAsB,CAAC,CAAC,EAAE;UACrD,IAAI;YACH,MAAMC,YAAY,GAAG,MAAM,IAAIC,oBAAoB,CAAC,IAAI,CAACjjB,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,CAACkjB,aAAa,CAAC,CAAC;YACzF;YACA,IAAIF,YAAY,KAAK,QAAQ,EAAE;cAC9B;YACD;YACA;YACA,IAAIA,YAAY,KAAK,WAAW,EAAE;cACjC,IAAI,CAAC1U,kBAAkB,CAACE,UAAU,CAAC,CAAC;cACpC,MAAM,IAAI,CAAC2H,QAAQ,CAACC,uBAAuB,CAACoG,OAAO,CAAC;cACpD;YACD;UACD,CAAC,CAAC,OAAOyD,GAAG,EAAE;YACb/Z,GAAG,CAACC,KAAK,CAAC,oDAAoD8Z,GAAG,EAAE,CAAC;UACrE;QACD;QAEA,MAAM,IAAI,CAAC1b,QAAQ,CAAC+B,QAAQ,CAAC,CAAC;QAC9B,IAAI,CAACwK,WAAW,CAAC,CAAC,CAACmD,OAAO,CAAE7P,KAAY,IAAK;UAC5C,MAAM+e,WAAW,GAAG/e,KAAK,CAACyN,cAAc,CAAC,CAAC;UAC1C,MAAMuR,YAAY,GAAG,IAAI,CAAC1e,gBAAgB,CAACN,KAAK,CAAC;UACjD,MAAMif,WAAW,GAAG7a,MAAM,CAACvD,IAAI,CAAEke,WAAW,EAAE7b,iBAAiB,CAAC,CAAC,EAAiChC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;UACpH,IAAI+d,WAAW,CAACjX,MAAM,CAAE5G,GAAG,IAAK,CAACA,GAAG,CAAC8d,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC7hB,MAAM,EAAE;YAClEqhB,yBAAyB,GAAG,IAAI;YAChCD,oBAAoB,CAAC3R,IAAI,CACxB,IAAI,CAAC3M,QAAQ,CACXgf,cAAc,CAACH,YAAY,EAAE;cAC7BI,YAAY,EAAEpf,KAAK,CAACyB,IAAI,CAAC,cAAc,CAAC;cACxCsd,WAAW,EAAEA,WAAW;cACxBM,WAAW,EAAErf,KAAK,CAACyB,IAAI,CAAC,aAAa,CAAC,KAAK,MAAM;cACjD6d,eAAe,EAAE,IAAI,CAAC;YACvB,CAAC,CAAC,CACDjd,IAAI,CAAC,MAAM2c,YAAY,CAC1B,CAAC;UACF;QACD,CAAC,CAAC;QAEF,MAAMO,QAAQ,GAAG,MAAMrL,OAAO,CAAC8J,GAAG,CAACS,oBAAoB,CAAC;QACxD;QACA;QACA;QACA;QACA;QACA,IAAI;UACH,MAAM,IAAI,CAACte,QAAQ,CAACqf,YAAY,CAACpH,OAAO,EAAE;YACzCqH,0BAA0B,EAAEf,yBAAyB;YACrDa,QAAQ,EAAEA,QAAyC;YACnDjhB,eAAe,EAAE,IAAI,CAACA,eAAe;YACrCigB;UACD,CAAC,CAAC;QACH,CAAC,CAAC,OAAOxc,KAAc,EAAE;UACxB;UACA;UACA;UACA;UACA,IAAIA,KAAK,KAAK2d,4BAA4B,CAACC,QAAQ,EAAE;YACpD,IAAI,CAACrd,mBAAmB,CAACP,KAAe,CAAC;UAC1C;UACA,MAAMA,KAAK;QACZ;MACD,CAAC,SAAS;QACT,IAAI2a,UAAU,CAAC7D,QAAQ,CAAC2F,KAAK,CAAC,EAAE;UAC/B9B,UAAU,CAAC5D,MAAM,CAAC0F,KAAK,CAAC;QACzB;MACD;IACD,CAAC;IAAAhW,MAAA,CAEKoX,eAAe,GAArB,eAAMA,eAAeA,CAAC/gB,WAAqC,EAA2B;MACrF,MAAMuZ,OAAO,GAAG,IAAI,CAACxc,OAAO,CAAC,CAAC,EAAEsH,iBAAiB,CAAC,CAAC;MACnD,MAAM2c,YAAY,GAAG,IAAI,CAACjkB,OAAO,CAAC,CAAC,CAACwK,IAAI,CAACvH,WAAW,CAACghB,YAAY,CAAuB,CAAC,CAAC;MAC1F,MAAMC,oBAAoB,GAAGpR,UAAU,CAACwO,gBAAgB,CAAC,CAAC,EAAExc,KAAK,CAAC,CAAC;MACnE,IAAIqf,wBAAwB,GAAG,KAAK;MACpC,IAAI,IAAI,CAAC7V,kBAAkB,CAACyU,sBAAsB,CAAC,CAAC,EAAE;QACrD,IAAI;UACH,MAAMC,YAAY,GAAG,MAAM,IAAIC,oBAAoB,CAAC,IAAI,CAACjjB,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAACkjB,aAAa,CAAC,CAAC;UAC1F;UACA,IAAIF,YAAY,KAAK,QAAQ,EAAE;YAC9B;UACD;UACA;UACA,IAAIA,YAAY,KAAK,WAAW,EAAE;YACjC,IAAI,CAAC1U,kBAAkB,CAACE,UAAU,CAAC,CAAC;YACpC,MAAM,IAAI,CAAC2H,QAAQ,CAACC,uBAAuB,CAACoG,OAAO,CAAC;YACpD;UACD;UACA;UACA,IAAIwG,YAAY,KAAK,kBAAkB,EAAE;YACxCmB,wBAAwB,GAAG,IAAI;UAChC;QACD,CAAC,CAAC,OAAOlE,GAAG,EAAE;UACb/Z,GAAG,CAACC,KAAK,CAAC,gCAAgC,CAAC;QAC5C;MACD;MACA,MAAMie,kBAAkB,GACvB,CAAC,CAAC,IAAI,CAACpkB,OAAO,CAAC,CAAC,CAACwH,QAAQ,CAAC,IAAI,CAAC,CAACqC,WAAW,CAACwa,gBAAgB,CAACC,gBAAgB,CAAC,IAAI,CAAC9H,OAAO,CAAC3S,WAAW,CAAC,iBAAiB,CAAC;MAC1H,MAAM0a,WAAqB,GAAIC,aAA6B,IAAK;QAChE;QACA,IAAIN,oBAAoB,KAAK/jB,SAAS,EAAE;UACvC2S,UAAU,CAACkJ,cAAc,CAACkI,oBAAoB,CAAC,EAAEzO,KAAK,CAAC,CAAC;QACzD;QACA,OAAO+O,aAAa;MACrB,CAAC;MACD,IACE,IAAI,CAAClU,eAAe,CAAC,CAAC,EAAEkP,0BAA0B,CAAC,CAAC,EAAEC,eAAe,CAAC,CAAC,EAAEC,WAAW,EAAkBC,OAAO,IAC9GyE,kBAAkB,EACjB;QACD,OAAO1N,KAAK,CAACC,yCAAyC,CACrD4N,WAAW,EACX3N,QAAQ,CAAC/J,SAAS,EAClB2P,OAAO,EACP,IAAI,EACJ,KAAK,EACL9F,KAAK,CAACG,cAAc,CAACC,cAAc,EACnC,IACD,CAAC;MACF;MACA,OAAO,IAAI,CAACvS,QAAQ,CAClBkgB,cAAc,CAACjI,OAAO,EAAE;QAAE9M,OAAO,EAAEuU,YAAY;QAAES,kBAAkB,EAAEP;MAAyB,CAAC,CAAC,CAChG1d,IAAI,CAAE+d,aAAa,IAAK;QACxB,OAAOD,WAAW,CAACC,aAAa,CAAC;MAClC,CAAC,CAAC;IACJ,CAAC;IAAA5X,MAAA,CAEK7I,cAAc,GAApB,eAAMA,cAAcA,CAAChB,QAAwB,EAAiB;MAC7D,OAAO,IAAI,CAACwB,QAAQ,CAACogB,aAAa,CAAC5hB,QAAQ,CAAC,CAAC6D,KAAK,CAAC,MAAM;QACxD,IAAI,CAACF,mBAAmB,CAAC,CAAC;QAC1B;MACD,CAAC,CAAC;IACH,CAAC;IAAAkG,MAAA,CAEDuM,kBAAkB,GAAlB,SAAAA,kBAAkBA,CAAA,EAAS;MAC1B,MAAM5O,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;MACtD,MAAMyX,eAAe,GAAGra,WAAW,CAAC1E,IAAI,CAAC,iBAAiB,CAAC;MAC3D,IAAI+e,eAAe,KAAK,MAAM,IAAIA,eAAe,KAAK,IAAI,EAAE;QAC3D,MAAMlH,YAAY,GAAG9Z,WAAW,CAAC0M,eAAe,CAAC,IAAI,CAACtQ,OAAO,CAAC,CAAC,CAAC;QAChE4D,WAAW,CAACihB,wBAAwB,CAACta,WAAW,EAAEmT,YAAY,CAAC;MAChE;IACD,CAAC;IAAA9Q,MAAA,CAEDkY,wBAAwB,GAAxB,SAAAA,wBAAwBA,CAACC,cAAyB,EAAEC,WAAiC,EAAEC,SAAoB,EAAEC,QAAkB,EAAQ;MACtI,KAAK,MAAMC,KAAK,IAAIJ,cAAc,EAAE;QACnC,IAAIxG,QAAQ,GAAI4G,KAAK,CAAc1Q,UAAU,YAAYmC,QAAQ,GAAIuO,KAAK,CAAc1Q,UAAU,CAAC,CAAC,GAAGtU,SAAS;QAChH,IAAI+kB,QAAQ,EAAE;UACb,IAAI3G,QAAQ,EAAE6G,cAAc,CAAC,OAAO,CAAC,EAAE;YACtC,MAAM9X,KAAK,GAAGiR,QAAQ,CAAC6G,cAAc,CAAC,OAAO,CAAc;YAC3D9X,KAAK,CAAC2G,OAAO,CAAC,UAAUrC,IAAa,EAAE;cACtC,IAAIA,IAAI,CAACrC,GAAG,CAAa,qBAAqB,CAAC,EAAE;gBAChD,MAAM8V,YAAY,GAAGzT,IAAI,CAAC0T,eAAe,CAAC,CAAC;gBAC3CL,SAAS,CAAC/T,IAAI,CAACmU,YAAY,CAAC;cAC7B;YACD,CAAC,CAAC;UACH;QACD,CAAC,MAAM;UACN,IAAI9G,QAAQ,IAAIA,QAAQ,CAAChP,GAAG,IAAIgP,QAAQ,CAAChP,GAAG,CAAqB,kCAAkC,CAAC,EAAE;YACrG,MAAMgW,WAAW,GAAGhH,QAAQ,CAACiH,cAAc,YAAY5O,QAAQ,GAAG2H,QAAQ,CAACiH,cAAc,CAAC,CAAC,GAAGrlB,SAAS;YACvG,IAAIolB,WAAW,IAAIA,WAAW,CAAC9jB,MAAM,GAAG,CAAC,EAAE;cAC1C8c,QAAQ,GAAGgH,WAAW,CAAC,CAAC,CAAC;YAC1B;UACD;UACA;UACA;UACA,IAAIhH,QAAQ,IAAIA,QAAQ,CAAChP,GAAG,IAAIgP,QAAQ,CAAChP,GAAG,CAAC,aAAa,CAAC,IAAIgP,QAAQ,CAAC1Y,IAAI,CAAC,4BAA4B,CAAC,EAAE;YAC3G0Y,QAAQ,GAAGA,QAAQ,CAAC1Y,IAAI,CAAC,mBAAmB,CAAC;UAC9C;UACA,IAAI0Y,QAAQ,IAAIA,QAAQ,CAAChP,GAAG,IAAIgP,QAAQ,CAAChP,GAAG,CAAW,8BAA8B,CAAC,EAAE;YACvF,MAAMgW,WAAW,GAAGhH,QAAQ,CAAC9J,UAAU,YAAYmC,QAAQ,GAAG2H,QAAQ,CAAC9J,UAAU,CAAC,CAAC,GAAGtU,SAAS;YAC/F,IAAIolB,WAAW,IAAIA,WAAW,CAAChW,GAAG,IAAIgW,WAAW,CAAChW,GAAG,CAAQ,kBAAkB,CAAC,EAAE;cACjF0V,SAAS,CAAC/T,IAAI,CAACqU,WAAW,CAAC;YAC5B;UACD;QACD;MACD;IACD,CAAC;IAAA3Y,MAAA,CAED+D,kBAAkB,GAAlB,SAAAA,kBAAkBA,CAAA,EAA2B;MAC5C,MAAMpG,WAAW,GAAG,IAAI,CAAC4C,2BAA2B,CAAC,CAAC;MACtD,IAAI2G,YAAoC,GAAG,EAAE;MAC7CvJ,WAAW,CAACmG,WAAW,CAAC,CAAC,CAACuD,OAAO,CAAC,UAAUxJ,QAA2B,EAAE;QACxEqJ,YAAY,GAAGA,YAAY,CAACoE,MAAM,CAACzN,QAAQ,CAACG,cAAc,CAAC,CAAC,CAAC;MAC9D,CAAC,CAAC;MACF,OAAOkJ,YAAY;IACpB,CAAC;IAAAlH,MAAA,CAED6Y,aAAa,GAAb,SAAAA,aAAaA,CAAA,EAAsC;MAClD,IAAIpR,OAA0C,GAAG,EAAE;MACnD,IAAI,CAAC1D,kBAAkB,CAAC,CAAC,CAACsD,OAAO,CAAC,UAAUnK,WAAiC,EAAE;QAC9EuK,OAAO,GAAGA,OAAO,CAAC6D,MAAM,CAACpO,WAAW,CAACqF,SAAS,CAAC,CAAsC,CAAC;MACvF,CAAC,CAAC;MACF,OAAOkF,OAAO;IACf,CAAC;IAAAzH,MAAA,CAEDkE,WAAW,GAAX,SAAAA,WAAWA,CAAA,EAAY;MACtB,MAAMgD,YAAY,GAAG,IAAI,CAACnD,kBAAkB,CAAC,CAAC;MAC9C,MAAME,OAAgB,GAAG,EAAE;MAC3B,KAAK,IAAItF,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAGuI,YAAY,CAACrS,MAAM,EAAE8J,UAAU,EAAE,EAAE;QACxE,IAAI,CAACuZ,wBAAwB,CAAChR,YAAY,CAACvI,UAAU,CAAC,CAAC4D,SAAS,CAAC,CAAC,EAAE2E,YAAY,CAACvI,UAAU,CAAC,EAAEsF,OAAO,CAAC;QACtG,IAAI,CAACiU,wBAAwB,CAAChR,YAAY,CAACvI,UAAU,CAAC,CAAC6D,aAAa,CAAC,CAAC,EAAE0E,YAAY,CAACvI,UAAU,CAAC,EAAEsF,OAAO,CAAC;MAC3G;MACA,OAAOA,OAAO;IACf,CAAC;IAAAjE,MAAA,CAED8Y,WAAW,GAAX,SAAAA,WAAWA,CAAA,EAAY;MACtB,MAAM5R,YAAY,GAAG,IAAI,CAACnD,kBAAkB,CAAC,CAAC;MAC9C,MAAMgV,OAAgB,GAAG,EAAE;MAC3B,KAAK,IAAIpa,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAGuI,YAAY,CAACrS,MAAM,EAAE8J,UAAU,EAAE,EAAE;QACxE,IAAI,CAACuZ,wBAAwB,CAAChR,YAAY,CAACvI,UAAU,CAAC,CAAC4D,SAAS,CAAC,CAAC,EAAE2E,YAAY,CAACvI,UAAU,CAAC,EAAEoa,OAAO,EAAE,IAAI,CAAC;QAC5G,IAAI,CAACb,wBAAwB,CAAChR,YAAY,CAACvI,UAAU,CAAC,CAAC6D,aAAa,CAAC,CAAC,EAAE0E,YAAY,CAACvI,UAAU,CAAC,EAAEoa,OAAO,EAAE,IAAI,CAAC;MACjH;MACA,OAAOA,OAAO;IACf,CAAC;IAAA/Y,MAAA,CAED0E,iBAAiB,GAAjB,SAAAA,iBAAiBA,CAAA,EAAS;MACzB,IAAI,CAACmU,aAAa,CAAC,CAAC,CAACxR,OAAO,CAAC,UAAU2R,MAAuC,EAAQ;QACrF,MAAMC,QAAQ,GAAGD,MAAM,CAACnR,UAAU,YAAYmC,QAAQ,IAAIgP,MAAM,CAACnR,UAAU,CAAC,CAAC;QAC7E,IAAIoR,QAAQ,IAAIA,QAAQ,CAACtW,GAAG,IAAIsW,QAAQ,CAACtW,GAAG,CAAqB,kCAAkC,CAAC,EAAE;UACrG,IAAIsW,QAAQ,CAACC,kBAAkB,YAAYlP,QAAQ,EAAE;YACpDiP,QAAQ,CAACC,kBAAkB,CAAC,KAAK,EAAE,KAAK,CAAC;UAC1C;QACD;MACD,CAAC,CAAC;IACH;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAAlZ,MAAA,CAMA7E,oBAAoB,GAApB,SAAAA,oBAAoBA,CAACge,aAAsB,EAAEC,UAAkB,EAAa;MAC3E,MAAMC,YAAY,GAAGF,aAAa,CAACzgB,SAAS,CAAC,CAAC;MAC9C,IAAI4gB,iBAAiB,GAAG,CAACD,YAAY,CAAC;MACtC,IAAIF,aAAa,IAAIC,UAAU,EAAE;QAChC,IAAIC,YAAY,CAACD,UAAU,CAAC,EAAE;UAC7BE,iBAAiB,GAAGD,YAAY,CAACD,UAAU,CAAC;UAC5C,OAAOC,YAAY,CAACD,UAAU,CAAC;UAC/BE,iBAAiB,CAAChV,IAAI,CAAC+U,YAAY,CAAC;QACrC;MACD;MACA,OAAOC,iBAAiB;IACzB;;IAEA;AACD;AACA;AACA,OAHC;IAAAtZ,MAAA,CAKAuZ,kBAAkB,GAAlB,SAAAA,kBAAkBA,CAACC,QAAgB,EAAQ;MAC1C,IAAI,IAAI,CAACtV,WAAW,IAAI,IAAI,CAACA,WAAW,CAAC,CAAC,CAACrP,MAAM,GAAG,CAAC,EAAE;QACtD,MAAMoP,OAAO,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC;QAClC,KAAK,MAAMc,IAAI,IAAIf,OAAO,EAAE;UAC3BwV,aAAa,CAACC,gBAAgB,CAAC1U,IAAI,EAAEwU,QAAQ,CAAC;QAC/C;MACD;IACD;;IAEA;AACD;AACA;AACA;AACA;AACA;AACA,OANC;IAAAxZ,MAAA,CAOA2Z,sBAAsB,GAAtB,SAAAA,sBAAsBA,CACrBC,YAAqB,EACrBC,YAA8B,EAC9BT,UAAkB,EAC8C;MAChE,IAAIU,WAAsB,GAAG,EAAE;QAC9BC,eAAe,GAAG,EAAE;QACpB5jB,QAAQ;QACR6jB,aAAqB;QACrBC,SAAS;MAEV,MAAMC,SAAS,GAAGN,YAAY,CAAC7e,OAAO,CAAC,CAAC;MACxC,MAAMof,UAAU,GAAGP,YAAY,IAAIA,YAAY,CAAChf,QAAQ,CAAC,CAAC,IAAIgf,YAAY,CAAChf,QAAQ,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC;MACpG,MAAMuf,aAAa,GAAGD,UAAU,IAAIA,UAAU,CAACrf,WAAW,CAACof,SAAS,CAAC,CAACG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;;MAEzF;MACA,IAAIR,YAAY,IAAIA,YAAY,CAAChlB,MAAM,EAAE;QACxCsB,QAAQ,GAAG0jB,YAAY,CAAC,CAAC,CAAC;QAC1BI,SAAS,GAAG9jB,QAAQ,CAAC4E,OAAO,CAAC,CAAC;QAC9Bif,aAAa,GAAGG,UAAU,IAAIA,UAAU,CAACrf,WAAW,CAACmf,SAAS,CAAC,CAACI,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;QAEnFR,YAAY,CAACxS,OAAO,CAAEiT,cAA8B,IAAW;UAC9D,IAAIlB,UAAU,EAAE;YACf,MAAME,iBAAiB,GAAG,IAAI,CAACne,oBAAoB,CAACmf,cAAc,EAAElB,UAAU,CAAC;YAC/E,IAAIE,iBAAiB,EAAE;cACtBQ,WAAW,GAAGR,iBAAiB,CAACje,GAAG,CAAC,UAAUkf,oBAA6B,EAAE;gBAC5E,OAAO;kBACNC,WAAW,EAAED,oBAAoB;kBACjCjc,SAAS,EAAE,GAAG8b,aAAa,IAAIhB,UAAU;gBAC1C,CAAC;cACF,CAAC,CAAC;YACH;UACD,CAAC,MAAM;YACNU,WAAW,CAACxV,IAAI,CAAC;cAChBkW,WAAW,EAAEF,cAAc,CAAC5hB,SAAS,CAAC,CAAC;cACvC4F,SAAS,EAAE0b;YACZ,CAAC,CAAC;UACH;QACD,CAAC,CAAC;MACH;MACAD,eAAe,CAACzV,IAAI,CAAC;QACpBkW,WAAW,EAAEZ,YAAY,CAAClhB,SAAS,CAAC,CAAC;QACrC4F,SAAS,EAAE8b;MACZ,CAAC,CAAC;MACF;MACAL,eAAe,GAAG,IAAI,CAACre,sBAAsB,CAAC+e,mBAAmB,CAACV,eAAe,EAAEK,aAAa,CAAC;MACjG,MAAMM,YAAY,GAAG1jB,WAAW,CAAC2jB,gCAAgC,CAAC,IAAIC,gBAAgB,CAAC,CAAC,EAAEb,eAAe,EAAE,IAAI,CAAC3mB,OAAO,CAAC,CAAC,CAAC;MAC1H0mB,WAAW,GAAG,IAAI,CAACpe,sBAAsB,CAAC+e,mBAAmB,CAACX,WAAW,EAAEM,aAAa,CAAC;MACzF,OAAO;QACNS,gBAAgB,EAAEH,YAAY;QAC9BI,UAAU,EAAEhB;MACb,CAAC;IACF,CAAC;IAAA9Z,MAAA,CAEDW,sBAAsB,GAAtB,SAAAA,sBAAsBA,CAAA,EAAa;MAClC,MAAMoa,SAAS,GAAG,IAAI,CAAC3nB,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC;QAC7CwkB,eAAe,GAAGD,SAAS,CAACE,oBAAoB;QAChDC,eAAe,GAAGF,eAAe,IAAIpf,MAAM,CAACvD,IAAI,CAAC2iB,eAAe,CAAC;QACjE5W,YAAY,GAAG,CAAC,cAAc,EAAE,kBAAkB,EAAE,eAAe,CAAC;MAErE,IAAI8W,eAAe,IAAIA,eAAe,CAACrmB,MAAM,GAAG,CAAC,EAAE;QAClDqmB,eAAe,CAAC7T,OAAO,CAAC,UAAU8T,IAAI,EAAE;UACvC,MAAMC,cAAc,GAAGJ,eAAe,CAACG,IAAI,CAAoC;UAC/E,IAAIC,cAAc,CAACC,cAAc,KAAK,aAAa,EAAE;YACpDjX,YAAY,CAACE,IAAI,CAAC,mBAAmB,CAAC;UACvC;QACD,CAAC,CAAC;MACH;MACA,OAAOF,YAAY;IACpB;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAApE,MAAA,CAMAsF,qBAAqB,GAArB,SAAAA,qBAAqBA,CAACsK,OAAuB,EAAE7Q,aAAwB,EAAEwG,WAA8B,EAAQ;MAC9G,MAAM9O,SAAS,GAAG,IAAI,CAACrD,OAAO,CAAC,CAAC,CAACoD,WAAW,CAAC,CAAC,CAACC,SAAS;MACxD,IAAIA,SAAS,GAAG,CAAC,EAAE;QAClB,MAAM6kB,uBAAuB,GAAGvc,aAAa,CAAC9B,WAAW,CAAC,0BAA0B,CAAC;QACrF,IAAIqe,uBAAuB,EAAE;UAC5B,MAAMC,YAAY,GAAGD,uBAAuB,CAACxW,UAAU,CAAC,CAAC;UACzD,IAAI,CAAC0W,SAAS,CAACC,UAAU,CAACF,YAAY,EAAED,uBAAuB,CAAC;UAChEvc,aAAa,CAACc,WAAW,CAAC,0BAA0B,EAAE,IAAI,CAAC;QAC5D,CAAC,MAAM,IAAI0F,WAAW,EAAE;UACvB,IAAI,CAACiW,SAAS,CAACC,UAAU,CAAClW,WAAW,EAAEqK,OAAO,CAAC;QAChD;MACD;IACD;;IAEA;AACD;AACA;AACA;AACA;AACA,OALC;IAAA5P,MAAA,CAMM0b,kBAAkB,GAAxB,eAAMA,kBAAkBA,CAACC,MAAmB,EAAiB;MAC5D,MAAM/L,OAAO,GAAG+L,MAAM,CAACjhB,iBAAiB,CAAC,CAAC;QACzCoW,YAAY,GAAG,IAAI,CAACpN,eAAe,CAAC,CAAC;QACrCkY,QAAqC,GAAG,EAAE;QAC1CC,OAAO,GAAGjM,OAAO,EAAE7U,OAAO,CAAC,CAAC;QAC5B+gB,SAAS,GAAGD,OAAO,EAAEE,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE;QACrCC,SAAS,GAAGlL,YAAY,IAAIA,YAAY,CAACjW,YAAY,CAAC,CAAC;MACxD,IAAIohB,IAAI,GAAG,EAAE;MACb,IAAI;QACHH,SAAS,CAACI,KAAK,CAAC,CAAC;QACjBJ,SAAS,CAACK,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACvBL,SAAS,CAACzU,OAAO,CAAC,UAAU+U,QAAgB,EAAE;UAC7CH,IAAI,IAAI,IAAIG,QAAQ,EAAE;UACtB,IAAI,CAACtL,YAAY,CAACuL,SAAS,CAAC,CAAC,CAACC,kBAAkB,CAACL,IAAI,CAAC,EAAE;YACvD;UACD;UACA,MAAMlL,kBAAkB,GAAGD,YAAY,CAACE,qBAAqB,CAAC,CAAC;UAC/D,MAAMuL,aAAa,GAAGP,SAAS,CAAClhB,WAAW,CAACmhB,IAAI,CAAC;UACjD,MAAMO,aAAa,GAAGR,SAAS,CAACtjB,SAAS,CAAC,GAAG6jB,aAAa,gDAAgD,CAAC;UAC3G,IAAIC,aAAa,EAAE;YAClB;YACA;UACD;UACAZ,QAAQ,CAACtX,IAAI,CAACyM,kBAAkB,CAAC0L,oBAAoB,CAACR,IAAI,CAAC,CAAC;QAC7D,CAAC,CAAC;QACF,MAAMS,mBAAuC,GAAG,MAAMhR,OAAO,CAAC8J,GAAG,CAACoG,QAAQ,CAAC;QAC3E,IAAIe,iBAAiB,EAAEC,IAAI;QAC3B,KAAK,MAAMC,kBAAkB,IAAIH,mBAAmB,EAAE;UACrDC,iBAAiB,GAAGD,mBAAmB,CAACI,OAAO,CAACD,kBAAkB,CAAC;UACnED,IAAI,GAAGjB,MAAM,CAACoB,QAAQ,CAAC,CAAC,CAACJ,iBAAiB,CAAC,GAAGhB,MAAM,CAACoB,QAAQ,CAAC,CAAC,CAACJ,iBAAiB,CAAC,GAAG,IAAIK,IAAI,CAAC,CAAC;UAC/F;UACAJ,IAAI,CAACK,OAAO,CAACJ,kBAAkB,CAACzL,QAAQ,IAAIyL,kBAAkB,CAAC1L,KAAK,CAAC;UACrE;UACAyL,IAAI,CAACM,OAAO,CAACC,SAAS,CAACN,kBAAkB,CAACxL,MAAO,CAAC,CAAC;UACnD,IAAI,CAACsK,MAAM,CAACoB,QAAQ,CAAC,CAAC,CAACJ,iBAAiB,CAAC,EAAE;YAC1ChB,MAAM,CAACyB,OAAO,CAACR,IAAI,CAAC;UACrB;QACD;MACD,CAAC,CAAC,OAAOrjB,KAAc,EAAE;QACxBD,GAAG,CAACC,KAAK,CAAC,2CAA2C,GAAGA,KAAK,CAAC;MAC/D;IACD,CAAC;IAAAyG,MAAA,CAED8P,yCAAyC,GAAzC,SAAAA,yCAAyCA,CAAA,EAAS;MACjD,MAAM5Z,KAAK,GAAG,IAAI,CAAC9C,OAAO,CAAC,CAAC;MAC5B,MAAM2J,qBAAqB,GAAG7G,KAAK,CAACwE,iBAAiB,CAAC,UAAU,CAAyB;MACzF,MAAM2iB,WAAW,GAAGrmB,WAAW,CAACsmB,6CAA6C,CAC5EpnB,KAAK,CAACM,WAAW,CAAC,CAAC,EACnB,IAAI,CAACkN,eAAe,CAAC,CAAC,CAAC6Z,iBAAiB,CAAC,CAAC,CAACC,YAAY,CAAC,CACzD,CAAC;MACD,MAAMC,cAAc,GAAG,IAAI,CAAC/Z,eAAe,CAAC,CAAC,CAACiG,gBAAgB,CAAC,CAAC;MAChE,MAAMiQ,YAAY,GAAG1jB,KAAK,IAAIA,KAAK,CAACwE,iBAAiB,CAAC,CAAC;MACvDqC,qBAAqB,CAAC8C,WAAW,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC;MAC9D,IAAI+Z,YAAY,EAAE;QACjBA,YAAY,CACV8D,aAAa,CAAC,CAAC,CACf7jB,IAAI,CAAC,UAAUzB,KAAa,EAAE;UAC9B,OAAOulB,UAAU,CAACN,WAAW,EAAEjlB,KAAK,CAAC;QACtC,CAAC,CAAC,CACD4B,KAAK,CAAC,UAAUsS,MAAe,EAAE;UACjChT,GAAG,CAACC,KAAK,CAAC,kDAAkD,EAAE+S,MAAgB,CAAC;QAChF,CAAC,CAAC;MACJ;;MAEA;AACF;AACA;MACE,SAASsR,SAASA,CAACtR,MAAc,EAAQ;QACxChT,GAAG,CAACC,KAAK,CAAC+S,MAAM,CAAC;MAClB;MAEA,SAASuR,mBAAmBA,CAACC,EAAU,EAAEC,eAA0C,EAAQ;QAC1F,MAAMC,OAAO,GAAGF,EAAE;QAClB;QACA,IAAIC,eAAe,IAAIA,eAAe,CAAClpB,MAAM,KAAK,CAAC,IAAIkpB,eAAe,CAAC,CAAC,CAAC,CAACE,SAAS,EAAE;UACpFlhB,qBAAqB,CAAC8C,WAAW,CAAC,yBAAyBme,OAAO,EAAE,EAAE,IAAI,CAAC;QAC5E;MACD;;MAEA;AACF;AACA;AACA;MACE,SAASL,UAAUA,CAClBO,cAOC,EACDC,SAAiB,EACV;QACP,KAAK,MAAMje,GAAG,IAAIge,cAAc,EAAE;UACjC,MAAME,UAAU,GAAGF,cAAc,CAAChe,GAAG,CAAC;UACtC,MAAMzE,OAAgC,GAAG,CAAC,CAAC;UAC3C,MAAM4iB,KAAK,GAAGnoB,KAAK,CAAC0H,IAAI,CAACsC,GAAG,CAAC;UAC7B,IAAI,CAACme,KAAK,EAAE;YACX;YACA;UACD;UACA,MAAMC,YAAY,GAAGD,KAAK,CAAC3jB,iBAAiB,CAAC,CAAC;UAC9C,MAAM6jB,SAAiB,GAAGD,YAAY,IAAIA,YAAY,CAAC5lB,SAAS,CAAC,CAAC;UAClE,IAAI8lB,aAAsC,GAAGC,KAAK,CAAC,CAAC,CAAC,EAAEN,SAAS,EAAEI,SAAS,CAA4B;UACvG;UACA,IAAIH,UAAU,CAAC9hB,qBAAqB,EAAE;YACrC,MAAMtB,sBAAsB,GAAGojB,UAAU,CAAC9hB,qBAAqB;YAC/D,KAAK,MAAM0I,IAAI,IAAIhK,sBAAsB,EAAE;cAC1C,MAAM0jB,QAAQ,GAAG1jB,sBAAsB,CAACgK,IAAI,CAAC;cAC7C,MAAM2Z,aAAa,GAAGD,QAAQ,CAAC,eAAe,CAAC,CAAE,eAAe,CAAC;cACjE,MAAME,eAAe,GAAGF,QAAQ,CAAC,wBAAwB,CAAE;cAC3D,IAAIC,aAAa,KAAKC,eAAe,EAAE;gBACtC,IAAIJ,aAAa,CAACK,cAAc,CAACF,aAAa,CAAC,EAAE;kBAChD,MAAMG,WAAoC,GAAG,CAAC,CAAC;kBAC/CA,WAAW,CAACF,eAAe,CAAC,GAAGJ,aAAa,CAACG,aAAa,CAAC;kBAC3DH,aAAa,GAAGC,KAAK,CAAC,CAAC,CAAC,EAAED,aAAa,EAAEM,WAAW,CAA4B;kBAChF,OAAON,aAAa,CAACG,aAAa,CAAC;gBACpC;cACD;YACD;UACD;UAEA,IAAIH,aAAa,EAAE;YAClB,KAAK,MAAMrD,IAAI,IAAIqD,aAAa,EAAE;cACjC,IAAI,CAACrD,IAAI,CAACzE,UAAU,CAAC,GAAG,CAAC,IAAI,CAACyE,IAAI,CAAC/H,QAAQ,CAAC,eAAe,CAAC,EAAE;gBAC7D3X,OAAO,CAAC0f,IAAI,CAAC,GAAGqD,aAAa,CAACrD,IAAI,CAAC;cACpC;YACD;UACD;UACA;UACAsC,cAAc,CACZsB,qBAAqB,CAAC,CACtB;YACCjQ,MAAM,EAAE;cACP5S,cAAc,EAAEkiB,UAAU,CAACliB,cAAc;cACzCC,MAAM,EAAEiiB,UAAU,CAACjiB;YACpB,CAAC;YACD6iB,MAAM,EAAEvjB;UACT,CAAC,CACD,CAAC,CACD5B,IAAI,CAAEolB,MAAM,IAAK;YACjB,OAAOpB,mBAAmB,CAAC3d,GAAG,EAAE+e,MAAM,CAAC;UACxC,CAAC,CAAC,CACDjlB,KAAK,CAAC4jB,SAAS,CAAC;QACnB;MACD;IACD,CAAC;IAAA,OAAArsB,oBAAA;EAAA,EAvgDiC8R,cAAc,GAAAlO,WAAA,GAAA+pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,kBAAAvO,KAAA;IAAAytB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAlqB,YAAA,GAAA8pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,YAAApO,KAAA;IAAAstB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAjqB,YAAA,GAAA6pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,eAAAhO,KAAA;IAAAktB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAhqB,YAAA,GAAA4pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,gBAAA7N,KAAA;IAAA+sB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA/pB,YAAA,GAAA2pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,qBAAA1N,KAAA;IAAA4sB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA9pB,YAAA,GAAA0pB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,4BAAAvN,KAAA;IAAAysB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA7pB,YAAA,GAAAypB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,2BAAApN,KAAA;IAAAssB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA5pB,YAAA,GAAAwpB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,6BAAAjN,KAAA;IAAAmsB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA3pB,YAAA,GAAAupB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,gBAAAzM,MAAA;IAAA2rB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAA1pB,aAAA,GAAAspB,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,gBAAAtM,MAAA;IAAAwrB,YAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,WAAA;EAAA,IAAAJ,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,sBAAAnM,MAAA,EAAAE,MAAA,GAAA4H,MAAA,CAAA2jB,wBAAA,CAAA/qB,OAAA,CAAAyL,SAAA,sBAAAzL,OAAA,CAAAyL,SAAA,GAAAif,yBAAA,CAAA1qB,OAAA,CAAAyL,SAAA,kBAAA/L,MAAA,EAAAC,MAAA,GAAAyH,MAAA,CAAA2jB,wBAAA,CAAA/qB,OAAA,CAAAyL,SAAA,kBAAAzL,OAAA,CAAAyL,SAAA,GAAAzL,OAAA,MAAAD,MAAA;EAAA,OA+xDlChD,oBAAoB;AAAA","ignoreList":[],"file":"ObjectPageController-dbg.controller.js"}