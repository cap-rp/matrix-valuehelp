{"version":3,"names":["RetrieveCardTypes","INTEGRATION","_exports","CollaborationManagerOverride","collectAvailableCards","cards","view","base","getView","controller","getController","appComponent","getOwnerComponent","getAppComponent","isEditable","CommonUtils","getIsEditable","card","getCollaborationManagerService","getDesignTimeCard","undefined","onAddCardToCollaborationManagerCallback","publishCard","e","showGenericErrorMessage","Log","error","push","title","_getPageTitleInformation","subtitle","callback"],"sourceRoot":".","sources":["CollaborationManager.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { type RetrieveCardType } from \"sap/cards/ap/common/services/RetrieveCard\";\nimport type CollaborationManager from \"sap/fe/core/controllerextensions/cards/CollaborationManager\";\nimport { type WrappedCard } from \"sap/fe/core/services/CollaborationManagerServiceFactory\";\nimport { type CardManifest } from \"sap/insights/CardHelper\";\nimport { showGenericErrorMessage } from \"sap/fe/macros/insights/CommonInsightsHelper\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nexport const RetrieveCardTypes: Record<string, RetrieveCardType> = {\n    INTEGRATION: \"integration\"\n}\n\nconst CollaborationManagerOverride = {\n    async collectAvailableCards(this: CollaborationManager, cards: WrappedCard[]): Promise<void> {\n        const view = this.base.getView();\n        const controller = view.getController();\n        const appComponent = controller.getOwnerComponent().getAppComponent();\n        const isEditable = CommonUtils.getIsEditable(view);\n        const card = !isEditable ?await appComponent.getCollaborationManagerService().getDesignTimeCard(RetrieveCardTypes.INTEGRATION) : undefined;\n        if (card) {\n            const onAddCardToCollaborationManagerCallback = (): void => {\n                try {\n                    if (card) {\n                        appComponent.getCollaborationManagerService().publishCard(card as CardManifest);\n                        return;\n                    }\n                } catch (e) {\n                    showGenericErrorMessage(view);\n                    Log.error(e as string);\n                }\n            }\n            cards.push({\n                card: card,\n                title: controller._getPageTitleInformation().subtitle || \"\",\n                callback: onAddCardToCollaborationManagerCallback\n            });\n        }\n    }\n};\nexport default CollaborationManagerOverride;\n"],"mappings":";;;;;;;;;EAOO,MAAMA,iBAAmD,GAAG;IAC/DC,WAAW,EAAE;EACjB,CAAC;EAAAC,QAAA,CAAAF,iBAAA,GAAAA,iBAAA;EAED,MAAMG,4BAA4B,GAAG;IACjC,MAAMC,qBAAqBA,CAA6BC,KAAoB,EAAiB;MACzF,MAAMC,IAAI,GAAG,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC;MAChC,MAAMC,UAAU,GAAGH,IAAI,CAACI,aAAa,CAAC,CAAC;MACvC,MAAMC,YAAY,GAAGF,UAAU,CAACG,iBAAiB,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC;MACrE,MAAMC,UAAU,GAAGC,WAAW,CAACC,aAAa,CAACV,IAAI,CAAC;MAClD,MAAMW,IAAI,GAAG,CAACH,UAAU,GAAE,MAAMH,YAAY,CAACO,8BAA8B,CAAC,CAAC,CAACC,iBAAiB,CAACnB,iBAAiB,CAACC,WAAW,CAAC,GAAGmB,SAAS;MAC1I,IAAIH,IAAI,EAAE;QACN,MAAMI,uCAAuC,GAAGA,CAAA,KAAY;UACxD,IAAI;YACA,IAAIJ,IAAI,EAAE;cACNN,YAAY,CAACO,8BAA8B,CAAC,CAAC,CAACI,WAAW,CAACL,IAAoB,CAAC;cAC/E;YACJ;UACJ,CAAC,CAAC,OAAOM,CAAC,EAAE;YACRC,uBAAuB,CAAClB,IAAI,CAAC;YAC7BmB,GAAG,CAACC,KAAK,CAACH,CAAW,CAAC;UAC1B;QACJ,CAAC;QACDlB,KAAK,CAACsB,IAAI,CAAC;UACPV,IAAI,EAAEA,IAAI;UACVW,KAAK,EAAEnB,UAAU,CAACoB,wBAAwB,CAAC,CAAC,CAACC,QAAQ,IAAI,EAAE;UAC3DC,QAAQ,EAAEV;QACd,CAAC,CAAC;MACN;IACJ;EACJ,CAAC;EAAC,OACalB,4BAA4B;AAAA","ignoreList":[],"file":"CollaborationManager-dbg.js"}