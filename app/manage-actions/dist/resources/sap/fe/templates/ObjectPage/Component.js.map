{"version":3,"file":"Component.js","names":["VariantManagement","CoreLibrary","CreationMode","SectionLayout","templateLib","ObjectPage","ObjectPageComponent","_dec","defineUI5Class","library","manifest","_dec2","property","type","defaultValue","None","_dec3","Page","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_class","_class2","_TemplateComponent","_this","_len","arguments","length","args","Array","_key","call","this","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","DeferredContextCreated","_inheritsLoose","_proto","prototype","isContextExpected","extendPageDefinition","pageDefinition","converterContext","extendObjectPageDefinition","createDeferredContext","sPath","oListBinding","parentContext","data","bActionCreate","oParameters","$$groupId","$$updateGroupId","getModel","bindList","replace","undefined","oStartUpParams","oAppComponent","getComponentData","startupParameters","oInboundParameters","getViewData","inboundParameters","createParams","preferredMode","includes","Object","assign","CommonUtils","getAdditionalParamsForCreate","getRootControl","getController","editFlow","createDocument","creationMode","Sync","createAction","bFromDeferred","selectedContexts","finally","catch","setVariantManagement","sVariantManagement","Log","error","setProperty","isOpenInEditMode","openInEditMode","TemplateComponent","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer"],"sources":["./Component.ts"],"sourcesContent":["import Log from \"sap/base/Log\";\nimport { defineUI5Class, property } from \"sap/fe/base/ClassSupport\";\nimport type { InboundParameter } from \"sap/fe/core/CommonUtils\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport TemplateComponent from \"sap/fe/core/TemplateComponent\";\nimport type ConverterContext from \"sap/fe/core/converters/ConverterContext\";\nimport type { ObjectPageDefinition } from \"sap/fe/core/converters/templates/ObjectPageConverter\";\nimport CoreLibrary from \"sap/fe/core/library\";\nimport type { FinalPageDefinition } from \"sap/fe/templates/ObjectPage/ExtendPageDefinition\";\nimport { extendObjectPageDefinition } from \"sap/fe/templates/ObjectPage/ExtendPageDefinition\";\nimport templateLib from \"sap/fe/templates/library\";\nimport type Context from \"sap/ui/model/odata/v4/Context\";\nimport type ODataListBinding from \"sap/ui/model/odata/v4/ODataListBinding\";\n\nconst VariantManagement = CoreLibrary.VariantManagement,\n\tCreationMode = CoreLibrary.CreationMode;\nconst SectionLayout = templateLib.ObjectPage.SectionLayout;\n@defineUI5Class(\"sap.fe.templates.ObjectPage.Component\", { library: \"sap.fe.templates\", manifest: \"json\" })\nclass ObjectPageComponent extends TemplateComponent {\n\t/**\n\t * Defines if and on which level variants can be configured:\n\t * \t\tNone: no variant configuration at all\n\t * \t\tPage: one variant configuration for the whole page\n\t * \t\tControl: variant configuration on control level\n\t */\n\t@property({\n\t\ttype: \"sap.fe.core.VariantManagement\",\n\t\tdefaultValue: VariantManagement.None\n\t})\n\tvariantManagement: typeof VariantManagement;\n\n\t/**\n\t * Defines how the sections are rendered\n\t * \t\tPage: all sections are shown on one page\n\t * \t\tTabs: each top-level section is shown in an own tab\n\t */\n\t@property({\n\t\ttype: \"sap.fe.templates.ObjectPage.SectionLayout\",\n\t\tdefaultValue: SectionLayout.Page\n\t})\n\tsectionLayout: typeof SectionLayout;\n\n\t/**\n\t * Enables the related apps features\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tshowRelatedApps!: boolean;\n\n\t/**\n\t * Enables the 'Microsoft Teams > As Card' option in the 'Share' menu\n\t */\n\t@property({\n\t\ttype: \"object\"\n\t})\n\tshare!: Record<string, Record<string, boolean>>;\n\n\t@property({ type: \"object\" })\n\tadditionalSemanticObjects!: object;\n\n\t/**\n\t * Enables the editable object page header\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\teditableHeaderContent!: boolean;\n\n\t/**\n\t * Shows a text instead of an IllustratedMessage in the noData aggregation of Tables or Charts\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tuseTextForNoDataMessages!: boolean;\n\n\t/**\n\t * Enables the BreadCrumbs features\n\t */\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: true\n\t})\n\tshowBreadCrumbs!: boolean;\n\n\t/**\n\t * Defines the properties which can be used for inbound Navigation\n\t */\n\t@property({\n\t\ttype: \"object\"\n\t})\n\tinboundParameters!: object;\n\n\t/**\n\t * Defines if an object page should be opened in edit mode\n\t */\n\t@property({\n\t\ttype: \"boolean\"\n\t})\n\topenInEditMode: boolean | undefined;\n\n\t@property({\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t})\n\tenableLazyLoading!: boolean;\n\n\tprivate DeferredContextCreated = false;\n\n\tisContextExpected(): boolean {\n\t\treturn true;\n\t}\n\n\textendPageDefinition(pageDefinition: ObjectPageDefinition, converterContext: ConverterContext): FinalPageDefinition {\n\t\treturn extendObjectPageDefinition(pageDefinition, converterContext);\n\t}\n\n\t// TODO: this should be ideally be handled by the editflow/routing without the need to have this method in the\n\t// object page - for now keep it here\n\tcreateDeferredContext(\n\t\tsPath: string,\n\t\toListBinding: ODataListBinding | undefined,\n\t\tparentContext: Context | undefined,\n\t\tdata: object | undefined,\n\t\tbActionCreate: boolean\n\t): void {\n\t\tif (!this.DeferredContextCreated) {\n\t\t\tthis.DeferredContextCreated = true;\n\t\t\tconst oParameters = {\n\t\t\t\t$$groupId: \"$auto.Heroes\",\n\t\t\t\t$$updateGroupId: \"$auto\"\n\t\t\t};\n\n\t\t\tif (!oListBinding) {\n\t\t\t\toListBinding = this.getModel().bindList(sPath.replace(\"(...)\", \"\"), undefined, undefined, undefined, oParameters);\n\t\t\t}\n\t\t\tconst oStartUpParams =\n\t\t\t\t\tthis.oAppComponent && this.oAppComponent.getComponentData() && this.oAppComponent.getComponentData().startupParameters,\n\t\t\t\toInboundParameters = this.getViewData().inboundParameters as Record<string, InboundParameter> | undefined;\n\t\t\tlet createParams;\n\t\t\tif (oStartUpParams && oStartUpParams.preferredMode && oStartUpParams.preferredMode[0].includes(\"create\")) {\n\t\t\t\tcreateParams = Object.assign({}, data, CommonUtils.getAdditionalParamsForCreate(oStartUpParams, oInboundParameters));\n\t\t\t} else {\n\t\t\t\tcreateParams = data;\n\t\t\t}\n\n\t\t\t// for now wait until the view and the controller is created\n\t\t\tthis.getRootControl()\n\t\t\t\t.getController()\n\t\t\t\t.editFlow.createDocument(oListBinding, {\n\t\t\t\t\tcreationMode: CreationMode.Sync,\n\t\t\t\t\tcreateAction: bActionCreate,\n\t\t\t\t\tdata: createParams,\n\t\t\t\t\tbFromDeferred: true,\n\t\t\t\t\tselectedContexts: parentContext ? [parentContext] : undefined\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.DeferredContextCreated = false;\n\t\t\t\t})\n\t\t\t\t.catch(function () {\n\t\t\t\t\t// Do Nothing ?\n\t\t\t\t});\n\t\t}\n\t}\n\n\tsetVariantManagement(sVariantManagement: string): void {\n\t\tif (sVariantManagement === VariantManagement.Page) {\n\t\t\tLog.error(\"ObjectPage does not support Page-level variant management yet\");\n\t\t\tsVariantManagement = VariantManagement.None;\n\t\t}\n\n\t\tthis.setProperty(\"variantManagement\", sVariantManagement);\n\t}\n\n\t/**\n\t * Checks if openInEditMode is defined in the manifest settings\n\t * @returns a boolean indicating if edit mode is set for an object page\n\t */\n\n\tisOpenInEditMode(): boolean {\n\t\tconst openInEditMode = this.getViewData().openInEditMode;\n\t\treturn openInEditMode === true;\n\t}\n}\n\nexport default ObjectPageComponent;\n"],"mappings":"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","ignoreList":[]}