{"version":3,"file":"ListReport.designtime.js","names":["getAdaptationProperties","designtimeSettings","control","propertyValues","forEach","setting","id","getAdaptationPropertyValue","_exports","returnValue","viewData","getParent","getViewData","stickyMultiTabHeader","variantManagement","initialLoad","hideFilterBar","useHiddenFilterBar","views","showCounts","getGlobalSettingsValue","designTime","actions","annotation","textArrangement","getTextArrangementChangeAction","rename","getRenameAction","settings","fe","name","getText","icon","handler","async","getDesigntimeSettings","globalSettings","getGlobalSettings","globalSettingsValues","getGlobalSettingsValues","propertyAndGlobalValues","unchangedData","configContext","getBindingContext","isConfigModelPrepared","items","itemsGlobal","getSettings","getSettingsGlobal","concat","getSettingsIfKeyUser","CommonUtils","getAppComponent","prepareConfigModel","resourceModel","getModel","openAdaptionDialog","then","propertyValuesEntered","extractChanges","noChanges","properties","backgroundDesign","ignore","blocked","busy","busyIndicatorDelay","busyIndicatorSize","headerExpanded","headerPinned","preserveHeaderStateOnScroll","showFooter","toggleHeaderOnTitleClick","visible","fitContent","aggregations","manifestSettings","getPropertyNamesAndDescriptions","manifestSettingsValues","returnValues","manifestPropertyPath","manifestPropertyChange","propertyChanges","propertyPath","separateChanges"],"sources":["./ListReport.designtime.ts"],"sourcesContent":["import type DynamicPage from \"sap/f/DynamicPage\";\nimport CommonUtils from \"sap/fe/core/CommonUtils\";\nimport type ResourceModel from \"sap/fe/core/ResourceModel\";\nimport { getRenameAction, getText, getTextArrangementChangeAction } from \"sap/fe/core/designtime/AnnotationBasedChanges\";\nimport type { DesigntimeSetting, PropertyValue, SettingsData, adaptionChange } from \"sap/fe/macros/designtime/Designtime.helper\";\nimport {\n\textractChanges,\n\tgetPropertyNamesAndDescriptions,\n\tgetSettingsIfKeyUser,\n\tisConfigModelPrepared,\n\tnoChanges,\n\topenAdaptionDialog,\n\tprepareConfigModel,\n\tseparateChanges\n} from \"sap/fe/macros/designtime/Designtime.helper\";\nimport {\n\tgetDesigntimeSettings,\n\tgetGlobalSettings,\n\tgetGlobalSettingsValue,\n\tgetGlobalSettingsValues,\n\tgetSettings,\n\tgetSettingsGlobal\n} from \"sap/fe/templates/ListReport/designtime/ListReport.designtime.helper\";\nimport type View from \"sap/ui/core/mvc/View\";\nimport type Context from \"sap/ui/model/Context\";\n\ntype propertyValueInConfig = {\n\tstickyMultiTabHeader: false;\n\tvariantManagement: string;\n\tinitialLoad: string;\n\thideFilterBar: false;\n\tuseHiddenFilterBar: false;\n\tviews: {\n\t\tshowCounts: false;\n\t};\n};\n\nexport function getAdaptationProperties(designtimeSettings: DesigntimeSetting[], control: DynamicPage): PropertyValue {\n\tconst propertyValues: PropertyValue = {};\n\tdesigntimeSettings.forEach(function (setting) {\n\t\tpropertyValues[setting.id] = getAdaptationPropertyValue(setting, control);\n\t});\n\treturn propertyValues;\n}\n/**\n * Returns the value of one of the settings that have been defined for list report adaptation.\n * @param setting The definition of the setting required for adaptation\n * @param control Reference to list report\n * @returns Setting definition with a value for list report\n */\nexport function getAdaptationPropertyValue(setting: DesigntimeSetting, control: DynamicPage): boolean | string | number {\n\tlet returnValue: boolean | string | number = \"\";\n\n\tconst viewData = (control.getParent() as View)!.getViewData() as propertyValueInConfig;\n\n\tswitch (setting.id) {\n\t\tcase \"stickyMultiTabHeader\":\n\t\t\treturnValue = viewData.stickyMultiTabHeader;\n\t\t\tbreak;\n\t\tcase \"variantManagement\":\n\t\t\treturnValue = viewData.variantManagement;\n\t\t\tbreak;\n\t\tcase \"initialLoad\":\n\t\t\treturnValue = viewData.initialLoad;\n\t\t\tbreak;\n\t\tcase \"hideFilterBar\":\n\t\t\treturnValue = viewData.hideFilterBar;\n\t\t\tbreak;\n\t\tcase \"useHiddenFilterBar\":\n\t\t\treturnValue = viewData.useHiddenFilterBar;\n\t\t\tbreak;\n\t\tcase \"showCounts\":\n\t\t\treturnValue = viewData.views?.showCounts;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturnValue = getGlobalSettingsValue(setting, control);\n\t}\n\n\treturn returnValue;\n}\n\nconst designTime = {\n\tactions: {\n\t\tannotation: {\n\t\t\ttextArrangement: getTextArrangementChangeAction(),\n\t\t\trename: getRenameAction()\n\t\t},\n\t\tsettings: {\n\t\t\tfe: {\n\t\t\t\tname: getText(\"RTA_CONTEXT_ACTIONMENU_CONFIG\"),\n\t\t\t\ticon: \"sap-icon://developer-settings\",\n\t\t\t\thandler: async function (control: DynamicPage): Promise<unknown> {\n\t\t\t\t\tconst designtimeSettings = getDesigntimeSettings();\n\t\t\t\t\tconst globalSettings = getGlobalSettings();\n\t\t\t\t\tconst propertyValues = getAdaptationProperties(designtimeSettings, control);\n\t\t\t\t\tconst globalSettingsValues = getGlobalSettingsValues(globalSettings, control);\n\t\t\t\t\tconst propertyAndGlobalValues = { ...propertyValues, ...globalSettingsValues };\n\t\t\t\t\tconst unchangedData = { ...globalSettingsValues, ...propertyValues };\n\t\t\t\t\tconst configContext = control.getBindingContext(\"internal\") as Context;\n\t\t\t\t\tif (!isConfigModelPrepared(configContext)) {\n\t\t\t\t\t\t// first time this session\n\t\t\t\t\t\tlet items: SettingsData[] = [];\n\t\t\t\t\t\tlet itemsGlobal: SettingsData[] = [];\n\t\t\t\t\t\titems = getSettings(propertyValues);\n\t\t\t\t\t\titemsGlobal = getSettingsGlobal(globalSettingsValues);\n\t\t\t\t\t\titems = items.concat(itemsGlobal);\n\t\t\t\t\t\t// sap-fe-rta-mode=true and then Adapt UI\n\t\t\t\t\t\titems = getSettingsIfKeyUser(CommonUtils.getAppComponent(control), items);\n\t\t\t\t\t\t// use internal model to persist adaptation configuration values\n\t\t\t\t\t\tprepareConfigModel(items, configContext);\n\t\t\t\t\t}\n\t\t\t\t\tconst resourceModel = control.getModel(\"sap.fe.i18n\") as ResourceModel;\n\t\t\t\t\treturn openAdaptionDialog(\n\t\t\t\t\t\tconfigContext,\n\t\t\t\t\t\tpropertyAndGlobalValues,\n\t\t\t\t\t\t\"{sap.fe.i18n>RTA_CONFIGURATION_TITLE_LR}\",\n\t\t\t\t\t\tresourceModel\n\t\t\t\t\t).then(function (propertyValuesEntered: PropertyValue): adaptionChange[] | [] {\n\t\t\t\t\t\treturn extractChanges(designtimeSettings, unchangedData, propertyValuesEntered, \"\", control, globalSettings);\n\t\t\t\t\t}, noChanges);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t// We disable dynamic page properties in the property panel of Fiori Tools\n\tproperties: {\n\t\tbackgroundDesign: { ignore: true },\n\t\tblocked: { ignore: true },\n\t\tbusy: { ignore: true },\n\t\tbusyIndicatorDelay: { ignore: true },\n\t\tbusyIndicatorSize: { ignore: true },\n\t\theaderExpanded: { ignore: true },\n\t\theaderPinned: { ignore: true },\n\t\tpreserveHeaderStateOnScroll: { ignore: true },\n\t\tshowFooter: { ignore: true },\n\t\ttoggleHeaderOnTitleClick: { ignore: true },\n\t\tvisible: { ignore: true },\n\t\tfitContent: { ignore: true }\n\t},\n\n\taggregations: {},\n\n\t// These functions provide the properties used in table adaption to Fiori tools.\n\tmanifestSettings: function (control: DynamicPage): DesigntimeSetting[] {\n\t\tconst globalSettings = getPropertyNamesAndDescriptions(getGlobalSettings(), control.getModel(\"sap.fe.i18n\") as ResourceModel);\n\t\tconst settings = getPropertyNamesAndDescriptions(getDesigntimeSettings(), control.getModel(\"sap.fe.i18n\") as ResourceModel);\n\t\treturn globalSettings.concat(settings);\n\t},\n\t// getAdaptionPropertyValue\n\tmanifestSettingsValues: function (designtimeSettings: DesigntimeSetting[], control: DynamicPage): PropertyValue {\n\t\tconst returnValues: PropertyValue = {};\n\t\tdesigntimeSettings.forEach(function (setting) {\n\t\t\treturnValues[setting.id] = getAdaptationPropertyValue(setting, control);\n\t\t});\n\t\treturn returnValues;\n\t},\n\t// get path for control configuration. Pass reference to the control\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tmanifestPropertyPath: function (control: DynamicPage): string {\n\t\treturn \"\";\n\t},\n\t// create change structue. Pass array of manifest setting and new value, the property path and the control\n\tmanifestPropertyChange: function (propertyChanges: PropertyValue, propertyPath: string, control: DynamicPage): adaptionChange[] {\n\t\treturn separateChanges(propertyChanges, propertyPath, control);\n\t}\n};\n\nexport default designTime;\n"],"mappings":";;;;msBAqCO,SAASA,EAAwBC,EAAyCC,GAChF,MAAMC,EAAgC,CAAC,EACvCF,EAAmBG,QAAQ,SAAUC,GACpCF,EAAeE,EAAQC,IAAMC,EAA2BF,EAASH,EAClE,GACA,OAAOC,CACR,CACAK,EAAAR,0BAMO,SAASO,EAA2BF,EAA4BH,GACtE,IAAIO,EAAyC,GAE7C,MAAMC,EAAYR,EAAQS,YAAsBC,cAEhD,OAAQP,EAAQC,IACf,IAAK,uBACJG,EAAcC,EAASG,qBACvB,MACD,IAAK,oBACJJ,EAAcC,EAASI,kBACvB,MACD,IAAK,cACJL,EAAcC,EAASK,YACvB,MACD,IAAK,gBACJN,EAAcC,EAASM,cACvB,MACD,IAAK,qBACJP,EAAcC,EAASO,mBACvB,MACD,IAAK,aACJR,EAAcC,EAASQ,OAAOC,WAC9B,MACD,QACCV,EAAcW,EAAuBf,EAASH,GAGhD,OAAOO,CACR,CAACD,EAAAD,6BAED,MAAMc,EAAa,CAClBC,QAAS,CACRC,WAAY,CACXC,gBAAiBC,IACjBC,OAAQC,KAETC,SAAU,CACTC,GAAI,CACHC,KAAMC,EAAQ,iCACdC,KAAM,gCACNC,QAASC,eAAgBhC,GACxB,MAAMD,EAAqBkC,IAC3B,MAAMC,EAAiBC,IACvB,MAAMlC,EAAiBH,EAAwBC,EAAoBC,GACnE,MAAMoC,EAAuBC,EAAwBH,EAAgBlC,GACrE,MAAMsC,EAA0B,IAAKrC,KAAmBmC,GACxD,MAAMG,EAAgB,IAAKH,KAAyBnC,GACpD,MAAMuC,EAAgBxC,EAAQyC,kBAAkB,YAChD,IAAKC,EAAsBF,GAAgB,CAE1C,IAAIG,EAAwB,GAC5B,IAAIC,EAA8B,GAClCD,EAAQE,EAAY5C,GACpB2C,EAAcE,EAAkBV,GAChCO,EAAQA,EAAMI,OAAOH,GAErBD,EAAQK,EAAqBC,EAAYC,gBAAgBlD,GAAU2C,GAEnEQ,EAAmBR,EAAOH,EAC3B,CACA,MAAMY,EAAgBpD,EAAQqD,SAAS,eACvC,OAAOC,EACNd,EACAF,EACA,2CACAc,GACCG,KAAK,SAAUC,GAChB,OAAOC,EAAe1D,EAAoBwC,EAAeiB,EAAuB,GAAIxD,EAASkC,EAC9F,EAAGwB,EACJ,KAKHC,WAAY,CACXC,iBAAkB,CAAEC,OAAQ,MAC5BC,QAAS,CAAED,OAAQ,MACnBE,KAAM,CAAEF,OAAQ,MAChBG,mBAAoB,CAAEH,OAAQ,MAC9BI,kBAAmB,CAAEJ,OAAQ,MAC7BK,eAAgB,CAAEL,OAAQ,MAC1BM,aAAc,CAAEN,OAAQ,MACxBO,4BAA6B,CAAEP,OAAQ,MACvCQ,WAAY,CAAER,OAAQ,MACtBS,yBAA0B,CAAET,OAAQ,MACpCU,QAAS,CAAEV,OAAQ,MACnBW,WAAY,CAAEX,OAAQ,OAGvBY,aAAc,CAAC,EAGfC,iBAAkB,SAAU1E,GAC3B,MAAMkC,EAAiByC,EAAgCxC,IAAqBnC,EAAQqD,SAAS,gBAC7F,MAAM3B,EAAWiD,EAAgC1C,IAAyBjC,EAAQqD,SAAS,gBAC3F,OAAOnB,EAAea,OAAOrB,EAC9B,EAEAkD,uBAAwB,SAAU7E,EAAyCC,GAC1E,MAAM6E,EAA8B,CAAC,EACrC9E,EAAmBG,QAAQ,SAAUC,GACpC0E,EAAa1E,EAAQC,IAAMC,EAA2BF,EAASH,EAChE,GACA,OAAO6E,CACR,EAGAC,qBAAsB,SAAU9E,GAC/B,MAAO,EACR,EAEA+E,uBAAwB,SAAUC,EAAgCC,EAAsBjF,GACvF,OAAOkF,EAAgBF,EAAiBC,EAAcjF,EACvD,GACC,OAEamB,CAAU","ignoreList":[]}