/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/BaseDelegate","sap/ui/model/FilterType","sap/ui/mdc/enums/BaseType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/enums/OperatorName","sap/ui/mdc/condition/Condition","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/Device","sap/ui/mdc/enums/FieldDisplay","sap/ui/mdc/enums/RequestShowContainerReason","sap/ui/mdc/util/loadModules"],(e,t,i,n,o,s,r,a,u,l,c,d,p,f,g)=>{"use strict";const h=function(e,t,i,n){const o=n.getConditions();const s=u.apply(e,t,(e,t)=>e&&e.getProperty(t));if(n.isSingleSelect()&&o.length>0){return s[0]}else{return s.find(e=>!this.findConditionsForContext(i,n,e,o).length)}};const C=Object.assign({},e);C.retrieveContent=function(e,t,i){return Promise.resolve()};C.isSearchSupported=function(e,t,i){return false};C.showTypeahead=function(e,t){if(d.system.phone){return true}if(!t||t.isA("sap.ui.mdc.valuehelp.base.FilterableListContent")&&!t.getFilterValue()){return false}else if(t.isA("sap.ui.mdc.valuehelp.base.ListContent")){const e=t.getListBinding();const i=e&&e.getCurrentContexts().length;return i>0}return true};C.updateBindingInfo=function(e,t,i){i.parameters={};i.filters=this.getFilters(e,t)};C.getFilters=function(e,t){const i=t.getActiveFilterBar();const r=i?i.getConditions():t._oInitialFilterConditions||{};if(!t.isPropertyInitial("filterFields")){const e=t.getFilterFields();const a=t.getSearch();if(!i&&a&&e&&e!=="$search"){const t=s.createCondition(o.Contains,[a],undefined,undefined,n.NotValidated);r[e]=[t]}}const a=r&&this.getTypesForConditions(e,t,r);const u=r&&l.createFilters(r,a,undefined,t.getCaseSensitive());return u?[u]:[]};C.updateBinding=function(e,i,n,o){i.filter(n.filters,t.Application);if(i.isSuspended()){i.resume()}};C.adjustSearch=function(e,t,i){return i};C.executeFilter=function(e,t,i){return Promise.resolve(t)};C.checkListBindingPending=function(e,t,i){if(!t||t.isSuspended()){return false}return Promise.resolve(t.getContexts(0,i)).then(e=>e.length===0)};C.onConditionPropagation=function(e,t,i){};C.getInitialFilterConditions=function(e,t,i){const n={};return n};C.findConditionsForContext=function(e,t,i,n){const o=t.getItemFromContext(i);const s=o&&t.createCondition(o.key,o.description,o.payload);return n.filter(t=>this.compareConditions(e,s,t))};C.compareConditions=function(e,t,i){if(t.operator===i.operator){if(t.validated===n.Validated&&t.validated===i.validated){return t.values[0]===i.values[0]}return c.getOperator(t.operator)?.compareConditions(t,i)}return false};C.modifySelectionBehaviour=function(e,t,i){return i};C.createConditionPayload=function(e,t,i,n){return undefined};C.getTypesForConditions=function(e,t,n){const o={};const s=t&&t.getListBindingInfo();if(s&&s.template){const e=this.getTypeMap();s.template.mAggregations.cells.forEach(t=>{Object.values(t.mBindingInfos).forEach(t=>{t.parts.forEach(t=>{o[t.path]={type:t.type||null,baseType:t.type?e.getBaseTypeForType(t.type):i.String}})})},{})}return o};C.getFilterConditions=function(e,t,i){if(this.getInitialFilterConditions){return this.getInitialFilterConditions(e,t,i&&i.control||t&&t.getControl())}return{}};C.getFirstMatch=function(e,t,i){let n;const o=t.getListBinding(i)?.getCurrentContexts();const s=i.value;if(s&&o?.length){const u=i.hasOwnProperty("caseSensitive")?i.caseSensitive:t.getCaseSensitive();const l=t.getKeyPath();const c=i.checkDescription&&t.getDescriptionPath();let d;switch(e.getDisplay()){case p.Description:d=[c];break;case p.DescriptionValue:d=[c,l];break;case p.ValueDescription:d=[l,c];break;default:d=[l];break}d=d.filter(e=>!!e);for(const i of d){const l=[new r({path:i,operator:a.EQ,value1:s,caseSensitive:u}),new r({path:i,operator:a.StartsWith,value1:s,caseSensitive:u})];for(const i of l){n=h.call(this,o,i,e,t);if(n){return n}}}}return n};C.isFilteringCaseSensitive=function(e,t){return t.getCaseSensitive()};C.requestShowContainer=async function(e,t,i){if(i===f.Tap){return!!await(this.shouldOpenOnClick?.(e,t))}if(i===f.Typing){await e.retrieveDelegateContent(t);return!!await t.isTypeaheadSupported()}if(i===f.Filter){const[i]=t?.getContent()||[];return!!await(this.showTypeahead?.(e,i))}if(i===f.Focus){return!!await(this.shouldOpenOnFocus?.(e,t))}if(i===f.Navigate){await e.retrieveDelegateContent(t);return!!await t.shouldOpenOnNavigate()}if(i===f.ValueHelpRequest){return t.isDialog()}return false};C.shouldOpenOnFocus=function(e,t){let i=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){i=t.getOpensOnFocus()}return Promise.resolve(i)};C.shouldOpenOnClick=function(e,t){let i=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){if(d.system.phone&&(!t.isSingleSelect()||!t.isDialog())){i=true}else{let e=true;if(!t.isPropertyInitial("opensOnClick")){e=false;i=t.getOpensOnClick()}if(e){const e=t._getContent();i=!!e&&e.shouldOpenOnClick()}}}return Promise.resolve(i)};C.onControlConnect=function(e,t,i){};return C});
//# sourceMappingURL=ValueHelpDelegate.js.map