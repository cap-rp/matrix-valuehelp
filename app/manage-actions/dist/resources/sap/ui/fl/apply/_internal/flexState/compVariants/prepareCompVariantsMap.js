/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger"],function(e,t,n,a){"use strict";function s(e,t){e[t]||={byId:{},variants:[],nonPersistedVariants:[],changes:[],defaultVariants:[],standardVariantChange:undefined,standardVariant:undefined};return e[t]}function r(e,t,n,r,i){r||=[];const c=s(e,n);c.controlId=i;c.nonPersistedVariants.forEach(function(e){delete c.byId[e.getId()]});c.nonPersistedVariants=r.map(function(e){const s=a.createVariant(n,{id:e.id,persisted:false,...e},t);c.byId[e.id]=s;return s});return c}function i(a,r,i,c){const o=a[r].map(function(a){const s=r==="variants"?e.createCompVariant(a,c):e.createFromFileContent(a,n);s.setState(t.LifecycleState.PERSISTED);return s});o.forEach(function(e){const t=e.getPersistencyKey?e.getPersistencyKey():e.getSelector().persistencyKey;s(i,t).byId[e.getId()]=e;switch(r){case"standardVariants":s(i,t).standardVariantChange=e;break;default:s(i,t)[r].push(e)}})}return function(e){const t={};t._getOrCreate=s.bind(undefined,t);t._initialize=r.bind(undefined,t,e.storageResponse.authors);if(e.storageResponse.changes.comp){["variants","changes","defaultVariants","standardVariants"].forEach(function(n){i(e.storageResponse.changes.comp,n,t,e.storageResponse.authors)})}return t}});
//# sourceMappingURL=prepareCompVariantsMap.js.map