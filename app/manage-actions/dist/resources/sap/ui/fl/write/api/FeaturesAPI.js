/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/initial/api/InitialFlexAPI","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(e,n,t,a,r){"use strict";var s={isPublishAvailable(){return n.getInstance().then(function(e){return e.isPublishAvailable()||!e.isProductiveSystem()&&e.isSystemWithTransports()})},isSaveAsAvailable(e){return Promise.all([n.getInstance(),r.getUShellService("Navigation")]).then(function(n){var t=n[0];var r=n[1];return t.isAppVariantSaveAsEnabled()&&e===a.CUSTOMER&&r!==undefined}).catch(function(){return false})},isContextBasedAdaptationAvailable(e){return n.getInstance().then(function(n){if(n.isContextBasedAdaptationEnabled()&&e===a.CUSTOMER){return true}return false})},isKeyUser(){return e.isKeyUser()},isVersioningEnabled(e){return n.getInstance().then(function(n){return n.isVersioningEnabled(e)})},isKeyUserTranslationEnabled(e){if(e===a.CUSTOMER){return n.getInstance().then(function(e){return e.isKeyUserTranslationEnabled()})}return Promise.resolve(false)},isContextSharingEnabled(e){if(e!==a.CUSTOMER){return Promise.resolve(false)}return n.getInstance().then(function(n){return n.isContextSharingEnabled({layer:e})})},async isSeenFeaturesAvailable(){const e=await n.getInstance();return e.isSeenFeaturesAvailable()},async getSeenFeatureIds(e){if(!await this.isSeenFeaturesAvailable()){return[]}return t.getSeenFeatureIds(e)},async setSeenFeatureIds(e){if(!await this.isSeenFeaturesAvailable()){return Promise.reject("The backend does not support saving seen features.")}return t.setSeenFeatureIds(e)},isVariantAdaptationEnabled(){const e=n.getInstanceOrUndef();return e?.isVariantAdaptationEnabled()},isLocalResetEnabled(){const e=n.getInstanceOrUndef();return e?.isLocalResetEnabled()},areAnnotationChangesEnabled(){const e=n.getInstanceOrUndef();return e?.isAnnotationChangeEnabled()}};return s});
//# sourceMappingURL=FeaturesAPI.js.map