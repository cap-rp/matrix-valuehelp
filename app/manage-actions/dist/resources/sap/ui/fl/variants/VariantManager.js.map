{"version":3,"file":"VariantManager.js","names":["sap","ui","define","_difference","merge","ObjectPath","JsControlTreeModifier","Element","Applier","Reverter","FlexObjectFactory","States","VariantManagementState","FlexObjectState","ControlVariantApplyAPI","ControlVariantWriteUtils","UIChangeManager","FlexObjectManager","ContextBasedAdaptationsAPI","Layer","Utils","VariantManager","getVariantModel","oControl","oAppComponent","getAppComponentForControl","getModel","getVariantModelName","async","eraseDirtyChanges","mPropertyBag","aVariantDirtyChanges","model","_getDirtyChangesFromVariantChanges","changes","reverse","revert","revertMultipleChanges","appComponent","modifier","reference","sFlexReference","deleteFlexObjects","flexObjects","executeAfterSwitch","fnCallback","oModel","_oVariantSwitchPromise","catch","then","setVariantSwitchPromise","handleDirtyChanges","oFlexController","aDirtyChanges","sVariantManagementReference","oVariantModel","_bDesignTimeMode","oResponse","saveSequenceOfDirtyChanges","oVariantFlexObject","response","find","oFlexObject","fileType","oAffectedVariant","oData","variants","oVariant","key","fileName","oSupportInformation","instance","getSupportInformation","user","support","setSupportInformation","invalidateMap","getAdaptationId","sLayer","mContextBasedAdaptationBag","layer","control","bHasAdaptationsModel","hasAdaptationsModel","getDisplayedAdaptationId","handleSelectVariant","oEvent","mParameters","mVariantProperties","sVMReference","vmReference","bVariantSwitch","bOldVariantWasModified","get","sTargetVReference","sSourceVReference","currentVariant","updateCurrentVariant","variantManagementReference","newVariantReference","internallyCalled","aControlChanges","getControlChangesForVariant","vReference","callVariantSwitchListeners","bind","getParameters","handleManageEvent","getData","aConfigurationChangesContent","variantsToBeDeleted","aVariantsToBeDeleted","_collectModelChanges","USER","length","some","oChange","visible","variantReference","getCurrentVariantReference","forEach","oChangeProperties","aNewVariantChanges","addVariantChanges","aVariantDeletionChanges","map","sVariantKey","getVariant","deleteVariant","flat","aChanges","filter","getState","LifecycleState","NEW","aLayers","Object","values","sCurrentLayer","aChangesOnLayer","getLayer","oChangePersistence","saveDirtyChanges","handleSaveEvent","oVariantManagementControl","getLocalId","getId","aNewVariantDirtyChanges","sSourceVariantReference","aSourceVariantChanges","overwrite","PUBLIC","setLayer","sVariantLayer","public","sVariantChangeLayer","sNewVariantReference","createDefaultFileName","title","name","contexts","sourceVariantReference","generator","additionalVariantChanges","adaptationId","executeOnSelection","execute","oBaseChangeProperties","content","def","mPropertyBagSetDefault","changeType","defaultVariant","selector","getSelector","push","createVariantManagementChange","aCopiedVariantDirtyChanges","copyVariant","addAndApplyChangesOnVariant","aAddedChanges","addDirtyChanges","reduce","oPreviousPromise","getElementById","getControlIdBySelector","oReturn","applyChangeOnControl","view","getViewForControl","success","oException","error","Error","Promise","resolve","eraseDirtyChangesOnVariant","sVariantReference","aSourceVariantDirtyChanges","oDuplicateVariantData","_duplicateVariant","rename","change","remove","sharing","PRIVATE","setFavorite","variantId","favorite","createVariantChange","addDirtyFlexObjects","concat","controlChanges","scenario","removeVariant","aChangesToBeDeleted","getDirtyFlexObjects","getVariantReference","variant","component","addVariantChange","aChangePropertyMaps","mProperties","deleteVariantChange","setVariantProperties","mAdditionalChangeContent","mNewChangeData","undefined","setContent","setText","manageVariants","sClass","oContextSharingComponentPromise","attachEventOnce","fnManageClickRta","openManagementDialog"],"sources":["VariantManager-dbg.js"],"mappings":"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","ignoreList":[]}